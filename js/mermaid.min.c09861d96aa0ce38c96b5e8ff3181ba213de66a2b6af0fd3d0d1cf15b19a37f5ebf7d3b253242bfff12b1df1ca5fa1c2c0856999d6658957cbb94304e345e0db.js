(()=>{JA=Object.create,Va=Object.defineProperty,I3=Object.getOwnPropertyDescriptor,$a=Object.getOwnPropertyNames,U3=Object.getPrototypeOf,K3=Object.prototype.hasOwnProperty,Q3=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)},th=(e,t)=>function(){return e&&(t=(0,e[$a(e)[0]])(e=0)),t},ya=(e,t)=>function(){return t||(0,e[$a(e)[0]])((t={exports:{}}).exports,t),t.exports},w3=(e,t)=>{for(var n in t)Va(e,n,{get:t[n],enumerable:!0})},Dh=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $a(t))!K3.call(e,o)&&o!==n&&Va(e,o,{get:()=>t[o],enumerable:!(s=I3(t,o))||s.enumerable});return e},qa=(e,t,n)=>(n=e!=null?JA(U3(e)):{},Dh(t||!e||!e.__esModule?Va(n,"default",{value:e,enumerable:!0}):n,e)),Vh=ya({"node_modules/moment-mini/locale/locale.js"(){}}),Gh=th({'require("./locale/**/*") in node_modules/moment-mini/moment.min.js'(){qh=Q3({"./locale/locale.js":()=>Vh()})}}),tm=ya({"node_modules/moment-mini/moment.min.js"(e,t){Gh(),!function(n,s){"object"==typeof e&&"undefined"!=typeof t?t.exports=s():"function"==typeof define&&define.amd?define(s):n.moment=s()}(e,function(){"use strict";function n(){return tn.apply(null,arguments)}function k(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function Y(e){return e!=null&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dt(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(l(e,t))return;return 1}function j(e){return void 0===e}function I(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function je(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function jt(e,t){for(var s=[],o=e.length,n=0;n<o;++n)s.push(t(e[n],n));return s}function U(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function T(e,t,n,s){return St(e,t,n,s,!0).utc()}function a(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function lt(e){if(null==e._isValid){var t=a(e),n=fn.call(t.parsedDateParts,function(e){return e!=null}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function Fe(e){var t=T(NaN);return e!=null?U(a(t),e):a(t).userInvalidated=!0,t}var fn=Array.prototype.some||function(e){for(var n=Object(this),s=n.length>>>0,t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1},_t=n.momentProperties=[],ot=!1;function st(e,t){var n,s,o,i=_t.length;if(j(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),j(t._i)||(e._i=t._i),j(t._f)||(e._f=t._f),j(t._l)||(e._l=t._l),j(t._strict)||(e._strict=t._strict),j(t._tzm)||(e._tzm=t._tzm),j(t._isUTC)||(e._isUTC=t._isUTC),j(t._offset)||(e._offset=t._offset),j(t._pf)||(e._pf=a(t)),j(t._locale)||(e._locale=t._locale),0<i)for(n=0;n<i;n++)j(o=t[s=_t[n]])||(e[s]=o);return e}function he(e){st(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===ot&&(ot=!0,n.updateOffset(this),ot=!1)}function C(e){return e instanceof he||e!=null&&null!=e._isAMomentObject}function vt(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,t){var s=!0;return U(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),s){for(var o,a,r=[],c=arguments.length,i=0;i<c;i++){if(o="","object"==typeof arguments[i]){for(a in o+=`
[`+i+"] ",arguments[0])l(arguments[0],a)&&(o+=a+": "+arguments[0][a]+", ");o=o.slice(0,-2)}else o=arguments[i];r.push(o)}vt(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+(new Error).stack),s=!1}return t.apply(this,arguments)},t)}Xe={};function Wt(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),Xe[e]||(vt(t),Xe[e]=!0)}function M(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function rt(e,t){var n,s=U({},e);for(n in t)l(t,n)&&(Y(e[n])&&Y(t[n])?(s[n]={},U(s[n],e[n]),U(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)l(e,n)&&!l(t,n)&&Y(e[n])&&(s[n]=U({},s[n]));return s}function ct(e){e!=null&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,Ct=Object.keys||function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};function S(e,t,n){var s=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var ht=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xe=/(\[[^[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,at={},ie={};function o(e,t,n,s){var o="string"==typeof s?function(){return this[s]()}:s;e&&(ie[e]=o),t&&(ie[t[0]]=function(){return S(o.apply(this,arguments),t[1],t[2])}),n&&(ie[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function Te(e,t){return e.isValid()?(t=Dt(t,e.localeData()),at[t]=at[t]||function(e){for(var s,t=e.match(ht),n=0,o=t.length;n<o;n++)ie[t[n]]?t[n]=ie[t[n]]:t[n]=(s=t[n]).match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"");return function(n){for(var i="",s=0;s<o;s++)i+=M(t[s])?t[s].call(n,e):t[s];return i}}(t),at[t](e)):e.localeData().invalidDate()}function Dt(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(xe.lastIndex=0;0<=n&&xe.test(e);)e=e.replace(xe,s),xe.lastIndex=0,--n;return e}le={};function g(e,t){var n=e.toLowerCase();le[n]=le[n+"s"]=le[t]=e}function O(e){return"string"==typeof e?le[e]||le[e.toLowerCase()]:void 0}function qe(e){var t,n,s={};for(t in e)l(e,t)&&(n=O(t))&&(s[n]=e[t]);return s}Ue={};function v(e,t){Ue[e]=t}function we(e){return e%4==0&&e%100!=0||e%400==0}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function r(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?w(e):t}function Z(e,t){return function(s){return s!=null?(an(this,e,s),n.updateOffset(this,t),this):Be(this,e)}}function Be(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function an(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&we(e.year())&&1===e.month()&&29===e.date()?(n=r(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Se(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var c,F,V,tn,Xe,Ct,le,Ue,e=/\d/,i=/\d\d/,Pe=/\d{3}/,X=/\d{4}/,B=/[+-]?\d{6}/,h=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,W=/\d{1,4}/,$=/[+-]?\d{1,6}/,re=/\d+/,Me=/[+-]?\d+/,Mn=/Z|[+-]\d\d:?\d\d/gi,Ce=/Z|[+-]\d\d(?::?\d\d)?/gi,L=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Oe,Ve,pe,te,Rt,Vt,$t,nt,ke;function s(e,t,n){Oe[e]=M(t)?t:function(e){return e&&n?n:t}}function Fn(e,t){return l(Oe,e)?Oe[e](t._strict,t._locale):new RegExp(y(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\][]*)\]|\\(.)/g,function(e,t,n,s,o){return t||n||s||o})))}function y(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}Oe={},Ve={};function d(e,t){var n,s,o=t;for("string"==typeof e&&(e=[e]),I(t)&&(o=function(e,n){n[t]=r(e)}),s=e.length,n=0;n<s;n++)Ve[e[n]]=o}function be(e,t){d(e,function(e,n,s,o){s._w=s._w||{},t(e,s._w,s,o)})}var f,b=0,z=1,A=2,p=3,x=4,N=5,q=6,An=7,En=8;function Se(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%(n=12)+n)%n;return e+=(t-n)/12,1==n?we(e)?29:28:31-n%7%2}f=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},o("M",["MM",2],"Mo",function(){return this.month()+1}),o("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),o("MMMM",0,0,function(e){return this.localeData().months(this,e)}),g("month","M"),v("month",8),s("M",h),s("MM",h,i),s("MMM",function(e,t){return t.monthsShortRegex(e)}),s("MMMM",function(e,t){return t.monthsRegex(e)}),d(["M","MM"],function(e,t){t[z]=r(e)-1}),d(["MMM","MMMM"],function(e,t,n,s){s=n._locale.monthsParse(e,s,n._strict),s!=null?t[z]=s:a(n).invalidMonth=e});var ue="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ot=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/,pn=L,_n=L;function It(e,t){var n;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=r(t);else if(!I(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)}}function Xt(e){return e!=null?(It(this,e),n.updateOffset(this,!0),this):Be(this,"Month")}function on(){function i(e,t){return t.length-e.length}for(var n,s=[],o=[],t=[],e=0;e<12;e++)n=T([2e3,e]),s.push(this.monthsShort(n,"")),o.push(this.months(n,"")),t.push(this.months(n,"")),t.push(this.monthsShort(n,""));for(s.sort(i),o.sort(i),t.sort(i),e=0;e<12;e++)s[e]=y(s[e]),o[e]=y(o[e]);for(e=0;e<24;e++)t[e]=y(t[e]);this._monthsRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function me(e){return we(e)?366:365}o("Y",0,0,function(){var e=this.year();return e<=9999?S(e,4):"+"+e}),o(0,["YY",2],0,function(){return this.year()%100}),o(0,["YYYY",4],0,"year"),o(0,["YYYYY",5],0,"year"),o(0,["YYYYYY",6,!0],0,"year"),g("year","y"),v("year",1),s("Y",Me),s("YY",h,i),s("YYYY",W,X),s("YYYYY",$,B),s("YYYYYY",$,B),d(["YYYYY","YYYYYY"],b),d("YYYY",function(e,t){t[b]=2===e.length?n.parseTwoDigitYear(e):r(e)}),d("YY",function(e,t){t[b]=n.parseTwoDigitYear(e)}),d("Y",function(e,t){t[b]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return r(e)+(68<r(e)?1900:2e3)},pe=Z("FullYear",!0);function ln(e,t,n,s,o,i,a){var r;return e<100&&0<=e?(r=new Date(e+400,t,n,s,o,i,a),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,s,o,i,a),r}function ge(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _e(e,t,n){return n=7+t-n,n-(7+ge(e,0,n).getUTCDay()-t)%7-1}function en(e,t,n,s,o){var i,t=1+7*(t-1)+(7+n-s)%7+_e(e,s,o),n=t<=0?me(i=e-1)+t:t>me(e)?(i=e+1,t-me(e)):(i=e,t);return{year:i,dayOfYear:n}}function ye(e,t,n){var o,i,s=_e(e.year(),t,n),s=Math.floor((e.dayOfYear()-s-1)/7)+1;return s<1?o=s+H(i=e.year()-1,t,n):s>H(e.year(),t,n)?(o=s-H(e.year(),t,n),i=e.year()+1):(i=e.year(),o=s),{week:o,year:i}}function H(e,t,n){var s=_e(e,t,n),t=_e(e+1,t,n);return(me(e)-s+t)/7}o("w",["ww",2],"wo","week"),o("W",["WW",2],"Wo","isoWeek"),g("week","w"),g("isoWeek","W"),v("week",5),v("isoWeek",5),s("w",h),s("ww",h,i),s("W",h),s("WW",h,i),be(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=r(e)});function Ke(e,t){return e.slice(t,7).concat(e.slice(0,t))}o("d",0,"do","day"),o("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),o("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),o("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),o("e",0,0,"weekday"),o("E",0,0,"isoWeekday"),g("day","d"),g("weekday","e"),g("isoWeekday","E"),v("day",11),v("weekday",11),v("isoWeekday",11),s("d",h),s("e",h),s("E",h),s("dd",function(e,t){return t.weekdaysMinRegex(e)}),s("ddd",function(e,t){return t.weekdaysShortRegex(e)}),s("dddd",function(e,t){return t.weekdaysRegex(e)}),be(["dd","ddd","dddd"],function(e,t,n,s){s=n._locale.weekdaysParse(e,s,n._strict),s!=null?t.d=s:a(n).invalidWeekday=e}),be(["d","e","E"],function(e,t,n,s){t[s]=r(e)});var fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),He="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),cn=L,hn=L,mn=L;function Je(){function n(e,t){return t.length-e.length}for(var e,s,o,i=[],a=[],r=[],t=[],c=0;c<7;c++)e=T([2e3,1]).day(c),s=y(this.weekdaysMin(e,"")),o=y(this.weekdaysShort(e,"")),e=y(this.weekdays(e,"")),i.push(s),a.push(o),r.push(e),t.push(s),t.push(o),t.push(e);i.sort(n),a.sort(n),r.sort(n),t.sort(n),this._weekdaysRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function et(){return this.hours()%12||12}function Pt(e,t){o(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Nt(e,t){return t._meridiemParse}o("H",["HH",2],0,"hour"),o("h",["hh",2],0,et),o("k",["kk",2],0,function(){return this.hours()||24}),o("hmm",0,0,function(){return""+et.apply(this)+S(this.minutes(),2)}),o("hmmss",0,0,function(){return""+et.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),o("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),o("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Pt("a",!0),Pt("A",!1),g("hour","h"),v("hour",13),s("a",Nt),s("A",Nt),s("H",h),s("h",h),s("k",h),s("HH",h,i),s("hh",h,i),s("kk",h,i),s("hmm",ne),s("hmmss",se),s("Hmm",ne),s("Hmmss",se),d(["H","HH"],p),d(["k","kk"],function(e,t){e=r(e),t[p]=24===e?0:e}),d(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),d(["h","hh"],function(e,t,n){t[p]=r(e),a(n).bigHour=!0}),d("hmm",function(e,t,n){var s=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s)),a(n).bigHour=!0}),d("hmmss",function(e,t,n){var s=e.length-4,o=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s,2)),t[N]=r(e.substr(o)),a(n).bigHour=!0}),d("Hmm",function(e,t){var s=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s))}),d("Hmmss",function(e,t){var s=e.length-4,o=e.length-2;t[p]=r(e.substr(0,s)),t[x]=r(e.substr(s,2)),t[N]=r(e.substr(o))});var L=Z("Hours",!0),ve,zt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:ue,monthsShort:yt,week:{dow:0,doy:6},weekdays:fe,weekdaysMin:He,weekdaysShort:bt,meridiemParse:/[ap]\.?m?\.?/i},m={},de={};function Tt(e){return e&&e.toLowerCase().replace("_","-")}function gn(e){for(var t,n,o,i,s=0;s<e.length;){for(t=(o=Tt(e[s]).split("-")).length,n=(n=Tt(e[s+1]))?n.split("-"):null;0<t;){if(i=Ae(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&function(e,t){for(var s=Math.min(e.length,t.length),n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}(o,n)>=t-1)break;t--}s++}return ve}function Ae(e){var n;if(void 0===m[e]&&"undefined"!=typeof t&&t&&t.exports&&null!=e.match("^[^/\\\\]*$"))try{n=ve._abbr,qh("./locale/"+e),K(n)}catch{m[e]=null}return m[e]}function K(e,t){return e&&((t=j(t)?D(e):ut(e,t))?ve=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ve._abbr}function ut(e,t){if(null===t)return delete m[e],null;var s,n=zt;if(t.abbr=e,null!=m[e])Wt("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=m[e]._config;else if(null!=t.parentLocale)if(null!=m[t.parentLocale])n=m[t.parentLocale]._config;else{if(null==(s=Ae(t.parentLocale)))return de[t.parentLocale]||(de[t.parentLocale]=[]),de[t.parentLocale].push({name:e,config:t}),null;n=s._config}return m[e]=new ct(rt(n,t)),de[e]&&de[e].forEach(function(e){ut(e.name,e.config)}),K(e),m[e]}function D(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return ve;if(!k(e)){if(t=Ae(e))return t;e=[e]}return gn(e)}function mt(e){var t=e._a;return t&&-2===a(e).overflow&&(t=t[z]<0||11<t[z]?z:t[A]<1||t[A]>Se(t[b],t[z])?A:t[p]<0||24<t[p]||24===t[p]&&(0!==t[x]||0!==t[N]||0!==t[q])?p:t[x]<0||59<t[x]?x:t[N]<0||59<t[N]?N:t[q]<0||999<t[q]?q:-1,a(e)._overflowDayOfYear&&(t<b||A<t)&&(t=A),a(e)._overflowWeeks&&-1===t&&(t=An),a(e)._overflowWeekday&&-1===t&&(t=En),a(e).overflow=t),e}var vn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yn=/Z|[+-]\d\d(?::?\d\d)?/,De=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,un={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wt(e){var t,s,o,r,c,l,i=e._i,n=vn.exec(i)||bn.exec(i),i=De.length,d=gt.length;if(n){for(a(e).iso=!0,t=0,s=i;t<s;t++)if(De[t][1].exec(n[1])){r=De[t][0],c=!1!==De[t][2];break}if(r==null)e._isValid=!1;else{if(n[3]){for(t=0,s=d;t<s;t++)if(gt[t][1].exec(n[3])){o=(n[2]||" ")+gt[t][0];break}if(o==null)return void(e._isValid=!1)}if(c||o==null){if(n[4]){if(!yn.exec(n[4]))return void(e._isValid=!1);l="Z"}e._f=r+(o||"")+(l||""),ft(e)}else e._isValid=!1}}else e._isValid=!1}function rn(e,t,n,s,o,i){return e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),yt.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(o,10)],i&&e.push(parseInt(i,10)),e}function xt(e){var n,s,o,i,t=Cn.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));t?(i=rn(t[4],t[3],t[2],t[5],t[6],t[7]),n=t[1],s=i,o=e,n&&bt.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()?(a(o).weekdayMismatch=!0,o._isValid=!1):(e._a=i,e._tzm=(n=t[8],s=t[9],o=t[10],n?un[n]:s?0:60*(((n=parseInt(o,10))-(s=n%100))/100)+s),e._d=ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),a(e).rfc2822=!0)):e._isValid=!1}function ee(e,t,n){return e??t??n}function pt(e){var t,s,o,i,r,c,l,d,h,m,f,g=[];if(!e._d){for(o=e,t=new Date(n.now()),f=o._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()],e._w&&null==e._a[A]&&null==e._a[z]&&(null!=(t=(o=e)._w).GG||null!=t.W||null!=t.E?(r=1,m=4,l=ee(t.GG,o._a[b],ye(u(),1,4).year),h=ee(t.W,1),((i=ee(t.E,1))<1||7<i)&&(c=!0)):(r=o._locale._week.dow,m=o._locale._week.doy,d=ye(u(),r,m),l=ee(t.gg,o._a[b],d.year),h=ee(t.w,d.week),null!=t.d?((i=t.d)<0||6<i)&&(c=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(c=!0)):i=r),h<1||h>H(l,r,m)?a(o)._overflowWeeks=!0:c!=null?a(o)._overflowWeekday=!0:(d=en(l,h,i,r,m),o._a[b]=d.year,o._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(t=ee(e._a[b],f[b]),(e._dayOfYear>me(t)||0===e._dayOfYear)&&(a(e)._overflowDayOfYear=!0),c=ge(t,0,e._dayOfYear),e._a[z]=c.getUTCMonth(),e._a[A]=c.getUTCDate()),s=0;s<3&&null==e._a[s];++s)e._a[s]=g[s]=f[s];for(;s<7;s++)e._a[s]=g[s]=null==e._a[s]?2===s?1:0:e._a[s];24===e._a[p]&&0===e._a[x]&&0===e._a[N]&&0===e._a[q]&&(e._nextDay=!0,e._a[p]=0),e._d=(e._useUTC?ge:ln).apply(null,g),l=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[p]=24),e._w&&void 0!==e._w.d&&e._w.d!==l&&(a(e).weekdayMismatch=!0)}}function ft(e){if(e._f===n.ISO_8601)wt(e);else if(e._f===n.RFC_2822)xt(e);else{e._a=[],a(e).empty=!0;for(var s,o,i,r,u,t=""+e._i,c=t.length,h=0,m=Dt(e._f,e._locale).match(ht)||[],f=m.length,d=0;d<f;d++)o=m[d],(s=(t.match(Fn(o,e))||[])[0])&&(0<(i=t.substr(0,t.indexOf(s))).length&&a(e).unusedInput.push(i),t=t.slice(t.indexOf(s)+s.length),h+=s.length),ie[o]?(s?a(e).empty=!1:a(e).unusedTokens.push(o),i=o,r=e,null!=(u=s)&&l(Ve,i)&&Ve[i](u,r._a,r,i)):e._strict&&!s&&a(e).unusedTokens.push(o);a(e).charsLeftOver=c-h,0<t.length&&a(e).unusedInput.push(t),e._a[p]<=12&&!0===a(e).bigHour&&0<e._a[p]&&(a(e).bigHour=void 0),a(e).parsedDateParts=e._a.slice(0),a(e).meridiem=e._meridiem,e._a[p]=function(e,t,n){return n==null?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[p],e._meridiem),null!==(c=a(e).era)&&(e._a[b]=e._locale.erasConvertYear(c,e._a[b])),pt(e),mt(e)}}function At(e){var t,i,r,s=e._i,o=e._f;return e._locale=e._locale||D(e._l),null===s||void 0===o&&""===s?Fe({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),C(s)?new he(mt(s)):(je(s)?e._d=s:k(o)?!function(e){var t,n,s,o,i,r,c=!1,l=e._f.length;if(0===l)return a(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<l;o++)n=0,i=!1,t=st({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],ft(t),lt(t)&&(i=!0),n=(n+=a(t).charsLeftOver)+10*a(t).unusedTokens.length,a(t).score=n,c?n<s&&(s=n,r=t):(s==null||n<s||i)&&(s=n,r=t,i&&(c=!0));U(e,r||t)}(e):o?ft(e):j(o=(s=e)._i)?s._d=new Date(n.now()):je(o)?s._d=new Date(o.valueOf()):"string"==typeof o?(t=s,null!==(i=Sn.exec(t._i))?t._d=new Date(+i[1]):(wt(t),!1===t._isValid&&(delete t._isValid,xt(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:n.createFromInputFallback(t))))):k(o)?(s._a=jt(o.slice(0),function(e){return parseInt(e,10)}),pt(s)):Y(o)?(i=s)._d||(r=void 0===(t=qe(i._i)).day?t.date:t.day,i._a=jt([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),pt(i)):I(o)?s._d=new Date(o):n.createFromInputFallback(s),lt(e)||(e._d=null),e))}function St(e,t,n,s,o){var i={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(Y(e)&&dt(e)||k(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=o,i._l=n,i._i=e,i._f=t,i._strict=s,(o=new he(mt(At(o=i))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function u(e,t,n,s){return St(e,t,n,s,!1)}n.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){},ne=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=u.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Fe()}),se=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=u.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:Fe()});function Ft(e,t){var n,s;if(!(t=1===t.length&&k(t[0])?t[0]:t).length)return u();for(s=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](s)||(s=t[n]);return s}te=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ze(e){var e=qe(e),t=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||e.isoWeek||0,i=e.day||0,a=e.hour||0,c=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,o=te.length;for(n in e)if(l(e,n)&&(-1===f.call(te,n)||null!=e[n]&&isNaN(e[n])))return!1;for(t=0;t<o;++t)if(e[te[t]]){if(s)return!1;parseFloat(e[te[t]])!==r(e[te[t]])&&(s=!0)}return!0}(e),this._milliseconds=+u+1e3*d+6e4*c+1e3*a*60*60,this._days=+i+7*o,this._months=+s+3*n+12*t,this._data={},this._locale=D(),this._bubble()}function Le(e){return e instanceof ze}function We(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){o(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+S(~~(e/60),2)+t+S(~~e%60,2)})}Lt("Z",":"),Lt("ZZ",""),s("Z",Ce),s("ZZ",Ce),d(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=tt(Ce,e)}),Rt=/([+-]|\d\d)/gi;function tt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Rt)||["-",0,0])[1]+r(e[2]))?0:"+"===e[0]?t:-t}function Ze(e,t){var s;return t._isUTC?(t=t.clone(),s=(C(e)||je(e)?e:u(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+s),n.updateOffset(t,!1),t):u(e).local()}function Qe(e){return-Math.round(e._d.getTimezoneOffset())}function Bt(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){},Vt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,$t=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function E(e,t){var o,s=e,n=null;return Le(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:I(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(n=Vt.exec(e))?(o="-"===n[1]?-1:1,s={y:0,d:r(n[A])*o,h:r(n[p])*o,m:r(n[x])*o,s:r(n[N])*o,ms:r(We(1e3*n[q]))*o}):(n=$t.exec(e))?(o="-"===n[1]?-1:1,s={y:G(n[2],o),M:G(n[3],o),w:G(n[4],o),d:G(n[5],o),h:G(n[6],o),m:G(n[7],o),s:G(n[8],o)}):s==null?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(t=function(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=Ze(t,e),e.isBefore(t)?n=Kt(e,t):((n=Kt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n)}(u(s.from),u(s.to)),(s={}).ms=t.milliseconds,s.M=t.months),n=new ze(s),Le(e)&&l(e,"_locale")&&(n._locale=e._locale),Le(e)&&l(e,"_isValid")&&(n._isValid=e._isValid),n}function G(e,t){return e=e&&parseFloat(e.replace(",",".")),(isNaN(e)?0:e)*t}function Kt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){return function(n,s){var o;return null===s||isNaN(+s)||(Wt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=s,s=o),Yt(this,E(n,s),e),this}}function Yt(e,t,s,o){var a=t._milliseconds,i=We(t._days),t=We(t._months);e.isValid()&&(o=o==null||o,t&&It(e,Be(e,"Month")+t*s),i&&an(e,"Date",Be(e,"Date")+i*s),a&&e._d.setTime(e._d.valueOf()+a*s),o&&n.updateOffset(e,i||t))}E.fn=ze.prototype,E.invalid=function(){return E(NaN)},ue=qt(1,"add"),fe=qt(-1,"subtract");function Gt(e){return"string"==typeof e||e instanceof String}function jn(e){return C(e)||je(e)||Gt(e)||I(e)||function(e){var t=k(e),n=!1;return t&&(n=0===e.filter(function(t){return!I(t)&&Gt(e)}).length),t&&n}(e)||function(e){var t,s,i=Y(e)&&!dt(e),n=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a=o.length;for(t=0;t<a;t+=1)s=o[t],n=n||l(e,s);return i&&n}(e)||e==null}function Ie(e,t){if(e.date()<t.date())return-Ie(t,e);var s=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(s,"months"),t=t-n<0?(t-n)/(n-e.clone().add(s-1,"months")):(t-n)/(e.clone().add(1+s,"months")-n);return-(s+t)||0}function Zt(e){return void 0===e?this._locale._abbr:(null!=(e=D(e))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",He=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Jt(){return this._locale}nt=126227808e5;function ce(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-nt:new Date(e,t,n).valueOf()}function sn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-nt:Date.UTC(e,t,n)}function Ye(e,t){return t.erasAbbrRegex(e)}function Ge(){for(var s=[],o=[],i=[],n=[],t=this.eras(),e=0,a=t.length;e<a;++e)o.push(y(t[e].name)),s.push(y(t[e].abbr)),i.push(y(t[e].narrow)),n.push(y(t[e].name)),n.push(y(t[e].abbr)),n.push(y(t[e].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Re(e,t){o(0,[e,e.length],0,t)}function Qt(e,t,n,s,o){var i;return e==null?ye(this,s,o).year:(i=H(e,s,o),function(e,t,n,s,o){return e=en(e,t,n,s,o),t=ge(e.year,0,e.dayOfYear),this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=i<t?i:t,n,s,o))}o("N",0,0,"eraAbbr"),o("NN",0,0,"eraAbbr"),o("NNN",0,0,"eraAbbr"),o("NNNN",0,0,"eraName"),o("NNNNN",0,0,"eraNarrow"),o("y",["y",1],"yo","eraYear"),o("y",["yy",2],0,"eraYear"),o("y",["yyy",3],0,"eraYear"),o("y",["yyyy",4],0,"eraYear"),s("N",Ye),s("NN",Ye),s("NNN",Ye),s("NNNN",function(e,t){return t.erasNameRegex(e)}),s("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),d(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){s=n._locale.erasParse(e,s,n._strict),s?a(n).era=s:a(n).invalidEra=e}),s("y",re),s("yy",re),s("yyy",re),s("yyyy",re),s("yo",function(e,t){return t._eraYearOrdinalRegex||re}),d(["y","yy","yyy","yyyy"],b),d(["yo"],function(e,t,n){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[b]=n._locale.eraYearOrdinalParse(e,o):t[b]=parseInt(e,10)}),o(0,["gg",2],0,function(){return this.weekYear()%100}),o(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Re("gggg","weekYear"),Re("ggggg","weekYear"),Re("GGGG","isoWeekYear"),Re("GGGGG","isoWeekYear"),g("weekYear","gg"),g("isoWeekYear","GG"),v("weekYear",1),v("isoWeekYear",1),s("G",Me),s("g",Me),s("GG",h,i),s("gg",h,i),s("GGGG",W,X),s("gggg",W,X),s("GGGGG",$,B),s("ggggg",$,B),be(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=r(e)}),be(["gg","GG"],function(e,t,s,o){t[o]=n.parseTwoDigitYear(e)}),o("Q",0,"Qo","quarter"),g("quarter","Q"),v("quarter",7),s("Q",e),d("Q",function(e,t){t[z]=3*(r(e)-1)}),o("D",["DD",2],"Do","date"),g("date","D"),v("date",9),s("D",h),s("DD",h,i),s("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),d(["D","DD"],A),d("Do",function(e,t){t[A]=r(e.match(h)[0])}),W=Z("Date",!0),o("DDD",["DDDD",3],"DDDo","dayOfYear"),g("dayOfYear","DDD"),v("dayOfYear",4),s("DDD",oe),s("DDDD",Pe),d(["DDD","DDDD"],function(e,t,n){n._dayOfYear=r(e)}),o("m",["mm",2],0,"minute"),g("minute","m"),v("minute",14),s("m",h),s("mm",h,i),d(["m","mm"],x),X=Z("Minutes",!1),$=(o("s",["ss",2],0,"second"),g("second","s"),v("second",15),s("s",h),s("ss",h,i),d(["s","ss"],N),Z("Seconds",!1));for(o("S",0,0,function(){return~~(this.millisecond()/100)}),o(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),o(0,["SSS",3],0,"millisecond"),o(0,["SSSS",4],0,function(){return 10*this.millisecond()}),o(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),o(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),o(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),o(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),o(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),g("millisecond","ms"),v("millisecond",16),s("S",oe,e),s("SS",oe,i),s("SSS",oe,Pe),V="SSSS";V.length<=9;V+="S")s(V,re);function dn(e,t){t[q]=r(1e3*("0."+e))}for(V="S";V.length<=9;V+="S")d(V,dn);B=Z("Milliseconds",!1),o("z",0,0,"zoneAbbr"),o("zz",0,0,"zoneName"),e=he.prototype;function Ut(e){return e}e.add=ue,e.calendar=function(e,t){1===arguments.length&&(arguments[0]?jn(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var o=Y(e)&&!dt(e),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n=0;n<s.length;n+=1)t=t||l(e,s[n]);return o&&t}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var e=e||u(),s=Ze(e,this).startOf("day"),s=n.calendarFormat(this,s)||"sameElse",t=t&&(M(t[s])?t[s].call(this,e):t[s]);return this.format(t||this.localeData().calendar(s,this,u(e)))},e.clone=function(){return new he(this)},e.diff=function(e,t,n){var s,o,i;if(!this.isValid())return NaN;if(!(s=Ze(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=O(t)){case"year":o=Ie(this,s)/12;break;case"month":o=Ie(this,s);break;case"quarter":o=Ie(this,s)/3;break;case"second":o=(this-s)/1e3;break;case"minute":o=(this-s)/6e4;break;case"hour":o=(this-s)/36e5;break;case"day":o=(this-s-i)/864e5;break;case"week":o=(this-s-i)/6048e5;break;default:o=this-s}return n?o:w(o)},e.endOf=function(e){var t,s;if(void 0===(e=O(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?sn:nn,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-ce(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-ce(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-ce(t,1e3)-1;break}return this._d.setTime(t),n.updateOffset(this,!0),this},e.format=function(e){return e=e||(this.isUtc()?n.defaultFormatUtc:n.defaultFormat),e=Te(this,e),this.localeData().postformat(e)},e.from=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||u(e).isValid())?E({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},e.fromNow=function(e){return this.from(u(),e)},e.to=function(e,t){return this.isValid()&&(C(e)&&e.isValid()||u(e).isValid())?E({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},e.toNow=function(e){return this.to(u(),e)},e.get=function(e){return M(this[e=O(e)])?this[e]():this},e.invalidAt=function(){return a(this).overflow},e.isAfter=function(e,t){return e=C(e)?e:u(e),!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},e.isBefore=function(e,t){return e=C(e)?e:u(e),!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},e.isBetween=function(e,t,n,s){return e=C(e)?e:u(e),t=C(t)?t:u(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))},e.isSame=function(e,t){var e=C(e)?e:u(e);return!!this.isValid()&&!!e.isValid()&&("millisecond"===(t=O(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},e.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},e.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},e.isValid=function(){return lt(this)},e.lang=He,e.locale=Zt,e.localeData=Jt,e.max=se,e.min=ne,e.parsingFlags=function(){return U({},a(this))},e.set=function(e,t){if("object"==typeof e)for(var s=function(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:Ue[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=qe(e)),o=s.length,n=0;n<o;n++)this[s[n].unit](e[s[n].unit]);else if(M(this[e=O(e)]))return this[e](t);return this},e.startOf=function(e){var t,s;if(void 0===(e=O(e))||"millisecond"===e||!this.isValid())return this;switch(s=this._isUTC?sn:nn,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ce(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=ce(t,6e4);break;case"second":t=this._d.valueOf(),t-=ce(t,1e3);break}return this._d.setTime(t),n.updateOffset(this,!0),this},e.subtract=fe,e.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},e.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},e.toDate=function(){return new Date(this.valueOf())},e.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?Te(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Te(t,"Z")):Te(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},e.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+(n+'[")]'))},"undefined"!=typeof Symbol&&null!=Symbol.for&&(e[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},e.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},e.eraName=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].name;if(t[e].until<=n&&n<=t[e].since)return t[e].name}return""},e.eraNarrow=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].narrow;if(t[e].until<=n&&n<=t[e].since)return t[e].narrow}return""},e.eraAbbr=function(){for(var n,t=this.localeData().eras(),e=0,s=t.length;e<s;++e){if(n=this.clone().startOf("day").valueOf(),t[e].since<=n&&n<=t[e].until)return t[e].abbr;if(t[e].until<=n&&n<=t[e].since)return t[e].abbr}return""},e.eraYear=function(){for(var s,o,t=this.localeData().eras(),e=0,i=t.length;e<i;++e)if(o=t[e].since<=t[e].until?1:-1,s=this.clone().startOf("day").valueOf(),t[e].since<=s&&s<=t[e].until||t[e].until<=s&&s<=t[e].since)return(this.year()-n(t[e].since).year())*o+t[e].offset;return this.year()},e.year=pe,e.isLeapYear=function(){return we(this.year())},e.weekYear=function(e){return Qt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},e.isoWeekYear=function(e){return Qt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},e.quarter=e.quarters=function(e){return e==null?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},e.month=Xt,e.daysInMonth=function(){return Se(this.year(),this.month())},e.week=e.weeks=function(e){var t=this.localeData().week(this);return e==null?t:this.add(7*(e-t),"d")},e.isoWeek=e.isoWeeks=function(e){var t=ye(this,1,4).week;return e==null?t:this.add(7*(e-t),"d")},e.weeksInYear=function(){var e=this.localeData()._week;return H(this.year(),e.dow,e.doy)},e.weeksInWeekYear=function(){var e=this.localeData()._week;return H(this.weekYear(),e.dow,e.doy)},e.isoWeeksInYear=function(){return H(this.year(),1,4)},e.isoWeeksInISOWeekYear=function(){return H(this.isoWeekYear(),1,4)},e.date=W,e.day=e.days=function(e){if(!this.isValid())return e!=null?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},e.weekday=function(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},e.isoWeekday=function(e){return this.isValid()?e!=null?(t=e,n=this.localeData(),n="string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:e!=null?this:NaN;var t,n},e.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},e.hour=e.hours=L,e.minute=e.minutes=X,e.second=e.seconds=$,e.millisecond=e.milliseconds=B,e.utcOffset=function(e,t,s){var o,i=this._offset||0;if(!this.isValid())return e!=null?this:NaN;if(e==null)return this._isUTC?i:Qe(this);if("string"==typeof e){if(null===(e=tt(Ce,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&t&&(o=Qe(this)),this._offset=e,this._isUTC=!0,o!=null&&this.add(o,"m"),i!==e&&(!t||this._changeInProgress?Yt(this,E(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},e.utc=function(e){return this.utcOffset(0,e)},e.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Qe(this),"m")),this},e.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=tt(Mn,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},e.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?u(e).utcOffset():0,(this.utcOffset()-e)%60==0)},e.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},e.isLocal=function(){return!!this.isValid()&&!this._isUTC},e.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},e.isUtc=Bt,e.isUTC=Bt,e.zoneAbbr=function(){return this._isUTC?"UTC":""},e.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},e.dates=_("dates accessor is deprecated. Use date instead.",W),e.months=_("months accessor is deprecated. Use month instead",Xt),e.years=_("years accessor is deprecated. Use year instead",pe),e.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return e!=null?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),e.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!j(this._isDSTShifted))return this._isDSTShifted;var t,e={};return st(e,this),(e=At(e))._a?(t=(e._isUTC?T:u)(e._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0,s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&r(e[s])!==r(t[s]))&&o++;return o+a}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),i=ct.prototype;function Ne(e,t,n,s){var o=D(),s=T().set(s,t);return o[n](s,e)}function Ht(e,t,n){if(I(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ne(e,t,n,"month");for(var o=[],s=0;s<12;s++)o[s]=Ne(e,s,n,"month");return o}function $e(e,t,n,s){t=("boolean"==typeof e?I(t)&&(n=t,t=void 0):(t=e,e=!1,I(n=t)&&(n=t,t=void 0)),t||"");var o,r=D(),i=e?r._week.dow:0,a=[];if(n!=null)return Ne(t,(n+i)%7,s,"day");for(o=0;o<7;o++)a[o]=Ne(t,(o+i)%7,s,"day");return a}i.calendar=function(e,t,n){return M(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},i.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(ht).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},i.invalidDate=function(){return this._invalidDate},i.ordinal=function(e){return this._ordinal.replace("%d",e)},i.preparse=Ut,i.postformat=Ut,i.relativeTime=function(e,t,n,s){var o=this._relativeTime[n];return M(o)?o(e,t,n,s):o.replace(/%d/i,e)},i.pastFuture=function(e,t){return M(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},i.set=function(e){var t,n;for(t in e)l(e,t)&&(M(n=e[t])?this[t]=n:this["_"+t]=n);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},i.eras=function(){for(var i,s=this._eras||D("en")._eras,o=0,a=s.length;o<a;++o){switch(typeof s[o].since){case"string":i=n(s[o].since).startOf("day"),s[o].since=i.valueOf();break}switch(typeof s[o].until){case"undefined":s[o].until=1/0;break;case"string":i=n(s[o].until).startOf("day").valueOf(),s[o].until=i.valueOf();break}}return s},i.erasParse=function(e,t,n){var s,i,a,r,c,o=this.eras();for(e=e.toUpperCase(),s=0,c=o.length;s<c;++s)if(i=o[s].name.toUpperCase(),a=o[s].abbr.toUpperCase(),r=o[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return o[s];break;case"NNNN":if(i===e)return o[s];break;case"NNNNN":if(r===e)return o[s];break}else if(0<=[i,a,r].indexOf(e))return o[s]},i.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*s},i.erasAbbrRegex=function(e){return l(this,"_erasAbbrRegex")||Ge.call(this),e?this._erasAbbrRegex:this._erasRegex},i.erasNameRegex=function(e){return l(this,"_erasNameRegex")||Ge.call(this),e?this._erasNameRegex:this._erasRegex},i.erasNarrowRegex=function(e){return l(this,"_erasNarrowRegex")||Ge.call(this),e?this._erasNarrowRegex:this._erasRegex},i.months=function(e,t){return e?(k(this._months)?this._months:this._months[(this._months.isFormat||Ot).test(t)?"format":"standalone"])[e.month()]:k(this._months)?this._months:this._months.standalone},i.monthsShort=function(e,t){return e?(k(this._monthsShort)?this._monthsShort:this._monthsShort[Ot.test(t)?"format":"standalone"])[e.month()]:k(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},i.monthsParse=function(e,t,n){var s,o;if(this._monthsParseExact)return function(e,t,n){var s,o,i,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;o<12;++o)i=T([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=f.call(this._shortMonthsParse,e))?s:null:-1!==(s=f.call(this._longMonthsParse,e))?s:null:"MMM"===t?-1!==(s=f.call(this._shortMonthsParse,e))||-1!==(s=f.call(this._longMonthsParse,e))?s:null:-1!==(s=f.call(this._longMonthsParse,e))||-1!==(s=f.call(this._shortMonthsParse,e))?s:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(o=T([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},i.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||on.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=_n),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},i.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||on.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=pn),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},i.week=function(e){return ye(e,this._week.dow,this._week.doy).week},i.firstDayOfYear=function(){return this._week.doy},i.firstDayOfWeek=function(){return this._week.dow},i.weekdays=function(e,t){return t=k(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"],!0===e?Ke(t,this._week.dow):e?t[e.day()]:t},i.weekdaysMin=function(e){return!0===e?Ke(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},i.weekdaysShort=function(e){return!0===e?Ke(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},i.weekdaysParse=function(e,t,n){var s,o;if(this._weekdaysParseExact)return function(e,t,n){var s,o,i,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;o<7;++o)i=T([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=f.call(this._weekdaysParse,e))?s:null:"ddd"===t?-1!==(s=f.call(this._shortWeekdaysParse,e))?s:null:-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:"dddd"===t?-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._shortWeekdaysParse,e))||-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:"ddd"===t?-1!==(s=f.call(this._shortWeekdaysParse,e))||-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._minWeekdaysParse,e))?s:null:-1!==(s=f.call(this._minWeekdaysParse,e))||-1!==(s=f.call(this._weekdaysParse,e))||-1!==(s=f.call(this._shortWeekdaysParse,e))?s:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(o=T([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},i.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=cn),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},i.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=hn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},i.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=mn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},i.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},i.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},K("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===r(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),n.lang=_("moment.lang is deprecated. Use moment.locale instead.",K),n.langData=_("moment.langData is deprecated. Use moment.localeData instead.",D),F=Math.abs;function Mt(e,t,n,s){return t=E(t,n),e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function kt(e){return e<0?Math.floor(e):Math.ceil(e)}function Et(e){return 4800*e/146097}function it(e){return 146097*e/4800}function R(e){return function(){return this.as(e)}}oe=R("ms"),Pe=R("s"),ue=R("m"),se=R("h"),ne=R("d"),fe=R("w"),L=R("M"),X=R("Q"),$=R("y");function Q(e){return function(){return this.isValid()?this._data[e]:NaN}}var B=Q("milliseconds"),W=Q("seconds"),pe=Q("minutes"),i=Q("hours"),wn=Q("days"),On=Q("months"),xn=Q("years"),P=Math.round,J={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function kn(e,t,n,s){var i=E(e).abs(),o=P(i.as("s")),a=P(i.as("m")),r=P(i.as("h")),c=P(i.as("d")),l=P(i.as("M")),d=P(i.as("w")),i=P(i.as("y")),o=(o<=n.ss?["s",o]:o<n.s&&["ss",o])||a<=1&&["m"]||a<n.m&&["mm",a]||r<=1&&["h"]||r<n.h&&["hh",r]||c<=1&&["d"]||c<n.d&&["dd",c];return(o=(o=null!=n.w?o||d<=1&&["w"]||d<n.w&&["ww",d]:o)||l<=1&&["M"]||l<n.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=t,o[3]=0<+e,o[4]=s,function(e,t,n,s,o){return o.relativeTime(t||1,!!n,e,s)}.apply(null,o)}ke=Math.abs;function ae(e){return(0<e)-(e<0)||+e}function Ee(){if(!this.isValid())return this.localeData().invalidDate();var e,s,o,a,r,c,l,t=ke(this._milliseconds)/1e3,d=ke(this._days),i=ke(this._months),n=this.asSeconds();return n?(e=w(t/60),s=w(e/60),t%=60,e%=60,a=w(i/12),i%=12,c=t?t.toFixed(3).replace(/\.?0+$/,""):"",r=ae(this._months)!==ae(n)?"-":"",l=ae(this._days)!==ae(n)?"-":"",o=ae(this._milliseconds)!==ae(n)?"-":"",(n<0?"-":"")+"P"+(a?r+a+"Y":"")+(i?r+i+"M":"")+(d?l+d+"D":"")+(s||e||t?"T":"")+(s?o+s+"H":"")+(e?o+e+"M":"")+(t?o+c+"S":"")):"P0D"}return c=ze.prototype,c.isValid=function(){return this._isValid},c.abs=function(){var e=this._data;return this._milliseconds=F(this._milliseconds),this._days=F(this._days),this._months=F(this._months),e.milliseconds=F(e.milliseconds),e.seconds=F(e.seconds),e.minutes=F(e.minutes),e.hours=F(e.hours),e.months=F(e.months),e.years=F(e.years),this},c.add=function(e,t){return Mt(this,e,t,1)},c.subtract=function(e,t){return Mt(this,e,t,-1)},c.as=function(e){if(!this.isValid())return NaN;var t,s,n=this._milliseconds;if("month"===(e=O(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,s=this._months+Et(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(it(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},c.asMilliseconds=oe,c.asSeconds=Pe,c.asMinutes=ue,c.asHours=se,c.asDays=ne,c.asWeeks=fe,c.asMonths=L,c.asQuarters=X,c.asYears=$,c.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12):NaN},c._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*kt(it(n)+t),n=t=0),s.milliseconds=e%1e3,e=w(e/1e3),s.seconds=e%60,e=w(e/60),s.minutes=e%60,e=w(e/60),s.hours=e%24,t+=w(e/24),n+=e=w(Et(t)),t-=kt(it(e)),e=w(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},c.clone=function(){return E(this)},c.get=function(e){return e=O(e),this.isValid()?this[e+"s"]():NaN},c.milliseconds=B,c.seconds=W,c.minutes=pe,c.hours=i,c.days=wn,c.weeks=function(){return w(this.days()/7)},c.months=On,c.years=xn,c.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=J;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(n=e),"object"==typeof t&&(s=Object.assign({},J,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),e=this.localeData(),t=kn(this,!n,s,e),n&&(t=e.pastFuture(+this,t)),e.postformat(t)},c.toISOString=Ee,c.toString=Ee,c.toJSON=Ee,c.locale=Zt,c.localeData=Jt,c.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ee),c.lang=He,o("X",0,0,"unix"),o("x",0,0,"valueOf"),s("x",Me),s("X",/[+-]?\d+(\.\d{1,3})?/),d("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),d("x",function(e,t,n){n._d=new Date(r(e))}),n.version="2.29.4",tn=u,n.fn=e,n.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},n.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=T,n.unix=function(e){return u(1e3*e)},n.months=function(e,t){return Ht(e,t,"months")},n.isDate=je,n.locale=K,n.invalid=Fe,n.duration=E,n.isMoment=C,n.weekdays=function(e,t,n){return $e(e,t,n,"weekdays")},n.parseZone=function(){return u.apply(null,arguments).parseZone()},n.localeData=D,n.isDuration=Le,n.monthsShort=function(e,t){return Ht(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return $e(e,t,n,"weekdaysMin")},n.defineLocale=ut,n.updateLocale=function(e,t){var n,s;return t!=null?(n=zt,null!=m[e]&&null!=m[e].parentLocale?m[e].set(rt(m[e]._config,t)):(t=rt(n=null!=(s=Ae(e))?s._config:n,t),s==null&&(t.abbr=e),(n=new ct(t)).parentLocale=m[e],m[e]=n),K(e)):null!=m[e]&&(null!=m[e].parentLocale?(m[e]=m[e].parentLocale,e===K()&&K(e)):null!=m[e]&&delete m[e]),m[e]},n.locales=function(){return Ct(m)},n.weekdaysShort=function(e,t,n){return $e(e,t,n,"weekdaysShort")},n.normalizeUnits=O,n.relativeTimeRounding=function(e){return void 0===e?P:"function"==typeof e&&(P=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==J[e]&&(void 0===t?J[e]:(J[e]=t,"s"===e&&(J.ss=t-1),!0))},n.calendarFormat=function(e,t){return(e=e.diff(t,"days",!0))<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},n.prototype=e,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})}}),lm=ya({"node_modules/@braintree/sanitize-url/dist/index.js"(e){"use strict",Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=void 0;var t=/^([^\w]*)(javascript|data|vbscript)/im,n=/&#(\w+)(^\w|;)?/g,s=/&(newline|tab);/gi,o=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,a=[".","/"];function r(e){return a.indexOf(e[0])>-1}function c(e){return e.replace(n,function(e,t){return String.fromCharCode(t)})}function l(e){var a,l,n=c(e||"").replace(s,"").replace(o,"").trim();return n?r(n)?n:(a=n.match(i),a?(l=a[0],t.test(l)?"about:blank":n):n):"about:blank"}e.sanitizeUrl=l}}),pm=ya({"node_modules/dompurify/dist/purify.js"(e,t){(function(n,s){typeof e=="object"&&typeof t!="undefined"?t.exports=s():typeof define=="function"&&define.amd?define(s):(n=typeof globalThis!="undefined"?globalThis:n||self,n.DOMPurify=s())})(e,function(){"use strict";function r(e){return"@babel/helpers - typeof",r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function x(e,t){return x=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},x(e,t)}function se(){if(typeof Reflect=="undefined"||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(){return se()?y=Reflect.construct:y=function(t,n,s){var i,a,o=[null];return o.push.apply(o,n),a=Function.bind.apply(t,o),i=new a,s&&x(i,s.prototype),i},y.apply(null,arguments)}function i(e){return ie(e)||ae(e)||Q(e)||Z()}function ie(e){if(Array.isArray(e))return k(e)}function ae(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q(e,t){if(!e)return;if(typeof e=="string")return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}function k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t,o,l,d,u,h,m,f,p,g,v,_,O,C,E,A,S,M,F,z,D,N,R,P,I,B,V,$,W,U,K,q,Y,G,X=Object.hasOwnProperty,H=Object.setPrototypeOf,ee=Object.isFrozen,ne=Object.getPrototypeOf,J=Object.getOwnPropertyDescriptor,n=Object.freeze,a=Object.seal,te=Object.create,L=typeof Reflect!="undefined"&&Reflect,j=L.apply,w=L.construct;j||(j=function(t,n,s){return t.apply(n,s)}),n||(n=function(t){return t}),a||(a=function(t){return t}),w||(w=function(t,n){return y(t,i(n))}),K=s(Array.prototype.forEach),O=s(Array.prototype.pop),l=s(Array.prototype.push),u=s(String.prototype.toLowerCase),m=s(String.prototype.toString),W=s(String.prototype.match),o=s(String.prototype.replace),$=s(String.prototype.indexOf),D=s(String.prototype.trim),t=s(RegExp.prototype.test),h=oe(TypeError);function s(e){return function(t){for(var s=arguments.length,o=new Array(s>1?s-1:0),n=1;n<s;n++)o[n-1]=arguments[n];return j(e,t,o)}}function oe(e){return function(){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];return w(e,s)}}function e(e,t,n){n=n||u,H&&H(e,null);for(var s,o,i=t.length;i--;)s=t[i],typeof s=="string"&&(o=n(s),o!==s&&(ee(t)||(t[i]=o),s=o)),e[s]=!0;return e}function c(e){var t,n=te(null);for(t in e)j(X,e,[t])&&(n[t]=e[t]);return n}function b(e,t){for(;e!==null;){var n=J(e,t);if(n){if(n.get)return s(n.get);if(typeof n.value=="function")return s(n.value)}e=ne(e)}function o(e){return console.warn("fallback value for",e),null}return o}_=n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),v=n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),g=n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=n(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),p=n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),V=n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),A=n(["#text"]),E=n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),f=n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C=n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),d=n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Y=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),S=a(/<%[\w\W]*|[\w\W]*%>/gm),G=a(/\${[\w\W]*}/gm),M=a(/^data-[-\w.\u00B7-\uFFFF]/),q=a(/^aria-[-\w]+$/),U=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i),B=a(/^(?:\w+script|data):/i),P=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),R=a(/^html$/i),N=function(){return typeof window=="undefined"?null:window},z=function(t,n){if(r(t)!=="object"||typeof t.createPolicy!="function")return null;var o,s=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(s=n.currentScript.getAttribute(i)),o="dompurify"+(s?"#"+s:"");try{return t.createPolicy(o,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function T(){if(a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N(),s=function(t){return T(t)},s.version="2.4.1",s.removed=[],!a||!a.document||a.document.nodeType!==9)return s.isSupported=!1,s;var s,a,y,k,L,H,Z,xe=a.document,Q=a.document,lt=a.DocumentFragment,Ft=a.HTMLTemplateElement,Fe=a.Node,Ke=a.Element,Be=a.NodeFilter,Ue=a.NamedNodeMap,Mt=Ue===void 0?a.NamedNodeMap||a.MozNamedAttrMap:Ue,St=a.HTMLFormElement,At=a.DOMParser,be=a.trustedTypes,le,fe,We,je,ze,_e,Qe,ne,Ae,Ne,Pe,Ve,at,de=Ke.prototype,kt=b(de,"cloneNode"),Et=b(de,"nextSibling"),Ct=b(de,"childNodes"),Ee=b(de,"parentNode");typeof Ft=="function"&&(le=Q.createElement("template"),le.content&&le.content.ownerDocument&&(Q=le.content.ownerDocument));var F=z(be,xe),st=F?F.createHTML(""):"",pe=Q,Ce=pe.implementation,xt=pe.createNodeIterator,ht=pe.createDocumentFragment,Ot=pe.getElementsByTagName,wt=xe.importNode,ut={};try{ut=c(Q).documentMode?Q.documentMode:{}}catch{}k={},s.isSupported=typeof Ee=="function"&&Ce&&typeof Ce.createHTMLDocument!="undefined"&&ut!==9;var Ie=Y,He=S,De=G,_t=M,yt=q,jt=B,et=P,Oe=U,w=null,it=e({},[].concat(i(_),i(v),i(g),i(p),i(A))),x=null,ot=e({},[].concat(i(E),i(f),i(C),i(d))),j=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),re=null,Me=null,Ze=!0,Te=!0,Je=!1,ee=!1,J=!1,Le=!1,Re=!1,te=!1,ve=!1,ge=!1,qe=!0,tt=!1,bt="user-content-",$e=!0,ce=!1,se={},oe=null,Ye=e({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ge=null,Xe=e({},["audio","video","img","source","image","track"]),ye=null,nt=e({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",X="http://www.w3.org/1999/xhtml",ie=X,Se=!1,ke=null,vt=e({},[me,he,X],m),pt=["application/xhtml+xml","text/html"],ft="text/html",ae=null,mt=Q.createElement("form"),dt=function(t){return t instanceof RegExp||t instanceof Function},we=function(s){if(ae&&ae===s)return;(!s||r(s)!=="object")&&(s={}),s=c(s),Z=pt.indexOf(s.PARSER_MEDIA_TYPE)===-1?Z=ft:Z=s.PARSER_MEDIA_TYPE,y=Z==="application/xhtml+xml"?m:u,w="ALLOWED_TAGS"in s?e({},s.ALLOWED_TAGS,y):it,x="ALLOWED_ATTR"in s?e({},s.ALLOWED_ATTR,y):ot,ke="ALLOWED_NAMESPACES"in s?e({},s.ALLOWED_NAMESPACES,m):vt,ye="ADD_URI_SAFE_ATTR"in s?e(c(nt),s.ADD_URI_SAFE_ATTR,y):nt,Ge="ADD_DATA_URI_TAGS"in s?e(c(Xe),s.ADD_DATA_URI_TAGS,y):Xe,oe="FORBID_CONTENTS"in s?e({},s.FORBID_CONTENTS,y):Ye,re="FORBID_TAGS"in s?e({},s.FORBID_TAGS,y):{},Me="FORBID_ATTR"in s?e({},s.FORBID_ATTR,y):{},se="USE_PROFILES"in s&&s.USE_PROFILES,Ze=s.ALLOW_ARIA_ATTR!==!1,Te=s.ALLOW_DATA_ATTR!==!1,Je=s.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=s.SAFE_FOR_TEMPLATES||!1,J=s.WHOLE_DOCUMENT||!1,te=s.RETURN_DOM||!1,ve=s.RETURN_DOM_FRAGMENT||!1,ge=s.RETURN_TRUSTED_TYPE||!1,Re=s.FORCE_BODY||!1,qe=s.SANITIZE_DOM!==!1,tt=s.SANITIZE_NAMED_PROPS||!1,$e=s.KEEP_CONTENT!==!1,ce=s.IN_PLACE||!1,Oe=s.ALLOWED_URI_REGEXP||Oe,ie=s.NAMESPACE||X,s.CUSTOM_ELEMENT_HANDLING&&dt(s.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=s.CUSTOM_ELEMENT_HANDLING.tagNameCheck),s.CUSTOM_ELEMENT_HANDLING&&dt(s.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=s.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),s.CUSTOM_ELEMENT_HANDLING&&typeof s.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=s.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ee&&(Te=!1),ve&&(te=!0),se&&(w=e({},i(A)),x=[],se.html===!0&&(e(w,_),e(x,E)),se.svg===!0&&(e(w,v),e(x,f),e(x,d)),se.svgFilters===!0&&(e(w,g),e(x,f),e(x,d)),se.mathMl===!0&&(e(w,p),e(x,C),e(x,d))),s.ADD_TAGS&&(w===it&&(w=c(w)),e(w,s.ADD_TAGS,y)),s.ADD_ATTR&&(x===ot&&(x=c(x)),e(x,s.ADD_ATTR,y)),s.ADD_URI_SAFE_ATTR&&e(ye,s.ADD_URI_SAFE_ATTR,y),s.FORBID_CONTENTS&&(oe===Ye&&(oe=c(oe)),e(oe,s.FORBID_CONTENTS,y)),$e&&(w["#text"]=!0),J&&e(w,["html","head","body"]),w.table&&(e(w,["tbody"]),delete re.tbody),n&&n(s),ae=s},ct=e({},["mi","mo","mn","ms","mtext"]),rt=e({},["foreignobject","desc","title","annotation-xml"]),gt=e({},["title","style","font","a","script"]),ue=e({},v);return e(ue,g),e(ue,I),fe=e({},p),e(fe,V),We=function(t){var s,o,n=Ee(t);return(!n||!n.tagName)&&(n={namespaceURI:ie,tagName:"template"}),s=u(t.tagName),o=u(n.tagName),!!ke[t.namespaceURI]&&(t.namespaceURI===he?n.namespaceURI===X?s==="svg":n.namespaceURI===me?s==="svg"&&(o==="annotation-xml"||ct[o]):Boolean(ue[s]):t.namespaceURI===me?n.namespaceURI===X?s==="math":n.namespaceURI===he?s==="math"&&rt[o]:Boolean(fe[s]):t.namespaceURI===X?!(n.namespaceURI===he&&!rt[o])&&!(n.namespaceURI===me&&!ct[o])&&!fe[s]&&(gt[s]||!ue[s]):!!(Z==="application/xhtml+xml"&&ke[t.namespaceURI]))},L=function(t){l(s.removed,{element:t});try{t.parentNode.removeChild(t)}catch{try{t.outerHTML=st}catch{t.remove()}}},je=function(t,n){try{l(s.removed,{attribute:n.getAttributeNode(t),from:n})}catch{l(s.removed,{attribute:null,from:n})}if(n.removeAttribute(t),t==="is"&&!x[t])if(te||ve)try{L(n)}catch{}else try{n.setAttribute(t,"")}catch{}},ze=function(t){if(Re)t="<remove></remove>"+t;else{var n,s,o,i,a=W(t,/^[\r\n\t ]+/);o=a&&a[0]}if(Z==="application/xhtml+xml"&&ie===X&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"),i=F?F.createHTML(t):t,ie===X)try{n=(new At).parseFromString(i,Z)}catch{}if(!n||!n.documentElement){n=Ce.createDocument(ie,"template",null);try{n.documentElement.innerHTML=Se?"":i}catch{}}return s=n.body||n.documentElement,t&&o&&s.insertBefore(Q.createTextNode(o),s.childNodes[0]||null),ie===X?Ot.call(n,J?"html":"body")[0]:J?n.documentElement:s},_e=function(t){return xt.call(t.ownerDocument||t,t,Be.SHOW_ELEMENT|Be.SHOW_COMMENT|Be.SHOW_TEXT,null,!1)},Qe=function(t){return t instanceof St&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof Mt)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},ne=function(t){return r(Fe)==="object"?t instanceof Fe:t&&r(t)==="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},H=function(t,n,o){if(!k[t])return;K(k[t],function(e){e.call(s,n,o,ae)})},Ae=function(n){if(H("beforeSanitizeElements",n,null),Qe(n))return L(n),!0;if(t(/[\u0080-\uFFFF]/,n.nodeName))return L(n),!0;var a,r,c,d,u,i=y(n.nodeName);if(H("uponSanitizeElement",n,{tagName:i,allowedTags:w}),n.hasChildNodes()&&!ne(n.firstElementChild)&&(!ne(n.content)||!ne(n.content.firstElementChild))&&t(/<[/\w]/g,n.innerHTML)&&t(/<[/\w]/g,n.textContent))return L(n),!0;if(i==="select"&&t(/<template/i,n.innerHTML))return L(n),!0;if(!w[i]||re[i]){if(!re[i]&&Pe(i)){if(j.tagNameCheck instanceof RegExp&&t(j.tagNameCheck,i))return!1;if(j.tagNameCheck instanceof Function&&j.tagNameCheck(i))return!1}if($e&&!oe[i]&&(d=Ee(n)||n.parentNode,r=Ct(n)||n.childNodes,r&&d)){u=r.length;for(c=u-1;c>=0;--c)d.insertBefore(kt(r[c],!0),Et(n))}return L(n),!0}return n instanceof Ke&&!We(n)?(L(n),!0):(i==="noscript"||i==="noembed")&&t(/<\/no(script|embed)/i,n.innerHTML)?(L(n),!0):(ee&&n.nodeType===3&&(a=n.textContent,a=o(a,Ie," "),a=o(a,He," "),a=o(a,De," "),n.textContent!==a&&(l(s.removed,{element:n.cloneNode()}),n.textContent=a)),H("afterSanitizeElements",n,null),!1)},Ne=function(n,s,i){if(qe&&(s==="id"||s==="name")&&(i in Q||i in mt))return!1;if(Te&&!Me[s]&&t(_t,s));else if(Ze&&t(yt,s));else if(!x[s]||Me[s])if(Pe(n)&&(j.tagNameCheck instanceof RegExp&&t(j.tagNameCheck,n)||j.tagNameCheck instanceof Function&&j.tagNameCheck(n))&&(j.attributeNameCheck instanceof RegExp&&t(j.attributeNameCheck,s)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(s))||s==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&t(j.tagNameCheck,i)||j.tagNameCheck instanceof Function&&j.tagNameCheck(i)));else return!1;else if(ye[s]);else if(t(Oe,o(i,et,"")));else if((s==="src"||s==="xlink:href"||s==="href")&&n!=="script"&&$(i,"data:")===0&&Ge[n]);else if(Je&&!t(jt,o(i,et,"")));else if(i)return!1;return!0},Pe=function(t){return t.indexOf("-")>0},Ve=function(n){if(H("beforeSanitizeAttributes",n,null),u=n.attributes,!u)return;for(a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:x},h=u.length;h--;){d=u[h];var i,a,l,d,u,h,f,p=d,c=p.name,m=p.namespaceURI;if(i=c==="value"?d.value:D(d.value),l=y(c),a.attrName=l,a.attrValue=i,a.keepAttr=!0,a.forceKeepAttr=void 0,H("uponSanitizeAttribute",n,a),i=a.attrValue,a.forceKeepAttr)continue;if(je(c,n),!a.keepAttr)continue;if(t(/\/>/i,i)){je(c,n);continue}if(ee&&(i=o(i,Ie," "),i=o(i,He," "),i=o(i,De," ")),f=y(n.nodeName),!Ne(f,l,i))continue;if(tt&&(l==="id"||l==="name")&&(je(c,n),i=bt+i),F&&r(be)==="object"&&typeof be.getAttributeType=="function")if(m);else switch(be.getAttributeType(f,l)){case"TrustedHTML":i=F.createHTML(i);break;case"TrustedScriptURL":i=F.createScriptURL(i);break}try{m?n.setAttributeNS(m,c,i):n.setAttribute(c,i),O(s.removed)}catch{}}H("afterSanitizeAttributes",n,null)},at=function e(t){var n,s=_e(t);for(H("beforeSanitizeShadowDOM",t,null);n=s.nextNode();){if(H("uponSanitizeShadowNode",n,null),Ae(n))continue;n.content instanceof lt&&e(n.content),Ve(n)}H("afterSanitizeShadowDOM",t,null)},s.sanitize=function(e){var n,i,c,l,d,u,m,f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Se=!e,Se&&(e="<!-->"),typeof e!="string"&&!ne(e)){if(typeof e.toString!="function")throw h("toString is not a function");if(e=e.toString(),typeof e!="string")throw h("dirty is not a string, aborting")}if(!s.isSupported){if(r(a.toStaticHTML)==="object"||typeof a.toStaticHTML=="function"){if(typeof e=="string")return a.toStaticHTML(e);if(ne(e))return a.toStaticHTML(e.outerHTML)}return e}if(Le||we(p),s.removed=[],typeof e=="string"&&(ce=!1),ce){if(e.nodeName&&(m=y(e.nodeName),!w[m]||re[m]))throw h("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof Fe)n=ze("<!---->"),l=n.ownerDocument.importNode(e,!0),l.nodeType===1&&l.nodeName==="BODY"?n=l:l.nodeName==="HTML"?n=l:n.appendChild(l);else{if(!te&&!ee&&!J&&e.indexOf("<")===-1)return F&&ge?F.createHTML(e):e;if(n=ze(e),!n)return te?null:ge?st:""}for(n&&Re&&L(n.firstChild),f=_e(ce?e:n);c=f.nextNode();){if(c.nodeType===3&&c===u)continue;if(Ae(c))continue;c.content instanceof lt&&at(c.content),Ve(c),u=c}if(u=null,ce)return e;if(te){if(ve)for(d=ht.call(n.ownerDocument);n.firstChild;)d.appendChild(n.firstChild);else d=n;return x.shadowroot&&(d=wt.call(xe,d,!0)),d}return i=J?n.outerHTML:n.innerHTML,J&&w["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&t(R,n.ownerDocument.doctype.name)&&(i="<!DOCTYPE "+n.ownerDocument.doctype.name+`>
`+i),ee&&(i=o(i,Ie," "),i=o(i,He," "),i=o(i,De," ")),F&&ge?F.createHTML(i):i},s.setConfig=function(e){we(e),Le=!0},s.clearConfig=function(){ae=null,Le=!1},s.isValidAttribute=function(e,t,n){ae||we({});var s=y(e),o=y(t);return Ne(s,o,n)},s.addHook=function(e,t){if(typeof t!="function")return;k[e]=k[e]||[],l(k[e],t)},s.removeHook=function(e){if(k[e])return O(k[e])},s.removeHooks=function(e){k[e]&&(k[e]=[])},s.removeAllHooks=function(){k={}},s}return F=T(),F})}}),Te=qa(tm(),1),Bt=qa(lm(),1);function Ga(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function MV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function a3(e){let t,n,s;e.length!==2?(t=Ga,n=(t,n)=>Ga(e(t),n),s=(t,n)=>e(t)-n):(t=e===Ga||e===MV?e:SV,n=e,s=e);function o(e,s,o=0,i=e.length){if(o<i){if(t(s,s)!==0)return i;do{const t=o+i>>>1;n(e[t],s)<0?o=t+1:i=t}while(o<i)}return o}function i(e,s,o=0,i=e.length){if(o<i){if(t(s,s)!==0)return i;do{const t=o+i>>>1;n(e[t],s)<=0?o=t+1:i=t}while(o<i)}return o}function a(e,t,n=0,i=e.length){const a=o(e,t,n,i-1);return a>n&&s(e[a-1],t)>-s(e[a],t)?a-1:a}return{left:o,center:a,right:i}}function SV(){return 0}function AV(e){return e===null?NaN:+e}J2=a3(Ga),gm=J2.right,EV=J2.left,xV=a3(AV).center,xm=gm,U2=class extends Map{constructor(e,t=uV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Cm(this,e))}has(e){return super.has(Cm(this,e))}set(e,t){return super.set(jV(this,e),t)}delete(e){return super.delete(bV(this,e))}};function Cm({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function jV({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function bV({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function uV(e){return e!==null&&typeof e=="object"?e.valueOf():e}Pm=Math.sqrt(50),$m=Math.sqrt(10),Wm=Math.sqrt(2);function mr(e,t,n){const c=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(c)),r=c/Math.pow(10,a),l=r>=Pm?10:r>=$m?5:r>=Wm?2:1;let o,i,s;return a<0?(s=Math.pow(10,-a)/l,o=Math.round(e*s),i=Math.round(t*s),o/s<e&&++o,i/s>t&&--i,s=-s):(s=Math.pow(10,a)*l,o=Math.round(e/s),i=Math.round(t/s),o*s<e&&++o,i*s>t&&--i),i<o&&.5<=n&&n<2?mr(e,t,n*2):[o,i,s]}function aV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const c=t<e,[a,r,s]=c?mr(t,e,n):mr(e,t,n);if(!(r>=a))return[];const o=r-a+1,i=new Array(o);if(c)if(s<0)for(let e=0;e<o;++e)i[e]=(r-e)/-s;else for(let e=0;e<o;++e)i[e]=(r-e)*s;else if(s<0)for(let e=0;e<o;++e)i[e]=(a+e)/-s;else for(let e=0;e<o;++e)i[e]=(a+e)*s;return i}function n2(e,t,n){return t=+t,e=+e,n=+n,mr(e,t,n)[2]}function e2(e,t,n){t=+t,e=+e,n=+n;const o=t<e,s=o?n2(t,e,n):n2(e,t,n);return(o?-1:1)*(s<0?1/-s:s)}function iV(e,t){let n;if(t===void 0)for(const t of e)t!=null&&(n<t||n===void 0&&t>=t)&&(n=t);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function nV(e,t){let n;if(t===void 0)for(const t of e)t!=null&&(n>t||n===void 0&&t>=t)&&(n=t);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function tV(e){return e}Ai=1,Rr=2,Hr=3,Ei=4,x0=1e-6;function eV(e){return"translate("+e+",0)"}function JB(e){return"translate(0,"+e+")"}function ZB(e){return t=>+e(t)}function QB(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function YB(){return!this.__axis}function h8(e,t){var r=[],c=null,l=null,a=6,o=6,u=3,s=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,i=e===Ai||e===Ei?-1:1,d=e===Ei||e===Rr?"x":"y",h=e===Ai||e===Hr?eV:JB;function n(n){var C=c??(t.ticks?t.ticks.apply(t,r):t.domain()),E=l??(t.tickFormat?t.tickFormat.apply(t,r):tV),x=Math.max(a,0)+u,w=t.range(),y=+w[0]+s,j=+w[w.length-1]+s,b=(t.bandwidth?QB:ZB)(t.copy(),s),p=n.selection?n.selection():n,f=p.selectAll(".domain").data([null]),m=p.selectAll(".tick").data(C,t).order(),O=m.exit(),_=m.enter().append("g").attr("class","tick"),v=m.select("line"),g=m.select("text"),f=f.merge(f.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),m=m.merge(_),v=v.merge(_.append("line").attr("stroke","currentColor").attr(d+"2",i*a)),g=g.merge(_.append("text").attr("fill","currentColor").attr(d,i*x).attr("dy",e===Ai?"0em":e===Hr?"0.71em":"0.32em"));n!==p&&(f=f.transition(n),m=m.transition(n),v=v.transition(n),g=g.transition(n),O=O.transition(n).attr("opacity",x0).attr("transform",function(e){return isFinite(e=b(e))?h(e+s):this.getAttribute("transform")}),_.attr("opacity",x0).attr("transform",function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+s)})),O.remove(),f.attr("d",e===Ei||e===Rr?o?"M"+i*o+","+y+"H"+s+"V"+j+"H"+i*o:"M"+s+","+y+"V"+j:o?"M"+y+","+i*o+"V"+s+"H"+j+"V"+i*o:"M"+y+","+s+"H"+j),m.attr("opacity",1).attr("transform",function(e){return h(b(e)+s)}),v.attr(d+"2",i*a),g.attr(d,i*x).text(E),p.filter(YB).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Rr?"start":e===Ei?"end":"middle"),p.each(function(){this.__axis=b})}return n.scale=function(e){return arguments.length?(t=e,n):t},n.ticks=function(){return r=Array.from(arguments),n},n.tickArguments=function(e){return arguments.length?(r=e==null?[]:Array.from(e),n):r.slice()},n.tickValues=function(e){return arguments.length?(c=e==null?null:Array.from(e),n):c&&c.slice()},n.tickFormat=function(e){return arguments.length?(l=e,n):l},n.tickSize=function(e){return arguments.length?(a=o=+e,n):a},n.tickSizeInner=function(e){return arguments.length?(a=+e,n):a},n.tickSizeOuter=function(e){return arguments.length?(o=+e,n):o},n.tickPadding=function(e){return arguments.length?(u=+e,n):u},n.offset=function(e){return arguments.length?(s=+e,n):s},n}function UB(e){return h8(Ai,e)}function WB(e){return h8(Hr,e)}g8={value:()=>{}};function y8(){for(var e,t=0,s=arguments.length,n={};t<s;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new Kr(n)}function Kr(e){this._=e}function IB(e,t){return e.trim().split(/^|\s+/).map(function(e){var s="",n=e.indexOf(".");if(n>=0&&(s=e.slice(n+1),e=e.slice(0,n)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}Kr.prototype=y8.prototype={constructor:Kr,on:function(e,t){var n,s=this._,i=IB(e+"",s),o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((n=(e=i[o]).type)&&(n=PB(s[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)s[n]=C8(s[n],e.name,t);else if(t==null)for(n in s)s[n]=C8(s[n],e.name,null);return this},copy:function(){var n,e={},t=this._;for(n in t)e[n]=t[n].slice();return new Kr(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,o,i=new Array(s),n=0;n<s;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,s=o.length;n<s;++n)o[n].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,i=o.length;s<i;++s)o[s].value.apply(t,n)}};function PB(e,t){for(var s,n=0,o=e.length;n<o;++n)if((s=e[n]).name===t)return s.value}function C8(e,t,n){for(var s=0,o=e.length;s<o;++s)if(e[s].name===t){e[s]=g8,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}S8=y8,qr="http://www.w3.org/1999/xhtml",Q4={svg:"http://www.w3.org/2000/svg",xhtml:qr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Q4.hasOwnProperty(t)?{space:Q4[t],local:e}:e}function zB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qr&&t.documentElement.namespaceURI===qr?t.createElement(e):t.createElementNS(n,e)}}function SB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function B8(e){var t=Qr(e);return(t.local?SB:zB)(t)}function CB(){}function R4(e){return e==null?CB:function(){return this.querySelector(e)}}function OB(e){typeof e!="function"&&(e=R4(e));for(var a=this._groups,r=a.length,c=new Array(r),s=0;s<r;++s)for(var t,i,o=a[s],l=o.length,d=c[s]=new Array(l),n=0;n<l;++n)(t=o[n])&&(i=e.call(t,t.__data__,n,o))&&("__data__"in t&&(i.__data__=t.__data__),d[n]=i);return new re(c,this._parents)}function q8(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yB(){return[]}function zf(e){return e==null?yB:function(){return this.querySelectorAll(e)}}function dB(e){return function(){return q8(e.apply(this,arguments))}}function lB(e){typeof e=="function"?e=dB(e):e=zf(e);for(var i=this._groups,c=i.length,a=[],r=[],s=0;s<c;++s)for(var t,o=i[s],l=o.length,n=0;n<l;++n)(t=o[n])&&(a.push(e.call(t,t.__data__,n,o)),r.push(t));return new re(a,r)}function Nf(e){return function(){return this.matches(e)}}function Wf(e){return function(t){return t.matches(e)}}f6=Array.prototype.find;function eB(e){return function(){return f6.call(this.children,e)}}function JI(){return this.firstElementChild}function GI(e){return this.select(e==null?JI:eB(typeof e=="function"?e:Wf(e)))}M6=Array.prototype.filter;function qI(){return Array.from(this.children)}function KI(e){return function(){return M6.call(this.children,e)}}function UI(e){return this.selectAll(e==null?qI:KI(typeof e=="function"?e:Wf(e)))}function WI(e){typeof e!="function"&&(e=Nf(e));for(var i=this._groups,a=i.length,r=new Array(a),t=0;t<a;++t)for(var n,o=i[t],c=o.length,l=r[t]=[],s=0;s<c;++s)(n=o[s])&&e.call(n,n.__data__,s,o)&&l.push(n);return new re(r,this._parents)}function N6(e){return new Array(e.length)}function VI(){return new re(this._enter||this._groups.map(N6),this._parents)}function jc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jc.prototype={constructor:jc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function II(e){return function(){return e}}function PI(e,t,n,s,o,i){for(var r,a=0,c=t.length,l=i.length;a<l;++a)(r=t[a])?(r.__data__=i[a],s[a]=r):n[a]=new jc(e,i[a]);for(;a<c;++a)(r=t[a])&&(o[a]=r)}function RI(e,t,n,s,o,i,a){var r,c,l,d=new Map,u=t.length,m=i.length,h=new Array(u);for(r=0;r<u;++r)(c=t[r])&&(h[r]=l=a.call(c,c.__data__,r,t)+"",d.has(l)?o[r]=c:d.set(l,c));for(r=0;r<m;++r)l=a.call(e,i[r],r,i)+"",(c=d.get(l))?(s[r]=c,c.__data__=i[r],d.delete(l)):n[r]=new jc(e,i[r]);for(r=0;r<u;++r)(c=t[r])&&d.get(h[r])===c&&(o[r]=c)}function AI(e){return e.__data__}function CI(e,t){if(!arguments.length)return Array.from(this,AI);var _=t?RI:PI,l=this._parents,h=this._groups;typeof e!="function"&&(e=II(e));for(var r=h.length,s=new Array(r),d=new Array(r),u=new Array(r),n=0;n<r;++n){var o,i,f,b,a=l[n],m=h[n],j=m.length,p=bI(e.call(a,a&&a.__data__,n,l)),c=p.length,g=d[n]=new Array(c),v=s[n]=new Array(c),y=u[n]=new Array(j);_(a,m,g,v,y,p,t);for(o=0,i=0;o<c;++o)if(b=g[o]){for(o>=i&&(i=o+1);!(f=v[i])&&++i<c;);b._next=f||null}}return s=new re(s,l),s._enter=d,s._exit=u,s}function bI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vI(){return new re(this._exit||this._groups.map(N6),this._parents)}function pI(e,t,n){var s=this.enter(),o=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),s&&o?s.merge(o).order():o}function dI(e){a=e.selection?e.selection():e;for(var a,i=this._groups,r=a._groups,o=i.length,u=r.length,h=Math.min(o,u),s=new Array(o),t=0;t<h;++t)for(var d,c=i[t],m=r[t],l=c.length,f=s[t]=new Array(l),n=0;n<l;++n)(d=c[n]||m[n])&&(f[n]=d);for(;t<o;++t)s[t]=i[t];return new re(s,this._parents)}function lI(){for(var o=this._groups,i=-1,a=o.length;++i<a;)for(var t,n=o[i],s=n.length-1,e=n[s];--s>=0;)(t=n[s])&&(e&&t.compareDocumentPosition(e)^4&&e.parentNode.insertBefore(t,e),e=t);return this}function rI(e){e||(e=aI);function d(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var s=this._groups,o=s.length,i=new Array(o),t=0;t<o;++t){for(var l,a=s[t],r=a.length,c=i[t]=new Array(r),n=0;n<r;++n)(l=a[n])&&(c[n]=l);c.sort(d)}return new re(i,this._parents).order()}function aI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function YH(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function UH(){return Array.from(this)}function WH(){for(var n,s=this._groups,e=0,i=s.length;e<i;++e)for(var o=s[e],t=0,a=o.length;t<a;++t)if(n=o[t],n)return n;return null}function PH(){let e=0;for(const t of this)++e;return e}function LH(){return!this.node()}function zH(e){for(var i=this._groups,n=0,a=i.length;n<a;++n)for(var o,s=i[n],t=0,r=s.length;t<r;++t)(o=s[t])&&e.call(o,o.__data__,t,s);return this}function TH(e){return function(){this.removeAttribute(e)}}function AH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kH(e,t){return function(){this.setAttribute(e,t)}}function OH(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wH(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _H(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bH(e,t){var s,n=Qr(e);return arguments.length<2?(s=this.node(),n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)):this.each((t==null?n.local?AH:TH:typeof t=="function"?n.local?_H:wH:n.local?OH:kH)(n,t))}function v5(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uH(e){return function(){this.style.removeProperty(e)}}function dH(e,t,n){return function(){this.style.setProperty(e,t,n)}}function lH(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function cH(e,t,n){return arguments.length>1?this.each((t==null?uH:typeof t=="function"?lH:dH)(e,t,n??"")):As(this.node(),e)}function As(e,t){return e.style.getPropertyValue(t)||v5(e).getComputedStyle(e,null).getPropertyValue(t)}function rH(e){return function(){delete this[e]}}function aH(e,t){return function(){this[e]=t}}function iH(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function oH(e,t){return arguments.length>1?this.each((t==null?rH:typeof t=="function"?iH:aH)(e,t)):this.node()[e]}function A5(e){return e.trim().split(/^|\s+/)}function j1(e){return e.classList||new T5(e)}function T5(e){this._node=e,this._names=A5(e.getAttribute("class")||"")}T5.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function z5(e,t){for(var s=j1(e),n=-1,o=t.length;++n<o;)s.add(t[n])}function D5(e,t){for(var s=j1(e),n=-1,o=t.length;++n<o;)s.remove(t[n])}function XP(e){return function(){z5(this,e)}}function GP(e){return function(){D5(this,e)}}function YP(e,t){return function(){(t.apply(this,arguments)?z5:D5)(this,e)}}function qP(e,t){if(n=A5(e+""),arguments.length<2){for(var n,o=j1(this.node()),s=-1,i=n.length;++s<i;)if(!o.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?YP:t?XP:GP)(n,t))}function WP(){this.textContent=""}function $P(e){return function(){this.textContent=e}}function BP(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function PP(e){return arguments.length?this.each(e==null?WP:(typeof e=="function"?BP:$P)(e)):this.node().textContent}function RP(){this.innerHTML=""}function LP(e){return function(){this.innerHTML=e}}function AP(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kP(e){return arguments.length?this.each(e==null?RP:(typeof e=="function"?AP:LP)(e)):this.node().innerHTML}function EP(){this.nextSibling&&this.parentNode.appendChild(this)}function CP(){return this.each(EP)}function xP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OP(){return this.each(xP)}function yP(e){var t=typeof e=="function"?e:B8(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jP(){return null}function bP(e,t){var n=typeof e=="function"?e:B8(e),s=t==null?jP:typeof t=="function"?t:R4(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function gP(){var e=this.parentNode;e&&e.removeChild(this)}function pP(){return this.each(gP)}function fP(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hP(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uP(e){return this.select(e?hP:fP)}function dP(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GR(e){return function(t){e.call(this,t,this.__data__)}}function YR(e){return e.trim().split(/^|\s+/).map(function(e){var n="",t=e.indexOf(".");return t>=0&&(n=e.slice(t+1),e=e.slice(0,t)),{type:e,name:n}})}function qR(e){return function(){if(n=this.__on,!n)return;for(var t,n,s=0,o=-1,i=n.length;s<i;++s)t=n[s],(!e.type||t.type===e.type)&&t.name===e.name?this.removeEventListener(t.type,t.listener,t.options):n[++o]=t;++o?n.length=o:delete this.__on}}function KR(e,t,n){return function(){var s,i,r,o=this.__on,a=GR(t);if(o)for(i=0,r=o.length;i<r;++i)if((s=o[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(s):this.__on=[s]}}function BR(e,t,n){var s,o,i,a,l,d,r=YR(e+""),c=r.length;if(arguments.length<2){if(o=this.node().__on,o)for(i=0,d=o.length;i<d;++i)for(s=0,a=o[i];s<c;++s)if((l=r[s]).type===a.type&&l.name===a.name)return a.value;return}o=t?KR:qR;for(s=0;s<c;++s)this.each(o(r[s],t,n));return this}function iv(e,t,n){var o=v5(e),s=o.CustomEvent;typeof s=="function"?s=new s(t,n):(s=o.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function PR(e,t){return function(){return iv(this,e,t)}}function RR(e,t){return function(){return iv(this,e,t.apply(this,arguments))}}function LR(e,t){return this.each((typeof t=="function"?RR:PR)(e,t))}function*DR(){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var o,s=n[e],t=0,a=s.length;t<a;++t)(o=s[t])&&(yield o)}hl=[null];function re(e,t){this._groups=e,this._parents=t}function vv(){return new re([[document.documentElement]],hl)}function TR(){return this}re.prototype=vv.prototype={constructor:re,select:OB,selectAll:lB,selectChild:GI,selectChildren:UI,filter:WI,data:CI,enter:VI,exit:vI,join:pI,merge:dI,selection:TR,order:lI,sort:rI,call:YH,nodes:UH,node:WH,size:PH,empty:LH,each:zH,attr:bH,style:cH,property:oH,classed:qP,text:PP,html:kP,raise:CP,lower:OP,append:yP,insert:bP,remove:pP,clone:uP,datum:dP,on:BR,dispatch:LR,[Symbol.iterator]:DR},oo=vv;function i(e){return typeof e=="string"?new re([[document.querySelector(e)]],[document.documentElement]):new re([[e]],hl)}function Cu(e){return typeof e=="string"?new re([document.querySelectorAll(e)],[document.documentElement]):new re([q8(e)],hl)}function Ra(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ml(e,t){var s,n=Object.create(e.prototype);for(s in t)n[s]=t[s];return n}function On(){}So=.7,Wi=1/So,yn="\\s*([+-]?\\d+)\\s*",To="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yv=/^#([0-9a-f]{3,8})$/,Fv=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),Lv=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),Pv=new RegExp(`^rgba\\(${yn},${yn},${yn},${To}\\)$`),Iv=new RegExp(`^rgba\\(${He},${He},${He},${To}\\)$`),Gv=new RegExp(`^hsl\\(${To},${He},${He}\\)$`),n9=new RegExp(`^hsla\\(${To},${He},${He},${To}\\)$`),vu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ra(On,Nn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:d9,formatHex:d9,formatHex8:lR,formatHsl:aR,formatRgb:_9,toString:_9});function d9(){return this.rgb().formatHex()}function lR(){return this.rgb().formatHex8()}function aR(){return $9(this).formatHsl()}function _9(){return this.rgb().formatRgb()}function Nn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?O9(t):n===3?new J(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fv.exec(e))?new J(t[1],t[2],t[3],1):(t=Lv.exec(e))?new J(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pv.exec(e))?pl(t[1],t[2],t[3],t[4]):(t=Iv.exec(e))?pl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gv.exec(e))?L9(t[1],t[2]/100,t[3]/100,1):(t=n9.exec(e))?L9(t[1],t[2]/100,t[3]/100,t[4]):vu.hasOwnProperty(e)?O9(vu[e]):e==="transparent"?new J(NaN,NaN,NaN,0):null}function O9(e){return new J(e>>16&255,e>>8&255,e&255,1)}function pl(e,t,n,s){return s<=0&&(e=t=n=NaN),new J(e,t,n,s)}function x9(e){return e instanceof On||(e=Nn(e)),e?(e=e.rgb(),new J(e.r,e.g,e.b,e.opacity)):new J}function gl(e,t,n,s){return arguments.length===1?x9(e):new J(e,t,n,s??1)}function J(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}Ra(J,gl,ml(On,{brighter(e){return e=e==null?Wi:Math.pow(Wi,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new J(Un(this.r),Un(this.g),Un(this.b),bl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k9,formatHex:k9,formatHex8:eR,formatRgb:z9,toString:z9}));function k9(){return`#${bn(this.r)}${bn(this.g)}${bn(this.b)}`}function eR(){return`#${bn(this.r)}${bn(this.g)}${bn(this.b)}${bn((isNaN(this.opacity)?1:this.opacity)*255)}`}function z9(){const e=bl(this.opacity);return`${e===1?"rgb(":"rgba("}${Un(this.r)}, ${Un(this.g)}, ${Un(this.b)}${e===1?")":`, ${e})`}`}function bl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Un(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bn(e){return e=Un(e),(e<16?"0":"")+e.toString(16)}function L9(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ke(e,t,n,s)}function $9(e){if(e instanceof Ke)return new Ke(e.h,e.s,e.l,e.opacity);if(e instanceof On||(e=Nn(e)),!e)return new Ke;if(e instanceof Ke)return e;e=e.rgb();var i=e.r/255,n=e.g/255,a=e.b/255,r=Math.min(i,n,a),s=Math.max(i,n,a),o=NaN,t=s-r,c=(s+r)/2;return t?(i===s?o=(n-a)/t+(n<a)*6:n===s?o=(a-i)/t+2:o=(i-n)/t+4,t/=c<.5?s+r:2-s-r,o*=60):t=c>0&&c<1?0:o,new Ke(o,t,c,e.opacity)}function IL(e,t,n,s){return arguments.length===1?$9(e):new Ke(e,t,n,s??1)}function Ke(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}Ra(Ke,IL,ml(On,{brighter(e){return e=e==null?Wi:Math.pow(Wi,e),new Ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,o=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*o,s=2*t-n;return new J(Wd(e>=240?e-240:e+120,s,n),Wd(e,s,n),Wd(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Ke(W9(this.h),xl(this.s),xl(this.l),bl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bl(this.opacity);return`${e===1?"hsl(":"hsla("}${W9(this.h)}, ${xl(this.s)*100}%, ${xl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W9(e){return e=(e||0)%360,e<0?e+360:e}function xl(e){return Math.max(0,Math.min(1,e||0))}function Wd(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}U9=Math.PI/180,K9=180/Math.PI,ia=18,Vd=.96422,Bd=1,Ld=.82521,Nd=4/29,cs=6/29,Dd=3*cs*cs,Y9=cs*cs*cs;function Q9(e){if(e instanceof yt)return new yt(e.l,e.a,e.b,e.opacity);if(e instanceof At)return yb(e);e instanceof J||(e=x9(e));var i,a,n=yd(e.r),t=yd(e.g),s=yd(e.b),o=Sd((.2225045*n+.7168786*t+.0606169*s)/Bd);return n===t&&t===s?i=a=o:(i=Sd((.4360747*n+.3850649*t+.1430804*s)/Vd),a=Sd((.0139322*n+.0971045*t+.7141733*s)/Ld)),new yt(116*o-16,500*(i-o),200*(o-a),e.opacity)}function fL(e,t,n,s){return arguments.length===1?Q9(e):new yt(e,t,n,s??1)}function yt(e,t,n,s){this.l=+e,this.a=+t,this.b=+n,this.opacity=+s}Ra(yt,fL,ml(On,{brighter(e){return new yt(this.l+ia*(e??1),this.a,this.b,this.opacity)},darker(e){return new yt(this.l-ia*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200,t=Vd*Cd(t),e=Bd*Cd(e),n=Ld*Cd(n);return new J(wd(3.1338561*t-1.6168667*e-.4906146*n),wd(-.9787684*t+1.9161415*e+.033454*n),wd(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Sd(e){return e>Y9?Math.pow(e,1/3):e/Dd+Nd}function Cd(e){return e>cs?e*e*e:Dd*(e-Nd)}function wd(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function yd(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $L(e){if(e instanceof At)return new At(e.h,e.c,e.l,e.opacity);if(e instanceof yt||(e=Q9(e)),e.a===0&&e.b===0)return new At(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*K9;return new At(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function gd(e,t,n,s){return arguments.length===1?$L(e):new At(e,t,n,s??1)}function At(e,t,n,s){this.h=+e,this.c=+t,this.l=+n,this.opacity=+s}function yb(e){if(isNaN(e.h))return new yt(e.l,0,0,e.opacity);var t=e.h*U9;return new yt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ra(At,gd,ml(On,{brighter(e){return new At(this.h,this.c,this.l+ia*(e??1),this.opacity)},darker(e){return new At(this.h,this.c,this.l-ia*(e??1),this.opacity)},rgb(){return yb(this).rgb()}}));function wb(e,t,n,s,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*s+a*o)/6}function dL(e){var t=e.length-1;return function(n){var s=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[s],i=e[s+1],a=s>0?e[s-1]:2*o-i,r=s<t-1?e[s+2]:2*i-o;return wb((n-s/t)*t,a,o,i,r)}}function rL(e){var t=e.length;return function(n){var s=Math.floor(((n%=1)<0?++n:n)*t),o=e[(s+t-1)%t],i=e[s%t],a=e[(s+1)%t],r=e[(s+2)%t];return wb((n-s/t)*t,o,i,a,r)}}$i=e=>()=>e;function Nb(e,t){return function(n){return e+n*t}}function sL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function nL(e,t){var n=t-e;return n?Nb(e,n>180||n<-180?n-360*Math.round(n/360):n):$i(isNaN(e)?t:e)}function qN(e){return(e=+e)===1?Ms:function(t,n){return n-t?sL(t,n,e):$i(isNaN(t)?n:t)}}function Ms(e,t){var n=t-e;return n?Nb(e,n):$i(isNaN(e)?t:e)}Pi=function e(t){var n=qN(t);function s(e,t){var s=n((e=gl(e)).r,(t=gl(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Ms(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return s.gamma=e,s}(1);function Wb(e){return function(t){var n,s,o=t.length,i=new Array(o),a=new Array(o),r=new Array(o);for(s=0;s<o;++s)n=gl(t[s]),i[s]=n.r||0,a[s]=n.g||0,r[s]=n.b||0;return i=e(i),a=e(a),r=e(r),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=r(e),n+""}}}$N=Wb(dL),DN=Wb(rL);function zN(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(n=0;n<o;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function FN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function AN(e,t){var n,s=t?t.length:0,o=e?Math.min(s,e.length):0,a=new Array(o),i=new Array(s);for(n=0;n<o;++n)a[n]=cd(e[n],t[n]);for(;n<s;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function CN(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function We(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wN(e,t){var n,s={},o={};(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?s[n]=cd(e[n],t[n]):o[n]=t[n];return function(e){for(n in s)o[n]=s[n](e);return o}}Yl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ia=new RegExp(Yl.source,"g");function yN(e){return function(){return e}}function bN(e){return function(t){return e(t)+""}}function Sj(e,t){var o,i,c,a=Yl.lastIndex=Ia.lastIndex=0,s=-1,n=[],r=[];for(e=e+"",t=t+"";(c=Yl.exec(e))&&(i=Ia.exec(t));)(o=i.index)>a&&(o=t.slice(a,o),n[s]?n[s]+=o:n[++s]=o),(c=c[0])===(i=i[0])?n[s]?n[s]+=i:n[++s]=i:(n[++s]=null,r.push({i:s,x:We(c,i)})),a=Ia.lastIndex;return a<t.length&&(o=t.slice(a),n[s]?n[s]+=o:n[++s]=o),n.length<2?r[0]?bN(r[0].x):yN(t):(t=r.length,function(e){for(var o,s=0;s<t;++s)n[(o=r[s]).i]=o.x(e);return n.join("")})}function cd(e,t){var s,n=typeof t;return t==null||n==="boolean"?$i(t):(n==="number"?We:n==="string"?(s=Nn(t))?(t=s,Pi):Sj:t instanceof Nn?Pi:t instanceof Date?CN:FN(t)?zN:Array.isArray(t)?AN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wN:We)(e,t)}function fN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}md=180/Math.PI,Hl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dj(e,t,n,s,o,i){var a,r,c;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(a=e*n+t*s)&&(n-=e*a,s-=t*a),(c=Math.sqrt(n*n+s*s))&&(n/=c,s/=c,a/=c),e*s<t*n&&(e=-e,t=-t,a=-a,r=-r),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*md,skewX:Math.atan(a)*md,scaleX:r,scaleY:c}}function hN(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hl:Dj(t.a,t.b,t.c,t.d,t.e,t.f)}function uN(e){return e==null?Hl:(Pl||(Pl=document.createElementNS("http://www.w3.org/2000/svg","g")),Pl.setAttribute("transform",e),(e=Pl.transform.baseVal.consolidate())?(e=e.matrix,Dj(e.a,e.b,e.c,e.d,e.e,e.f)):Hl)}function Vj(e,t,n,s){function o(e){return e.length?e.pop()+" ":""}function i(e,s,o,i,a,r){if(e!==o||s!==i){var c=a.push("translate(",null,t,null,n);r.push({i:c-4,x:We(e,o)},{i:c-2,x:We(s,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}function a(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,s)-2,x:We(e,t)})):t&&n.push(o(n)+"rotate("+t+s)}function r(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,s)-2,x:We(e,t)}):t&&n.push(o(n)+"skewX("+t+s)}function c(e,t,n,s,i,a){if(e!==n||t!==s){var r=i.push(o(i)+"scale(",null,",",null,")");a.push({i:r-4,x:We(e,n)},{i:r-2,x:We(t,s)})}else(n!==1||s!==1)&&i.push(o(i)+"scale("+n+","+s+")")}return function(t,n){var s=[],o=[];return t=e(t),n=e(n),i(t.translateX,t.translateY,n.translateX,n.translateY,s,o),a(t.rotate,n.rotate,s,o),r(t.skewX,n.skewX,s,o),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,s,o),t=n=null,function(e){for(var n,t=-1,i=o.length;++t<i;)s[(n=o[t]).i]=n.x(e);return s.join("")}}}qj=Vj(hN,"px, ","px)","deg)"),Yj=Vj(uN,", ",")",")");function Gj(e){return function(t,n){var s=e((t=gd(t)).h,(n=gd(n)).h),o=Ms(t.c,n.c),i=Ms(t.l,n.l),a=Ms(t.opacity,n.opacity);return function(e){return t.h=s(e),t.c=o(e),t.l=i(e),t.opacity=a(e),t+""}}}Xj=Gj(nL),nN=Gj(Ms),En=0,ro=0,co=0,Ud=1e3,ii=0,rn=0,si=0,go=typeof performance=="object"&&performance.now?performance:Date,Gd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function au(){return rn||(Gd(tN),rn=go.now()+si)}function tN(){rn=0}function dl(){this._call=this._time=this._next=null}dl.prototype=Fy.prototype={constructor:dl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?au():+n)+(t==null?0:+t),!this._next&&li!==this&&(li?li._next=this:Ol=this,li=this),this._call=e,this._time=n,Wu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wu())}};function Fy(e,t,n){var s=new dl;return s.restart(e,t,n),s}function FD(){au(),++En;for(var t,e=Ol;e;)(t=rn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--En}function Ty(){rn=(ii=go.now())+si,En=ro=0;try{FD()}finally{En=0,AD(),rn=0}}function SD(){var e=go.now(),t=e-ii;t>Ud&&(si-=t,ii=e)}function AD(){for(var t,n,e=Ol,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ol=n);li=t,Wu(s)}function Wu(e){if(En)return;ro&&(ro=clearTimeout(ro));var t=e-rn;t>24?(e<1/0&&(ro=setTimeout(Ty,e-go.now()-si)),co&&(co=clearInterval(co))):(co||(ii=go.now(),co=setInterval(SD,Ud)),En=1,Gd(Ty))}function Ny(e,t,n){var s=new dl;return t=t==null?0:+t,s.restart(n=>{s.stop(),e(n+t)},t,n),s}Ly=S8("start","end","cancel","interrupt"),x_=[],Zu=0,Ju=1,Gc=2,Io=3,n1=4,qc=5,Po=6;function Kc(e,t,n,s,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};xD(e,n,{name:t,index:s,group:o,on:Ly,tween:x_,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Zu})}function i1(e,t){var n=Ye(e,t);if(n.state>Zu)throw new Error("too late; already scheduled");return n}function xt(e,t){var n=Ye(e,t);if(n.state>Io)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xD(e,t,n){var o,s=e.__transition;s[t]=n,n.timer=Fy(c,0,n.time);function c(e){n.state=Ju,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(c){var l,d,u,h;if(n.state!==Ju)return a();for(d in s){if(l=s[d],l.name!==n.name)continue;if(l.state===Io)return Ny(i);l.state===n1?(l.state=Po,l.timer.stop(),l.on.call("interrupt",e,e.__data__,l.index,l.group),delete s[d]):+d<t&&(l.state=Po,l.timer.stop(),l.on.call("cancel",e,e.__data__,l.index,l.group),delete s[d])}if(Ny(function(){n.state===Io&&(n.state=n1,n.timer.restart(r,n.delay,n.time),r(c))}),n.state=Gc,n.on.call("start",e,e.__data__,n.index,n.group),n.state!==Gc)return;n.state=Io,o=new Array(h=n.tween.length);for(d=0,u=-1;d<h;++d)(l=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=l);o.length=u+1}function r(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=qc,1),s=-1,r=o.length;++s<r;)o[s].call(e,i);n.state===qc&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Po,n.timer.stop(),delete s[t];for(var o in s)return;delete e.__transition}}function OD(e,t){var n,o,i,s=e.__transition,a=!0;if(!s)return;t=t==null?null:t+"";for(o in s){if((n=s[o]).name!==t){a=!1;continue}i=n.state>Gc&&n.state<qc,n.state=Po,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[o]}a&&delete e.__transition}function wD(e){return this.each(function(){OD(this,e)})}function _D(e,t){var n,s;return function(){var o,r,i=xt(this,e),a=i.tween;if(a!==s){n=s=a;for(o=0,r=n.length;o<r;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function yD(e,t,n){var s,o;if(typeof n!="function")throw new Error;return function(){if(a=xt(this,e),r=a.tween,r!==o){s=(o=r).slice();for(var a,r,c={name:t,value:n},i=0,l=s.length;i<l;++i)if(s[i].name===t){s[i]=c;break}i===l&&s.push(c)}a.tween=s}}function jD(e,t){if(n=this._id,e+="",arguments.length<2){s=Ye(this.node(),n).tween;for(var n,s,i,o=0,a=s.length;o<a;++o)if((i=s[o]).name===e)return i.value;return null}return this.each((t==null?_D:yD)(n,e,t))}function u1(e,t,n){var s=e._id;return e.each(function(){var e=xt(this,s);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ye(e,s).value[t]}}function C_(e,t){var n;return(typeof t=="number"?We:t instanceof Nn?Pi:(n=Nn(t))?(t=n,Pi):Sj)(e,t)}function pD(e){return function(){this.removeAttribute(e)}}function fD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uD(e,t,n){var s,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===s?o:o=t(s=a,n)}}function dD(e,t,n){var s,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===s?o:o=t(s=a,n)}}function cD(e,t,n){var s,o,i;return function(){var a,r,c=n(this);return c==null?void this.removeAttribute(e):(a=this.getAttribute(e),r=c+"",a===r?null:a===s&&r===o?i:(o=r,i=t(s=a,c)))}}function oD(e,t,n){var s,o,i;return function(){var a,r,c=n(this);return c==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),r=c+"",a===r?null:a===s&&r===o?i:(o=r,i=t(s=a,c)))}}function sD(e,t){var n=Qr(e),s=n==="transform"?Yj:C_;return this.attrTween(e,typeof t=="function"?(n.local?oD:cD)(n,s,u1(this,"attr."+e,t)):t==null?(n.local?fD:pD)(n):(n.local?dD:uD)(n,s,t))}function tD(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Jz(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Hz(e,t){var n,s;function o(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&Jz(e,o)),n}return o._value=t,o}function Pz(e,t){var n,s;function o(){var o=t.apply(this,arguments);return o!==s&&(n=(s=o)&&tD(e,o)),n}return o._value=t,o}function Rz(e,t){var s,n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return s=Qr(e),this.tween(n,(s.local?Hz:Pz)(s,t))}function Az(e,t){return function(){i1(this,e).delay=+t.apply(this,arguments)}}function kz(e,t){return t=+t,function(){i1(this,e).delay=t}}function Ez(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Az:kz)(t,e)):Ye(this.node(),t).delay}function yz(e,t){return function(){xt(this,e).duration=+t.apply(this,arguments)}}function lz(e,t){return t=+t,function(){xt(this,e).duration=t}}function tz(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yz:lz)(t,e)):Ye(this.node(),t).duration}function JT(e,t){if(typeof t!="function")throw new Error;return function(){xt(this,e).ease=t}}function ZT(e){var t=this._id;return arguments.length?this.each(JT(t,e)):Ye(this.node(),t).ease}function QT(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;xt(this,e).ease=n}}function XT(e){if(typeof e!="function")throw new Error;return this.each(QT(this._id,e))}function GT(e){typeof e!="function"&&(e=Nf(e));for(var i=this._groups,a=i.length,r=new Array(a),t=0;t<a;++t)for(var n,o=i[t],c=o.length,l=r[t]=[],s=0;s<c;++s)(n=o[s])&&e.call(n,n.__data__,s,o)&&l.push(n);return new Et(r,this._parents,this._name,this._id)}function YT(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,l=e._groups,o=i.length,h=l.length,d=Math.min(o,h),s=new Array(o),t=0;t<d;++t)for(var c,r=i[t],u=l[t],a=r.length,m=s[t]=new Array(a),n=0;n<a;++n)(c=r[n]||u[n])&&(m[n]=c);for(;t<o;++t)s[t]=i[t];return new Et(s,this._parents,this._name,this._id)}function qT(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function KT(e,t,n){var s,o,i=qT(t)?i1:xt;return function(){var a=i(this,e),r=a.on;r!==s&&(o=(s=r).copy()).on(t,n),a.on=o}}function UT(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(KT(n,e,t))}function WT(e){return function(){var n,t=this.parentNode;for(n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $T(){return this.on("end.remove",WT(this._id))}function VT(e){i=this._name,s=this._id,typeof e!="function"&&(e=R4(e));for(var s,i,l=this._groups,d=l.length,u=new Array(d),o=0;o<d;++o)for(var n,c,a=l[o],h=a.length,r=u[o]=new Array(h),t=0;t<h;++t)(n=a[t])&&(c=e.call(n,n.__data__,t,a))&&("__data__"in n&&(c.__data__=n.__data__),r[t]=c,Kc(r[t],i,s,t,r,Ye(n,s)));return new Et(u,this._parents,i,s)}function BT(e){a=this._name,n=this._id,typeof e!="function"&&(e=zf(e));for(var n,a,h=this._groups,f=h.length,u=[],d=[],r=0;r<f;++r)for(var t,c=h[r],m=c.length,i=0;i<m;++i)if(t=c[i]){for(var l,o=e.call(t,t.__data__,i,c),p=Ye(t,n),s=0,g=o.length;s<g;++s)(l=o[s])&&Kc(l,a,n,s,o,p);u.push(o),d.push(t)}return new Et(u,d,a,n)}CO=oo.prototype.constructor;function LT(){return new CO(this._groups,this._parents)}function NT(e,t){var n,s,o;return function(){var i=As(this,e),a=(this.style.removeProperty(e),As(this,e));return i===a?null:i===n&&a===s?o:o=t(n=i,s=a)}}function RO(e){return function(){this.style.removeProperty(e)}}function kT(e,t,n){var s,o,i=n+"";return function(){var a=As(this,e);return a===i?null:a===s?o:o=t(s=a,n)}}function wT(e,t,n){var s,o,i;return function(){var c=As(this,e),a=n(this),r=a+"";return a==null&&(r=a=(this.style.removeProperty(e),As(this,e))),c===r?null:c===s&&r===o?i:(o=r,i=t(s=c,a))}}function _T(e,t){var n,s,o,a,i="style."+t,r="end."+i;return function(){var c=xt(this,e),l=c.on,d=c.value[i]==null?a||(a=RO(t)):void 0;(l!==n||o!==d)&&(s=(n=l).copy()).on(r,o=d),c.on=s}}function jT(e,t,n){var s=(e+="")==="transform"?qj:C_;return t==null?this.styleTween(e,NT(e,s)).on("end.style."+e,RO(e)):typeof t=="function"?this.styleTween(e,wT(e,s,u1(this,"style."+e,t))).each(_T(this._id,e)):this.styleTween(e,kT(e,s,t),n).on("end.style."+e,null)}function vT(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function dT(e,t,n){var s,o;function i(){var i=t.apply(this,arguments);return i!==o&&(s=(o=i)&&vT(e,i,n)),s}return i._value=t,i}function aT(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,dT(e,t,n??""))}function iT(e){return function(){this.textContent=e}}function nT(e){return function(){var t=e(this);this.textContent=t??""}}function YF(e){return this.tween("text",typeof e=="function"?nT(u1(this,"text",e)):iT(e==null?"":e+""))}function qF(e){return function(t){this.textContent=e.call(this,t)}}function KF(e){var t,n;function s(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&qF(s)),t}return s._value=e,s}function UF(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,KF(e))}function $F(){for(var e,a=this._name,c=this._id,r=Kx(),n=this._groups,l=n.length,s=0;s<l;++s)for(var i,o=n[s],d=o.length,t=0;t<d;++t)(i=o[t])&&(e=Ye(i,c),Kc(i,a,r,t,o,{time:e.time+e.delay+e.duration,delay:0,duration:e.duration,ease:e.ease}));return new Et(n,this._parents,a,r)}function HF(){var e,n,t=this,o=t._id,s=t.size();return new Promise(function(i,a){var r={value:a},c={value:function(){--s===0&&i()}};t.each(function(){var t=xt(this,o),s=t.on;s!==n&&(e=(n=s).copy(),e._.cancel.push(r),e._.interrupt.push(r),e._.end.push(c)),t.on=e}),s===0&&i()})}$x=0;function Et(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function NF(e){return oo().transition(e)}function Kx(){return++$x}tt=oo.prototype,Et.prototype=NF.prototype={constructor:Et,select:VT,selectAll:BT,selectChild:tt.selectChild,selectChildren:tt.selectChildren,filter:GT,merge:YT,selection:LT,transition:$F,call:tt.call,nodes:tt.nodes,node:tt.node,size:tt.size,empty:tt.empty,each:tt.each,on:UT,attr:sD,attrTween:Rz,style:jT,styleTween:aT,text:YF,textTween:UF,remove:$T,tween:jD,delay:Ez,duration:tz,ease:ZT,easeVarying:XT,end:HF,[Symbol.iterator]:tt[Symbol.iterator]};function EF(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}OC={time:null,delay:0,duration:250,ease:EF};function _F(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function bF(e){e instanceof Et?(t=e._id,e=e._name):(t=Kx(),(r=OC).time=au(),e=e==null?null:e+"");for(var t,r,s=this._groups,c=s.length,o=0;o<c;++o)for(var a,i=s[o],l=i.length,n=0;n<l;++n)(a=i[n])&&Kc(a,e,t,n,i,r||_F(a,t));return new Et(s,this._parents,e,t)}oo.prototype.interrupt=wD,oo.prototype.transition=bF;var{abs:e$,max:t$,min:n$}=Math,e,t,n,s,o,a,r,l,u,h,m,f,p,g,v,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,N,L,R,P,B,V,$,W,U,K,q,Y,G,X,Q,Z,Va,I3,$a,U3,K3,Q3,th,ya,w3,Dh,qa,Vh,qh,Gh,tm,lm,pm,Te,Bt,J2,gm,EV,xV,xm,U2,Pm,$m,Wm,Ai,Rr,Hr,Ei,x0,g8,S8,qr,Q4,f6,M6,hl,oo,So,Wi,yn,To,He,yv,Fv,Lv,Pv,Iv,Gv,n9,vu,U9,K9,ia,Vd,Bd,Ld,Nd,cs,Dd,Y9,$i,Pi,$N,DN,Yl,Ia,md,Hl,Pl,qj,Yj,Xj,nN,En,ro,co,Ud,Ol,li,ii,rn,si,go,Gd,Ly,x_,Zu,Ju,Gc,Io,n1,qc,Po,CO,$x,tt,OC,JA,LM,NM,DM,Cr,xr,Jt,ME,jr,CM,xM,Ok,Fk,Rk,G2,h3,A3,cl,XA,aS,m3,s3,ur,hr,Sa,TS,mt,ge,lt,ct,yr,Q0,wr,Yn,zS,us,DS,W0,NS,Ns,LS,N0,RS,qt,PS,Nr,HS,S0,IS,ds,Xi,IA,HA,os,PA,LA,VS,$S,WS,US,qS,YS,GS,tc,Li,Bk,Ik,Qn,Hk,Pk,XS,QS,ZS,JS,tM,iM,aM,uo,rM,y4,cM,Ze,lM,It,dM,z1,UE,BE,$s,Xl,IF,VF,WF,ad,sn,mx,Vl,Pe,ts,le,xs,Lo,Qi,zT,I_,Ys,Aa,P_,R_,N_,y_,j_,b_,Ft,r_,a_,i_,o_,s_,Da,Mu,eo,Ca,wa,pa,Nu,Ql,fa,n_,Xe,e_,Bu,Xy,zs,Yy,Uu,qy,Ky,Wy,$y,Vy,By,Iy,s1,Ry,Ey,Ee,Cy,_e,l1,xy,py,bs,oy,ny,ty,Kj,Uj,$j,_1,St,me,zj,Mj,kj,pj,$n,uj,Tc,D1,Zb,Qb,qb,tn,Ub,_b,M9,A9,m9,l9,i9,Xv,Uv,Yt,$v,Ks,Ev,gv,cv,ev,X7,q7,K7,U7,V7,N7,b7,j4,f7,wn,Bo,c7,a7,Z5,N5,F5,y5,Ko,b5,wo,a5,n5,Zo,Xg,Wg,Pg,Eg,oi,xg,ri,i0,a0,r0,bg,fg,cg,Ur,Oi,Fn,w0,we,Pn,Or,Se,x6,gn,Bn,Uf,Bf,a2,r2,Df,Tf,Cf,jf,vf,g2,gf,ff,mf,uf,sf,O2,tf,Bi,W8,cn,H8,ar,z2,R8,N8,T8,E8,B2,t8,Qm,qm,Bm,$t,Lm,Ki,Tm,Mm,km,e3,n3,o3,om,Xh,Wh,Bh,Hh,Rh,ga,ba,Fh,ah,ja,Qs,C3,k3,xa,q3,Ua,jt,ys,P3,H3,ka,$3,W3,F3,M3,Y3,G3,X3,zn,J3,E3,O3,nh,_3,oh,ih,Dn,rh,ch,lh,dh,uh,hh,mh,fh,ph,gh,vh,bh,jh,yh,_h,wh,Oh,xh,Ch,Eh,kh,Ah,Sh,Mh,zh,va,p3,Is,Ph,Ya,Ih,Kn,u3,$h,ua,Uh,Kh,l3,c3,Qh,Zh,Jh,em,Qa,ue,am,rm,cm,dm,Qt,mm,fm,Za,vm,jm,ym,_m,wm,Om,t3,sa,Am,vs,Gi,Dm,Ja,q2,Hm,tr,rs,Um,Km,or,Ym,Gm,Xm,$2,Zm,Jm,V2,n8,s8,o8,i8,a8,r8,c8,l8,u8,m8,p8,v8,j8,_8,w8,x8,ss,A8,M8,P2,R2,z8,L2,N2,D2,F2,S2,V8,$8,A2,U8,rr,Y8,G8,X8,C2,J8,x2,cr,rf,cf,lr,df,dr,hf,Xn,b2,pf,v2,p2,f2,m2,yf,_f,wf,Of,xf,hn,fn,kf,Af,Mf,Ff,zi,br,Lf,Rf,Hf,c2,i2,$f,s2,Kf,qf,Yf,Gf,Xf,Qf,Zf,Jf,e6,t6,n6,s6,o6,i6,a6,r6,c6,l6,d6,h6,t2,p6,v6,J0,j6,y6,_6,O6,Z0,C6,E6,k6,A6,S6,X0,F6,T6,z6,D6,Y0,L6,R6,P6,K0,I6,B6,V6,$6,W6,U6,K6,q6,Y6,G6,X6,Q6,Z6,J6,ep,tp,V0,ip,rp,cp,lp,up,hp,fp,gp,I0,yp,P0,Op,xp,R0,Ap,Fr,Fp,Tp,zp,Dp,Np,Lp,Rp,Pp,Hp,Ip,Bp,Vp,$p,D0,Pr,qp,Yp,Gp,Xp,Zp,Jp,k0,b0,di,sg,h0,ag,d0,lg,dg,hg,l0,gg,c0,yg,wg,n0,J4,kg,Ag,Mg,Z4,Dg,Lg,Dt,Ig,Bg,Gr,G4,Kg,qg,ni,Gg,q4,K4,Zg,Jg,Cn,Jr,V4,ic,c5,d5,h5,f5,Xo,P4,w5,st,E5,k5,S5,M5,rc,T4,R5,H5,I5,B5,$5,K5,Y5,X5,wt,J5,e7,t7,n7,_n,E4,Vo,fc,mn,p7,vc,xo,_c,w7,x7,E7,A7,M7,T7,z7,D7,p4,L7,R7,P7,H7,I7,B7,wc,Oc,W7,h4,u4,d4,Y7,l4,c4,Q7,Z7,J7,r4,nv,ov,av,rv,fo,lv,dv,hv,fv,pv,an,bv,lo,_v,wv,xv,Cv,Zs,kv,Av,Sv,Mv,Tv,zv,Dv,Nv,Si,Hv,Bv,Vv,Xt,Z1,Qv,e9,xb,Cb,Eb,kb,Ab,Sb,Mb,Fb,Mc,RN,LN,xj,zc,Fj,Nj,x1,Pj,Bj,Dc,Nc,Lc,Ha,Hc,Uc,zy,Dy,Py,Hy,ps,pt,Qc,je,Uy,Yu,Ku,De,Gy,ca,Qy,Zy,Jy,Iu,t_,Ht,te,Na,Pa,c_,l_,d_,u_,h_,m_,f_,p_,g_,v_,ft,Nt,bu,__,w_,S_,M_,F_,T_,z_,D_,ee,nt,V_,$_,W_,Q_,Z_,J_,ew,ru,iw,lw,gw,vw,yw,Ow,xw,Cw,iu,ou,Fw,zw,yl,Hw,Iw,Bw,Ww,Uw,Yw,Gw,Zw,Jw,kt,la,eu,Jd,ra,wl,aO,Yd,cO,lO,dO,qd,Kd,Id,Rd,is,Td,JO,ex,tx,nx,sx,_d,ax,rx,Zi,zl,bd,ux,Dl,fx,ql,gx,vx,sd,jx,wx,Ex,Jl,g4,ed,zx,Dx,nd,Lx,Ul,Ix,Wl,Vx,en,Mi,qx,L3,Xx,Qx,Zx,Jx,eC,tC,nC,sC,oC,iC,aC,rC,cC,lC,dC,uC,ki,Rn,ie,pC,Ln,no,wi,jC,yC,_C,jd,xd,Ed,Sl,io,zd,Pd,MC,Hd,TC,zC,Me,vi,LC,vo,PC,Zd,IC,su,VC,ti,WC,lu,KC,du,YC,mu,XC,fu,ZC,gu,eE,ei,nE,Au,oE,Su,Qo,rE,cE,lE,dE,uE,_o,mE,Lu,Yo,Hu,ol,jE,yE,sl,Wo,tl,el,Ne,pe,Le,xe,ze,vt,Ot,Ro,zE,se,Co,a1,pn,VE,WE,b1,KE,qE,YE,GE,XE,QE,N1,tk,nk,sk,ok,ik,K1,rk,ck,lk,jo,uk,bo,fe,on,ae,ci,ui,pi,jk,yk,w4,wk,mc,xk,Ck,Ek,kk,Ak,Sk,Mk,ji,Tk,zk,Ce,zt,ne,Fe,Re,qs,oc,sc,Hi,Ii,Wk,Uk,Kk,qk,Yk,Gk,Xk,Qk,Zk,Jk,eA,tA,nA,sA,oA,iA,aA,rA,cA,Y4,dA,uA,hA,mA,fA,pA,Pt,vA,bA,jA,yA,_A,X4,Yr,e0,CA,EA,kA,AA,SA,MA,FA,TA,zA,DA,NA,o0,RA,dt,Be,Yi,na,M0,Dr,B0,Ar,Ls,da,GA,y2,_2,be,k2,tS,nS,oS,T2,ir,W2,cS,lS,sr,nr,La,d3,yo,ko,vS,Js,Wa,z3,bS,gS,fS,mS,hS,uS,dS,D3,eS,N3,QA,Ba,YA,qA,KA,UA,WA,$A,VA,BA,T3,r3,OA,wA,Mn,K2,lA,$k,Vk,Ta,Lk,Nk,Dk,w2,pr,gr,Ea,Oa,Us,_k,bk,vk,gk,pk,mk,hk,dk,ak,ZE,$E,IE,HE,PE,RE,LE,ce,ke,G0,FE,ha,SE,$0,T0,Fs,oa,kE,F0,A0,xE,_E,ws,bE,vE,pE,fE,hE,iE,sE,tE,JC,QC,GC,UC,$C,BC,RC,NC,DC,FC,AC,kC,C0,EC,xC,O0,ls,wC,bC,vC,y0,gC,mC,hC,Gx,Yx,j0,Ux,Wx,qi,Bx,Hx,Tx,Fx,Mx,f0,Sx,u0,Xr,U4,$4,Ax,kx,Cx,xx,Ox,yx,ec,px,hx,Ts,nc,cx,ix,ox,B4,ZO,QO,GO,YO,qO,KO,Qe,UO,bt,WO,Ws,VO,BO,IO,HO,D4,PO,z4,LO,NO,MO,cc,F4,SO,AO,EO,M4,uc,un,An,at,yi,hc,bi,pc,ot,gc,fi,mi,xO,hi,wO,yO,jO,bO,gO,fO,uO,bc,tO,eO,Qw,Xw,qw,Kw,$w,Vw,Pw,Rw,b4,Lw,Nw,Tw,Mw,Sw,ho,v4,Zl,Aw,Ew,ww,_w,jw,bw,pw,fw,f4,m4,it,X_,s4,G_,t4,X1,q_,K_,U_,P1,B_,k1,f1,H_,A_,Rc,Pc,k_,E_,qe,Bc,Vc,$c,Ao,Mo,Wc,Zc,$o,xn,$u,al,Oo,rl,ll,My,Sy,Ay,ky,wy,_y,jy,by,vy,gy,fy,my,hy,dy,ly,cy,ry,iy,sy,ey,Jj,Zj,xu,Md,Qj,Fl,vd,pd,xi,Tn,Rj,Lj,fd,Rl,dd,Tj,In,Aj,rd,Cj,td,Oj,id,_j,yj,Kl,hj,Wt,dj,lj,$l,aj,ld,ud,ij,oj,sj,nj,tj,ej,Xb,Gb,Bl,Yb,Kb,Ri,Il,$b,Vb,Bb,Ib,Hb,Pb,Rb,Lb,gt,Tt,Es,Db,zb,Ll,Tb,Ob,Nl,oe,_s,Kt,Xs,jb,bb,vb,gb,pb,fb,mb,hb,ub,db,lb,rb,ab,ib,ob,sb,nb,eb,Z9,Al,X9,Fd,$d,Xd,tu,nu,V9,B9,I9,H9,P9,R9,qn,N9,D9,vl,F9,S9,Hs,Ut,Ae,Ma,pu,y9,fl,j9,b9,p9,f9,to,c9,r9,a9,o9,s9,Sn,t9,Jv,so,Yv,Wv,ju,yu,Rv,wu,Ou,jv,Eu,ku,ul,mv,Fu,Fa,Tu,uv,zu,Du,sv,tv,G7,$7,Wn,Ru,Ge,Pu,F7,S7,k7,C7,O7,_7,y7,j7,v7,g7,m7,h7,u7,d7,il,ma,Vu,l7,r7,Zn,es,nl,i7,Jc,qu,Gu,ta,Xu,o7,s7,Q5,G5,q5,Qu,Xc,e1,U5,W5,t1,V5,ea,Yc,P5,L5,ms,o1,Ic,c1,d1,h1,m1,y1,C5,x5,O1,Ui,ks,C1,Vi,Ds,E1,_5,j5,Ni,g5,p5,m5,Di,l5,r5,nn,A1,Rs,i5,o5,s5,L1,Sc,t5,e5,V1,Qg,kc,Yg,Ug,$g,Vg,Hg,et,Ec,Rg,Ng,Q1,zg,Tg,Fg,Sg,Cg,Og,_g,jg,vg,pg,mg,J1,e4,ug,Oe,Cc,ig,ng,eg,Qp,n4,Kp,Ci,xc,Up,Wp,Mp,Sp,kp,Ep,kn,Cp,wp,o4,_p,jp,bp,vp,pp,mp,dp,ap,i4,a4,op,yc,np,_4,O4,x4,C4,k4,A4,Ho,Mt,w6,b6,No,g6,dc,m6,u6,lc,Vf,Pf,Gn,ac,Do,zo,Sf,Ef,bf,lf,af,nf,ef,Z8,N4,Q8,L4,Uo,K8,H4,I4,I8,P8,W4,L8,D8,F8,Zr,t0,k8,mo,O8,ut,ai,Zt,b8,ve,Wr,p0,f8,g0,v0,d8,e8,Br,_0,hs,Ir,Lr,Er,_r,o2,u2,h2,Vm,j2,E2,Rm,Nm,zm,Fm,Sm,Em,M2,H2,I2,er,X2,bm,Q2,Z2,i3,aa,f3,hm,um,ln,im,sm,g3,Yh,v3,b3,Lh,Nh,y3,Th,sh,x3,eh,Z3,_a,Ka,S3,V3,B3,de,R3;function CE(e){return[+e[0],+e[1]]}function RM(e){return[CE(e[0]),CE(e[1])]}LM={name:"x",handles:["w","e"].map(U0),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},NM={name:"y",handles:["n","s"].map(U0),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},DM={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(U0),input:function(e){return e==null?null:RM(e)},output:function(e){return e}};function U0(e){return{type:e}}Cr=Math.PI,xr=2*Cr,Jt=1e-6,ME=xr-Jt;function NE(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function SM(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NE;const n=10**t;return function(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}jr=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?NE:SM(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,s){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,t,n,s,o,i){this._append`C${+e},${+t},${+n},${+s},${this._x1=+o},${this._y1=+i}`}arcTo(e,t,n,s,o){if(e=+e,t=+t,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,u=this._y1,r=n-e,c=s-t,i=d-e,a=u-t,l=i*i+a*a;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(l>Jt)if(!(Math.abs(a*r-c*i)>Jt)||!o)this._append`L${this._x1=e},${this._y1=t}`;else{let h=n-d,m=s-u,p=r*r+c*c,y=h*h+m*m,g=Math.sqrt(p),v=Math.sqrt(l),b=o*Math.tan((Cr-Math.acos((p+l-y)/(2*g*v)))/2),f=b/v,j=b/g;Math.abs(f-1)>Jt&&this._append`L${e+f*i},${t+f*a}`,this._append`A${o},${o},0,0,${+(a*h>i*m)},${this._x1=e+j*r},${this._y1=t+j*c}`}}arc(e,t,n,s,o,i){if(e=+e,t=+t,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(s),u=n*Math.sin(s),r=e+d,c=t+u,l=1^i,a=i?s-o:o-s;if(this._x1===null?this._append`M${r},${c}`:(Math.abs(this._x1-r)>Jt||Math.abs(this._y1-c)>Jt)&&this._append`L${r},${c}`,!n)return;a<0&&(a=a%xr+xr),a>ME?this._append`A${n},${n},0,1,${l},${e-d},${t-u}A${n},${n},0,1,${l},${this._x1=r},${this._y1=c}`:a>Jt&&this._append`A${n},${n},0,${+(a>=Cr)},${l},${this._x1=e+n*Math.cos(o)},${this._y1=t+n*Math.sin(o)}`}rect(e,t,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}};function AM(){return new jr}AM.prototype=jr.prototype;function kM(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function EM(e,t){return fetch(e,t).then(kM)}function l2(e){return(t,n)=>EM(t,n).then(t=>(new DOMParser).parseFromString(t,e))}CM=l2("application/xml"),xM=l2("text/html"),Ok=l2("image/svg+xml");function oM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vr(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,n=e.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+e.slice(s+1)]}function Gs(e){return e=vr(Math.abs(e)),e?e[1]:NaN}function sM(e,t){return function(n,s){for(var i=n.length,r=[],c=0,o=e[0],a=0;i>0&&o>0;){if(a+o+1>s&&(o=Math.max(1,s-a)),r.push(n.substring(i-=o,i+o)),(a+=o+1)>s)break;o=e[c=(c+1)%e.length]}return r.reverse().join(t)}}function nM(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}Fk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fr(e){if(!(t=Fk.exec(e)))throw new Error("invalid format: "+e);var t;return new d2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fr.prototype=d2.prototype;function d2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}d2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eM(e){out:for(var s,o=e.length,t=1,n=-1;t<o;++t)switch(e[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+e[t])break out;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}function KS(e,t){if(o=vr(e,t),!o)return e+"";var o,s=o[0],a=o[1],n=a-(Rk=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=s.length;return n===i?s:n>i?s+new Array(n-i+1).join("0"):n>0?s.slice(0,n)+"."+s.slice(n):"0."+new Array(1-n).join("0")+vr(e,Math.max(0,t+n-1))[0]}function gA(e,t){if(o=vr(e,t),!o)return e+"";var o,n=o[0],s=o[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}G2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:oM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gA(e*100,t),r:gA,s:KS,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xA(e){return e}h3=Array.prototype.map,A3=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function BS(e){var t=e.grouping===void 0||e.thousands===void 0?xA:sM(h3.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?xA:nM(h3.call(e.numerals,String)),r=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function n(e){e=fr(e);var b,y,_,w,g=e.fill,v=e.align,d=e.sign,m=e.symbol,h=e.zero,f=e.width,p=e.comma,u=e.precision,j=e.trim,n=e.type;n==="n"?(p=!0,n="g"):G2[n]||(u===void 0&&(u=12),j=!0,n="g"),(h||g==="0"&&v==="=")&&(h=!0,g="0",v="="),y=m==="$"?s:m==="#"&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",_=m==="$"?o:/[%p]/.test(n)?r:"",b=G2[n],w=/[defgprs%]/.test(n),u=u===void 0?6:/[gprs]/.test(n)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u));function O(e){var o,m,O,x,C,E,r=y,s=_;if(n==="c")s=b(e)+s,e="";else if(e=+e,O=e<0||1/e<0,e=isNaN(e)?l:b(Math.abs(e),u),j&&(e=eM(e)),O&&+e===0&&d!=="+"&&(O=!1),r=(O?d==="("?d:c:d==="-"||d==="("?"":d)+r,s=(n==="s"?A3[8+Rk/3]:"")+s+(O&&d==="("?")":""),w)for(m=-1,E=e.length;++m<E;)if(C=e.charCodeAt(m),48>C||C>57){s=(C===46?i+e.slice(m+1):e.slice(m))+s,e=e.slice(0,m);break}switch(p&&!h&&(e=t(e,1/0)),x=r.length+e.length+s.length,o=x<f?new Array(f-x+1).join(g):"",p&&h&&(e=t(o+e,o.length?f-s.length:1/0),o=""),v){case"<":e=r+e+s+o;break;case"=":e=r+o+e+s;break;case"^":e=o.slice(0,x=o.length>>1)+r+e+s+o.slice(x);break;default:e=o+r+e+s;break}return a(e)}return O.toString=function(){return e+""},O}function d(e,t){var o=n((e=fr(e),e.type="f",e)),s=Math.max(-8,Math.min(8,Math.floor(Gs(t)/3)))*3,i=Math.pow(10,-s),a=A3[8+s/3];return function(e){return o(i*e)+a}}return{format:n,formatPrefix:d}}hL({thousands:",",grouping:[3],currency:["$",""]});function hL(e){return cl=BS(e),XA=cl.format,aS=cl.formatPrefix,cl}function nz(e){return Math.max(0,-Gs(Math.abs(e)))}function _S(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gs(t)/3)))*3-Gs(Math.abs(e)))}function wS(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gs(t)-Gs(e))+1}function j3(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}m3=Symbol("implicit");function pS(){var t=new U2,n=[],s=[],o=m3;function e(e){let i=t.get(e);if(i===void 0){if(o!==m3)return o;t.set(e,i=n.push(e)-1)}return s[i%s.length]}return e.domain=function(s){if(!arguments.length)return n.slice();n=[],t=new U2;for(const e of s){if(t.has(e))continue;t.set(e,n.push(e)-1)}return e},e.range=function(t){return arguments.length?(s=Array.from(t),e):s.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return pS(n,s).unknown(o)},j3.apply(e,arguments),e}function OS(e){return function(){return e}}function xS(e){return+e}s3=[0,1];function ao(e){return e}function Y2(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:OS(isNaN(t)?NaN:.5)}function CS(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function ES(e,t,n){var s=e[0],i=e[1],o=t[0],a=t[1];return i<s?(s=Y2(i,s),o=n(a,o)):(s=Y2(s,i),o=n(o,a)),function(e){return o(s(e))}}function kS(e,t,n){var o=Math.min(e.length,t.length)-1,i=new Array(o),a=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)i[s]=Y2(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=xm(e,t,1,o)-1;return a[n](i[n](t))}}function rS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function AS(){var a,r,c,l,d,u,t=s3,n=s3,i=cd,s=ao;function o(){var o=Math.min(t.length,n.length);return s!==ao&&(s=CS(t[0],t[o-1])),c=o>2?kS:ES,l=d=null,e}function e(e){return e==null||isNaN(e=+e)?r:(l||(l=c(t.map(a),n,i)))(a(s(e)))}return e.invert=function(e){return s(u((d||(d=c(n,t.map(a),We)))(e)))},e.domain=function(e){return arguments.length?(t=Array.from(e,xS),o()):t.slice()},e.range=function(e){return arguments.length?(n=Array.from(e),o()):n.slice()},e.rangeRound=function(e){return n=Array.from(e),i=fN,o()},e.clamp=function(e){return arguments.length?(s=!!e||ao,o()):s!==ao},e.interpolate=function(e){return arguments.length?(i=e,o()):i},e.unknown=function(t){return arguments.length?(r=t,e):r},function(e,t){return a=e,u=t,o()}}function iS(){return AS()(ao,ao)}function SS(e,t,n,s){var o,a,i=e2(e,t,n);switch(s=fr(s??",f"),s.type){case"s":return a=Math.max(Math.abs(e),Math.abs(t)),s.precision==null&&!isNaN(o=_S(i,a))&&(s.precision=o),aS(s,a);case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=wS(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=nz(i))&&(s.precision=o-(s.type==="%")*2);break}}return XA(s)}function MS(e){var t=e.domain;return e.ticks=function(e){var n=t();return aV(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var s=t();return SS(s[0],s[s.length-1],e??10,n)},e.nice=function(n){n==null&&(n=10);var s,l,a=t(),r=0,c=a.length-1,o=a[r],i=a[c],d=10;for(i<o&&(s=o,o=i,i=s,s=r,r=c,c=s);d-- >0;){if(s=n2(o,i,n),s===l)return a[r]=o,a[c]=i,t(a);if(s>0)o=Math.floor(o/s)*s,i=Math.ceil(i/s)*s;else if(s<0)o=Math.ceil(o*s)/s,i=Math.floor(i*s)/s;else break;l=s}return e},e}function ZA(){var e=iS();return e.copy=function(){return rS(e,ZA())},j3.apply(e,arguments),MS(e)}function FS(e,t){e=e.slice();var a,n=0,s=e.length-1,o=e[n],i=e[s];return i<o&&(a=n,n=s,s=a,a=o,o=i,i=a),e[n]=t.floor(o),e[s]=t.ceil(i),e}ur=new Date,hr=new Date;function I(e,t,n,s){function o(t){return e(t=arguments.length===0?new Date:new Date(+t)),t}return o.floor=t=>(e(t=new Date(+t)),t),o.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),o.round=e=>{const t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=(e,n)=>(t(e=new Date(+e),n==null?1:Math.floor(n)),e),o.range=(n,s,i)=>{const a=[];if(n=o.ceil(n),i=i==null?1:Math.floor(i),!(n<s)||!(i>0))return a;let r;do a.push(r=new Date(+n)),t(n,i),e(n);while(r<n&&n<s)return a},o.filter=n=>I(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,s)=>{if(e>=e)if(s<0)for(;++s<=0;)for(;t(e,-1),!n(e););else for(;--s>=0;)for(;t(e,1),!n(e););}),n&&(o.count=(t,s)=>(ur.setTime(+t),hr.setTime(+s),e(ur),e(hr),Math.floor(n(ur,hr))),o.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?o.filter(s?t=>s(t)%e===0:t=>o.count(0,t)%e===0):o)),o}Sa=I(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e),Sa.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?I(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Sa),TS=Sa.range,mt=1e3,ge=mt*60,lt=ge*60,ct=lt*24,yr=ct*7,Q0=ct*30,wr=ct*365,Yn=I(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mt)},(e,t)=>(t-e)/mt,e=>e.getUTCSeconds()),zS=Yn.range,us=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mt)},(e,t)=>{e.setTime(+e+t*ge)},(e,t)=>(t-e)/ge,e=>e.getMinutes()),DS=us.range,W0=I(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ge)},(e,t)=>(t-e)/ge,e=>e.getUTCMinutes()),NS=W0.range,Ns=I(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mt-e.getMinutes()*ge)},(e,t)=>{e.setTime(+e+t*lt)},(e,t)=>(t-e)/lt,e=>e.getHours()),LS=Ns.range,N0=I(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*lt)},(e,t)=>(t-e)/lt,e=>e.getUTCHours()),RS=N0.range,qt=I(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ge)/ct,e=>e.getDate()-1),PS=qt.range,Nr=I(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ct,e=>e.getUTCDate()-1),HS=Nr.range,S0=I(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ct,e=>Math.floor(e/ct)),IS=S0.range;function jn(e){return I(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ge)/yr)}ds=jn(0),Xi=jn(1),IA=jn(2),HA=jn(3),os=jn(4),PA=jn(5),LA=jn(6),VS=ds.range,$S=Xi.range,WS=IA.range,US=HA.range,qS=os.range,YS=PA.range,GS=LA.range;function ns(e){return I(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/yr)}tc=ns(0),Li=ns(1),Bk=ns(2),Ik=ns(3),Qn=ns(4),Hk=ns(5),Pk=ns(6),XS=tc.range,QS=Li.range,ZS=Bk.range,JS=Ik.range,tM=Qn.range,iM=Hk.range,aM=Pk.range,uo=I(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),rM=uo.range,y4=I(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),cM=y4.range,Ze=I(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()),Ze.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),lM=Ze.range,It=I(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear()),It.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:I(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),dM=It.range;function fk(e,t,n,s,o,i){const a=[[Yn,1,mt],[Yn,5,5*mt],[Yn,15,15*mt],[Yn,30,30*mt],[i,1,ge],[i,5,5*ge],[i,15,15*ge],[i,30,30*ge],[o,1,lt],[o,3,3*lt],[o,6,6*lt],[o,12,12*lt],[s,1,ct],[s,2,2*ct],[n,1,yr],[t,1,Q0],[t,3,3*Q0],[e,1,wr]];function c(e,t,n){const s=t<e;s&&([e,t]=[t,e]);const o=n&&typeof n.range=="function"?n:r(e,t,n),i=o?o.range(e,+t+1):[];return s?i.reverse():i}function r(t,n,s){const i=Math.abs(n-t)/s,o=a3(([,,e])=>e).right(a,i);if(o===a.length)return e.every(e2(t/wr,n/wr,s));if(o===0)return Sa.every(Math.max(e2(t,n,s),1));const[r,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return r.every(c)}return[c,r]}var[o$,s$]=fk(It,y4,tc,S0,N0,W0),[mM,fM]=fk(Ze,uo,ds,qt,Ns,us);function U1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function I1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jo(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function pM(e){var u=e.dateTime,h=e.date,d=e.time,r=e.periods,i=e.days,a=e.shortDays,o=e.months,c=e.shortMonths,x=Go(r),O=qo(r),w=Go(i),f=qo(i),y=Go(a),j=qo(a),S=Go(o),g=qo(o),v=Go(c),b=qo(c),n={a:z,A:D,b:N,B:L,c:null,d:gE,e:gE,f:nF,g:hF,G:fF,H:JM,I:eF,j:tF,L:aE,m:sF,M:oF,p:R,q:P,Q:Rx,s:Nx,S:iF,u:aF,U:rF,V:cF,w:lF,W:dF,x:null,X:null,y:uF,Y:mF,Z:pF,"%":Px},s={a:H,A:I,b:B,B:V,c:null,d:SC,e:SC,f:yF,g:DF,G:RF,H:gF,I:vF,j:jF,L:CC,m:wF,M:OF,p:$,q:W,Q:Rx,s:Nx,S:yS,u:CF,U:kF,V:AF,w:SF,W:FF,x:null,X:null,y:zF,Y:LF,Z:PF,"%":Px},_={a:E,A:k,b:A,B:p,c:M,d:AE,e:AE,f:KM,g:TE,G:DE,H:EE,I:EE,j:PM,L:$M,m:zM,M:HM,p:C,q:TM,Q:QM,s:ZM,S:BM,u:jM,U:yM,V:OM,w:bM,W:MM,x:F,X:T,y:TE,Y:DE,Z:FM,"%":YM};n.x=t(h,n),n.X=t(d,n),n.c=t(u,n),s.x=t(h,s),s.X=t(d,s),s.c=t(u,s);function t(e,t){return function(n){var o,r,c,i=[],s=-1,a=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)e.charCodeAt(s)===37&&(i.push(e.slice(a,s)),(r=z1[o=e.charAt(++s)])!=null?o=e.charAt(++s):r=o==="e"?" ":"0",(c=t[o])&&(o=c(n,r)),i.push(o),a=s+1);return i.push(e.slice(a,s)),i.join("")}}function m(e,t){return function(n){var o,i,s=Jo(1900,void 0,1),a=l(s,e,n+="",0);if(a!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(s.s*1e3+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+s.p*12),s.m===void 0&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(o=I1(Jo(s.y,0,1)),i=o.getUTCDay(),o=i>4||i===0?Li.ceil(o):Li(o),o=Nr.offset(o,(s.V-1)*7),s.y=o.getUTCFullYear(),s.m=o.getUTCMonth(),s.d=o.getUTCDate()+(s.w+6)%7):(o=U1(Jo(s.y,0,1)),i=o.getDay(),o=i>4||i===0?Xi.ceil(o):Xi(o),o=qt.offset(o,(s.V-1)*7),s.y=o.getFullYear(),s.m=o.getMonth(),s.d=o.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?I1(Jo(s.y,0,1)).getUTCDay():U1(Jo(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+s.W*7-(i+5)%7:s.w+s.U*7-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,I1(s)):U1(s)}}function l(e,t,n,s){for(var o,a,i=0,r=t.length,c=n.length;i<r;){if(s>=c)return-1;if(o=t.charCodeAt(i++),o===37){if(o=t.charAt(i++),a=_[o in z1?t.charAt(i++):o],!a||(s=a(e,n,s))<0)return-1}else if(o!=n.charCodeAt(s++))return-1}return s}function C(e,t,n){var s=x.exec(t.slice(n));return s?(e.p=O.get(s[0].toLowerCase()),n+s[0].length):-1}function E(e,t,n){var s=y.exec(t.slice(n));return s?(e.w=j.get(s[0].toLowerCase()),n+s[0].length):-1}function k(e,t,n){var s=w.exec(t.slice(n));return s?(e.w=f.get(s[0].toLowerCase()),n+s[0].length):-1}function A(e,t,n){var s=v.exec(t.slice(n));return s?(e.m=b.get(s[0].toLowerCase()),n+s[0].length):-1}function p(e,t,n){var s=S.exec(t.slice(n));return s?(e.m=g.get(s[0].toLowerCase()),n+s[0].length):-1}function M(e,t,n){return l(e,u,t,n)}function F(e,t,n){return l(e,h,t,n)}function T(e,t,n){return l(e,d,t,n)}function z(e){return a[e.getDay()]}function D(e){return i[e.getDay()]}function N(e){return c[e.getMonth()]}function L(e){return o[e.getMonth()]}function R(e){return r[+(e.getHours()>=12)]}function P(e){return 1+~~(e.getMonth()/3)}function H(e){return a[e.getUTCDay()]}function I(e){return i[e.getUTCDay()]}function B(e){return c[e.getUTCMonth()]}function V(e){return o[e.getUTCMonth()]}function $(e){return r[+(e.getUTCHours()>=12)]}function W(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var s=t(e+="",n);return s.toString=function(){return e},s},parse:function(e){var t=m(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",s);return n.toString=function(){return e},n},utcParse:function(e){var t=m(e+="",!0);return t.toString=function(){return e},t}}}z1={"-":"",_:" ",0:"0"},B=/^\s*\d+/,UE=/^%/,BE=/[\\^$*+?|[\]().{}]/g;function b(e,t,n){var o=e<0?"-":"",s=(o?-e:e)+"",i=s.length;return o+(i<n?new Array(n-i+1).join(t)+s:s)}function vM(e){return e.replace(BE,"\\$&")}function Go(e){return new RegExp("^(?:"+e.map(vM).join("|")+")","i")}function qo(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function bM(e,t,n){var s=B.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function jM(e,t,n){var s=B.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function yM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function OM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function MM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function DE(e,t,n){var s=B.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function TE(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function FM(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function TM(e,t,n){var s=B.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function zM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function AE(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function PM(e,t,n){var s=B.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function EE(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function HM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function BM(e,t,n){var s=B.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function $M(e,t,n){var s=B.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function KM(e,t,n){var s=B.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function YM(e,t,n){var s=UE.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function QM(e,t,n){var s=B.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function ZM(e,t,n){var s=B.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function gE(e,t){return b(e.getDate(),t,2)}function JM(e,t){return b(e.getHours(),t,2)}function eF(e,t){return b(e.getHours()%12||12,t,2)}function tF(e,t){return b(1+qt.count(Ze(e),e),t,3)}function aE(e,t){return b(e.getMilliseconds(),t,3)}function nF(e,t){return aE(e,t)+"000"}function sF(e,t){return b(e.getMonth()+1,t,2)}function oF(e,t){return b(e.getMinutes(),t,2)}function iF(e,t){return b(e.getSeconds(),t,2)}function aF(e){var t=e.getDay();return t===0?7:t}function rF(e,t){return b(ds.count(Ze(e)-1,e),t,2)}function qC(e){var t=e.getDay();return t>=4||t===0?os(e):os.ceil(e)}function cF(e,t){return e=qC(e),b(os.count(Ze(e),e)+(Ze(e).getDay()===4),t,2)}function lF(e){return e.getDay()}function dF(e,t){return b(Xi.count(Ze(e)-1,e),t,2)}function uF(e,t){return b(e.getFullYear()%100,t,2)}function hF(e,t){return e=qC(e),b(e.getFullYear()%100,t,2)}function mF(e,t){return b(e.getFullYear()%1e4,t,4)}function fF(e,t){var n=e.getDay();return e=n>=4||n===0?os(e):os.ceil(e),b(e.getFullYear()%1e4,t,4)}function pF(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+b(t/60|0,"0",2)+b(t%60,"0",2)}function SC(e,t){return b(e.getUTCDate(),t,2)}function gF(e,t){return b(e.getUTCHours(),t,2)}function vF(e,t){return b(e.getUTCHours()%12||12,t,2)}function jF(e,t){return b(1+Nr.count(It(e),e),t,3)}function CC(e,t){return b(e.getUTCMilliseconds(),t,3)}function yF(e,t){return CC(e,t)+"000"}function wF(e,t){return b(e.getUTCMonth()+1,t,2)}function OF(e,t){return b(e.getUTCMinutes(),t,2)}function yS(e,t){return b(e.getUTCSeconds(),t,2)}function CF(e){var t=e.getUTCDay();return t===0?7:t}function kF(e,t){return b(tc.count(It(e)-1,e),t,2)}function fC(e){var t=e.getUTCDay();return t>=4||t===0?Qn(e):Qn.ceil(e)}function AF(e,t){return e=fC(e),b(Qn.count(It(e),e)+(It(e).getUTCDay()===4),t,2)}function SF(e){return e.getUTCDay()}function FF(e,t){return b(Li.count(It(e)-1,e),t,2)}function zF(e,t){return b(e.getUTCFullYear()%100,t,2)}function DF(e,t){return e=fC(e),b(e.getUTCFullYear()%100,t,2)}function LF(e,t){return b(e.getUTCFullYear()%1e4,t,4)}function RF(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Qn(e):Qn.ceil(e),b(e.getUTCFullYear()%1e4,t,4)}function PF(){return"+0000"}function Px(){return"%"}function Rx(e){return+e}function Nx(e){return Math.floor(+e/1e3)}GF({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GF(e){return $s=pM(e),Xl=$s.format,IF=$s.parse,VF=$s.utcFormat,WF=$s.utcParse,$s}function JF(e){return new Date(e)}function tT(e){return e instanceof Date?+e:+new Date(+e)}function bx(e,t,n,s,o,i,a,r,c,l){var d=iS(),h=d.invert,u=d.domain,m=l(".%L"),f=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),j=l("%B"),y=l("%Y");function _(e){return(c(e)<e?m:r(e)<e?f:a(e)<e?p:i(e)<e?g:s(e)<e?o(e)<e?v:b:n(e)<e?j:y)(e)}return d.invert=function(e){return new Date(h(e))},d.domain=function(e){return arguments.length?u(Array.from(e,tT)):u().map(JF)},d.ticks=function(t){var n=u();return e(n[0],n[n.length-1],t??10)},d.tickFormat=function(e,t){return t==null?_:l(t)},d.nice=function(e){var n=u();return(!e||typeof e.range!="function")&&(e=t(n[0],n[n.length-1],e??10)),e?u(FS(n,e)):d},d.copy=function(){return rS(d,bx(e,t,n,s,o,i,a,r,c,l))},d}function sT(){return j3.apply(bx(mM,fM,Ze,uo,ds,qt,Ns,us,Yn,Xl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D(e){return function(){return e}}ad=Math.abs,Q=Math.atan2,sn=Math.cos,mx=Math.max,Vl=Math.min,Pe=Math.sin,ts=Math.sqrt,le=1e-12,xs=Math.PI,Lo=xs/2,Qi=2*xs;function oT(e){return e>1?0:e<-1?xs:Math.acos(e)}function dx(e){return e>=1?Lo:e<=-1?-Lo:Math.asin(e)}function lx(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new jr(t)}function rT(e){return e.innerRadius}function lT(e){return e.outerRadius}function fT(e){return e.startAngle}function ST(e){return e.endAngle}function MT(e){return e&&e.padAngle}function FT(e,t,n,s,o,i,a,r){var l=n-e,d=s-t,u=a-o,h=r-i,c=h*l-u*d;if(c*c<le)return;return c=(u*(t-i)-h*(e-o))/c,[e+c*l,t+c*d]}function Ml(e,t,n,s,o,i,a){var b=e-n,w=t-s,x=(a?i:-i)/ts(b*b+w*w),_=x*w,y=-x*b,j=e+_,p=t+y,g=n+_,v=s+y,C=(j+g)/2,O=(p+v)/2,c=g-j,r=v-p,d=c*c+r*r,f=o-i,l=j*v-g*p,h=(r<0?-1:1)*ts(mx(0,f*f*d-l*l)),m=(l*r-c*h)/d,u=(-l*c-r*h)/d,E=(l*r+c*h)/d,k=(-l*c+r*h)/d,A=m-C,S=u-O,M=E-C,F=k-O;return A*A+S*S>M*M+F*F&&(m=E,u=k),{cx:m,cy:u,x01:-_,y01:-y,x11:m*(o/f-1),y11:u*(o/f-1)}}function kd(){var n=rT,s=lT,r=D(0),o=null,i=fT,a=ST,c=MT,e=null,l=lx(t);function t(){var z,W,u=+n.apply(this,arguments),h=+s.apply(this,arguments),f=i.apply(this,arguments)-Lo,p=a.apply(this,arguments)-Lo,A=ad(p-f),m=p>f;if(e||(e=z=l()),h<u&&(W=h,h=u,u=W),h>le)if(A>Qi-le)e.moveTo(h*sn(f),h*Pe(f)),e.arc(0,0,h,f,p,!m),u>le&&(e.moveTo(u*sn(p),u*Pe(p)),e.arc(0,0,u,p,f,m));else{var t,d,C,E,k=f,w=p,x=f,O=p,N=A,L=A,$=c.apply(this,arguments)/2,R=$>le&&(o?+o.apply(this,arguments):ts(u*u+h*h)),j=Vl(ad(h-u)/2,+r.apply(this,arguments)),b=j,v=j;R>le&&(C=dx(R/u*Pe($)),E=dx(R/h*Pe($)),(N-=C*2)>le?(C*=m?1:-1,x+=C,O-=C):(N=0,x=O=(f+p)/2),(L-=E*2)>le?(E*=m?1:-1,k+=E,w-=E):(L=0,k=w=(f+p)/2));var _=h*sn(k),y=h*Pe(k),T=u*sn(O),F=u*Pe(O);if(j>le){var g,M=h*sn(w),S=h*Pe(w),P=u*sn(x),H=u*Pe(x);if(A<xs)if(g=FT(_,y,P,H,M,S,T,F)){var B=_-g[0],V=y-g[1],D=M-g[0],I=S-g[1],U=1/Pe(oT((B*D+V*I)/(ts(B*B+V*V)*ts(D*D+I*I)))/2),K=ts(g[0]*g[0]+g[1]*g[1]);b=Vl(j,(u-K)/(U-1)),v=Vl(j,(h-K)/(U+1))}else b=v=0}L>le?v>le?(t=Ml(P,H,_,y,h,v,m),d=Ml(M,S,T,F,h,v,m),e.moveTo(t.cx+t.x01,t.cy+t.y01),v<j?e.arc(t.cx,t.cy,v,Q(t.y01,t.x01),Q(d.y01,d.x01),!m):(e.arc(t.cx,t.cy,v,Q(t.y01,t.x01),Q(t.y11,t.x11),!m),e.arc(0,0,h,Q(t.cy+t.y11,t.cx+t.x11),Q(d.cy+d.y11,d.cx+d.x11),!m),e.arc(d.cx,d.cy,v,Q(d.y11,d.x11),Q(d.y01,d.x01),!m))):(e.moveTo(_,y),e.arc(0,0,h,k,w,!m)):e.moveTo(_,y),!(u>le)||!(N>le)?e.lineTo(T,F):b>le?(t=Ml(T,F,M,S,u,-b,m),d=Ml(_,y,P,H,u,-b,m),e.lineTo(t.cx+t.x01,t.cy+t.y01),b<j?e.arc(t.cx,t.cy,b,Q(t.y01,t.x01),Q(d.y01,d.x01),!m):(e.arc(t.cx,t.cy,b,Q(t.y01,t.x01),Q(t.y11,t.x11),!m),e.arc(0,0,u,Q(t.cy+t.y11,t.cx+t.x11),Q(d.cy+d.y11,d.cx+d.x11),m),e.arc(d.cx,d.cy,b,Q(d.y11,d.x11),Q(d.y01,d.x01),!m))):e.arc(0,0,u,O,x,m)}else e.moveTo(0,0);if(e.closePath(),z)return e=null,z+""||null}return t.centroid=function(){var e=(+n.apply(this,arguments)+ +s.apply(this,arguments))/2,t=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-xs/2;return[sn(t)*e,Pe(t)*e]},t.innerRadius=function(e){return arguments.length?(n=typeof e=="function"?e:D(+e),t):n},t.outerRadius=function(e){return arguments.length?(s=typeof e=="function"?e:D(+e),t):s},t.cornerRadius=function(e){return arguments.length?(r=typeof e=="function"?e:D(+e),t):r},t.padRadius=function(e){return arguments.length?(o=e==null?null:typeof e=="function"?e:D(+e),t):o},t.startAngle=function(e){return arguments.length?(i=typeof e=="function"?e:D(+e),t):i},t.endAngle=function(e){return arguments.length?(a=typeof e=="function"?e:D(+e),t):a},t.padAngle=function(e){return arguments.length?(c=typeof e=="function"?e:D(+e),t):c},t.context=function(n){return arguments.length?(e=n??null,t):e},t}zT=Array.prototype.slice;function zO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FO(e){this._context=e}FO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ye(e){return new FO(e)}function DT(e){return e[0]}function RT(e){return e[1]}function js(e,t){var a=D(!0),o=null,i=ye,s=null,r=lx(n);e=typeof e=="function"?e:e===void 0?DT:D(e),t=typeof t=="function"?t:t===void 0?RT:D(t);function n(n){var c,d,u,h=(n=zO(n)).length,l=!1;o==null&&(s=i(u=r()));for(c=0;c<=h;++c)!(c<h&&a(d=n[c],c,n))===l&&((l=!l)?s.lineStart():s.lineEnd()),l&&s.point(+e(d,c,n),+t(d,c,n));if(u)return s=null,u+""||null}return n.x=function(t){return arguments.length?(e=typeof t=="function"?t:D(+t),n):e},n.y=function(e){return arguments.length?(t=typeof e=="function"?e:D(+e),n):t},n.defined=function(e){return arguments.length?(a=typeof e=="function"?e:D(!!e),n):a},n.curve=function(e){return arguments.length?(i=e,o!=null&&(s=i(o)),n):i},n.context=function(e){return arguments.length?(e==null?o=s=null:s=i(o=e),n):o},n}function PT(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function IT(e){return e}function ez(){var s=IT,t=PT,n=null,o=D(0),i=D(Qi),a=D(0);function e(e){var r,l,h,f,j,c=(e=zO(e)).length,g=0,m=new Array(c),d=new Array(c),u=+o.apply(this,arguments),p=Math.min(Qi,Math.max(-Qi,i.apply(this,arguments)-u)),v=Math.min(Math.abs(p)/c,a.apply(this,arguments)),b=v*(p<0?-1:1);for(r=0;r<c;++r)(l=d[m[r]=r]=+s(e[r],r,e))>0&&(g+=l);t!=null?m.sort(function(e,n){return t(d[e],d[n])}):n!=null&&m.sort(function(t,s){return n(e[t],e[s])});for(r=0,j=g?(p-c*b)/g:0;r<c;++r,u=f)h=m[r],l=d[h],f=u+(l>0?l*j:0)+b,d[h]={data:e[h],index:r,value:l,startAngle:u,endAngle:f,padAngle:v};return d}return e.value=function(t){return arguments.length?(s=typeof t=="function"?t:D(+t),e):s},e.sortValues=function(s){return arguments.length?(t=s,n=null,e):t},e.sort=function(s){return arguments.length?(n=s,t=null,e):n},e.startAngle=function(t){return arguments.length?(o=typeof t=="function"?t:D(+t),e):o},e.endAngle=function(t){return arguments.length?(i=typeof t=="function"?t:D(+t),e):i},e.padAngle=function(t){return arguments.length?(a=typeof t=="function"?t:D(+t),e):a},e}function El(){}function Cl(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function OO(e){this._context=e}OO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cs(e){return new OO(e)}function vO(e){this._context=e}vO.prototype={areaStart:El,areaEnd:El,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Cl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function az(e){return new vO(e)}function pO(e){this._context=e}pO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Cl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rz(e){return new pO(e)}function hO(e){this._context=e}hO.prototype={areaStart:El,areaEnd:El,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cz(e){return new hO(e)}function rO(e){return e<0?-1:1}function iO(e,t,n){var s=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(s||o<0&&-0),a=(n-e._y1)/(o||s<0&&-0),r=(i*o+a*s)/(s+o);return(rO(i)+rO(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(r))||0}function oO(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Qd(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function _l(e){this._context=e}_l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qd(this,this._t0,oO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e===this._x1&&t===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Qd(this,oO(this,n=iO(this,e,t)),n);break;default:Qd(this,this._t0,n=iO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}};function sO(e){this._context=new nO(e)}(sO.prototype=Object.create(_l.prototype)).point=function(e,t){_l.prototype.point.call(this,t,e)};function nO(e){this._context=e}nO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,o,i){this._context.bezierCurveTo(t,e,s,n,i,o)}};function dz(e){return new _l(e)}function uz(e){return new sO(e)}function Dw(e){this._context=e}Dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t,s,i,a,e=this._x,n=this._y,o=e.length;if(o)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),o===2)this._context.lineTo(e[1],n[1]);else{i=kw(e),a=kw(n);for(t=0,s=1;s<o;++t,++s)this._context.bezierCurveTo(i[0][t],a[0][t],i[1][t],a[1][t],e[s],n[s])}(this._line||this._line!==0&&o===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kw(e){var t,a,n=e.length-1,s=new Array(n),o=new Array(n),i=new Array(n);s[0]=0,o[0]=2,i[0]=e[0]+2*e[1];for(t=1;t<n-1;++t)s[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];s[n-1]=2,o[n-1]=7,i[n-1]=8*e[n-1]+e[n];for(t=1;t<n;++t)a=s[t]/o[t-1],o[t]-=a,i[t]-=a*i[t-1];s[n-1]=i[n-1]/o[n-1];for(t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/o[t];o[n-1]=(e[n]+s[n-1])/2;for(t=0;t<n-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function Mz(e){return new Dw(e)}function jl(e,t){this._context=e,this._t=t}jl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Xz(e){return new jl(e,.5)}function eD(e){return new jl(e,0)}function iD(e){return new jl(e,1)}function Ps(e,t,n){this.k=e,this.x=t,this.y=n}Ps.prototype={constructor:Ps,scale:function(e){return e===1?this:new Ps(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ps(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},I_=new Ps(1,0,0),hD.prototype=Ps.prototype;function hD(e){for(;!e.__zoom;)if(!(e=e.parentNode))return I_;return e.__zoom}Ys=qa(pm(),1),Aa={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},s)=>{if(!t)return n*2.55;e/=360,t/=100,n/=100;const o=n<.5?n*(1+t):n+t-n*t,i=2*n-o;switch(s){case"r":return Aa.hue2rgb(i,o,e+1/3)*255;case"g":return Aa.hue2rgb(i,o,e)*255;case"b":return Aa.hue2rgb(i,o,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:n},s)=>{e/=255,t/=255,n/=255;const o=Math.max(e,t,n),i=Math.min(e,t,n),r=(o+i)/2;if(s==="l")return r*100;if(o===i)return 0;const a=o-i,c=r>.5?a/(2-o-i):a/(o+i);if(s==="s")return c*100;switch(o){case e:return((t-n)/a+(t<n?6:0))*60;case t:return((n-e)/a+2)*60;case n:return((e-t)/a+4)*60;default:return-1}}},P_=Aa,R_={clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},N_=R_,y_={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},j_=y_,b_={channel:P_,lang:N_,unit:j_},g=b_,Ft={};for(let e=0;e<=255;e++)Ft[e]=g.unit.dec2hex(e);G={ALL:0,RGB:1,HSL:2},r_=class{constructor(){this.type=G.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=G.ALL}is(e){return this.type===e}},a_=r_,i_=class{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new a_}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=G.ALL,this}_ensureHSL(){const e=this.data,{h:t,s:n,l:s}=e;t===void 0&&(e.h=g.channel.rgb2hsl(e,"h")),n===void 0&&(e.s=g.channel.rgb2hsl(e,"s")),s===void 0&&(e.l=g.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:n,b:s}=e;t===void 0&&(e.r=g.channel.hsl2rgb(e,"r")),n===void 0&&(e.g=g.channel.hsl2rgb(e,"g")),s===void 0&&(e.b=g.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return!this.type.is(G.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,t=e.g;return!this.type.is(G.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,t=e.b;return!this.type.is(G.HSL)&&t!==void 0?t:(this._ensureHSL(),g.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,t=e.h;return!this.type.is(G.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,t=e.s;return!this.type.is(G.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,t=e.l;return!this.type.is(G.RGB)&&t!==void 0?t:(this._ensureRGB(),g.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(G.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(G.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(G.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(G.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(G.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(G.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}},o_=i_,s_=new o_({r:0,g:0,b:0,a:0},"transparent"),Da=s_,Mu={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const r=e.match(Mu.re);if(!r)return;const c=r[1],t=parseInt(c,16),l=c.length,d=l%4===0,o=l>4,n=o?1:17,i=o?8:4,a=d?0:-1,s=o?255:15;return Da.set({r:(t>>i*(a+3)&s)*n,g:(t>>i*(a+2)&s)*n,b:(t>>i*(a+1)&s)*n,a:d?(t&s)*n/255:1},e)},stringify:e=>{const{r:t,g:n,b:s,a:o}=e;return o<1?`#${Ft[Math.round(t)]}${Ft[Math.round(n)]}${Ft[Math.round(s)]}${Ft[Math.round(o*255)]}`:`#${Ft[Math.round(t)]}${Ft[Math.round(n)]}${Ft[Math.round(s)]}`}},eo=Mu,Ca={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Ca.hueRe);if(t){const[,e,n]=t;switch(n){case"grad":return g.channel.clamp.h(parseFloat(e)*.9);case"rad":return g.channel.clamp.h(parseFloat(e)*180/Math.PI);case"turn":return g.channel.clamp.h(parseFloat(e)*360)}}return g.channel.clamp.h(parseFloat(e))},parse:e=>{const n=e.charCodeAt(0);if(n!==104&&n!==72)return;const s=e.match(Ca.re);if(!s)return;const[,o,i,a,t,r]=s;return Da.set({h:Ca._hue2deg(o),s:g.channel.clamp.s(parseFloat(i)),l:g.channel.clamp.l(parseFloat(a)),a:t?g.channel.clamp.a(r?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:e=>{const{h:t,s:n,l:s,a:o}=e;return o<1?`hsla(${g.lang.round(t)}, ${g.lang.round(n)}%, ${g.lang.round(s)}%, ${o})`:`hsl(${g.lang.round(t)}, ${g.lang.round(n)}%, ${g.lang.round(s)}%)`}},wa=Ca,pa={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=pa.colors[e];if(!t)return;return eo.parse(t)},stringify:e=>{const t=eo.stringify(e);for(const e in pa.colors)if(pa.colors[e]===t)return e}},Nu=pa,Ql={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const n=e.charCodeAt(0);if(n!==114&&n!==82)return;const s=e.match(Ql.re);if(!s)return;const[,o,r,i,c,a,l,t,d]=s;return Da.set({r:g.channel.clamp.r(r?parseFloat(o)*2.55:parseFloat(o)),g:g.channel.clamp.g(c?parseFloat(i)*2.55:parseFloat(i)),b:g.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:t?g.channel.clamp.a(d?parseFloat(t)/100:parseFloat(t)):1},e)},stringify:e=>{const{r:t,g:n,b:s,a:o}=e;return o<1?`rgba(${g.lang.round(t)}, ${g.lang.round(n)}, ${g.lang.round(s)}, ${g.lang.round(o)})`:`rgb(${g.lang.round(t)}, ${g.lang.round(n)}, ${g.lang.round(s)})`}},fa=Ql,n_={format:{keyword:Nu,hex:eo,rgb:fa,rgba:fa,hsl:wa,hsla:wa},parse:e=>{if(typeof e!="string")return e;const t=eo.parse(e)||fa.parse(e)||wa.parse(e)||Nu.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(G.HSL)||e.data.r===void 0?wa.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?fa.stringify(e):eo.stringify(e)},Xe=n_,e_=(e,t)=>{const n=Xe.parse(e);for(const e in t)n[e]=g.channel.clamp[e](t[e]);return Xe.stringify(n)},Bu=e_,Xy=(e,t,n=0,s=1)=>{if(typeof e!="number")return Bu(e,{a:t});const o=Da.set({r:g.channel.clamp.r(e),g:g.channel.clamp.g(t),b:g.channel.clamp.b(n),a:g.channel.clamp.a(s)});return Xe.stringify(o)},zs=Xy,Yy=(e,t,n)=>{const s=Xe.parse(e),o=s[t],i=g.channel.clamp[t](o+n);return o!==i&&(s[t]=i),Xe.stringify(s)},Uu=Yy,qy=(e,t)=>Uu(e,"l",t),u=qy,Ky=(e,t)=>Uu(e,"l",-t),m=Ky,Wy=(e,t)=>{const s=Xe.parse(e),n={};for(const e in t){if(!t[e])continue;n[e]=s[e]+t[e]}return Bu(e,n)},s=Wy,$y=(e,t,n=50)=>{const{r:u,g:p,b:d,a:l}=Xe.parse(e),{r:g,g:m,b:h,a:c}=Xe.parse(t),i=n/100,s=i*2-1,r=l-c,f=s*r===-1?s:(s+r)/(1+s*r),o=(f+1)/2,a=1-o,v=u*o+g*a,b=p*o+m*a,j=d*o+h*a,y=l*i+c*(1-i);return zs(v,b,j,y)},Vy=$y,By=(e,t=100)=>{const n=Xe.parse(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,Vy(n,e,t)},r=By,Iy=typeof global=="object"&&global&&global.Object===Object&&global,s1=Iy,Ry=typeof self=="object"&&self&&self.Object===Object&&self,Ey=s1||Ry||Function("return this")(),Ee=Ey,Cy=Ee.Symbol,_e=Cy,l1=Object.prototype,xy=l1.hasOwnProperty,py=l1.toString,bs=_e?_e.toStringTag:void 0;function GD(e){var t,n,s=xy.call(e,bs),o=e[bs];try{e[bs]=void 0,t=!0}catch{}return n=py.call(e),t&&(s?e[bs]=o:delete e[bs]),n}oy=GD,ny=Object.prototype,ty=ny.toString;function sN(e){return ty.call(e)}Kj=sN,Uj="[object Null]",$j="[object Undefined]",_1=_e?_e.toStringTag:void 0;function cN(e){return e==null?e===void 0?$j:Uj:_1&&_1 in Object(e)?oy(e):Kj(e)}St=cN;function dN(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}me=dN,zj="[object AsyncFunction]",Mj="[object Function]",kj="[object GeneratorFunction]",pj="[object Proxy]";function kN(e){if(!me(e))return!1;var t=St(e);return t==Mj||t==kj||t==zj||t==pj}$n=kN,uj=Ee["__core-js_shared__"],Tc=uj,D1=function(){var e=/[^.]+$/.exec(Tc&&Tc.keys&&Tc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function TN(e){return!!D1&&D1 in e}Zb=TN,Qb=Function.prototype,qb=Qb.toString;function UN(e){if(e!=null){try{return qb.call(e)}catch{}try{return e+""}catch{}}return""}tn=UN,Ub=/[\\^$.*+?()[\]{}|]/g,_b=/^\[object .+?Constructor\]$/,M9=Function.prototype,A9=Object.prototype,m9=M9.toString,l9=A9.hasOwnProperty,i9=RegExp("^"+m9.call(l9).replace(Ub,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vR(e){if(!me(e)||Zb(e))return!1;var t=$n(e)?i9:_b;return t.test(tn(e))}Xv=vR;function wR(e,t){return e?.[t]}Uv=wR;function OR(e,t){var n=Uv(e,t);return Xv(n)?n:void 0}Yt=OR,$v=Yt(Object,"create"),Ks=$v;function ER(){this.__data__=Ks?Ks(null):{},this.size=0}Ev=ER;function MR(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}gv=MR,cv="__lodash_hash_undefined__",ev=Object.prototype,X7=ev.hasOwnProperty;function WR(e){var n,t=this.__data__;return Ks?(n=t[e],n===cv?void 0:n):X7.call(t,e)?t[e]:void 0}q7=WR,K7=Object.prototype,U7=K7.hasOwnProperty;function UR(e){var t=this.__data__;return Ks?t[e]!==void 0:U7.call(t,e)}V7=UR,N7="__lodash_hash_undefined__";function nP(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ks&&t===void 0?N7:t,this}b7=nP;function Eo(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}Eo.prototype.clear=Ev,Eo.prototype.delete=gv,Eo.prototype.get=q7,Eo.prototype.has=V7,Eo.prototype.set=b7,j4=Eo;function iP(){this.__data__=[],this.size=0}f7=iP;function rP(e,t){return e===t||e!==e&&t!==t}wn=rP;function lP(e,t){for(var n=e.length;n--;)if(wn(e[n][0],t))return n;return-1}Bo=lP,c7=Array.prototype,a7=c7.splice;function SP(e){var s,t=this.__data__,n=Bo(t,e);return!(n<0)&&(s=t.length-1,n==s?t.pop():a7.call(t,n,1),--this.size,!0)}Z5=SP;function HP(e){var t=this.__data__,n=Bo(t,e);return n<0?void 0:t[n][1]}N5=HP;function ZP(e){return Bo(this.__data__,e)>-1}F5=ZP;function nH(e,t){var n=this.__data__,s=Bo(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}y5=nH;function Fo(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}Fo.prototype.clear=f7,Fo.prototype.delete=Z5,Fo.prototype.get=N5,Fo.prototype.has=F5,Fo.prototype.set=y5,Ko=Fo,b5=Yt(Ee,"Map"),wo=b5;function pH(){this.size=0,this.__data__={hash:new j4,map:new(wo||Ko),string:new j4}}a5=pH;function CH(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}n5=CH;function NH(e,t){var n=e.__data__;return n5(t)?n[typeof t=="string"?"string":"hash"]:n.map}Zo=NH;function RH(e){var t=Zo(this,e).delete(e);return this.size-=t?1:0,t}Xg=RH;function HH(e){return Zo(this,e).get(e)}Wg=HH;function VH(e){return Zo(this,e).has(e)}Pg=VH;function XH(e,t){var n=Zo(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}Eg=XH;function po(e){var t,n=-1,s=e==null?0:e.length;for(this.clear();++n<s;)t=e[n],this.set(t[0],t[1])}po.prototype.clear=a5,po.prototype.delete=Xg,po.prototype.get=Wg,po.prototype.has=Pg,po.prototype.set=Eg,oi=po,xg="Expected a function";function s0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(xg);var n=function(){var a,o=arguments,i=t?t.apply(this,o):o[0],s=n.cache;return s.has(i)?s.get(i):(a=e.apply(this,o),n.cache=s.set(i,a)||s,a)};return n.cache=new(s0.Cache||oi),n}s0.Cache=oi,ri=s0,i0="comm",a0="rule",r0="decl",bg="@import",fg="@keyframes",cg=Math.abs,Ur=String.fromCharCode;function og(e){return e.trim()}function m0(e,t,n){return e.replace(t,n)}function hI(e,t){return e.indexOf(t)}function gi(e,t){return e.charCodeAt(t)|0}function _i(e,t,n){return e.slice(t,n)}function dn(e){return e.length}function tg(e){return e.length}function Vr(e,t){return t.push(e),e}Oi=1,Fn=1,w0=0,we=0,T=0,Pn="";function E0(e,t,n,s,o,i,a){return{value:e,root:t,parent:n,type:s,props:o,children:i,line:Oi,column:Fn,length:a,return:""}}function mI(){return T}function jI(){return T=we>0?gi(Pn,--we):0,(Fn--,T===10)&&(Fn=1,Oi--),T}function Ve(){return T=we<w0?gi(Pn,we++):0,(Fn++,T===10)&&(Fn=1,Oi++),T}function Hn(){return gi(Pn,we)}function zr(){return we}function Tr(e,t){return _i(Pn,e,t)}function z0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yI(e){return Oi=Fn=1,w0=dn(Pn=e),we=0,[]}function _I(e){return Pn="",e}function L0(e){return og(Tr(we-1,H0(e===91?e+2:e===40?e+1:e)))}function xI(e){for(;T=Hn();)if(T<33)Ve();else break;return z0(e)>2||z0(T)>3?"":" "}function kI(e,t){for(;--t&&Ve();)if(T<48||T>102||T>57&&T<65||T>70&&T<97)break;return Tr(e,zr()+(t<6&&Hn()==32&&Ve()==32))}function H0(e){for(;Ve();)switch(T){case e:return we;case 34:case 39:e!==34&&e!==39&&H0(T);break;case 40:e===41&&H0(e);break;case 92:Ve();break}return we}function FI(e,t){for(;Ve();){if(e+T===47+10)break;if(e+T===42+42&&Hn()===47)break}return"/*"+Tr(t,we-1)+"*"+Ur(e===47?e:Ve())}function TI(e){for(;!z0(Hn());)Ve();return Tr(e,we)}function HI(e){return _I(Sr("",null,null,null,[""],e=yI(e),0,[0],e))}function Sr(e,t,n,s,o,i,a,r,c){for(var j=0,g=0,u=a,w=0,y=0,v=0,m=1,O=1,p=1,d=0,b="",_=o,f=i,h=s,l=b;O;)switch(v=d,d=Ve()){case 40:if(v!=108&&gi(l,u-1)==58){hI(l+=m0(L0(d),"&","&"),"&")!=-1&&(p=-1);break}case 34:case 39:case 91:l+=L0(d);break;case 9:case 10:case 13:case 32:l+=xI(v);break;case 92:l+=kI(zr()-1,7);continue;case 47:switch(Hn()){case 42:case 47:Vr(BI(FI(Ve(),zr()),t,n),c);break;default:l+="/"}break;case 123*m:r[j++]=dn(l)*p;case 125*m:case 59:case 0:switch(d){case 0:case 125:O=0;case 59+g:y>0&&dn(l)-u&&Vr(y>32?H6(l+";",s,n,u-1):H6(m0(l," ","")+";",s,n,u-2),c);break;case 59:l+=";";default:if(Vr(h=sp(l,t,n,j,g,o,r,b,_=[],f=[],u),i),d===123)if(g===0)Sr(l,t,h,h,_,i,u,r,f);else switch(w===99&&gi(l,3)===110?100:w){case 100:case 109:case 115:Sr(e,h,h,s&&Vr(sp(e,h,h,0,0,o,r,b,o,_=[],u),f),o,f,u,r,s?_:f);break;default:Sr(l,h,h,h,[""],f,0,r,f)}}j=g=y=0,m=p=1,b=l="",u=a;break;case 58:u=1+dn(l),y=v;default:if(m<1)if(d==123)--m;else if(d==125&&m++==0&&jI()==125)continue;switch(l+=Ur(d),d*m){case 38:p=g>0?1:(l+="",-1);break;case 44:r[j++]=(dn(l)-1)*p,p=1;break;case 64:Hn()===45&&(l+=L0(Ve())),w=Hn(),g=u=dn(b=l+=TI(zr())),d++;break;case 45:v===45&&dn(l)==2&&(m=0)}}return i}function sp(e,t,n,s,o,i,a,r,c,l,d){m=o-1,u=o===0?i:[""],p=tg(u);for(var u,m,p,f=0,g=0,j=0;f<s;++f)for(var h=0,v=_i(e,m+1,m=cg(g=a[f])),b=e;h<p;++h)(b=og(g>0?u[h]+" "+v:m0(v,/&\f/g,u[h])))&&(c[j++]=b);return E0(e,t,n,o===0?a0:r,c,l,d)}function BI(e,t,n){return E0(e,t,n,i0,Ur(mI()),_i(e,2,-2),0)}function H6(e,t,n,s){return E0(e,t,n,r0,_i(e,0,s),_i(e,s+1,-1),s)}function q0(e,t){for(var s="",o=tg(e),n=0;n<o;n++)s+=t(e[n],n,e,t)||"";return s}function $I(e,t,n,s){switch(e.type){case bg:case r0:return e.return=e.return||e.value;case i0:return"";case fg:return e.return=e.value+"{"+q0(e.children,s)+"}";case a0:e.value=e.props.join(",")}return dn(n=q0(e.children,s))?e.return=e.value+"{"+n+"}":""}Or={},w3(Or,{run:()=>pR,undo:()=>mR});function YI(e){return e!=null&&typeof e=="object"}Se=YI,x6="[object Symbol]";function QI(e){return typeof e=="symbol"||Se(e)&&St(e)==x6}gn=QI;function nB(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}Bn=nB,Uf=Array.isArray,k=Uf,Bf=1/0,a2=_e?_e.prototype:void 0,r2=a2?a2.toString:void 0;function If(e){if(typeof e=="string")return e;if(k(e))return Bn(e,If)+"";if(gn(e))return r2?r2.call(e):"";var t=e+"";return t=="0"&&1/e==-Bf?"-0":t}Df=If,Tf=/\s/;function mB(e){for(var t=e.length;t--&&Tf.test(e.charAt(t)););return t}Cf=mB,jf=/^\s+/;function fB(e){return e&&e.slice(0,Cf(e)+1).replace(jf,"")}vf=fB,g2=0/0,gf=/^[-+]0x[0-9a-f]+$/i,ff=/^0b[01]+$/i,mf=/^0o[0-7]+$/i,uf=parseInt;function pB(e){if(typeof e=="number")return e;if(gn(e))return g2;if(me(e)){var n,t=typeof e.valueOf=="function"?e.valueOf():e;e=me(t)?t+"":t}return typeof e!="string"?e===0?e:+e:(e=vf(e),n=ff.test(e),n||mf.test(e)?uf(e.slice(2),n?2:8):gf.test(e)?g2:+e)}sf=pB,O2=1/0,tf=17976931348623157e292;function _B(e){if(!e)return e===0?e:0;if(e=sf(e),e===O2||e===-O2){var t=e<0?-1:1;return t*tf}return e===e?e:0}Bi=_B;function xB(e){var t=Bi(e),n=t%1;return t===t?n?t-n:t:0}W8=xB;function EB(e){return e}cn=EB,H8=Yt(Ee,"WeakMap"),ar=H8,z2=Object.create,R8=function(){function e(){}return function(t){if(!me(t))return{};if(z2)return z2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),N8=R8;function FB(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}T8=FB;function TB(){}E8=TB;function LB(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}B2=LB,t8=800,Qm=16,qm=Date.now;function cV(e){var t=0,n=0;return function(){var s=qm(),o=Qm-(s-n);if(n=s,o>0){if(++t>=t8)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Bm=cV;function hV(e){return function(){return e}}$t=hV,Lm=function(){try{var e=Yt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ki=Lm,Tm=Ki?function(e,t){return Ki(e,"toString",{configurable:!0,enumerable:!1,value:$t(t),writable:!0})}:cn,Mm=Tm,km=Bm(Mm),e3=km;function wV(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e)===!1)break;return e}n3=wV;function kV(e,t,n,s){for(var i=e.length,o=n+(s?1:-1);s?o--:++o<i;)if(t(e[o],o,e))return o;return-1}o3=kV;function TV(e){return e!==e}om=TV;function PV(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}Xh=PV;function BV(e,t,n){return t===t?Xh(e,t,n):o3(e,om,n)}Wh=BV;function $V(e,t){var n=e==null?0:e.length;return!!n&&Wh(e,t,0)>-1}Bh=$V,Hh=9007199254740991,Rh=/^(?:0|[1-9]\d*)$/;function WV(e,t){var n=typeof e;return t=t??Hh,!!t&&(n=="number"||n!="symbol"&&Rh.test(e))&&e>-1&&e%1==0&&e<t}ga=WV;function UV(e,t,n){t=="__proto__"&&Ki?Ki(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}ba=UV,Fh=Object.prototype,ah=Fh.hasOwnProperty;function YV(e,t,n){var s=e[t];(!ah.call(e,t)||!wn(s,n)||n===void 0&&!(t in e))&&ba(e,t,n)}ja=YV;function GV(e,t,n,s){a=!n,n||(n={});for(var o,i,a,r=-1,c=t.length;++r<c;)o=t[r],i=s?s(n[o],e[o],o,n,e):void 0,i===void 0&&(i=e[o]),a?ba(n,o,i):ja(n,o,i);return n}Qs=GV,C3=Math.max;function XV(e,t,n){return t=C3(t===void 0?e.length-1:t,0),function(){for(var o,i=arguments,s=-1,a=C3(i.length-t,0),r=Array(a);++s<a;)r[s]=i[t+s];for(s=-1,o=Array(t+1);++s<t;)o[s]=i[s];return o[t]=n(r),T8(e,this,o)}}k3=XV;function ZV(e,t){return e3(k3(e,t,cn),e+"")}xa=ZV,q3=9007199254740991;function JV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=q3}Ua=JV;function IM(e){return e!=null&&Ua(e.length)&&!$n(e)}jt=IM;function MF(e,t,n){if(!me(n))return!1;var s=typeof t;return!!(s=="number"?jt(n)&&ga(t,n.length):s=="string"&&t in n)&&wn(n[t],e)}ys=MF;function uM(e){return xa(function(t,n){var a,i=-1,s=n.length,o=s>1?n[s-1]:void 0,r=s>2?n[2]:void 0,o=e.length>3&&typeof o=="function"?(s--,o):void 0;for(r&&ys(n[0],n[1],r)&&(o=s<3?void 0:o,s=1),t=Object(t);++i<s;)a=n[i],a&&e(t,a,i,o);return t})}P3=uM,H3=Object.prototype;function hM(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||H3;return e===n}ka=hM;function GM(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}$3=GM,W3="[object Arguments]";function XM(e){return Se(e)&&St(e)==W3}F3=XM,M3=Object.prototype,Y3=M3.hasOwnProperty,G3=M3.propertyIsEnumerable,X3=F3(function(){return arguments}())?F3:function(e){return Se(e)&&Y3.call(e,"callee")&&!G3.call(e,"callee")},zn=X3;function QV(){return!1}J3=QV,E3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,O3=E3&&typeof module=="object"&&module&&!module.nodeType&&module,nh=O3&&O3.exports===E3,_3=nh?Ee.Buffer:void 0,oh=_3?_3.isBuffer:void 0,ih=oh||J3,Dn=ih,rh="[object Arguments]",ch="[object Array]",lh="[object Boolean]",dh="[object Date]",uh="[object Error]",hh="[object Function]",mh="[object Map]",fh="[object Number]",ph="[object Object]",gh="[object RegExp]",vh="[object Set]",bh="[object String]",jh="[object WeakMap]",yh="[object ArrayBuffer]",_h="[object DataView]",wh="[object Float32Array]",Oh="[object Float64Array]",xh="[object Int8Array]",Ch="[object Int16Array]",Eh="[object Int32Array]",kh="[object Uint8Array]",Ah="[object Uint8ClampedArray]",Sh="[object Uint16Array]",Mh="[object Uint32Array]",y={},y[wh]=y[Oh]=y[xh]=y[Ch]=y[Eh]=y[kh]=y[Ah]=y[Sh]=y[Mh]=!0,y[rh]=y[ch]=y[yh]=y[lh]=y[_h]=y[dh]=y[uh]=y[hh]=y[mh]=y[fh]=y[ph]=y[gh]=y[vh]=y[bh]=y[jh]=!1;function qV(e){return Se(e)&&Ua(e.length)&&!!y[St(e)]}zh=qV;function KV(e){return function(t){return e(t)}}va=KV,p3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Is=p3&&typeof module=="object"&&module&&!module.nodeType&&module,Ph=Is&&Is.exports===p3,Ya=Ph&&s1.process,Ih=function(){try{var e=Is&&Is.require&&Is.require("util").types;return e||Ya&&Ya.binding&&Ya.binding("util")}catch{}}(),Kn=Ih,u3=Kn&&Kn.isTypedArray,$h=u3?va(u3):zh,ua=$h,Uh=Object.prototype,Kh=Uh.hasOwnProperty;function VV(e,t){var n,s=k(e),o=!s&&zn(e),i=!s&&!o&&Dn(e),r=!s&&!o&&!i&&ua(e),c=s||o||i||r,a=c?$3(e.length,String):[],l=a.length;for(n in e)(t||Kh.call(e,n))&&!(c&&(n=="length"||i&&(n=="offset"||n=="parent")||r&&(n=="buffer"||n=="byteLength"||n=="byteOffset")||ga(n,l)))&&a.push(n);return a}l3=VV;function IV(e,t){return function(n){return e(t(n))}}c3=IV,Qh=c3(Object.keys,Object),Zh=Qh,Jh=Object.prototype,em=Jh.hasOwnProperty;function HV(e){if(!ka(e))return Zh(e);var t,n=[];for(t in Object(e))em.call(e,t)&&t!="constructor"&&n.push(t);return n}Qa=HV;function LV(e){return jt(e)?l3(e):Qa(e)}ue=LV;function NV(e){var n,t=[];if(e!=null)for(n in Object(e))t.push(n);return t}am=NV,rm=Object.prototype,cm=rm.hasOwnProperty;function DV(e){if(!me(e))return am(e);var t,s=ka(e),n=[];for(t in e)t=="constructor"&&(s||!cm.call(e,t))||n.push(t);return n}dm=DV;function zV(e){return jt(e)?l3(e,!0):dm(e)}Qt=zV,mm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fm=/^\w*$/;function FV(e,t){if(k(e))return!1;var n=typeof e;return!!(n=="number"||n=="symbol"||n=="boolean"||e==null||gn(e))||fm.test(e)||!mm.test(e)||t!=null&&e in Object(t)}Za=FV,vm=500;function CV(e){var t=ri(e,function(e){return n.size===vm&&n.clear(),e}),n=t.cache;return t}jm=CV,ym=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_m=/\\(\\)?/g,wm=jm(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ym,function(e,n,s,o){t.push(s?o.replace(_m,"$1"):n||e)}),t}),Om=wm;function OV(e){return e==null?"":Df(e)}t3=OV;function vV(e,t){return k(e)?e:Za(e,t)?[e]:Om(t3(e))}sa=vV,Am=1/0;function gV(e){if(typeof e=="string"||gn(e))return e;var t=e+"";return t=="0"&&1/e==-Am?"-0":t}vs=gV;function pV(e,t){t=sa(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[vs(t[n++])];return n&&n==s?e:void 0}Gi=pV;function fV(e,t,n){var s=e==null?void 0:Gi(e,t);return s===void 0?n:s}Dm=fV;function mV(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}Ja=mV,q2=_e?_e.isConcatSpreadable:void 0;function dV(e){return k(e)||zn(e)||!!(q2&&e&&e[q2])}Hm=dV;function Im(e,t,n,s,o){var i,a=-1,r=e.length;for(n||(n=Hm),o||(o=[]);++a<r;)i=e[a],t>0&&n(i)?t>1?Im(i,t-1,n,s,o):Ja(o,i):s||(o[o.length]=i);return o}tr=Im;function lV(e){var t=e==null?0:e.length;return t?tr(e,1):[]}rs=lV;function rV(e){return e3(k3(e,void 0,rs),e+"")}Um=rV,Km=c3(Object.getPrototypeOf,Object),or=Km,Ym="[object Object]",Gm=Function.prototype,Xm=Object.prototype,$2=Gm.toString,Zm=Xm.hasOwnProperty,Jm=$2.call(Object);function XB(e){if(!Se(e)||St(e)!=Ym)return!1;var t,n=or(e);return n===null||(t=Zm.call(n,"constructor")&&n.constructor,typeof t=="function"&&t instanceof t&&$2.call(t)==Jm)}V2=XB,n8="\\ud800-\\udfff",s8="\\u0300-\\u036f",o8="\\ufe20-\\ufe2f",i8="\\u20d0-\\u20ff",a8=s8+o8+i8,r8="\\ufe0e\\ufe0f",c8="\\u200d",l8=RegExp("["+c8+n8+a8+r8+"]");function GB(e){return l8.test(e)}u8=GB;function qB(e,t,n,s){var o=-1,i=e==null?0:e.length;for(s&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}m8=qB;function KB(){this.__data__=new Ko,this.size=0}p8=KB;function $B(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}v8=$B;function VB(e){return this.__data__.get(e)}j8=VB;function BB(e){return this.__data__.has(e)}_8=BB,w8=200;function RB(e,t){var s,n=this.__data__;if(n instanceof Ko){if(s=n.__data__,!wo||s.length<w8-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new oi(s)}return n.set(e,t),this.size=n.size,this}x8=RB;function Os(e){var t=this.__data__=new Ko(e);this.size=t.size}Os.prototype.clear=p8,Os.prototype.delete=v8,Os.prototype.get=j8,Os.prototype.has=_8,Os.prototype.set=x8,ss=Os;function NB(e,t){return e&&Qs(t,ue(t),e)}A8=NB;function DB(e,t){return e&&Qs(t,Qt(t),e)}M8=DB,P2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R2=P2&&typeof module=="object"&&module&&!module.nodeType&&module,z8=R2&&R2.exports===P2,L2=z8?Ee.Buffer:void 0,N2=L2?L2.allocUnsafe:void 0;function MB(e,t){if(t)return e.slice();var n=e.length,s=N2?N2(n):new e.constructor(n);return e.copy(s),s}D2=MB;function AB(e,t){for(var s,n=-1,i=e==null?0:e.length,a=0,o=[];++n<i;)s=e[n],t(s,n,e)&&(o[a++]=s);return o}F2=AB;function kB(){return[]}S2=kB,V8=Object.prototype,$8=V8.propertyIsEnumerable,A2=Object.getOwnPropertySymbols,U8=A2?function(e){return e==null?[]:(e=Object(e),F2(A2(e),function(t){return $8.call(e,t)}))}:S2,rr=U8;function wB(e,t){return Qs(e,rr(e),t)}Y8=wB,G8=Object.getOwnPropertySymbols,X8=G8?function(e){for(var t=[];e;)Ja(t,rr(e)),e=or(e);return t}:S2,C2=X8;function jB(e,t){return Qs(e,C2(e),t)}J8=jB;function bB(e,t,n){var s=t(e);return k(e)?s:Ja(s,n(e))}x2=bB;function vB(e){return x2(e,ue,rr)}cr=vB;function gB(e){return x2(e,Qt,C2)}rf=gB,cf=Yt(Ee,"DataView"),lr=cf,df=Yt(Ee,"Promise"),dr=df,hf=Yt(Ee,"Set"),Xn=hf,b2="[object Map]",pf="[object Object]",v2="[object Promise]",p2="[object Set]",f2="[object WeakMap]",m2="[object DataView]",yf=tn(lr),_f=tn(wo),wf=tn(dr),Of=tn(Xn),xf=tn(ar),hn=St,(lr&&hn(new lr(new ArrayBuffer(1)))!=m2||wo&&hn(new wo)!=b2||dr&&hn(dr.resolve())!=v2||Xn&&hn(new Xn)!=p2||ar&&hn(new ar)!=f2)&&(hn=function(e){var t=St(e),n=t==pf?e.constructor:void 0,s=n?tn(n):"";if(s)switch(s){case yf:return m2;case _f:return b2;case wf:return v2;case Of:return p2;case xf:return f2}return t}),fn=hn,kf=Object.prototype,Af=kf.hasOwnProperty;function hB(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&Af.call(e,"index")&&(t.index=e.index,t.input=e.input),t}Mf=hB,Ff=Ee.Uint8Array,zi=Ff;function uB(e){var t=new e.constructor(e.byteLength);return new zi(t).set(new zi(e)),t}br=uB;function cB(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}Lf=cB,Rf=/\w*$/;function rB(e){var t=new e.constructor(e.source,Rf.exec(e));return t.lastIndex=e.lastIndex,t}Hf=rB,c2=_e?_e.prototype:void 0,i2=c2?c2.valueOf:void 0;function aB(e){return i2?Object(i2.call(e)):{}}$f=aB;function iB(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}s2=iB,Kf="[object Boolean]",qf="[object Date]",Yf="[object Map]",Gf="[object Number]",Xf="[object RegExp]",Qf="[object Set]",Zf="[object String]",Jf="[object Symbol]",e6="[object ArrayBuffer]",t6="[object DataView]",n6="[object Float32Array]",s6="[object Float64Array]",o6="[object Int8Array]",i6="[object Int16Array]",a6="[object Int32Array]",r6="[object Uint8Array]",c6="[object Uint8ClampedArray]",l6="[object Uint16Array]",d6="[object Uint32Array]";function oB(e,t,n){var s=e.constructor;switch(t){case e6:return br(e);case Kf:case qf:return new s(+e);case t6:return Lf(e,n);case n6:case s6:case o6:case i6:case a6:case r6:case c6:case l6:case d6:return s2(e,n);case Yf:return new s;case Gf:case Zf:return new s(e);case Xf:return Hf(e);case Qf:return new s;case Jf:return $f(e)}}h6=oB;function sB(e){return typeof e.constructor=="function"&&!ka(e)?N8(or(e)):{}}t2=sB,p6="[object Map]";function tB(e){return Se(e)&&fn(e)==p6}v6=tB,J0=Kn&&Kn.isMap,j6=J0?va(J0):v6,y6=j6,_6="[object Set]";function XI(e){return Se(e)&&fn(e)==_6}O6=XI,Z0=Kn&&Kn.isSet,C6=Z0?va(Z0):O6,E6=C6,k6=1,A6=2,S6=4,X0="[object Arguments]",F6="[object Array]",T6="[object Boolean]",z6="[object Date]",D6="[object Error]",Y0="[object Function]",L6="[object GeneratorFunction]",R6="[object Map]",P6="[object Number]",K0="[object Object]",I6="[object RegExp]",B6="[object Set]",V6="[object String]",$6="[object Symbol]",W6="[object WeakMap]",U6="[object ArrayBuffer]",K6="[object DataView]",q6="[object Float32Array]",Y6="[object Float64Array]",G6="[object Int8Array]",X6="[object Int16Array]",Q6="[object Int32Array]",Z6="[object Uint8Array]",J6="[object Uint8ClampedArray]",ep="[object Uint16Array]",tp="[object Uint32Array]",j={},j[X0]=j[F6]=j[U6]=j[K6]=j[T6]=j[z6]=j[q6]=j[Y6]=j[G6]=j[X6]=j[Q6]=j[R6]=j[P6]=j[K0]=j[I6]=j[B6]=j[V6]=j[$6]=j[Z6]=j[J6]=j[ep]=j[tp]=!0,j[D6]=j[Y0]=j[W6]=!1;function kr(e,t,n,s,o,i){var a,r,d,u,h,m,f,c=t&k6,l=t&A6,p=t&S6;if(n&&(a=o?n(e,s,o,i):n(e)),a!==void 0)return a;if(!me(e))return e;if(d=k(e),d){if(a=Mf(e),!c)return B2(e,a)}else{if(r=fn(e),u=r==Y0||r==L6,Dn(e))return D2(e,c);if(r==K0||r==X0||u&&!o){if(a=l||u?{}:t2(e),!c)return l?J8(e,M8(a,e)):Y8(e,A8(a,e))}else{if(!j[r])return o?e:{};a=h6(e,r,c)}}return i||(i=new ss),h=i.get(e),h||(i.set(e,a),E6(e)?e.forEach(function(s){a.add(kr(s,t,n,s,e,i))}):y6(e)&&e.forEach(function(s,o){a.set(o,kr(s,t,n,o,e,i))}),f=p?l?rf:cr:l?Qt:ue,m=d?void 0:f(e),n3(m||e,function(s,o){m&&(o=s,s=e[o]),ja(a,o,kr(s,t,n,o,e,i))}),a)}V0=kr,ip=4;function LI(e){return V0(e,ip)}rp=LI,cp=1,lp=4;function NI(e){return V0(e,cp|lp)}up=NI,hp="__lodash_hash_undefined__";function DI(e){return this.__data__.set(e,hp),this}fp=DI;function zI(e){return this.__data__.has(e)}gp=zI;function Mr(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new oi;++t<n;)this.add(e[t])}Mr.prototype.add=Mr.prototype.push=fp,Mr.prototype.has=gp,I0=Mr;function MI(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}yp=MI;function SI(e,t){return e.has(t)}P0=SI,Op=1,xp=2;function EI(e,t,n,s,o,i){var a,c,u,h,f,p=n&Op,d=e.length,g=t.length;if(d!=g&&!(p&&g>d))return!1;if(u=i.get(e),h=i.get(t),u&&h)return u==t&&h==e;var r=-1,l=!0,m=n&xp?new I0:void 0;for(i.set(e,t),i.set(t,e);++r<d;){if(a=e[r],c=t[r],s&&(f=p?s(c,a,r,t,e,i):s(a,c,r,e,t,i)),f!==void 0){if(f)continue;l=!1;break}if(m){if(!yp(t,function(e,t){if(!P0(m,t)&&(a===e||o(a,e,n,s,i)))return m.push(t)})){l=!1;break}}else if(a!==c&&!o(a,c,n,s,i)){l=!1;break}}return i.delete(e),i.delete(t),l}R0=EI;function OI(e){var n=-1,t=Array(e.size);return e.forEach(function(e,s){t[++n]=[s,e]}),t}Ap=OI;function wI(e){var n=-1,t=Array(e.size);return e.forEach(function(e){t[++n]=e}),t}Fr=wI,Fp=1,Tp=2,zp="[object Boolean]",Dp="[object Date]",Np="[object Error]",Lp="[object Map]",Rp="[object Number]",Pp="[object RegExp]",Hp="[object Set]",Ip="[object String]",Bp="[object Symbol]",Vp="[object ArrayBuffer]",$p="[object DataView]",D0=_e?_e.prototype:void 0,Pr=D0?D0.valueOf:void 0;function gI(e,t,n,s,o,i,a){switch(n){case $p:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Vp:return e.byteLength==t.byteLength&&!!i(new zi(e),new zi(t));case zp:case Dp:case Rp:return wn(+e,+t);case Np:return e.name==t.name&&e.message==t.message;case Pp:case Ip:return e==t+"";case Lp:var c,l,d,r=Ap;case Hp:return l=s&Fp,r||(r=Fr),!(e.size!=t.size&&!l)&&(c=a.get(e),c?c==t:(s|=Tp,a.set(e,t),d=R0(r(e),r(t),s,o,i,a),a.delete(e),d));case Bp:if(Pr)return Pr.call(e)==Pr.call(t)}return!1}qp=gI,Yp=1,Gp=Object.prototype,Xp=Gp.hasOwnProperty;function fI(e,t,n,s,o,i){var a,r,c,l,d,u,h,m,p,g,v,f=n&Yp,j=cr(e),b=j.length,_=cr(t),y=_.length;if(b!=y&&!f)return!1;for(h=b;h--;)if(a=j[h],!(f?a in t:Xp.call(t,a)))return!1;if(g=i.get(e),p=i.get(t),g&&p)return g==t&&p==e;for(r=!0,i.set(e,t),i.set(t,e),m=f;++h<b;){if(a=j[h],u=e[a],d=t[a],s&&(v=f?s(d,u,a,t,e,i):s(u,d,a,e,t,i)),!(v===void 0?u===d||o(u,d,n,s,i):v)){r=!1;break}m||(m=a=="constructor")}return r&&!m&&(l=e.constructor,c=t.constructor,l!=c&&"constructor"in e&&"constructor"in t&&!(typeof l=="function"&&l instanceof l&&typeof c=="function"&&c instanceof c)&&(r=!1)),i.delete(e),i.delete(t),r}Zp=fI,Jp=1,k0="[object Arguments]",b0="[object Array]",di="[object Object]",sg=Object.prototype,h0=sg.hasOwnProperty;function uI(e,t,n,s,o,i){var u,h,m,f,c=k(e),p=k(t),a=c?b0:fn(e),r=p?b0:fn(t),a=a==k0?di:a,r=r==k0?di:r,l=a==di,g=r==di,d=a==r;if(d&&Dn(e)){if(!Dn(t))return!1;c=!0,l=!1}return d&&!l?(i||(i=new ss),c||ua(e)?R0(e,t,n,s,o,i):qp(e,t,a,n,s,o,i)):!(n&Jp)&&(u=l&&h0.call(e,"__wrapped__"),h=g&&h0.call(t,"__wrapped__"),u||h)?(m=u?e.value():e,f=h?t.value():t,i||(i=new ss),o(m,f,n,s,i)):!!d&&(i||(i=new ss),Zp(e,t,n,s,o,i))}ag=uI;function rg(e,t,n,s,o){return e===t||(e==null||t==null||!Se(e)&&!Se(t)?e!==e&&t!==t:ag(e,t,n,s,rg,o))}d0=rg,lg=1,dg=2;function cI(e,t,n,s){var o,c,l,i=n.length,d=i,u=!s;if(e==null)return!d;for(e=Object(e);i--;)if(o=n[i],u&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<d;){o=n[i];var a=o[0],r=e[a],h=o[1];if(u&&o[2]){if(r===void 0&&!(a in e))return!1}else if(c=new ss,s&&(l=s(r,h,a,e,t,c)),!(l===void 0?d0(h,r,lg|dg,s,c):l))return!1}return!0}hg=cI;function iI(e){return e===e&&!me(e)}l0=iI;function oI(e){for(var s,o,t=ue(e),n=t.length;n--;)s=t[n],o=e[s],t[n]=[s,o,l0(o)];return t}gg=oI;function sI(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}}c0=sI;function nI(e){var t=gg(e);return t.length==1&&t[0][2]?c0(t[0][0],t[0][1]):function(n){return n===e||hg(n,e,t)}}yg=nI;function tI(e,t){return e!=null&&t in Object(e)}wg=tI;function eI(e,t,n){t=sa(t,e);for(var o,i=-1,s=t.length,a=!1;++i<s;){if(o=vs(t[i]),!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++i!=s?a:(s=e==null?0:e.length,!!s&&Ua(s)&&ga(o,s)&&(k(e)||zn(e)))}n0=eI;function JH(e,t){return e!=null&&n0(e,t,wg)}J4=JH,kg=1,Ag=2;function ZH(e,t){return Za(e)&&l0(t)?c0(vs(e),t):function(n){var s=Dm(n,e);return s===void 0&&s===t?J4(n,e):d0(t,s,kg|Ag)}}Mg=ZH;function QH(e){return function(t){return t?.[e]}}Z4=QH;function GH(e){return function(t){return Gi(t,e)}}Dg=GH;function qH(e){return Za(e)?Z4(vs(e)):Dg(e)}Lg=qH;function KH(e){return typeof e=="function"?e:e==null?cn:typeof e=="object"?k(e)?Mg(e[0],e[1]):yg(e):Lg(e)}Dt=KH;function $H(e){return function(t,n,s){for(var o,c=-1,i=Object(t),a=s(t),r=a.length;r--;)if(o=a[e?r:++c],n(i[o],o,i)===!1)break;return t}}Ig=$H,Bg=Ig(),Gr=Bg;function BH(e,t){return e&&Gr(e,t,ue)}G4=BH;function IH(e,t){return function(n,s){if(n==null)return n;if(!jt(n))return e(n,s);for(var i=n.length,o=t?i:-1,a=Object(n);t?o--:++o<i;)if(s(a[o],o,a)===!1)break;return n}}Kg=IH,qg=Kg(G4),ni=qg,Gg=function(){return Ee.Date.now()},q4=Gg,K4=Object.prototype,Zg=K4.hasOwnProperty,Jg=xa(function(e,t){e=Object(e);var n,o,i,a,r,d,c=-1,s=t.length,l=s>2?t[2]:void 0;for(l&&ys(t[0],t[1],l)&&(s=1);++c<s;)for(o=t[c],i=Qt(o),a=-1,d=i.length;++a<d;)n=i[a],r=e[n],(r===void 0||wn(r,K4[n])&&!Zg.call(e,n))&&(e[n]=o[n]);return e}),Cn=Jg;function DH(e,t,n){(n!==void 0&&!wn(e[t],n)||n===void 0&&!(t in e))&&ba(e,t,n)}Jr=DH;function EH(e){return Se(e)&&jt(e)}V4=EH;function xH(e,t){if(t==="constructor"&&typeof e[t]=="function")return;if(t=="__proto__")return;return e[t]}ic=xH;function yH(e){return Qs(e,Qt(e))}c5=yH;function jH(e,t,n,s,o,i,a){var c,d,l=ic(e,n),r=ic(t,n),m=a.get(r);if(m){Jr(e,n,m);return}if(c=i?i(l,r,n+"",e,t,a):void 0,d=c===void 0,d){var u=k(r),h=!u&&Dn(r),f=!u&&!h&&ua(r);c=r,u||h||f?k(l)?c=l:V4(l)?c=B2(l):h?(d=!1,c=D2(r,!0)):f?(d=!1,c=s2(r,!0)):c=[]:V2(r)||zn(r)?(c=l,zn(l)?c=c5(l):(!me(l)||$n(l))&&(c=t2(r))):d=!1}d&&(a.set(r,c),o(c,r,s,i,a),a.delete(r)),Jr(e,n,c)}d5=jH;function u5(e,t,n,s,o){if(e===t)return;Gr(t,function(i,a){if(o||(o=new ss),me(i))d5(e,t,a,n,u5,s,o);else{var r=s?s(ic(e,a),i,a+"",e,t,o):void 0;r===void 0&&(r=i),Jr(e,a,r)}},Qt)}h5=u5;function vH(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}f5=vH;function gH(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}Xo=gH;function fH(e){return typeof e=="function"?e:cn}P4=fH;function mH(e,t){var n=k(e)?n3:ni;return n(e,P4(t))}o=mH;function hH(e,t){var n=[];return ni(e,function(e,s,o){t(e,s,o)&&n.push(e)}),n}w5=hH;function sH(e,t){var n=k(e)?F2:w5;return n(e,Dt(t,3))}st=sH;function tH(e){return function(t,n,s){var o,a,i=Object(t);return jt(t)||(a=Dt(n,3),t=ue(t),n=function(e){return a(i[e],e,i)}),o=e(t,n,s),o>-1?i[a?t[o]:o]:void 0}}E5=tH,k5=Math.max;function eH(e,t,n){var s,o=e==null?0:e.length;return o?(s=n==null?0:W8(n),s<0&&(s=k5(o+s,0)),o3(e,Dt(t,3),s)):-1}S5=eH,M5=E5(S5),rc=M5;function JP(e,t){var s=-1,n=jt(e)?Array(e.length):[];return ni(e,function(e,o,i){n[++s]=t(e,o,i)}),n}T4=JP;function QP(e,t){var n=k(e)?Bn:T4;return n(e,Dt(t,3))}z=QP;function KP(e,t){return e==null?e:Gr(e,P4(t),Qt)}R5=KP;function UP(e,t){return e>t}H5=UP,I5=Object.prototype,B5=I5.hasOwnProperty;function VP(e,t){return e!=null&&B5.call(e,t)}$5=VP;function IP(e,t){return e!=null&&n0(e,t,$5)}f=IP,K5="[object String]";function NP(e){return typeof e=="string"||!k(e)&&Se(e)&&St(e)==K5}Y5=NP;function DP(e,t){return Bn(t,function(t){return e[t]})}X5=DP;function zP(e){return e==null?[]:X5(e,ue(e))}wt=zP,J5="[object Map]",e7="[object Set]",t7=Object.prototype,n7=t7.hasOwnProperty;function FP(e){if(e==null)return!0;if(jt(e)&&(k(e)||typeof e=="string"||typeof e.splice=="function"||Dn(e)||ua(e)||zn(e)))return!e.length;var n,t=fn(e);if(t==J5||t==e7)return!e.size;if(ka(e))return!Qa(e).length;for(n in e)if(n7.call(e,n))return!1;return!0}_n=FP;function wP(e){return e===void 0}S=wP;function vP(e,t){return e<t}E4=vP;function mP(e,t){var n={};return t=Dt(t,3),G4(e,function(e,s,o){ba(n,s,t(e,s,o))}),n}Vo=mP;function cP(e,t,n){for(var s,o,i,r,a=-1,c=e.length;++a<c;)o=e[a],s=t(o),s!=null&&(i===void 0?s===s&&!gn(s):n(s,i))&&(i=s,r=o);return r}fc=cP;function aP(e){return e&&e.length?fc(e,cn,H5):void 0}mn=aP,p7=P3(function(e,t,n){h5(e,t,n)}),vc=p7;function oP(e){return e&&e.length?fc(e,cn,E4):void 0}xo=oP;function sP(e,t){return e&&e.length?fc(e,Dt(t,2),E4):void 0}_c=sP;function tP(e,t,n,s){if(!me(e))return e;t=sa(t,e);for(var o,a,c,r=-1,l=t.length,d=l-1,i=e;i!=null&&++r<l;){if(o=vs(t[r]),a=n,o==="__proto__"||o==="constructor"||o==="prototype")return e;r!=d&&(c=i[o],a=s?s(c,o,i):void 0,a===void 0&&(a=me(c)?c:ga(t[r+1])?[]:{})),ja(i,o,a),i=i[o]}return e}w7=tP;function eP(e,t,n){for(var s,o,i=-1,r=t.length,a={};++i<r;)s=t[i],o=Gi(e,s),n(o,s)&&w7(a,sa(s,e),o);return a}x7=eP;function JR(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}E7=JR;function ZR(e,t){if(e!==t){var a=e!==void 0,r=e===null,n=e===e,s=gn(e),c=t!==void 0,l=t===null,o=t===t,i=gn(t);if(!l&&!i&&!s&&e>t||s&&c&&o&&!l&&!i||r&&c&&o||!a&&o||!n)return 1;if(!r&&!s&&!i&&e<t||i&&a&&n&&!r&&!s||l&&a&&n||!c&&n||!o)return-1}return 0}A7=ZR;function QR(e,t,n){for(var o,a,s=-1,i=e.criteria,r=t.criteria,c=i.length,l=n.length;++s<c;)if(o=A7(i[s],r[s]),o)return s>=l?o:(a=n[s],o*(a=="desc"?-1:1));return e.index-t.index}M7=QR;function XR(e,t,n){t.length?t=Bn(t,function(e){return k(e)?function(t){return Gi(t,e.length===1?e[0]:e)}:e}):t=[cn];var s,o=-1;return t=Bn(t,va(Dt)),s=T4(e,function(e){var i=Bn(t,function(t){return t(e)});return{criteria:i,index:++o,value:e}}),E7(s,function(e,t){return M7(e,t,n)})}T7=XR,z7=Z4("length"),D7=z7,p4="\\ud800-\\udfff",L7="\\u0300-\\u036f",R7="\\ufe20-\\ufe2f",P7="\\u20d0-\\u20ff",H7=L7+R7+P7,I7="\\ufe0e\\ufe0f",B7="["+p4+"]",wc="["+H7+"]",Oc="\\ud83c[\\udffb-\\udfff]",W7="(?:"+wc+"|"+Oc+")",h4="[^"+p4+"]",u4="(?:\\ud83c[\\udde6-\\uddff]){2}",d4="[\\ud800-\\udbff][\\udc00-\\udfff]",Y7="\\u200d",l4=W7+"?",c4="["+I7+"]?",Q7="(?:"+Y7+"(?:"+[h4,u4,d4].join("|")+")"+c4+l4+")*",Z7=c4+l4+Q7,J7="(?:"+[h4+wc+"?",wc,u4,d4,B7].join("|")+")",r4=RegExp(Oc+"(?="+Oc+")|"+J7+Z7,"g");function $R(e){for(var t=r4.lastIndex=0;r4.test(e);)++t;return t}nv=$R;function VR(e){return u8(e)?nv(e):D7(e)}ov=VR;function IR(e,t){return x7(e,t,function(t,n){return J4(e,n)})}av=IR,rv=Um(function(e,t){return e==null?{}:av(e,t)}),fo=rv,lv=Math.ceil,dv=Math.max;function HR(e,t,n,s){for(var a=-1,o=dv(lv((t-e)/(n||1)),0),i=Array(o);o--;)i[s?o:++a]=e,e+=n;return i}hv=HR;function NR(e){return function(t,n,s){return s&&typeof s!="number"&&ys(t,n,s)&&(n=s=void 0),t=Bi(t),n===void 0?(n=t,t=0):n=Bi(n),s=s===void 0?t<n?1:-1:Bi(s),hv(t,n,s,e)}}fv=NR,pv=fv(),an=pv;function zR(e,t,n,s,o){return o(e,function(e,o,i){n=s?(s=!1,e):t(n,e,o,i)}),n}bv=zR;function FR(e,t,n){var s=k(e)?m8:bv,o=arguments.length<3;return s(e,Dt(t,4),n,o,ni)}lo=FR,_v="[object Map]",wv="[object Set]";function SR(e){if(e==null)return 0;if(jt(e))return Y5(e)?ov(e):e.length;var t=fn(e);return t==_v||t==wv?e.size:Qa(e).length}xv=SR,Cv=xa(function(e,t){if(e==null)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),T7(e,tr(t,1),[])}),Zs=Cv,kv=1/0,Av=Xn&&1/Fr(new Xn([,-0]))[1]==kv?function(e){return new Xn(e)}:E8,Sv=Av,Mv=200;function AR(e,t,n){var o,i,l,d,u=-1,r=Bh,h=e.length,c=!0,a=[],s=a;if(n)c=!1,r=f5;else if(h>=Mv){if(l=t?null:Sv(e),l)return Fr(l);c=!1,r=P0,s=new I0}else s=t?[]:a;outer:for(;++u<h;)if(o=e[u],i=t?t(o):o,o=n||o!==0?o:0,c&&i===i){for(d=s.length;d--;)if(s[d]===i)continue outer;t&&s.push(i),a.push(o)}else r(s,i,n)||(s!==a&&s.push(i),a.push(o));return a}Tv=AR,zv=xa(function(e){return Tv(tr(e,1,V4,!0))}),Dv=zv,Nv=0;function kR(e){var t=++Nv;return t3(e)+t}Si=kR;function CR(e,t,n){for(var i,s=-1,a=e.length,r=t.length,o={};++s<a;)i=s<r?t[s]:void 0,n(o,e[s],i);return o}Hv=CR;function xR(e,t){return Hv(e||[],t||[],ja)}Bv=xR,Vv="\0",Xt="\0",Z1="",F=class{constructor(e={}){this._isDirected=!f(e,"directed")||e.directed,this._isMultigraph=!!f(e,"multigraph")&&e.multigraph,this._isCompound=!!f(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=$t(void 0),this._defaultEdgeLabelFn=$t(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Xt]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return $n(e)||(e=$t(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return ue(this._nodes)}sources(){var e=this;return st(this.nodes(),function(t){return _n(e._in[t])})}sinks(){var e=this;return st(this.nodes(),function(t){return _n(e._out[t])})}setNodes(e,t){var s=arguments,n=this;return o(e,function(e){s.length>1?n.setNode(e,t):n.setNode(e)}),this}setNode(e,t){return f(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Xt,this._children[e]={},this._children[Xt][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return f(this._nodes,e)}removeNode(e){var n,t=this;return f(this._nodes,e)&&(n=function(e){t.removeEdge(t._edgeObjs[e])},delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],o(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),o(ue(this._in[e]),n),delete this._in[e],delete this._preds[e],o(ue(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount),this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(S(t))t=Xt;else{t+="";for(var n=t;!S(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==Xt)return t}}children(e){if(S(e)&&(e=Xt),this._isCompound){{var t=this._children[e];if(t)return ue(t)}}else if(e===Xt)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var t=this._preds[e];if(t)return ue(t)}successors(e){var t=this._sucs[e];if(t)return ue(t)}neighbors(e){var t=this.predecessors(e);if(t)return Dv(t,this.successors(e))}isLeaf(e){var t;return this.isDirected()?t=this.successors(e):t=this.neighbors(e),t.length===0}filterNodes(e){var n,s,t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph()),s=this,o(this._nodes,function(n,s){e(s)&&t.setNode(s,n)}),o(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,s.edge(e))}),n={};function i(e){var o=s.parent(e);return o===void 0||t.hasNode(o)?(n[e]=o,o):o in n?n[o]:i(o)}return this._isCompound&&o(t.nodes(),function(e){t.setParent(e,i(e))}),t}setDefaultEdgeLabel(e){return $n(e)||(e=$t(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return wt(this._edgeObjs)}setPath(e,t){var n=this,s=arguments;return lo(e,function(e,o){return s.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o}),this}setEdge(){var e,t,n,o,i,a,r=!1,s=arguments[0];if(typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(a=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(a=arguments[2],r=!0)),e=""+e,t=""+t,S(n)||(n=""+n),o=Fi(this._isDirected,e,t,n),f(this._edgeLabels,o))return r&&(this._edgeLabels[o]=a),this;if(!S(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");return this.setNode(e),this.setNode(t),this._edgeLabels[o]=r?a:this._defaultEdgeLabelFn(e,t,n),i=_R(this._isDirected,e,t,n),e=i.v,t=i.w,Object.freeze(i),this._edgeObjs[o]=i,Kv(this._preds[t],e),Kv(this._sucs[e],t),this._in[t][o]=i,this._out[e][o]=i,this._edgeCount++,this}edge(e,t,n){var s=arguments.length===1?G1(this._isDirected,arguments[0]):Fi(this._isDirected,e,t,n);return this._edgeLabels[s]}hasEdge(e,t,n){var s=arguments.length===1?G1(this._isDirected,arguments[0]):Fi(this._isDirected,e,t,n);return f(this._edgeLabels,s)}removeEdge(e,t,n){var s=arguments.length===1?G1(this._isDirected,arguments[0]):Fi(this._isDirected,e,t,n),o=this._edgeObjs[s];return o&&(e=o.v,t=o.w,delete this._edgeLabels[s],delete this._edgeObjs[s],qv(this._preds[t],e),qv(this._sucs[e],t),delete this._in[t][s],delete this._out[e][s],this._edgeCount--),this}inEdges(e,t){var n,s=this._in[e];if(s)return n=wt(s),t?st(n,function(e){return e.v===t}):n}outEdges(e,t){var n,s=this._out[e];if(s)return n=wt(s),t?st(n,function(e){return e.w===t}):n}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},F.prototype._nodeCount=0,F.prototype._edgeCount=0;function Kv(e,t){e[t]?e[t]++:e[t]=1}function qv(e,t){--e[t]||delete e[t]}function Fi(e,t,n,s){var a,o=""+t,i=""+n;return!e&&o>i&&(a=o,o=i,i=a),o+Z1+i+Z1+(S(s)?Vv:s)}function _R(e,t,n,s){var a,r,o=""+t,i=""+n;return!e&&o>i&&(r=o,o=i,i=r),a={v:o,w:i},s&&(a.name=s),a}function G1(e,t){return Fi(e,t.v,t.w,t.name)}Qv=class{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return Zv(e),e}enqueue(e){var t=this._sentinel;e._prev&&e._next&&Zv(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var t=[],n=this._sentinel,e=n._prev;e!==n;)t.push(JSON.stringify(e,yR)),e=e._prev;return"["+t.join(", ")+"]"}};function Zv(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function yR(e,t){if(e!=="_next"&&e!=="_prev")return t}e9=$t(1);function jR(e,t){if(e.nodeCount()<=1)return[];var n=gR(e,t||e9),s=bR(n.graph,n.buckets,n.zeroIdx);return rs(z(s,function(t){return e.outEdges(t.v,t.w)}),!0)}function bR(e,t,n){for(var s,o,i=[],a=t[t.length-1],r=t[0];e.nodeCount();){for(;s=r.dequeue();)Y1(e,t,n,s);for(;s=a.dequeue();)Y1(e,t,n,s);if(e.nodeCount())for(o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){i=i.concat(Y1(e,t,n,s,!0));break}}return i}function Y1(e,t,n,s,i){var a=i?[]:void 0;return o(e.inEdges(s.v),function(s){var r=e.edge(s),o=e.node(s.v);i&&a.push({v:s.v,w:s.w}),o.out-=r,q1(t,n,o)}),o(e.outEdges(s.v),function(s){var i=e.edge(s),a=s.w,o=e.node(a);o.in-=i,q1(t,n,o)}),e.removeNode(s.v),a}function gR(e,t){var a,r,n=new F,s=0,i=0;return o(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),o(e.edges(),function(e){var a=n.edge(e.v,e.w)||0,o=t(e),r=a+o;n.setEdge(e.v,e.w,r),i=Math.max(i,n.node(e.v).out+=o),s=Math.max(s,n.node(e.w).in+=o)}),a=an(i+s+3).map(function(){return new Qv}),r=s+1,o(n.nodes(),function(e){q1(a,r,n.node(e))}),{graph:n,buckets:a,zeroIdx:r}}function q1(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function pR(e){var t=e.graph().acyclicer==="greedy"?jR(e,n(e)):fR(e);o(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,Si("rev"))});function n(e){return function(t){return e.edge(t).weight}}}function fR(e){var n=[],t={},s={};function i(a){if(f(s,a))return;s[a]=!0,t[a]=!0,o(e.outEdges(a),function(e){f(t,e.w)?n.push(e):i(e.w)}),delete t[a]}return o(e.nodes(),i),n}function mR(e){o(e.edges(),function(t){var s,n=e.edge(t);n.reversed&&(e.removeEdge(t),s=n.forwardName,delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,s))})}function Vs(e,t,n,s){var o;do o=Si(s);while(e.hasNode(o))return n.dummy=t,e.setNode(o,n),o}function hR(e){var t=(new F).setGraph(e.graph());return o(e.nodes(),function(n){t.setNode(n,e.node(n))}),o(e.edges(),function(n){var s=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:s.weight+o.weight,minlen:Math.max(s.minlen,o.minlen)})}),t}function u9(e){var t=new F({multigraph:e.isMultigraph()}).setGraph(e.graph());return o(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),o(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function h9(e,t){var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;if(!n&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=i*n/s,r=i):(n<0&&(o=-o),a=o,r=o*s/n),{x:c+a,y:l+r}}function Ac(e){var t=z(an(v9(e)+1),function(){return[]});return o(e.nodes(),function(n){var s=e.node(n),o=s.rank;S(o)||(t[o][s.order]=n)}),t}function uR(e){var t=xo(z(e.nodes(),function(t){return e.node(t).rank}));o(e.nodes(),function(n){var s=e.node(n);f(s,"rank")&&(s.rank-=t)})}function dR(e){var n,s,i=xo(z(e.nodes(),function(t){return e.node(t).rank})),t=[];o(e.nodes(),function(n){var s=e.node(n).rank-i;t[s]||(t[s]=[]),t[s].push(n)}),n=0,s=e.graph().nodeRankFactor,o(t,function(t,i){S(t)&&i%s!==0?--n:n&&o(t,function(t){e.node(t).rank+=n})})}function g9(e,t,n,s){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=s),Vs(e,"border",o,t)}function v9(e){return mn(z(e.nodes(),function(t){var n=e.node(t).rank;if(!S(n))return n}))}function cR(e,t){var n={lhs:[],rhs:[]};return o(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function rR(e,t){var n=q4();try{return t()}finally{console.log(e+" time: "+(q4()-n)+"ms")}}function iR(e,t){return t()}function oR(e){function t(n){if(a=e.children(n),s=e.node(n),a.length&&o(a,t),f(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var s,a,i=s.minRank,r=s.maxRank+1;i<r;++i)w9(e,"borderLeft","_bl",n,s,i),w9(e,"borderRight","_br",n,s,i)}}o(e.children(),t)}function w9(e,t,n,s,o,i){var c={width:0,height:0,rank:i,borderType:t},r=o[t][i-1],a=Vs(e,"border",c,n);o[t][i]=a,e.setParent(a,s),r&&e.setEdge(r,a,{weight:1})}function sR(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&C9(e)}function nR(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&tR(e),(t==="lr"||t==="rl")&&(JL(e),C9(e))}function C9(e){o(e.nodes(),function(t){E9(e.node(t))}),o(e.edges(),function(t){E9(e.edge(t))})}function E9(e){var t=e.width;e.width=e.height,e.height=t}function tR(e){o(e.nodes(),function(t){W1(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);o(n.points,W1),f(n,"y")&&W1(n)})}function W1(e){e.y=-e.y}function JL(e){o(e.nodes(),function(t){$1(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);o(n.points,$1),f(n,"x")&&$1(n)})}function $1(e){var t=e.x;e.x=e.y,e.y=t}function ZL(e){var a,n=Vs(e,"root",{},"_root"),s=QL(e),i=mn(wt(s))-1,t=2*i+1;e.graph().nestingRoot=n,o(e.edges(),function(n){e.edge(n).minlen*=t}),a=XL(e)+1,o(e.children(),function(o){T9(e,n,t,a,i,s,o)}),e.graph().nodeRankFactor=t}function T9(e,t,n,s,i,a,r){var c,l,d,u=e.children(r);if(!u.length){r!==t&&e.setEdge(t,r,{weight:0,minlen:n});return}c=g9(e,"_bt"),l=g9(e,"_bb"),d=e.node(r),e.setParent(c,r),d.borderTop=c,e.setParent(l,r),d.borderBottom=l,o(u,function(o){T9(e,t,n,s,i,a,o);var d=e.node(o),u=d.borderTop?d.borderTop:o,h=d.borderBottom?d.borderBottom:o,m=d.borderTop?s:2*s,f=u!==h?1:i-a[r]+1;e.setEdge(c,u,{weight:m,minlen:f,nestingEdge:!0}),e.setEdge(h,l,{weight:m,minlen:f,nestingEdge:!0})}),e.parent(r)||e.setEdge(t,c,{weight:0,minlen:i+a[r]})}function QL(e){var t={};function n(s,i){var a=e.children(s);a&&a.length&&o(a,function(e){n(e,i+1)}),t[s]=i}return o(e.children(),function(e){n(e,1)}),t}function XL(e){return lo(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function GL(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,o(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}function YL(e,t,n){var i,s={};o(n,function(n){for(var a,r,o=e.parent(n);o;){if(a=e.parent(o),a?(r=s[a],s[a]=o):(r=i,i=o),r&&r!==o){t.setEdge(r,o);return}o=a}})}function qL(e,t,n){var i=KL(e),s=new F({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return o(e.nodes(),function(a){var r=e.node(a),c=e.parent(a);(r.rank===t||r.minRank<=t&&t<=r.maxRank)&&(s.setNode(a),s.setParent(a,c||i),o(e[n](a),function(t){var n=t.v===a?t.w:t.v,o=s.edge(n,a),i=S(o)?0:o.weight;s.setEdge(n,a,{weight:e.edge(t).weight+i})}),f(r,"minRank")&&s.setNode(a,{borderLeft:r.borderLeft[t],borderRight:r.borderRight[t]}))}),s}function KL(e){for(var t;e.hasNode(t=Si("_root")););return t}function UL(e,t){for(var s=0,n=1;n<t.length;++n)s+=WL(e,t[n-1],t[n]);return s}function WL(e,t,n){for(var i,a,r,c=Bv(n,z(n,function(e,t){return t})),l=rs(z(t,function(t){return Zs(z(e.outEdges(t),function(t){return{pos:c[t.w],weight:e.edge(t).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;return r=2*s-1,s-=1,i=z(new Array(r),function(){return 0}),a=0,o(l.forEach(function(e){var n,t=e.pos+s;for(i[t]+=e.weight,n=0;t>0;)t%2&&(n+=i[t+1]),t=t-1>>1,i[t]+=e.weight;a+=e.weight*n})),a}function mL(e){var a,t={},n=st(e.nodes(),function(t){return!e.children(t).length}),r=mn(z(n,function(t){return e.node(t).rank})),s=z(an(r+1),function(){return[]});function i(n){if(f(t,n))return;t[n]=!0;var a=e.node(n);s[a.rank].push(n),o(e.successors(n),i)}return a=Zs(n,function(t){return e.node(t).rank}),o(a,i),s}function VL(e,t){return z(t,function(t){var n,s=e.inEdges(t);return s.length?(n=lo(s,function(t,n){var s=e.edge(n),o=e.node(n.v);return{sum:t.sum+s.weight*o.order,weight:t.weight+s.weight}},{sum:0,weight:0}),{v:t,barycenter:n.sum/n.weight,weight:n.weight}):{v:t}})}function BL(e,t){var s,n={};return o(e,function(e,t){var s=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};S(e.barycenter)||(s.barycenter=e.barycenter,s.weight=e.weight)}),o(t.edges(),function(e){var t=n[e.v],s=n[e.w];!S(t)&&!S(s)&&(s.indegree++,t.out.push(n[e.w]))}),s=st(n,function(e){return!e.indegree}),HL(s)}function HL(e){var t,n=[];function s(e){return function(t){if(t.merged)return;(S(t.barycenter)||S(e.barycenter)||t.barycenter>=e.barycenter)&&PL(e,t)}}function i(t){return function(n){n.in.push(t),--n.indegree===0&&e.push(n)}}for(;e.length;)t=e.pop(),n.push(t),o(t.in.reverse(),s(t)),o(t.out,i(t));return z(st(n,function(e){return!e.merged}),function(e){return fo(e,["vs","i","barycenter","weight"])})}function PL(e,t){var s=0,n=0;e.weight&&(s+=e.barycenter*e.weight,n+=e.weight),t.weight&&(s+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=s/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}function RL(e,t){var a,r=cR(e,function(e){return f(e,"barycenter")}),c=r.lhs,l=Zs(r.rhs,function(e){return-e.i}),s=[],d=0,i=0,n=0;return c.sort(LL(!!t)),n=q9(s,l,n),o(c,function(e){n+=e.vs.length,s.push(e.vs),d+=e.barycenter*e.weight,i+=e.weight,n=q9(s,l,n)}),a={vs:rs(s,!0)},i&&(a.barycenter=d/i,a.weight=i),a}function q9(e,t,n){for(var s;t.length&&(s=Xo(t)).i<=n;)t.pop(),e.push(s.vs),n++;return n}function LL(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}function G9(e,t,n,s){if(c=e.children(t),r=e.node(t),a=r?r.borderLeft:void 0,l=r?r.borderRight:void 0,d={},a&&(c=st(c,function(e){return e!==a&&e!==l})),u=VL(e,c),o(u,function(t){if(e.children(t.v).length){var o=G9(e,t.v,n,s);d[t.v]=o,f(o,"barycenter")&&DL(t,o)}}),h=BL(u,n),NL(h,d),i=RL(h,s),a&&(i.vs=rs([a,i.vs,l],!0),e.predecessors(a).length)){var i,a,r,c,l,d,u,h,m=e.node(e.predecessors(a)[0]),p=e.node(e.predecessors(l)[0]);f(i,"barycenter")||(i.barycenter=0,i.weight=0),i.barycenter=(i.barycenter*i.weight+m.order+p.order)/(i.weight+2),i.weight+=2}return i}function NL(e,t){o(e,function(e){e.vs=rs(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function DL(e,t){S(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function zL(e){var n,s,o,i,r,a=v9(e),c=J9(e,an(1,a+1),"inEdges"),l=J9(e,an(a-1,-1,-1),"outEdges"),t=mL(e);tb(e,t),o=Number.POSITIVE_INFINITY;for(n=0,s=0;s<4;++n,++s)TL(n%2?c:l,n%4>=2),t=Ac(e),i=UL(e,t),i<o&&(s=0,r=up(t),o=i);tb(e,r)}function J9(e,t,n){return z(t,function(t){return qL(e,t,n)})}function TL(e,t){var n=new F;o(e,function(e){var i=e.graph().root,s=G9(e,i,n,t);o(s.vs,function(t,n){e.node(t).order=n}),YL(e,n,s.vs)})}function tb(e,t){o(t,function(t){o(t,function(t,n){e.node(t).order=n})})}function FL(e){var t=SL(e);o(e.graph().dummyChains,function(n){for(var a=e.node(n),r=a.edgeObj,l=ML(e,t,r.v,r.w),i=l.path,d=l.lca,s=0,o=i[s],c=!0;n!==r.w;){if(a=e.node(n),c){for(;(o=i[s])!==d&&e.node(o).maxRank<a.rank;)s++;o===d&&(c=!1)}if(!c){for(;s<i.length-1&&e.node(o=i[s+1]).minRank<=a.rank;)s++;o=i[s]}e.setParent(n,o),n=e.successors(n)[0]}})}function ML(e,t,n,s){var i,a=[],r=[],c=Math.min(t[n].low,t[s].low),l=Math.max(t[n].lim,t[s].lim),o=n;do o=e.parent(o),a.push(o);while(o&&(t[o].low>c||l>t[o].lim))for(i=o,o=s;(o=e.parent(o))!==i;)r.push(o);return{path:a.concat(r.reverse()),lca:i}}function SL(e){var t={},n=0;function s(i){var a=n;o(e.children(i),s),t[i]={low:a,lim:n++}}return o(e.children(),s),t}function AL(e,t){var n={};function s(t,s){var i=0,a=0,r=t.length,c=Xo(s);return o(s,function(t,l){var d=EL(e,t),u=d?e.node(d).order:r;(d||t===c)&&(o(s.slice(a,l+1),function(t){o(e.predecessors(t),function(s){var o=e.node(s),a=o.order;(a<i||u<a)&&!(o.dummy&&e.node(t).dummy)&&cb(n,s,t)})}),a=l+1,i=u)}),s}return lo(t,s),n}function kL(e,t){var n={};function s(t,s,i,a,r){var c;o(an(s,i),function(s){c=t[s],e.node(c).dummy&&o(e.predecessors(c),function(t){var s=e.node(t);s.dummy&&(s.order<a||s.order>r)&&cb(n,t,c)})})}function i(t,n){var i,r=-1,a=0;return o(n,function(o,c){if(e.node(o).dummy==="border"){var l=e.predecessors(o);l.length&&(i=e.node(l[0]).order,s(n,a,c,r,i),a=c,r=i)}s(n,a,n.length,i,t.length)}),n}return lo(t,i),n}function EL(e,t){if(e.node(t).dummy)return rc(e.predecessors(t),function(t){return e.node(t).dummy})}function cb(e,t,n){if(t>n){var s,o=t;t=n,n=o}s=e[t],s||(e[t]=s={}),s[n]=!0}function CL(e,t,n){if(t>n){var s=t;t=n,n=s}return f(e[t],n)}function xL(e,t,n,s){var a={},i={},r={};return o(t,function(e){o(e,function(e,t){a[e]=e,i[e]=e,r[e]=t})}),o(t,function(e){var t=-1;o(e,function(e){if(o=s(e),o.length){o=Zs(o,function(e){return r[e]}),l=(o.length-1)/2;for(var o,c,l,d=Math.floor(l),u=Math.ceil(l);d<=u;++d)c=o[d],i[e]===e&&t<r[c]&&!CL(n,e,c)&&(i[c]=e,i[e]=a[e]=a[c],t=r[c])}})}),{root:a,align:i}}function OL(e,t,n,s,i){var r={},a=wL(e,t,n,i),l=i?"borderLeft":"borderRight";function c(e,t){for(var s=a.nodes(),n=s.pop(),o={};n;)o[n]?e(n):(o[n]=!0,s.push(n),s=s.concat(t(n))),n=s.pop()}function d(e){r[e]=a.inEdges(e).reduce(function(e,t){return Math.max(e,r[t.v]+a.edge(t))},0)}function u(t){var n=a.outEdges(t).reduce(function(e,t){return Math.min(e,r[t.w]-a.edge(t))},Number.POSITIVE_INFINITY),s=e.node(t);n!==Number.POSITIVE_INFINITY&&s.borderType!==l&&(r[t]=Math.max(r[t],n))}return c(d,a.predecessors.bind(a)),c(u,a.successors.bind(a)),o(s,function(e){r[e]=r[n[e]]}),r}function wL(e,t,n,s){var i=new F,a=e.graph(),r=vL(a.nodesep,a.edgesep,s);return o(t,function(t){var s;o(t,function(t){if(o=n[t],i.setNode(o),s){var o,a=n[s],c=i.edge(a,o);i.setEdge(a,o,Math.max(r(e,t,s),c||0))}s=t})}),i}function _L(e,t){return _c(wt(t),function(t){var n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return R5(t,function(t,o){var i=gL(e,o)/2;n=Math.max(t+i,n),s=Math.min(t-i,s)}),n-s})}function yL(e,t){var n=wt(t),s=xo(n),i=mn(n);o(["u","d"],function(n){o(["l","r"],function(o){var r,c,l=n+o,a=e[l];if(a===t)return;c=wt(a),r=o==="l"?s-xo(c):i-mn(c),r&&(e[l]=Vo(a,function(e){return e+r}))})})}function jL(e,t){return Vo(e.ul,function(n,s){if(t)return e[t.toLowerCase()][s];var o=Zs(z(e,s));return(o[1]+o[2])/2})}function bL(e){var t,i,n=Ac(e),a=vc(AL(e,n),kL(e,n)),s={};return o(["u","d"],function(i){t=i==="u"?n:wt(n).reverse(),o(["l","r"],function(n){n==="r"&&(t=z(t,function(e){return wt(e).reverse()}));var c=(i==="u"?e.predecessors:e.successors).bind(e),r=xL(e,t,a,c),o=OL(e,t,r.root,r.align,n==="r");n==="r"&&(o=Vo(o,function(e){return-e})),s[i+n]=o})}),i=_L(e,s),yL(s,i),jL(s,e.graph().align)}function vL(e,t,n){return function(s,o,i){var a,c=s.node(o),l=s.node(i),r=0;if(r+=c.width/2,f(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=-c.width/2;break;case"r":a=c.width/2;break}if(a&&(r+=n?a:-a),a=0,r+=(c.dummy?t:e)/2,r+=(l.dummy?t:e)/2,r+=l.width/2,f(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2;break}return a&&(r+=n?a:-a),a=0,r}}function gL(e,t){return e.node(t).width}function pL(e){e=u9(e),xF(e),o(bL(e),function(t,n){e.node(n).x=t})}function xF(e){var n=Ac(e),s=e.graph().ranksep,t=0;o(n,function(n){var i=mn(z(n,function(t){return e.node(t).height}));o(n,function(n){e.node(n).y=t+i/2}),t+=i+s})}function Bs(e,t){var n=t&&t.debugTiming?rR:iR;n("layout",function(){var t=n("  buildLayoutGraph",function(){return cL(e)});n("  runLayout",function(){jS(t,n)}),n("  updateInputGraph",function(){lL(e,t)})})}function jS(e,t){t("    makeSpaceForEdgeLabels",function(){aL(e)}),t("    removeSelfEdges",function(){GN(e)}),t("    acyclic",function(){Or.run(e)}),t("    nestingGraph.run",function(){ZL(e)}),t("    rank",function(){_N(u9(e))}),t("    injectEdgeLabelProxies",function(){iL(e)}),t("    removeEmptyRanks",function(){dR(e)}),t("    nestingGraph.cleanup",function(){GL(e)}),t("    normalizeRanks",function(){uR(e)}),t("    assignRankMinMax",function(){oL(e)}),t("    removeEdgeLabelProxies",function(){tL(e)}),t("    normalize.run",function(){Mc.run(e)}),t("    parentDummyChains",function(){FL(e)}),t("    addBorderSegments",function(){oR(e)}),t("    order",function(){zL(e)}),t("    insertSelfEdges",function(){YN(e)}),t("    adjustCoordinateSystem",function(){sR(e)}),t("    position",function(){pL(e)}),t("    positionSelfEdges",function(){KN(e)}),t("    removeBorderNodes",function(){XN(e)}),t("    normalize.undo",function(){Mc.undo(e)}),t("    fixupEdgeLabelCoords",function(){ZN(e)}),t("    undoCoordinateSystem",function(){nR(e)}),t("    translateGraph",function(){eL(e)}),t("    assignNodeIntersects",function(){JN(e)}),t("    reversePoints",function(){QN(e)}),t("    acyclic.undo",function(){Or.undo(e)})}function lL(e,t){o(e.nodes(),function(n){var s=e.node(n),o=t.node(n);s&&(s.x=o.x,s.y=o.y,t.children(n).length&&(s.width=o.width,s.height=o.height))}),o(e.edges(),function(n){var o=e.edge(n),s=t.edge(n);o.points=s.points,f(s,"x")&&(o.x=s.x,o.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}xb=["nodesep","edgesep","ranksep","marginx","marginy"],Cb={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Eb=["acyclicer","ranker","rankdir","align"],kb=["width","height"],Ab={width:0,height:0},Sb=["minlen","weight","width","height","labeloffset"],Mb={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Fb=["labelpos"];function cL(e){var t=new F({multigraph:!0,compound:!0}),n=H1(e.graph());return t.setGraph(vc({},Cb,B1(n,xb),fo(n,Eb))),o(e.nodes(),function(n){var s=H1(e.node(n));t.setNode(n,Cn(B1(s,kb),Ab)),t.setParent(n,e.parent(n))}),o(e.edges(),function(n){var s=H1(e.edge(n));t.setEdge(n,vc({},Mb,B1(s,Sb),fo(s,Fb)))}),t}function aL(e){var t=e.graph();t.ranksep/=2,o(e.edges(),function(n){var s=e.edge(n);s.minlen*=2,s.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?s.width+=s.labeloffset:s.height+=s.labeloffset)})}function iL(e){o(e.edges(),function(t){var n,o,i,s=e.edge(t);s.width&&s.height&&(n=e.node(t.v),o=e.node(t.w),i={rank:(o.rank-n.rank)/2+n.rank,e:t},Vs(e,"edge-proxy",i,"_ep"))})}function oL(e){var t=0;o(e.nodes(),function(n){var s=e.node(n);s.borderTop&&(s.minRank=e.node(s.borderTop).rank,s.maxRank=e.node(s.borderBottom).rank,t=mn(t,s.maxRank))}),e.graph().maxRank=t}function tL(e){o(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function eL(e){var t=Number.POSITIVE_INFINITY,i=0,n=Number.POSITIVE_INFINITY,a=0,s=e.graph(),r=s.marginx||0,c=s.marginy||0;function l(e){var s=e.x,o=e.y,r=e.width,c=e.height;t=Math.min(t,s-r/2),i=Math.max(i,s+r/2),n=Math.min(n,o-c/2),a=Math.max(a,o+c/2)}o(e.nodes(),function(t){l(e.node(t))}),o(e.edges(),function(t){var n=e.edge(t);f(n,"x")&&l(n)}),t-=r,n-=c,o(e.nodes(),function(s){var o=e.node(s);o.x-=t,o.y-=n}),o(e.edges(),function(s){var i=e.edge(s);o(i.points,function(e){e.x-=t,e.y-=n}),f(i,"x")&&(i.x-=t),f(i,"y")&&(i.y-=n)}),s.width=i-t+r,s.height=a-n+c}function JN(e){o(e.edges(),function(t){var s,o,n=e.edge(t),i=e.node(t.v),a=e.node(t.w);n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=a,o=i),n.points.unshift(h9(i,s)),n.points.push(h9(a,o))})}function ZN(e){o(e.edges(),function(t){var n=e.edge(t);if(f(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function QN(e){o(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function XN(e){o(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),s=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(Xo(n.borderLeft)),a=e.node(Xo(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-s.y),n.x=o.x+n.width/2,n.y=s.y+n.height/2}}),o(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function GN(e){o(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function YN(e){var t=Ac(e);o(t,function(t){var n=0;o(t,function(t,s){var i=e.node(t);i.order=s+n,o(i.selfEdges,function(t){Vs(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:s+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}function KN(e){o(e.nodes(),function(t){var s,o,i,a,r,n=e.node(t);n.dummy==="selfedge"&&(a=e.node(n.e.v),s=a.x+a.width/2,o=a.y,i=n.x-s,r=a.height/2,e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:s+2*i/3,y:o-r},{x:s+5*i/6,y:o-r},{x:s+i,y:o},{x:s+5*i/6,y:o+r},{x:s+2*i/3,y:o+r}],n.label.x=n.x,n.label.y=n.y)})}function B1(e,t){return Vo(fo(e,t),Number)}function H1(e){var t={};return o(e,function(e,n){t[n.toLowerCase()]=e}),t}Mc={},w3(Mc,{run:()=>WN,undo:()=>BN});function WN(e){e.graph().dummyChains=[],o(e.edges(),function(t){VN(e,t)})}function VN(e,t){var o,a,r,i=t.v,s=e.node(i).rank,c=t.w,l=e.node(c).rank,d=t.name,n=e.edge(t),u=n.labelRank;if(l===s+1)return;e.removeEdge(t);for(r=0,++s;s<l;++r,++s)n.points=[],o={width:0,height:0,edgeLabel:n,edgeObj:t,rank:s},a=Vs(e,"edge",o,"_d"),s===u&&(o.width=n.width,o.height=n.height,o.dummy="edge-label",o.labelpos=n.labelpos),e.setEdge(i,a,{weight:n.weight},d),r===0&&e.graph().dummyChains.push(a),i=a;e.setEdge(i,c,{weight:n.weight},d)}function BN(e){o(e.graph().dummyChains,function(t){var o,n=e.node(t),s=n.edgeLabel;for(e.setEdge(n.edgeObj,s);n.dummy;)o=e.successors(t)[0],e.removeNode(t),s.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height),t=o,n=e.node(t)})}function R1(e){var t={};function n(s){var o,i=e.node(s);return f(t,s)?i.rank:(t[s]=!0,o=xo(z(e.outEdges(s),function(t){return n(t.w)-e.edge(t).minlen})),(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o)}o(e.sources(),n)}function Ti(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function Jb(e){var n,s,t=new F({directed:!1}),o=e.nodes()[0],i=e.nodeCount();for(t.setNode(o,{});IN(t,e)<i;)n=HN(t,e),s=t.hasNode(n.v)?Ti(e,n):-Ti(e,n),PN(t,e,s);return t}function IN(e,t){function n(s){o(t.nodeEdges(s),function(o){var a=o.v,i=s===a?o.w:a;!e.hasNode(i)&&!Ti(t,o)&&(e.setNode(i,{}),e.setEdge(s,i,{}),n(i))})}return o(e.nodes(),n),e.nodeCount()}function HN(e,t){return _c(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Ti(t,n)})}function PN(e,t,n){o(e.nodes(),function(e){t.node(e).rank+=n})}RN=$t(1),LN=$t(1),NN.CycleException=Fc;function NN(e){var t={},n={},s=[];function i(a){if(f(n,a))throw new Fc;f(t,a)||(n[a]=!0,t[a]=!0,o(e.predecessors(a),i),delete n[a],s.push(a))}if(o(e.sinks(),i),xv(t)!==e.nodeCount())throw new Fc;return s}function Fc(){}Fc.prototype=new Error;function rj(e,t,n){k(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),s=[],a={};return o(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);cj(e,t,n==="post",a,i,s)}),s}function cj(e,t,n,s,i,a){f(s,t)||(s[t]=!0,n||a.push(t),o(i(t),function(t){cj(e,t,n,s,i,a)}),n&&a.push(t))}function MN(e,t){return rj(e,t,"post")}function SN(e,t){return rj(e,t,"pre")}Vn.initLowLimValues=S1,Vn.initCutValues=M1,Vn.calcCutValue=fj,Vn.leaveEdge=vj,Vn.enterEdge=bj,Vn.exchangeEdges=jj;function Vn(e){e=hR(e),R1(e);var n,s,t=Jb(e);for(S1(t),M1(t,e);n=vj(t);)s=bj(t,e,n),jj(t,e,n,s)}function M1(e,t){var n=MN(e,e.nodes()),n=n.slice(0,n.length-1);o(n,function(n){EN(e,t,n)})}function EN(e,t,n){var s=e.node(n),o=s.parent;e.edge(n,o).cutvalue=fj(e,t,n)}function fj(e,t,n){var c=e.node(n),i=c.parent,r=!0,a=t.edge(n,i),s=0;return a||(r=!1,a=t.edge(i,n)),s=a.weight,o(t.nodeEdges(n),function(o){var c,l,d,u=o.v===n,a=u?o.w:o.v;a!==i&&(c=u===r,l=t.edge(o).weight,s+=c?l:-l,ON(e,n,a)&&(d=e.edge(n,a).cutvalue,s+=c?-d:d))}),s}function S1(e,t){arguments.length<2&&(t=e.nodes()[0]),gj(e,{},1,t)}function gj(e,t,n,s,i){var r=n,a=e.node(s);return t[s]=!0,o(e.neighbors(s),function(o){f(t,o)||(n=gj(e,t,n,o,s))}),a.low=r,a.lim=n++,i?a.parent=i:delete a.parent,n}function vj(e){return rc(e.edges(),function(t){return e.edge(t).cutvalue<0})}function bj(e,t,n){var s,o,r,c,l,i=n.v,a=n.w;return t.hasEdge(i,a)||(i=n.w,a=n.v),r=e.node(i),c=e.node(a),s=r,o=!1,r.lim>c.lim&&(s=c,o=!0),l=st(t.edges(),function(t){return o===wj(e,e.node(t.v),s)&&o!==wj(e,e.node(t.w),s)}),_c(l,function(e){return Ti(t,e)})}function jj(e,t,n,s){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(s.v,s.w,{}),S1(e),M1(e,t),xN(e,t)}function xN(e,t){var s=rc(e.nodes(),function(e){return!t.node(e).parent}),n=SN(e,s),n=n.slice(1);o(n,function(n){var o=e.node(n).parent,s=t.edge(n,o),i=!1;s||(s=t.edge(o,n),i=!0),t.node(n).rank=t.node(o).rank+(i?s.minlen:-s.minlen)})}function ON(e,t,n){return e.hasEdge(t,n)}function wj(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}function _N(e){switch(e.graph().ranker){case"network-simplex":Ej(e);break;case"tight-tree":jN(e);break;case"longest-path":xj(e);break;default:Ej(e)}}xj=R1;function jN(e){R1(e),Jb(e)}function Ej(e){Vn(e)}function Vt(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:vN(e),edges:gN(e)};return S(e.graph())||(t.value=rp(e.graph())),t}function vN(e){return z(e.nodes(),function(t){var s=e.node(t),o=e.parent(t),n={v:t};return S(s)||(n.value=s),S(o)||(n.parent=o),n})}function gN(e){return z(e.edges(),function(t){var s=e.edge(t),n={v:t.v,w:t.w};return S(t.name)||(n.name=t.name),S(s)||(n.value=s),n})}Fj=new Uint8Array(16);function pN(){if(!zc&&(zc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zc(Fj)}K=[];for(let e=0;e<256;++e)K.push((e+256).toString(16).slice(1));function mN(e,t=0){return(K[e[t+0]]+K[e[t+1]]+K[e[t+2]]+K[e[t+3]]+"-"+K[e[t+4]]+K[e[t+5]]+"-"+K[e[t+6]]+K[e[t+7]]+"-"+K[e[t+8]]+K[e[t+9]]+"-"+K[e[t+10]]+K[e[t+11]]+K[e[t+12]]+K[e[t+13]]+K[e[t+14]]+K[e[t+15]]).toLowerCase()}Nj=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x1={randomUUID:Nj};function lN(e,t,n){if(x1.randomUUID&&!t&&!e)return x1.randomUUID();e=e||{};const s=e.random||(e.rng||pN)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return mN(s)}Pj=lN;function Hj(e,t){return!!e.children(t).length}function Ij(e){return w1(e.v)+":"+w1(e.w)+":"+w1(e.name)}Bj=/:/g;function w1(e){return e?String(e).replace(Bj,"\\:"):""}function _t(e,t){t&&e.attr("style",t)}function Wj(e,t,n){t&&e.attr("class",t).attr("class",n+" "+e.attr("class"))}function $e(e,t){var n,s=t.graph();return V2(s)&&(n=s.transition,$n(n))?n(e):e}Dc={normal:aN,vee:iN,undirected:oN};function rN(e){Dc=e}function aN(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");_t(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function iN(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");_t(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function oN(e,t,n,s){var i=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),o=i.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");_t(o,n[s+"Style"]),n[s+"Class"]&&o.attr("class",n[s+"Class"])}function v1(e,t){var s,i,o=e.append("foreignObject").attr("width","100000"),n=o.append("xhtml:div");switch(n.attr("xmlns","http://www.w3.org/1999/xhtml"),s=t.label,typeof s){case"function":n.insert(s);break;case"object":n.insert(function(){return s});break;default:n.html(s)}return _t(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),i=n.node().getBoundingClientRect(),o.attr("width",i.width).attr("height",i.height),o}function eN(e,t){var n=e;return n.node().appendChild(t.label),_t(n,t.labelStyle),n}function JD(e,t){for(var n=e.append("text"),o=ZD(t.label).split(`
`),s=0;s<o.length;s++)n.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[s]);return _t(n,t.labelStyle),n}function ZD(e){for(var t,n="",s=!1,o=0;o<e.length;++o)if(t=e[o],s){switch(t){case"n":n+=`
`;break;default:n+=t}s=!1}else t==="\\"?s=!0:n+=t;return n}function g1(e,t,n){var o,i,a=t.label,s=e.append("g");switch(t.labelType==="svg"?eN(s,t):typeof a!="string"||t.labelType==="html"?v1(s,t):JD(s,t),o=s.node().getBBox(),n){case"top":i=-t.height/2;break;case"bottom":i=t.height/2-o.height;break;default:i=-o.height/2}return s.attr("transform","translate("+-o.width/2+","+i+")"),s}Nc=function(e,t){var s,o=t.nodes().filter(function(e){return Hj(t,e)}),n=e.selectAll("g.cluster").data(o,function(e){return e});return $e(n.exit(),t).style("opacity",0).remove(),s=n.enter().append("g").attr("class","cluster").attr("id",function(e){var n=t.node(e);return n.id}).style("opacity",0).each(function(e){var s,n=t.node(e),o=i(this);i(this).append("rect"),s=o.append("g").attr("class","label"),g1(s,n,n.clusterLabelPos)}),n=n.merge(s),n=$e(n,t).style("opacity",1),n.selectAll("rect").each(function(e){var n=t.node(e),s=i(this);_t(s,n.style)}),n};function QD(e){Nc=e}Lc=function(e,t){var s,n=e.selectAll("g.edgeLabel").data(t.edges(),function(e){return Ij(e)}).classed("update",!0);return n.exit().remove(),n.enter().append("g").classed("edgeLabel",!0).style("opacity",0),n=e.selectAll("g.edgeLabel"),n.each(function(e){var n,s,o,a=i(this);a.select(".label").remove(),n=t.edge(e),s=g1(a,t.edge(e),0,0).classed("label",!0),o=s.node().getBBox(),n.labelId&&s.attr("id",n.labelId),f(n,"width")||(n.width=o.width),f(n,"height")||(n.height=o.height)}),n.exit?s=n.exit():s=n.selectAll(null),$e(s,t).style("opacity",0).remove(),n};function XD(e){Lc=e}function ay(e,t){return e.intersect(t)}Ha=function(e,t,n){var s,o=e.selectAll("g.edgePath").data(t.edges(),function(e){return Ij(e)}).classed("update",!0),a=WD(o,t);return $D(o,t),s=o.merge!==void 0?o.merge(a):o,$e(s,t).style("opacity",1),s.each(function(e){var s=i(this),n=t.edge(e);n.elem=this,n.id&&s.attr("id",n.id),Wj(s,n.class,(s.classed("update")?"update ":"")+"edgePath")}),s.selectAll("path.path").each(function(e){var s,n=t.edge(e);n.arrowheadId=Si("arrowhead"),s=i(this).attr("marker-end",function(){return"url("+qD(location.href,n.arrowheadId)+")"}).style("fill","none"),$e(s,t).attr("d",function(e){return KD(t,e)}),_t(s,n.style)}),s.selectAll("defs *").remove(),s.selectAll("defs").each(function(e){var s=t.edge(e),o=n[s.arrowhead];o(i(this),s.arrowheadId,s,"arrowhead")}),s};function YD(e){Ha=e}function qD(e,t){var n=e.split("#")[0];return n+"#"+t}function KD(e,t){var s=e.edge(t),o=e.node(t.v),i=e.node(t.w),n=s.points.slice(1,s.points.length-1);return n.unshift(ay(o,n[0])),n.push(ay(i,n[n.length-1])),uy(s,n)}function uy(e,t){var n=(js||Ok.line)().x(function(e){return e.x}).y(function(e){return e.y});return(n.curve||n.interpolate)(e.curve),n(t)}function UD(e){var t=e.getBBox(),n=e.ownerSVGElement.getScreenCTM().inverse().multiply(e.getScreenCTM()).translate(t.width/2,t.height/2);return{x:n.e,y:n.f}}function WD(e,t){var n=e.enter().append("g").attr("class","edgePath").style("opacity",0);return n.append("path").attr("class","path").attr("d",function(e){var n=t.edge(e),s=t.node(e.v).elem,o=an(n.points.length).map(function(){return UD(s)});return uy(n,o)}),n.append("defs"),n}function $D(e,t){var n=e.exit();$e(n,t).style("opacity",0).remove()}Hc=function(e,t,n){var o,a=t.nodes().filter(function(e){return!Hj(t,e)}),s=e.selectAll("g.node").data(a,function(e){return e}).classed("update",!0);return s.exit().remove(),s.enter().append("g").attr("class","node").style("opacity",0),s=e.selectAll("g.node"),s.each(function(e){var o,r,c,l,d,u,h,s=t.node(e),a=i(this);Wj(a,s.class,(a.classed("update")?"update ":"")+"node"),a.select("g.label").remove(),r=a.append("g").attr("class","label"),u=g1(r,s),h=n[s.shape],o=fo(u.node().getBBox(),"width","height"),s.elem=this,s.id&&a.attr("id",s.id),s.labelId&&r.attr("id",s.labelId),f(s,"width")&&(o.width=s.width),f(s,"height")&&(o.height=s.height),o.width+=s.paddingLeft+s.paddingRight,o.height+=s.paddingTop+s.paddingBottom,r.attr("transform","translate("+(s.paddingLeft-s.paddingRight)/2+","+(s.paddingTop-s.paddingBottom)/2+")"),c=i(this),c.select(".label-container").remove(),l=h(c,o,s).classed("label-container",!0),_t(l,s.style),d=l.node().getBBox(),s.width=d.width,s.height=d.height}),s.exit?o=s.exit():o=s.selectAll(null),$e(o,t).style("opacity",0).remove(),s};function VD(e){Hc=e}function BD(e,t){var n=e.filter(function(){return!i(this).classed("update")});function s(e){var n=t.node(e);return"translate("+n.x+","+n.y+")"}n.attr("transform",s),$e(e,t).style("opacity",1).attr("transform",s),$e(n.selectAll("rect"),t).attr("width",function(e){return t.node(e).width}).attr("height",function(e){return t.node(e).height}).attr("x",function(e){var n=t.node(e);return-n.width/2}).attr("y",function(e){var n=t.node(e);return-n.height/2})}function ID(e,t){var s=e.filter(function(){return!i(this).classed("update")});function n(e){var n=t.edge(e);return f(n,"x")?"translate("+n.x+","+n.y+")":""}s.attr("transform",n),$e(e,t).style("opacity",1).attr("transform",n)}function HD(e,t){var s=e.filter(function(){return!i(this).classed("update")});function n(e){var n=t.node(e);return"translate("+n.x+","+n.y+")"}s.attr("transform",n),$e(e,t).style("opacity",1).attr("transform",n)}function yy(e,t,n,s){var o,i=e.x,a=e.y,r=i-s.x,c=a-s.y,d=Math.sqrt(t*t*c*c+n*n*r*r),l=Math.abs(t*n*r/d);return s.x<i&&(l=-l),o=Math.abs(t*n*c/d),s.y<a&&(o=-o),{x:i+l,y:a+o}}function PD(e,t,n){return yy(e,t,t,n)}function RD(e,t,n,s){var o,i,a,r,c,l,m,f,v,b,h=t.y-e.y,d=e.x-t.x,u=t.x*e.y-e.x*t.y,g=h*n.x+d*n.y+u,p=h*s.x+d*s.y+u;if(g!==0&&p!==0&&Oy(g,p))return;if(a=s.y-n.y,r=n.x-s.x,c=s.x*n.y-n.x*s.y,m=a*e.x+r*e.y+c,f=a*t.x+r*t.y+c,m!==0&&f!==0&&Oy(m,f))return;if(i=h*r-a*d,i===0)return;return l=Math.abs(i/2),o=d*c-r*u,v=o<0?(o-l)/i:(o+l)/i,o=a*u-h*c,b=o<0?(o-l)/i:(o+l)/i,{x:v,y:b}}function Oy(e,t){return e*t>0}function Ct(e,t,n){var s,r,c,l,d,u,h=e.x,m=e.y,o=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;t.forEach(function(e){i=Math.min(i,e.x),a=Math.min(a,e.y)}),r=h-e.width/2-i,c=m-e.height/2-a;for(s=0;s<t.length;s++)l=t[s],d=t[s<t.length-1?s+1:0],u=RD(e,n,{x:r+l.x,y:c+l.y},{x:r+d.x,y:c+d.y}),u&&o.push(u);return o.length?(o.length>1&&o.sort(function(e,t){var s=e.x-n.x,o=e.y-n.y,i=Math.sqrt(s*s+o*o),a=t.x-n.x,r=t.y-n.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),o[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",e),e)}function r1(e,t){var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=s===0?0:i*n/s,r=i):(n<0&&(o=-o),a=o,r=n===0?0:o*s/n),{x:c+a,y:l+r}}Uc={rect:ND,ellipse:DD,circle:zD,diamond:TD};function LD(e){Uc=e}function ND(e,t,n){var s=e.insert("rect",":first-child").attr("rx",n.rx).attr("ry",n.ry).attr("x",-t.width/2).attr("y",-t.height/2).attr("width",t.width).attr("height",t.height);return n.intersect=function(e){return r1(n,e)},s}function DD(e,t,n){var s=t.width/2,o=t.height/2,i=e.insert("ellipse",":first-child").attr("x",-t.width/2).attr("y",-t.height/2).attr("rx",s).attr("ry",o);return n.intersect=function(e){return yy(n,s,o,e)},i}function zD(e,t,n){var s=Math.max(t.width,t.height)/2,o=e.insert("circle",":first-child").attr("x",-t.width/2).attr("y",-t.height/2).attr("r",s);return n.intersect=function(e){return PD(n,s,e)},o}function TD(e,t,n){var s=t.width*Math.SQRT2/2,o=t.height*Math.SQRT2/2,i=[{x:0,y:-o},{x:-s,y:0},{x:0,y:o},{x:s,y:0}],a=e.insert("polygon",":first-child").attr("points",i.map(function(e){return e.x+","+e.y}).join(" "));return n.intersect=function(e){return Ct(n,i,e)},a}function MD(){var e=function(e,t){kD(t);var s,n=Ji(e,"output"),o=Ji(n,"clusters"),i=Ji(n,"edgePaths"),a=Lc(Ji(n,"edgeLabels"),t),r=Hc(Ji(n,"nodes"),t,Uc);Bs(t),HD(r,t),ID(a,t),Ha(i,t,Dc),s=Nc(o,t),BD(s,t),ED(t)};return e.createNodes=function(t){return arguments.length?(VD(t),e):Hc},e.createClusters=function(t){return arguments.length?(QD(t),e):Nc},e.createEdgeLabels=function(t){return arguments.length?(XD(t),e):Lc},e.createEdgePaths=function(t){return arguments.length?(YD(t),e):Ha},e.shapes=function(t){return arguments.length?(LD(t),e):Uc},e.arrows=function(t){return arguments.length?(rN(t),e):Dc},e}zy={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Dy={arrowhead:"normal",curve:ye};function kD(e){e.nodes().forEach(function(t){var n=e.node(t);!f(n,"label")&&!e.children(t).length&&(n.label=t),f(n,"paddingX")&&Cn(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),f(n,"paddingY")&&Cn(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),f(n,"padding")&&Cn(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),Cn(n,zy),o(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(e){n[e]=Number(n[e])}),f(n,"width")&&(n._prevWidth=n.width),f(n,"height")&&(n._prevHeight=n.height)}),e.edges().forEach(function(t){var n=e.edge(t);f(n,"label")||(n.label=""),Cn(n,Dy)})}function ED(e){o(e.nodes(),function(t){var n=e.node(t);f(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,f(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight})}function Ji(e,t){var n=e.select("g."+t);return n.empty()&&(n=e.append("g").attr("class",t)),n}Py=Object.defineProperty,Hy=(e,t,n)=>t in e?Py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ps=(e,t,n)=>(Hy(e,typeof t!="symbol"?t+"":t,n),n),pt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},e={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},Qc=function(t="fatal"){let n=pt.fatal;typeof t=="string"?(t=t.toLowerCase(),t in pt&&(n=pt[t])):typeof t=="number"&&(n=t),e.trace=()=>{},e.debug=()=>{},e.info=()=>{},e.warn=()=>{},e.error=()=>{},e.fatal=()=>{},n<=pt.fatal&&(e.fatal=console.error?console.error.bind(console,je("FATAL"),"color: orange"):console.log.bind(console,"[35m",je("FATAL"))),n<=pt.error&&(e.error=console.error?console.error.bind(console,je("ERROR"),"color: orange"):console.log.bind(console,"[31m",je("ERROR"))),n<=pt.warn&&(e.warn=console.warn?console.warn.bind(console,je("WARN"),"color: orange"):console.log.bind(console,`[33m`,je("WARN"))),n<=pt.info&&(e.info=console.info?console.info.bind(console,je("INFO"),"color: lightblue"):console.log.bind(console,"[34m",je("INFO"))),n<=pt.debug&&(e.debug=console.debug?console.debug.bind(console,je("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",je("DEBUG"))),n<=pt.trace&&(e.trace=console.debug?console.debug.bind(console,je("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",je("TRACE")))},je=e=>{const t=(0,Te.default)().format("ss.SSS");return`%c${t} : ${e} : `},Uy=e=>{if(!e)return[""];const t=Iu(e).replace(/\\n/g,"#br#");return t.split("#br#")},Yu=e=>Ys.default.sanitize(e),Ku=(e,t)=>{var n;if(((n=t.flowchart)==null?void 0:n.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=Yu(e):n!=="loose"&&(e=Iu(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=Jy(e))}return e},De=(e,t)=>e&&(t.dompurifyConfig?e=Ys.default.sanitize(Ku(e,t),t.dompurifyConfig).toString():e=Ys.default.sanitize(Ku(e,t),{FORBID_TAGS:["style"]}).toString(),e),Gy=(e,t)=>typeof e=="string"?De(e,t):e.flat().map(e=>De(e,t)),ca=/<br\s*\/?>/gi,Qy=e=>ca.test(e),Zy=e=>e.split(ca),Jy=e=>e.replace(/#br#/g,"<br/>"),Iu=e=>e.replace(ca,"#br#"),t_=e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},W=e=>e!==!1&&!["false","null","0"].includes(String(e).trim().toLowerCase()),Ht=function(e){let t=e;return e.includes("~")?(t=t.replace(/~([^~].*)/,"<$1"),t=t.replace(/~([^~]*)$/,">$1"),Ht(t)):t},h={getRows:Uy,sanitizeText:De,sanitizeTextOrArray:Gy,hasBreaks:Qy,splitBreaks:Zy,lineBreakRegex:ca,removeScript:Yu,getUrl:t_,evaluate:W},te=(e,t)=>t?s(e,{s:-40,l:10}):s(e,{s:-40,l:-10}),Na="#ffffff",Pa="#f2f2f2",c_=class{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||s(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||s(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||te(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||te(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||te(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||te(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||r(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||r(this.tertiaryColor),this.lineColor=this.lineColor||r(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||m(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||r(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||u(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||s(this.primaryColor,{h:64}),this.fillType3=this.fillType3||s(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||s(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||s(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||s(this.primaryColor,{h:128}),this.fillType7=this.fillType7||s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||s(this.primaryColor,{l:-10}),this.pie5=this.pie5||s(this.secondaryColor,{l:-10}),this.pie6=this.pie6||s(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||s(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Na,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pa}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}},l_=e=>{const t=new c_;return t.calculate(e),t},d_=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=u(this.primaryColor,16),this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=r(this.background),this.secondaryBorderColor=te(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=te(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=u(r("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=zs(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=m("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=zs(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=zs(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=u(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=u(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=u(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?m(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=u(this.secondaryColor,20),this.git1=u(this.pie2||this.secondaryColor,20),this.git2=u(this.pie3||this.tertiaryColor,20),this.git3=u(this.pie4||s(this.primaryColor,{h:-30}),20),this.git4=u(this.pie5||s(this.primaryColor,{h:-60}),20),this.git5=u(this.pie6||s(this.primaryColor,{h:-90}),10),this.git6=u(this.pie7||s(this.primaryColor,{h:60}),10),this.git7=u(this.pie8||s(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||u(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||u(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}},u_=e=>{const t=new d_;return t.calculate(e),t},h_=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=s(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=te(this.primaryColor,this.darkMode),this.secondaryBorderColor=te(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=te(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=zs(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||m(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||m(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||s(this["cScale"+e],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||r(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||r(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=u(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||s(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||s(this.primaryColor,{l:-10}),this.pie5=this.pie5||s(this.secondaryColor,{l:-30}),this.pie6=this.pie6||s(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||s(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||m(r(this.git0),25),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||r(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||r(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Na,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pa}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}},m_=e=>{const t=new h_;return t.calculate(e),t},f_=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=u("#cde498",10),this.primaryBorderColor=te(this.primaryColor,this.darkMode),this.secondaryBorderColor=te(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=te(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.primaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||s(this.primaryColor,{h:30}),this.cScale4=this.cScale4||s(this.primaryColor,{h:60}),this.cScale5=this.cScale5||s(this.primaryColor,{h:90}),this.cScale6=this.cScale6||s(this.primaryColor,{h:120}),this.cScale7=this.cScale7||s(this.primaryColor,{h:150}),this.cScale8=this.cScale8||s(this.primaryColor,{h:210}),this.cScale9=this.cScale9||s(this.primaryColor,{h:270}),this.cScale10=this.cScale10||s(this.primaryColor,{h:300}),this.cScale11=this.cScale11||s(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||m(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||m(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=m(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||s(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=m(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||s(this.primaryColor,{l:-30}),this.pie5=this.pie5||s(this.secondaryColor,{l:-30}),this.pie6=this.pie6||s(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||s(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||s(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||s(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||s(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||s(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||s(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||s(this.primaryColor,{h:-30}),this.git4=this.git4||s(this.primaryColor,{h:-60}),this.git5=this.git5||s(this.primaryColor,{h:-90}),this.git6=this.git6||s(this.primaryColor,{h:60}),this.git7=this.git7||s(this.primaryColor,{h:120}),this.darkMode?(this.git0=u(this.git0,25),this.git1=u(this.git1,25),this.git2=u(this.git2,25),this.git3=u(this.git3,25),this.git4=u(this.git4,25),this.git5=u(this.git5,25),this.git6=u(this.git6,25),this.git7=u(this.git7,25)):(this.git0=m(this.git0,25),this.git1=m(this.git1,25),this.git2=m(this.git2,25),this.git3=m(this.git3,25),this.git4=m(this.git4,25),this.git5=m(this.git5,25),this.git6=m(this.git6,25),this.git7=m(this.git7,25)),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Na,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pa}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}},p_=e=>{const t=new f_;return t.calculate(e),t},g_=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=u(this.contrast,55),this.background="#ffffff",this.tertiaryColor=s(this.primaryColor,{h:-160}),this.primaryBorderColor=te(this.primaryColor,this.darkMode),this.secondaryBorderColor=te(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=te(this.tertiaryColor,this.darkMode),this.primaryTextColor=r(this.primaryColor),this.secondaryTextColor=r(this.secondaryColor),this.tertiaryTextColor=r(this.tertiaryColor),this.lineColor=r(this.background),this.textColor=r(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=u(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||r(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||u(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||m(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=u(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=u(this.contrast,30),this.sectionBkgColor2=u(this.contrast,30),this.taskBorderColor=m(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=u(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=m(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=s(this.primaryColor,{h:64}),this.fillType3=s(this.secondaryColor,{h:64}),this.fillType4=s(this.primaryColor,{h:-64}),this.fillType5=s(this.secondaryColor,{h:-64}),this.fillType6=s(this.primaryColor,{h:128}),this.fillType7=s(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=m(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||s(this.primaryColor,{h:-30}),this.git4=this.pie5||s(this.primaryColor,{h:-60}),this.git5=this.pie6||s(this.primaryColor,{h:-90}),this.git6=this.pie7||s(this.primaryColor,{h:60}),this.git7=this.pie8||s(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||r(this.git0),this.gitInv1=this.gitInv1||r(this.git1),this.gitInv2=this.gitInv2||r(this.git2),this.gitInv3=this.gitInv3||r(this.git3),this.gitInv4=this.gitInv4||r(this.git4),this.gitInv5=this.gitInv5||r(this.git5),this.gitInv6=this.gitInv6||r(this.git6),this.gitInv7=this.gitInv7||r(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Na,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pa}calculate(e){if(typeof e!="object"){this.updateColors();return}const t=Object.keys(e);t.forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]})}},v_=e=>{const t=new g_;return t.calculate(e),t},ft={base:{getThemeVariables:l_},dark:{getThemeVariables:u_},default:{getThemeVariables:m_},forest:{getThemeVariables:p_},neutral:{getThemeVariables:v_}},Nt={theme:"default",themeVariables:ft.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16},Nt.class&&(Nt.class.arrowMarkerAbsolute=Nt.arrowMarkerAbsolute),Nt.gitGraph&&(Nt.gitGraph.arrowMarkerAbsolute=Nt.arrowMarkerAbsolute),bu=(e,t="")=>Object.keys(e).reduce((n,s)=>Array.isArray(e[s])?n:typeof e[s]=="object"&&e[s]!==null?[...n,t+s,...bu(e[s],"")]:[...n,t+s],[]),__=bu(Nt,""),w_=Nt;function O_(e){return typeof e=="undefined"||e===null}function CD(e){return typeof e=="object"&&e!==null}function bD(e){return Array.isArray(e)?e:O_(e)?[]:[e]}function vD(e,t){var n,s,o,i;if(t){o=Object.keys(t);for(n=0,i=o.length;n<i;n+=1)s=o[n],e[s]=t[s]}return e}function gD(e,t){var n,s="";for(n=0;n<t;n+=1)s+=e;return s}function mD(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}S_=O_,M_=CD,F_=bD,T_=gD,z_=mD,D_=vD,ee={isNothing:S_,isObject:M_,toArray:F_,repeat:T_,isNegativeZero:z_,extend:D_};function L_(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),s+" "+n):s}function za(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=L_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}za.prototype=Object.create(Error.prototype),za.prototype.constructor=za,za.prototype.toString=function(t){return this.name+": "+L_(this,t)},nt=za;function hu(e,t,n,s,o){var i="",r="",a=Math.floor(o/2)-1;return s-t>a&&(i=" ... ",t=s-a+i.length),n-s>a&&(r=" ...",n=s+a-r.length),{str:i+e.slice(t,n).replace(/\t/g,"")+r,pos:s-t+i.length}}function uu(e,t){return ee.repeat(" ",t-e.length)+e}function lD(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var s,i,a,c,l,d,u=/\r?\n|\r|\0/g,o=[0],r=[],n=-1;l=u.exec(e.buffer);)r.push(l.index),o.push(l.index+l[0].length),e.position<=l.index&&n<0&&(n=o.length-2);n<0&&(n=o.length-1),i="",c=Math.min(e.line+t.linesAfter,r.length).toString().length,d=t.maxLength-(t.indent+c+3);for(s=1;s<=t.linesBefore;s++){if(n-s<0)break;a=hu(e.buffer,o[n-s],r[n-s],e.position-(o[n]-o[n-s]),d),i=ee.repeat(" ",t.indent)+uu((e.line-s+1).toString(),c)+" | "+a.str+`
`+i}a=hu(e.buffer,o[n],r[n],e.position,d),i+=ee.repeat(" ",t.indent)+uu((e.line+1).toString(),c)+" | "+a.str+`
`,i+=ee.repeat("-",t.indent+c+3+a.pos)+`^
`;for(s=1;s<=t.linesAfter;s++){if(n+s>=r.length)break;a=hu(e.buffer,o[n+s],r[n+s],e.position-(o[n]-o[n+s]),d),i+=ee.repeat(" ",t.indent)+uu((e.line+s+1).toString(),c)+" | "+a.str+`
`}return i.replace(/\n$/,"")}V_=lD,$_=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],W_=["scalar","sequence","mapping"];function rD(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function aD(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if($_.indexOf(t)===-1)throw new nt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=rD(t.styleAliases||null),W_.indexOf(this.kind)===-1)throw new nt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}Z=aD;function Y_(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,s){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=s)}),n[t]=e}),n}function nD(){var t,n,e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function s(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(s);return e}function cu(e){return this.extend(e)}cu.prototype.extend=function(t){var n,o=[],s=[];if(t instanceof Z)s.push(t);else if(Array.isArray(t))s=s.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(o=o.concat(t.implicit)),t.explicit&&(s=s.concat(t.explicit));else throw new nt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");return o.forEach(function(e){if(!(e instanceof Z))throw new nt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&e.loadKind!=="scalar")throw new nt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new nt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(e){if(!(e instanceof Z))throw new nt("Specified list of YAML types (or a single Type object) contains a non-Type object.")}),n=Object.create(cu.prototype),n.implicit=(this.implicit||[]).concat(o),n.explicit=(this.explicit||[]).concat(s),n.compiledImplicit=Y_(n,"implicit"),n.compiledExplicit=Y_(n,"explicit"),n.compiledTypeMap=nD(n.compiledImplicit,n.compiledExplicit),n},Q_=cu,Z_=new Z("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),J_=new Z("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),ew=new Z("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),ru=new Q_({explicit:[Z_,J_,ew]});function Gz(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Yz(){return null}function qz(e){return e===null}iw=new Z("tag:yaml.org,2002:null",{kind:"scalar",resolve:Gz,construct:Yz,predicate:qz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Kz(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Uz(e){return e==="true"||e==="True"||e==="TRUE"}function Wz(e){return Object.prototype.toString.call(e)==="[object Boolean]"}lw=new Z("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Kz,construct:Uz,predicate:Wz,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function $z(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Vz(e){return 48<=e&&e<=55}function Bz(e){return 48<=e&&e<=57}function Iz(e){if(e===null)return!1;var t,o=e.length,n=0,s=!1;if(!o)return!1;if(t=e[n],(t==="-"||t==="+")&&(t=e[++n]),t==="0"){if(n+1===o)return!0;if(t=e[++n],t==="b"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(t!=="0"&&t!=="1")return!1;s=!0}return s&&t!=="_"}if(t==="x"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(!$z(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}if(t==="o"){for(n++;n<o;n++){if(t=e[n],t==="_")continue;if(!Vz(e.charCodeAt(n)))return!1;s=!0}return s&&t!=="_"}}if(t==="_")return!1;for(;n<o;n++){if(t=e[n],t==="_")continue;if(!Bz(e.charCodeAt(n)))return!1;s=!0}return!!s&&t!=="_"}function Lz(e){var n,t=e,s=1;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(s=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return s*parseInt(t.slice(2),2);if(t[1]==="x")return s*parseInt(t.slice(2),16);if(t[1]==="o")return s*parseInt(t.slice(2),8)}return s*parseInt(t,10)}function Nz(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ee.isNegativeZero(e)}gw=new Z("tag:yaml.org,2002:int",{kind:"scalar",resolve:Iz,construct:Lz,predicate:Nz,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vw=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Dz(e){return e!==null&&!!vw.test(e)&&e[e.length-1]!=="_"}function zz(e){var t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1;return"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}yw=/^[-+]?[0-9]+e/;function Tz(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ee.isNegativeZero(e))return"-0.0";return n=e.toString(10),yw.test(n)?n.replace("e",".e"):n}function Fz(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||ee.isNegativeZero(e))}Ow=new Z("tag:yaml.org,2002:float",{kind:"scalar",resolve:Dz,construct:zz,predicate:Fz,represent:Tz,defaultStyle:"lowercase"}),xw=ru.extend({implicit:[iw,lw,gw,Ow]}),Cw=xw,iu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ou=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Sz(e){return e!==null&&(iu.exec(e)!==null||ou.exec(e)!==null)}function Cz(e){var o,i,a,r,c,l,d,u,h,n=0,s=null,t=iu.exec(e);if(t===null&&(t=ou.exec(e)),t===null)throw new Error("Date resolve error");if(i=+t[1],a=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(i,a,r));if(c=+t[4],l=+t[5],d=+t[6],t[7]){for(n=t[7].slice(0,3);n.length<3;)n+="0";n=+n}return t[9]&&(u=+t[10],h=+(t[11]||0),s=(u*60+h)*6e4,t[9]==="-"&&(s=-s)),o=new Date(Date.UTC(i,a,r,c,l,d,n)),s&&o.setTime(o.getTime()-s),o}function xz(e){return e.toISOString()}Fw=new Z("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Sz,construct:Cz,instanceOf:Date,represent:xz});function Oz(e){return e==="<<"||e===null}zw=new Z("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Oz}),yl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
`;function wz(e){if(e===null)return!1;var t,n,s=0,o=e.length,i=yl;for(t=0;t<o;t++){if(n=i.indexOf(e.charAt(t)),n>64)continue;if(n<0)return!1;s+=6}return s%8===0}function _z(e){var s,o,i=e.replace(/[\r\n=]/g,""),a=i.length,r=yl,t=0,n=[];for(s=0;s<a;s++)s%4===0&&s&&(n.push(t>>16&255),n.push(t>>8&255),n.push(t&255)),t=t<<6|r.indexOf(i.charAt(s));return o=a%4*6,o===0?(n.push(t>>16&255),n.push(t>>8&255),n.push(t&255)):o===18?(n.push(t>>10&255),n.push(t>>2&255)):o===12&&n.push(t>>4&255),new Uint8Array(n)}function jz(e){var o,i,t="",s=0,a=e.length,n=yl;for(o=0;o<a;o++)o%3===0&&o&&(t+=n[s>>18&63],t+=n[s>>12&63],t+=n[s>>6&63],t+=n[s&63]),s=(s<<8)+e[o];return i=a%3,i===0?(t+=n[s>>18&63],t+=n[s>>12&63],t+=n[s>>6&63],t+=n[s&63]):i===2?(t+=n[s>>10&63],t+=n[s>>4&63],t+=n[s<<2&63],t+=n[64]):i===1&&(t+=n[s>>2&63],t+=n[s<<4&63],t+=n[64],t+=n[64]),t}function bz(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}Hw=new Z("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wz,construct:_z,predicate:bz,represent:jz}),Iw=Object.prototype.hasOwnProperty,Bw=Object.prototype.toString;function vz(e){if(e===null)return!0;var t,n,s,o,a,i=[],r=e;for(t=0,a=r.length;t<a;t+=1){if(n=r[t],o=!1,Bw.call(n)!=="[object Object]")return!1;for(s in n)if(Iw.call(n,s)){if(o)return!1;o=!0}if(!o)return!1;if(i.indexOf(s)===-1)i.push(s);else return!1}return!0}function gz(e){return e!==null?e:[]}Ww=new Z("tag:yaml.org,2002:omap",{kind:"sequence",resolve:vz,construct:gz}),Uw=Object.prototype.toString;function pz(e){if(e===null)return!0;var t,n,s,i,o=e,a=new Array(o.length);for(t=0,i=o.length;t<i;t+=1){if(n=o[t],Uw.call(n)!=="[object Object]")return!1;if(s=Object.keys(n),s.length!==1)return!1;a[t]=[s[0],n[s[0]]]}return!0}function fz(e){if(e===null)return[];var t,n,s,i,o=e,a=new Array(o.length);for(t=0,i=o.length;t<i;t+=1)n=o[t],s=Object.keys(n),a[t]=[s[0],n[s[0]]];return a}Yw=new Z("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:pz,construct:fz}),Gw=Object.prototype.hasOwnProperty;function mz(e){if(e===null)return!0;var t,n=e;for(t in n)if(Gw.call(n,t)&&n[t]!==null)return!1;return!0}function hz(e){return e!==null?e:{}}Zw=new Z("tag:yaml.org,2002:set",{kind:"mapping",resolve:mz,construct:hz}),Jw=Cw.extend({implicit:[Fw,zw],explicit:[Hw,Ww,Yw,Zw]}),kt=Object.prototype.hasOwnProperty,la=1,eu=2,Jd=3,ra=4,wl=1,aO=2,Yd=3,cO=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lO=/[\x85\u2028\u2029]/,dO=/[,[\]{}]/,qd=/^(?:!|!!|![a-z-]+!)$/i,Kd=/^(?:!|[^,[\]{}])(?:%[0-9a-f]{2}|[0-9a-z-#;/?:@&=+$,_.!~*'()[\]])*$/i;function mO(e){return Object.prototype.toString.call(e)}function rt(e){return e===10||e===13}function Jn(e){return e===9||e===32}function he(e){return e===9||e===32||e===10||e===13}function Ss(e){return e===44||e===91||e===93||e===123||e===125}function iz(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function oz(e){return e===120?2:e===117?4:e===85?8:0}function sz(e){return 48<=e&&e<=57?e-48:-1}function _O(e){return e===48?"\0":e===97?"":e===98?"":e===116?"	":e===9?"	":e===110?`
`:e===118?"":e===102?"":e===114?``:e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"":e===80?"":""}function uL(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}Id=new Array(256),Rd=new Array(256);for(is=0;is<256;is++)Id[is]=_O(is)?1:0,Rd[is]=_O(is);function HT(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Jw,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function kO(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=V_(n),new nt(t,n)}function d(e,t){throw kO(e,t)}function kl(e,t){e.onWarning&&e.onWarning.call(null,kO(e,t))}Td={YAML:function(t,n,s){var o,i,a;t.version!==null&&d(t,"duplication of %YAML directive"),s.length!==1&&d(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(s[0]),o===null&&d(t,"ill-formed argument of the YAML directive"),a=parseInt(o[1],10),i=parseInt(o[2],10),a!==1&&d(t,"unacceptable YAML version of the document"),t.version=s[0],t.checkLineBreaks=i<2,i!==1&&i!==2&&kl(t,"unsupported YAML version of the document")},TAG:function(t,n,s){var o,i;s.length!==2&&d(t,"TAG directive accepts exactly two arguments"),i=s[0],o=s[1],qd.test(i)||d(t,"ill-formed tag handle (first argument) of the TAG directive"),kt.call(t.tagMap,i)&&d(t,'there is a previously declared suffix for "'+i+'" tag handle'),Kd.test(o)||d(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{d(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function vn(e,t,n,s){var o,i,a,r;if(t<n){if(o=e.input.slice(t,n),s)for(i=0,r=o.length;i<r;i+=1)a=o.charCodeAt(i),a===9||32<=a&&a<=1114111||d(e,"expected valid JSON character");else cO.test(o)&&d(e,"the stream contains non-printable characters");e.result+=o}}function TO(e,t,n,s){var o,i,a,r;ee.isObject(n)||d(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n);for(i=0,r=a.length;i<r;i+=1)o=a[i],kt.call(t,o)||(t[o]=n[o],s[o]=!0)}function fs(e,t,n,s,o,i,a,r,c){var l,u;if(Array.isArray(o)){o=Array.prototype.slice.call(o);for(l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&d(e,"nested arrays are not supported inside keys"),typeof o=="object"&&mO(o[l])==="[object Object]"&&(o[l]="[object Object]")}if(typeof o=="object"&&mO(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),s==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)TO(e,t,i[l],n);else TO(e,t,i,n);else!e.json&&!kt.call(n,o)&&kt.call(t,o)&&(e.line=a||e.line,e.lineStart=r||e.lineStart,e.position=c||e.position,d(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[o]=i,delete n[o];return t}function Ad(e){var t=e.input.charCodeAt(e.position);t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):d(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function H(e,t,n){for(var o=0,s=e.input.charCodeAt(e.position);s!==0;){for(;Jn(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0)if(rt(s))for(Ad(e),s=e.input.charCodeAt(e.position),o++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return n!==-1&&o!==0&&e.lineIndent<n&&kl(e,"deficient indentation"),o}function Tl(e){var n=e.position,t=e.input.charCodeAt(n);return!!((t===45||t===46)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),t===0||he(t)))}function Od(e,t){t===1?e.result+=" ":t>1&&(e.result+=ee.repeat(`
`,t-1))}function AT(e,t,n){var o,i,a,r,c,l,d,u,h=e.kind,m=e.result,s=e.input.charCodeAt(e.position);if(he(s)||Ss(s)||s===35||s===38||s===42||s===33||s===124||s===62||s===39||s===34||s===37||s===64||s===96)return!1;if((s===63||s===45)&&(o=e.input.charCodeAt(e.position+1),he(o)||n&&Ss(o)))return!1;for(e.kind="scalar",e.result="",a=i=e.position,r=!1;s!==0;){if(s===58){if(o=e.input.charCodeAt(e.position+1),he(o)||n&&Ss(o))break}else if(s===35){if(l=e.input.charCodeAt(e.position-1),he(l))break}else if(e.position===e.lineStart&&Tl(e)||n&&Ss(s))break;else if(rt(s)){if(c=e.line,d=e.lineStart,u=e.lineIndent,H(e,!1,-1),e.lineIndent>=t){r=!0,s=e.input.charCodeAt(e.position);continue}e.position=i,e.line=c,e.lineStart=d,e.lineIndent=u;break}r&&(vn(e,a,i,!1),Od(e,e.line-c),a=i=e.position,r=!1),Jn(s)||(i=e.position+1),s=e.input.charCodeAt(++e.position)}return vn(e,a,i,!1),!!e.result||(e.kind=h,e.result=m,!1)}function ET(e,t){if(n=e.input.charCodeAt(e.position),n!==39)return!1;e.kind="scalar",e.result="",e.position++,s=o=e.position;for(var n,s,o;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(vn(e,s,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)s=e.position,e.position++,o=e.position;else return!0;else rt(n)?(vn(e,s,o,!0),Od(e,H(e,!1,t)),s=o=e.position):e.position===e.lineStart&&Tl(e)?d(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);d(e,"unexpected end of the stream within a single quoted scalar")}function CT(e,t){if(n=e.input.charCodeAt(e.position),n!==34)return!1;for(e.kind="scalar",e.result="",e.position++,s=o=e.position;(n=e.input.charCodeAt(e.position))!==0;){if(n===34)return vn(e,s,e.position,!0),e.position++,!0;if(n===92){if(vn(e,s,e.position,!0),n=e.input.charCodeAt(++e.position),rt(n))H(e,!1,t);else if(n<256&&Id[n])e.result+=Rd[n],e.position++;else if((a=oz(n))>0){r=a,i=0;for(var n,s,o,i,a,r;r>0;r--)n=e.input.charCodeAt(++e.position),(a=iz(n))>=0?i=(i<<4)+a:d(e,"expected hexadecimal character");e.result+=uL(i),e.position++}else d(e,"unknown escape sequence");s=o=e.position}else rt(n)?(vn(e,s,o,!0),Od(e,H(e,!1,t)),s=o=e.position):e.position===e.lineStart&&Tl(e)?d(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}d(e,"unexpected end of the stream within a double quoted scalar")}function xT(e,t){var s,o,i,a,r,c,l,u,h,m,f,v,p=!0,j=e.tag,b=e.anchor,g=Object.create(null),n=e.input.charCodeAt(e.position);if(n===91)m=93,l=!1,s=[];else if(n===123)m=125,l=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(++e.position);n!==0;){if(H(e,!0,t),n=e.input.charCodeAt(e.position),n===m)return e.position++,e.tag=j,e.anchor=b,e.kind=l?"mapping":"sequence",e.result=s,!0;p?n===44&&d(e,"expected the node content, but found ','"):d(e,"missed comma between flow collection entries"),r=o=a=null,i=f=!1,n===63&&(v=e.input.charCodeAt(e.position+1),he(v)&&(i=f=!0,e.position++,H(e,!0,t))),c=e.line,h=e.lineStart,u=e.position,gs(e,t,la,!1,!0),r=e.tag,o=e.result,H(e,!0,t),n=e.input.charCodeAt(e.position),(f||e.line===c)&&n===58&&(i=!0,n=e.input.charCodeAt(++e.position),H(e,!0,t),gs(e,t,la,!1,!0),a=e.result),l?fs(e,s,g,r,o,a,c,h,u):i?s.push(fs(e,null,g,r,o,a,c,h,u)):s.push(o),H(e,!0,t),n=e.input.charCodeAt(e.position),n===44?(p=!0,n=e.input.charCodeAt(++e.position)):p=!1}d(e,"unexpected end of the stream within a flow collection")}function OT(e,t){var c,u,h,r=wl,o=!1,i=!1,a=t,s=0,l=!1,n=e.input.charCodeAt(e.position);if(n===124)c=!1;else if(n===62)c=!0;else return!1;for(e.kind="scalar",e.result="";n!==0;)if(n=e.input.charCodeAt(++e.position),n===43||n===45)wl===r?r=n===43?Yd:aO:d(e,"repeat of a chomping mode identifier");else if((u=sz(n))>=0)u===0?d(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):i?d(e,"repeat of an indentation width identifier"):(a=t+u-1,i=!0);else break;if(Jn(n)){do n=e.input.charCodeAt(++e.position);while(Jn(n))if(n===35)do n=e.input.charCodeAt(++e.position);while(!rt(n)&&n!==0)}for(;n!==0;){for(Ad(e),e.lineIndent=0,n=e.input.charCodeAt(e.position);(!i||e.lineIndent<a)&&n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);if(!i&&e.lineIndent>a&&(a=e.lineIndent),rt(n)){s++;continue}if(e.lineIndent<a){r===Yd?e.result+=ee.repeat(`
`,o?1+s:s):r===wl&&o&&(e.result+=`
`);break}for(c?Jn(n)?(l=!0,e.result+=ee.repeat(`
`,o?1+s:s)):l?(l=!1,e.result+=ee.repeat(`
`,s+1)):s===0?o&&(e.result+=" "):e.result+=ee.repeat(`
`,s):e.result+=ee.repeat(`
`,o?1+s:s),o=!0,i=!0,s=0,h=e.position;!rt(n)&&n!==0;)n=e.input.charCodeAt(++e.position);vn(e,h,e.position,!1)}return!0}function $O(e,t){var n,o,i,r=e.tag,c=e.anchor,s=[],a=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);n!==0;){if(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,d(e,"tab characters must not be used in indentation")),n!==45)break;if(i=e.input.charCodeAt(e.position+1),!he(i))break;if(a=!0,e.position++,H(e,!0,-1)&&e.lineIndent<=t){s.push(null),n=e.input.charCodeAt(e.position);continue}if(o=e.line,gs(e,t,Jd,!1,!0),s.push(e.result),H(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&n!==0)d(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return!!a&&(e.tag=r,e.anchor=c,e.kind="sequence",e.result=s,!0)}function yT(e,t,n){var s,c,l,u,p,g,j,v=e.tag,b=e.anchor,r={},f=Object.create(null),a=null,i=null,m=null,o=!1,h=!1;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),s=e.input.charCodeAt(e.position);s!==0;){if(!o&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,d(e,"tab characters must not be used in indentation")),j=e.input.charCodeAt(e.position+1),p=e.line,(s===63||s===58)&&he(j))s===63?(o&&(fs(e,r,f,a,i,null,u,l,c),a=i=m=null),h=!0,o=!0,g=!0):o?(o=!1,g=!0):d(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=j;else{if(u=e.line,l=e.lineStart,c=e.position,!gs(e,n,eu,!1,!0))break;if(e.line===p){for(s=e.input.charCodeAt(e.position);Jn(s);)s=e.input.charCodeAt(++e.position);if(s===58)s=e.input.charCodeAt(++e.position),he(s)||d(e,"a whitespace character is expected after the key-value separator within a block mapping"),o&&(fs(e,r,f,a,i,null,u,l,c),a=i=m=null),h=!0,o=!1,g=!1,a=e.tag,i=e.result;else if(h)d(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=v,e.anchor=b,!0}else if(h)d(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=v,e.anchor=b,!0}if((e.line===p||e.lineIndent>t)&&(o&&(u=e.line,l=e.lineStart,c=e.position),gs(e,t,ra,!0,g)&&(o?i=e.result:m=e.result),o||(fs(e,r,f,a,i,m,u,l,c),a=i=m=null),H(e,!0,-1),s=e.input.charCodeAt(e.position)),(e.line===p||e.lineIndent>t)&&s!==0)d(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return o&&fs(e,r,f,a,i,null,u,l,c),h&&(e.tag=v,e.anchor=b,e.kind="mapping",e.result=r),h}function bT(e){var n,s,o,i=!1,a=!1,t=e.input.charCodeAt(e.position);if(t!==33)return!1;if(e.tag!==null&&d(e,"duplication of a tag property"),t=e.input.charCodeAt(++e.position),t===60?(i=!0,t=e.input.charCodeAt(++e.position)):t===33?(a=!0,s="!!",t=e.input.charCodeAt(++e.position)):s="!",o=e.position,i){do t=e.input.charCodeAt(++e.position);while(t!==0&&t!==62)e.position<e.length?(n=e.input.slice(o,e.position),t=e.input.charCodeAt(++e.position)):d(e,"unexpected end of the stream within a verbatim tag")}else{for(;t!==0&&!he(t);)t===33&&(a?d(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(o-1,e.position+1),qd.test(s)||d(e,"named tag handle cannot contain such characters"),a=!0,o=e.position+1)),t=e.input.charCodeAt(++e.position);n=e.input.slice(o,e.position),dO.test(n)&&d(e,"tag suffix cannot contain flow indicator characters")}n&&!Kd.test(n)&&d(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{d(e,"tag name is malformed: "+n)}return i?e.tag=n:kt.call(e.tagMap,s)?e.tag=e.tagMap[s]+n:s==="!"?e.tag="!"+n:s==="!!"?e.tag="tag:yaml.org,2002:"+n:d(e,'undeclared tag handle "'+s+'"'),!0}function gT(e){if(t=e.input.charCodeAt(e.position),t!==38)return!1;e.anchor!==null&&d(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;for(var t,n;t!==0&&!he(t)&&!Ss(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&d(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function pT(e){if(t=e.input.charCodeAt(e.position),t!==42)return!1;t=e.input.charCodeAt(++e.position),s=e.position;for(var t,n,s;t!==0&&!he(t)&&!Ss(t);)t=e.input.charCodeAt(++e.position);return e.position===s&&d(e,"name of an alias node must contain at least one character"),n=e.input.slice(s,e.position),kt.call(e.anchorMap,n)||d(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],H(e,!0,-1),!0}function gs(e,t,n,s,o){var i,r,c,l,h,m,f,g,v,a=1,p=!1,u=!1;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,g=v=l=ra===n||Jd===n,s&&H(e,!0,-1)&&(p=!0,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)),a===1)for(;bT(e)||gT(e);)H(e,!0,-1)?(p=!0,l=g,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)):l=!1;if(l&&(l=p||o),(a===1||ra===n)&&(la===n||eu===n?c=t:c=t+1,f=e.position-e.lineStart,a===1?l&&($O(e,f)||yT(e,f,c))||xT(e,c)?u=!0:(v&&OT(e,c)||ET(e,c)||CT(e,c)?u=!0:pT(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&d(e,"alias node should not have any properties")):AT(e,c,la===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(u=l&&$O(e,f))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){{e.result!==null&&e.kind!=="scalar"&&d(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"');for(r=0,m=e.implicitTypes.length;r<m;r+=1)if(i=e.implicitTypes[r],i.resolve(e.result)){e.result=i.construct(e.result),e.tag=i.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}}else if(e.tag!=="!"){if(kt.call(e.typeMap[e.kind||"fallback"],e.tag))i=e.typeMap[e.kind||"fallback"][e.tag];else{i=null,h=e.typeMap.multi[e.kind||"fallback"];for(r=0,m=h.length;r<m;r+=1)if(e.tag.slice(0,h[r].tag.length)===h[r].tag){i=h[r];break}}i||d(e,"unknown tag !<"+e.tag+">"),e.result!==null&&i.kind!==e.kind&&d(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+i.kind+'", not "'+e.kind+'"'),i.resolve(e.result,e.tag)?(e.result=i.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function mT(e){var t,n,s,o,a=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(t=e.input.charCodeAt(e.position))!==0;){if(H(e,!0,-1),t=e.input.charCodeAt(e.position),e.lineIndent>0||t!==37)break;for(i=!0,t=e.input.charCodeAt(++e.position),s=e.position;t!==0&&!he(t);)t=e.input.charCodeAt(++e.position);for(n=e.input.slice(s,e.position),o=[],n.length<1&&d(e,"directive name must not be less than one character in length");t!==0;){for(;Jn(t);)t=e.input.charCodeAt(++e.position);if(t===35){do t=e.input.charCodeAt(++e.position);while(t!==0&&!rt(t))break}if(rt(t))break;for(s=e.position;t!==0&&!he(t);)t=e.input.charCodeAt(++e.position);o.push(e.input.slice(s,e.position))}t!==0&&Ad(e),kt.call(Td,n)?Td[n](e,n,o):kl(e,'unknown document directive "'+n+'"')}if(H(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,H(e,!0,-1)):i&&d(e,"directives end mark is expected"),gs(e,e.lineIndent-1,ra,!1,!0),H(e,!0,-1),e.checkLineBreaks&&lO.test(e.input.slice(a,e.position))&&kl(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Tl(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,H(e,!0,-1));return}if(e.position<e.length-1)d(e,"end of the stream or a document separator is expected");else return}function XO(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new HT(e,t),s=e.indexOf("\0");for(s!==-1&&(n.position=s,d(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)mT(n);return n.documents}function hT(e,t,n){if(t!==null&&typeof t=="object"&&typeof n=="undefined"&&(n=t,t=null),s=XO(e,n),typeof t!="function")return s;for(var s,o=0,i=s.length;o<i;o+=1)t(s[o])}function uT(e,t){var n=XO(e,t);if(n.length===0)return void 0;if(n.length===1)return n[0];throw new nt("expected a single document in the stream, but found more")}JO=hT,ex=uT,tx={loadAll:JO,load:ex},nx=ru,sx=tx.load,_d=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function cT(e,t){var s;const n=e.match(_d);if(n){const o=sx(n[1],{schema:nx});return o?.title&&((s=t.setDiagramTitle)==null?void 0:s.call(t,o.title)),e.slice(n[0].length)}return e}ax=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,rx=/\s*%%.*\n/gm,Zi={},zl=function(e,t){e=e.replace(_d,"").replace(ax,"").replace(rx,`
`);for(const[n,{detector:s}]of Object.entries(Zi)){const o=s(e,t);if(o)return n}throw new Error(`No diagram type detected for text: ${e}`)},bd=(t,n,s)=>{if(Zi[t])throw new Error(`Detector with key ${t} already exists`);Zi[t]={detector:n,loader:s},e.debug(`Detector with key ${t} added${s?" with loader":""}`)},ux=e=>Zi[e].loader,Dl=function(e,t,n){const{depth:s,clobber:o}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(t=>Dl(e,t,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(t=>{e.includes(t)||e.push(t)}),e):e===void 0||s<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=Dl(e[n],t[n],{depth:s-1,clobber:o})):(o||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},U=Dl,fx={curveBasis:Cs,curveBasisClosed:az,curveBasisOpen:rz,curveLinear:ye,curveLinearClosed:cz,curveMonotoneX:dz,curveMonotoneY:uz,curveNatural:Mz,curveStep:Xz,curveStepAfter:iD,curveStepBefore:eD},ql=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,gx=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,vx=function(e,t){const s=sd(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(s)){const e=s.map(e=>e.args);en(e),n=U(n,[...e])}else n=s.args;if(n){let s=zl(e,t);["config"].forEach(e=>{n[e]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n[s]=n[e],delete n[e])})}return n},sd=function(t,n=null){try{const i=new RegExp(`[%]{2}(?![{]${gx.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),e.debug(`Detecting diagram directive${n!==null?" type:"+n:""} based on the text:${t}`);let s;const o=[];for(;(s=ql.exec(t))!==null;)if(s.index===ql.lastIndex&&ql.lastIndex++,s&&!n||n&&s[1]&&s[1].match(n)||n&&s[2]&&s[2].match(n)){const e=s[1]?s[1]:s[2],t=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:e,args:t})}return o.length===0&&o.push({type:t,args:null}),o.length===1?o[0]:o}catch(s){return e.error(`ERROR: ${s.message} - Unable to parse directive
      ${n!==null?" type:"+n:""} based on the text:${t}`),{type:null,args:null}}},jx=function(e,t){for(const[n,s]of t.entries())if(s.match(e))return n;return-1};function Ue(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return fx[n]||t}function eT(e,t){const n=e.trim();if(n)return t.securityLevel!=="loose"?(0,Bt.sanitizeUrl)(n):n}wx=(e,...t)=>{const s=e.split("."),o=s.length-1,i=s[o];let n=window;for(let e=0;e<o;e++)if(n=n[s[e]],!n)return;n[i](...t)};function Gl(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}function ZF(e){let t,o=0;e.forEach(e=>{o+=Gl(e,t),t=e});let s=o/2,n=void 0;return t=void 0,e.forEach(e=>{if(t&&!n){const o=Gl(e,t);if(o<s)s-=o;else{const i=s/o;i<=0&&(n=t),i>=1&&(n={x:e.x,y:e.y}),i>0&&i<1&&(n={x:(1-i)*t.x+i*e.x,y:(1-i)*t.y+i*e.y})}}t=e}),n}function QF(e){return e.length===1?e[0]:ZF(e)}Ex=(t,n,s)=>{let i;e.info(`our points ${JSON.stringify(n)}`),n[0]!==s&&(n=n.reverse());const d=25;let a=d,o;i=void 0,n.forEach(e=>{if(i&&!o){const t=Gl(e,i);if(t<a)a-=t;else{const n=a/t;n<=0&&(o=i),n>=1&&(o={x:e.x,y:e.y}),n>0&&n<1&&(o={x:(1-n)*i.x+n*e.x,y:(1-n)*i.y+n*e.y})}}i=e});const c=t?10:5,l=Math.atan2(n[0].y-o.y,n[0].x-o.x),r={x:0,y:0};return r.x=Math.sin(l)*c+(n[0].x+o.x)/2,r.y=-Math.cos(l)*c+(n[0].y+o.y)/2,r};function XF(t,n,s){let o=JSON.parse(JSON.stringify(s)),r;e.info("our points",o),n!=="start_left"&&n!=="start_right"&&(o=o.reverse()),o.forEach(e=>{r=e});const u=25+t;let d=u,i;r=void 0,o.forEach(e=>{if(r&&!i){const t=Gl(e,r);if(t<d)d-=t;else{const n=d/t;n<=0&&(i=r),n>=1&&(i={x:e.x,y:e.y}),n>0&&n<1&&(i={x:(1-n)*r.x+n*e.x,y:(1-n)*r.y+n*e.y})}}r=e});const c=10+t*.5,l=Math.atan2(o[0].y-i.y,o[0].x-i.x),a={x:0,y:0};return a.x=Math.sin(l)*c+(o[0].x+i.x)/2,a.y=-Math.cos(l)*c+(o[0].y+i.y)/2,n==="start_left"&&(a.x=Math.sin(l+Math.PI)*c+(o[0].x+i.x)/2,a.y=-Math.cos(l+Math.PI)*c+(o[0].y+i.y)/2),n==="end_right"&&(a.x=Math.sin(l-Math.PI)*c+(o[0].x+i.x)/2-5,a.y=-Math.cos(l-Math.PI)*c+(o[0].y+i.y)/2-5),n==="end_left"&&(a.x=Math.sin(l)*c+(o[0].x+i.x)/2-5,a.y=-Math.cos(l)*c+(o[0].y+i.y)/2-5),a}function Gt(e){let t="",n="";for(const s of e)s!==void 0&&(s.startsWith("color:")||s.startsWith("text-align:")?n=n+s+";":t=t+s+";");return{style:t,labelStyle:n}}Jl=0,g4=()=>(Jl++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Jl);function BF(e){let t="";const n="0123456789abcdef",s=n.length;for(let o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*s));return t}ed=e=>BF(e.length),zx=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},Dx=function(e,t){const o=t.text.replace(h.lineBreakRegex," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.style("text-anchor",t.anchor),n.style("font-family",t.fontFamily),n.style("font-size",t.fontSize),n.style("font-weight",t.fontWeight),n.attr("fill",t.fill),t.class!==void 0&&n.attr("class",t.class);const s=n.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(o),n},nd=ri((e,t,n)=>{if(!e)return e;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),h.lineBreakRegex.test(e))return e;const i=e.split(" "),o=[];let s="";return i.forEach((e,a)=>{const r=Je(`${e} `,n),c=Je(s,n);if(r>t){const{hyphenatedStrings:i,remainingWord:a}=Lx(e,t,"-",n);o.push(s,...i),s=a}else c+r>=t?(o.push(s),s=e):s=[s,e].filter(Boolean).join(" ");const l=a+1,d=l===i.length;d&&o.push(s)}),o.filter(e=>e!=="").join(n.joinWith)},(e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),Lx=ri((e,t,n="-",s)=>{s=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},s);const i=[...e],a=[];let o="";return i.forEach((e,r)=>{const c=`${o}${e}`,l=Je(c,s);if(l>=t){const e=r+1,t=i.length===e,s=`${c}${n}`;a.push(t?c:s),o=""}else o=c}),{hyphenatedStrings:a,remainingWord:o}},(e,t,n="-",s)=>`${e}${t}${n}${s.fontSize}${s.fontWeight}${s.fontFamily}`);function od(e,t){return t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},t),Ul(e,t).height}function Je(e,t){return t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},t),Ul(e,t).width}Ul=ri((e,t)=>{t=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},t);const{fontSize:a,fontFamily:r,fontWeight:c}=t;if(!e)return{width:0,height:0};const l=["sans-serif",r],d=e.split(h.lineBreakRegex),n=[],s=i("body");if(!s.remove)return{width:0,height:0,lineHeight:0};const o=s.append("svg");for(const s of l){let t=0;const e={width:0,height:0,lineHeight:0};for(const l of d){const n=zx();n.text=l;const i=Dx(o,n).style("font-size",a).style("font-weight",c).style("font-family",s),r=(i._groups||i)[0][0].getBBox();e.width=Math.round(Math.max(e.width,r.width)),t=Math.round(r.height),e.height+=t,e.lineHeight=Math.round(Math.max(e.lineHeight,t))}n.push(e)}o.remove();const u=isNaN(n[1].height)||isNaN(n[1].width)||isNaN(n[1].lineHeight)||n[0].height>n[1].height&&n[0].width>n[1].width&&n[0].lineHeight>n[1].lineHeight?0:1;return n[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Ix=class iterator{constructor(e,t){this.deterministic=e,this.seed=t,this.count=t?t.length:0}next(){return this.deterministic?this.count++:Date.now()}},Vx=function(e){return Wl=Wl||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Wl.innerHTML=e,unescape(Wl.textContent)},en=t=>{if(e.debug("directiveSanitizer called with",t),typeof t=="object"&&(t.length?t.forEach(e=>en(e)):Object.keys(t).forEach(n=>{e.debug("Checking key",n),n.startsWith("__")&&(e.debug("sanitize deleting __ option",n),delete t[n]),n.includes("proto")&&(e.debug("sanitize deleting proto option",n),delete t[n]),n.includes("constr")&&(e.debug("sanitize deleting constr option",n),delete t[n]),n.includes("themeCSS")&&(e.debug("sanitizing themeCss option"),t[n]=Mi(t[n])),n.includes("fontFamily")&&(e.debug("sanitizing fontFamily option"),t[n]=Mi(t[n])),n.includes("altFontFamily")&&(e.debug("sanitizing altFontFamily option"),t[n]=Mi(t[n])),__.includes(n)?typeof t[n]=="object"&&(e.debug("sanitize deleting object",n),en(t[n])):(e.debug("sanitize deleting option",n),delete t[n])})),t.themeVariables){const e=Object.keys(t.themeVariables);for(const s of e){const n=t.themeVariables[s];n&&n.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[s]="")}}e.debug("After sanitization",t)},Mi=e=>{let t=0,n=0;for(const s of e){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";s==="{"?t++:s==="}"&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":e};function hd(e){return"str"in e}function TF(e){return e instanceof Error?e.message:String(e)}qx=(e,t,n,s)=>{if(!s)return;const o=e.node().getBBox();e.append("text").text(s).attr("x",o.x+o.width/2).attr("y",-n).attr("class",t)},p={assignWithDepth:U,wrapLabel:nd,calculateTextHeight:od,calculateTextWidth:Je,calculateTextDimensions:Ul,detectInit:vx,detectDirective:sd,isSubstringInArray:jx,interpolateToCurve:Ue,calcLabelPosition:QF,calcCardinalityPosition:Ex,calcTerminalLabelPosition:XF,formatUrl:eT,getStylesFromArray:Gt,generateId:g4,random:ed,runFunc:wx,entityDecode:Vx,initIdGenerator:Ix,directiveSanitizer:en,sanitizeCss:Mi,insertTitle:qx},L3="mermaid",Xx="9.3.0",Qx="Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",Zx="./dist/mermaid.min.js",Jx="./dist/mermaid.core.mjs",eC="./dist/mermaid.d.ts",tC={".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},nC=["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],sC={clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},oC={type:"git",url:"https://github.com/mermaid-js/mermaid"},iC="Knut Sveidqvist",aC="MIT",rC={ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},cC={"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},lC={"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},dC=["dist","README.md"],uC=["**/*.css","**/*.scss"],ki={name:L3,version:Xx,description:Qx,main:Zx,module:Jx,types:eC,exports:tC,keywords:nC,scripts:sC,repository:oC,author:iC,license:aC,standard:rC,dependencies:cC,devDependencies:lC,files:dC,sideEffects:uC},Rn=Object.freeze(w_),ie=U({},Rn),Ln=[],no=U({},Rn),wi=(e,t)=>{let n=U({},e),s={};for(const e of t)Ed(e),s=U(s,e);if(n=U(n,s),s.theme&&s.theme in ft){const e=U({},pC),t=U(e.themeVariables||{},s.themeVariables);n.theme&&n.theme in ft&&(n.themeVariables=ft[n.theme].getThemeVariables(t))}return no=n,Hd(no),no},jC=e=>(ie=U({},Rn),ie=U(ie,e),e.theme&&ft[e.theme]&&(ie.themeVariables=ft[e.theme].getThemeVariables(e.themeVariables)),wi(ie,Ln),ie),yC=e=>{pC=U({},e)},_C=e=>(ie=U(ie,e),wi(ie,Ln),ie),jd=()=>U({},ie),xd=e=>(Hd(e),U(no,e),t()),t=()=>U({},no),Ed=t=>{var n;["secure",...(n=ie.secure)!=null?n:[]].forEach(n=>{t[n]!==void 0&&(e.debug(`Denied attempt to modify a secure key ${n}`,t[n]),delete t[n])}),Object.keys(t).forEach(e=>{e.indexOf("__")===0&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&Ed(t[e])})},Sl=e=>{e.fontFamily&&(e.themeVariables?e.themeVariables.fontFamily||(e.themeVariables={fontFamily:e.fontFamily}):e.themeVariables={fontFamily:e.fontFamily}),Ln.push(e),wi(ie,Ln)},io=(e=ie)=>{Ln=[],wi(e,Ln)},zd=(e=>(e.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",e))(zd||{}),Pd={},MC=t=>{if(Pd[t])return;e.warn(zd[t]),Pd[t]=!0},Hd=e=>{if(!e)return;(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&MC("LAZY_LOAD_DEPRECATED")},TC=function(e,t){for(let n of t)e.attr(n[0],n[1])},zC=function(e,t,n){let s=new Map;return n?(s.set("width","100%"),s.set("style",`max-width: ${t}px;`)):(s.set("height",e),s.set("width",t)),s},Me=function(e,t,n,s){const o=zC(t,n,s);TC(e,o)},vi=function(t,n,s,o){const i=n.node().getBBox(),c=i.width,l=i.height;e.info(`SVG bounds: ${c}x${l}`,i);let a=0,r=0;e.info(`Graph bounds: ${a}x${r}`,t),a=c+s*2,r=l+s*2,e.info(`Calculated bounds: ${a}x${r}`),Me(n,r,a,o);const d=`${i.x-s} ${i.y-s} ${i.width+2*s} ${i.height+2*s}`;n.attr("viewBox",d)},LC=e=>`g.classGroup text {
  fill: ${e.nodeBorder};
  fill: ${e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,vo=LC,PC=e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${e.attributeBackgroundColorOdd};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${e.attributeBackgroundColorEven};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${e.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }    
`,Zd=PC,IC=()=>``,su=IC,VC=e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,ti=VC,WC=e=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${e.fontFamily};
      fill: ${e.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${e.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${e.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${e.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,lu=WC,KC=()=>``,du=KC,YC=e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,mu=YC,XC=e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 100%;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }

`,fu=XC,ZC=e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,gu=ZC,eE=e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,ei=eE,nE=e=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,Au=nE,oE=e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,Su=oE,Qo={flowchart:ti,"flowchart-v2":ti,sequence:gu,gantt:lu,classDiagram:vo,"classDiagram-v2":vo,class:vo,stateDiagram:ei,state:ei,info:du,pie:mu,er:Zd,error:su,journey:Au,requirement:fu,c4:Su},rE=(t,n,s)=>{let o="";return t in Qo&&Qo[t]?o=Qo[t](s):e.warn(`No theme found for ${t}`),` & {
    font-family: ${s.fontFamily};
    font-size: ${s.fontSize};
    fill: ${s.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${s.errorBkgColor};
  }
  & .error-text {
    fill: ${s.errorTextColor};
    stroke: ${s.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${s.lineColor};
    stroke: ${s.lineColor};
  }
  & .marker.cross {
    stroke: ${s.lineColor};
  }

  & svg {
    font-family: ${s.fontFamily};
    font-size: ${s.fontSize};
  }

  ${o}

  ${n}
`},cE=(e,t)=>{Qo[e]=t},lE=rE,dE=e,uE=Qc,_o=t,mE=e=>De(e,_o()),Lu=vi,Yo={},V=(e,t,n)=>{if(Yo[e])throw new Error(`Diagram ${e} already registered.`);Yo[e]=t,n&&bd(e,n),cE(e,t.styles),t.injectUtils&&t.injectUtils(dE,uE,_o,mE,Lu)},Hu=e=>{if(e in Yo)return Yo[e];throw new Error(`Diagram ${e} not found.`)},ol=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},d=[1,4],a=[1,7],r=[1,5],b=[1,9],c=[1,6],l=[2,6],v=[1,16],m=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],i=[8,14,20,22,24,25,27,29,32,37,40],y=[8,13,14,20,22,24,25,27,29,32,37,40],w=[1,26],h=[6,8,14,50,55],t=[8,14,55],f=[1,53],p=[1,52],_=[8,14,30,33,35,38,55],o=[1,67],s=[1,68],n=[1,69],j=[8,14,33,35,42,55],g={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 3:return a[c];case 4:return a[c-1];case 5:return o.setDirection(a[c-3]),a[c-1];case 7:o.setOptions(a[c-1]),this.$=a[c];break;case 8:a[c-1]+=a[c],this.$=a[c-1];break;case 10:this.$=[];break;case 11:a[c-1].push(a[c]),this.$=a[c-1];break;case 12:this.$=a[c-1];break;case 17:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 18:case 19:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 20:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 22:o.checkout(a[c]);break;case 23:o.branch(a[c]);break;case 24:o.branch(a[c-2],a[c]);break;case 25:o.cherryPick(a[c],"",void 0);break;case 26:o.cherryPick(a[c-2],"",a[c]);break;case 27:case 29:o.cherryPick(a[c-2],"","");break;case 28:o.cherryPick(a[c],"",a[c-2]);break;case 30:o.merge(a[c],"","","");break;case 31:o.merge(a[c-2],a[c],"","");break;case 32:o.merge(a[c-2],"",a[c],"");break;case 33:o.merge(a[c-2],"","",a[c]);break;case 34:o.merge(a[c-4],a[c],"",a[c-2]);break;case 35:o.merge(a[c-4],"",a[c],a[c-2]);break;case 36:o.merge(a[c-4],"",a[c-2],a[c]);break;case 37:o.merge(a[c-4],a[c-2],a[c],"");break;case 38:o.merge(a[c-4],a[c-2],"",a[c]);break;case 39:o.merge(a[c-4],a[c],a[c-2],"");break;case 40:o.merge(a[c-6],a[c-4],a[c-2],a[c]);break;case 41:o.merge(a[c-6],a[c],a[c-4],a[c-2]);break;case 42:o.merge(a[c-6],a[c-4],a[c],a[c-2]);break;case 43:o.merge(a[c-6],a[c-2],a[c-4],a[c]);break;case 44:o.merge(a[c-6],a[c],a[c-2],a[c-4]);break;case 45:o.merge(a[c-6],a[c-2],a[c],a[c-4]);break;case 46:o.commit(a[c]);break;case 47:o.commit("","",o.commitType.NORMAL,a[c]);break;case 48:o.commit("","",a[c],"");break;case 49:o.commit("","",a[c],a[c-2]);break;case 50:o.commit("","",a[c-2],a[c]);break;case 51:o.commit("",a[c],o.commitType.NORMAL,"");break;case 52:o.commit("",a[c-2],o.commitType.NORMAL,a[c]);break;case 53:o.commit("",a[c],o.commitType.NORMAL,a[c-2]);break;case 54:o.commit("",a[c-2],a[c],"");break;case 55:o.commit("",a[c],a[c-2],"");break;case 56:o.commit("",a[c-4],a[c-2],a[c]);break;case 57:o.commit("",a[c-4],a[c],a[c-2]);break;case 58:o.commit("",a[c-2],a[c-4],a[c]);break;case 59:o.commit("",a[c],a[c-4],a[c-2]);break;case 60:o.commit("",a[c],a[c-2],a[c-4]);break;case 61:o.commit("",a[c-2],a[c],a[c-4]);break;case 62:o.commit(a[c],"",o.commitType.NORMAL,"");break;case 63:o.commit(a[c],"",o.commitType.NORMAL,a[c-2]);break;case 64:o.commit(a[c-2],"",o.commitType.NORMAL,a[c]);break;case 65:o.commit(a[c-2],"",a[c],"");break;case 66:o.commit(a[c],"",a[c-2],"");break;case 67:o.commit(a[c],a[c-2],o.commitType.NORMAL,"");break;case 68:o.commit(a[c-2],a[c],o.commitType.NORMAL,"");break;case 69:o.commit(a[c-4],"",a[c-2],a[c]);break;case 70:o.commit(a[c-4],"",a[c],a[c-2]);break;case 71:o.commit(a[c-2],"",a[c-4],a[c]);break;case 72:o.commit(a[c],"",a[c-4],a[c-2]);break;case 73:o.commit(a[c],"",a[c-2],a[c-4]);break;case 74:o.commit(a[c-2],"",a[c],a[c-4]);break;case 75:o.commit(a[c-4],a[c],a[c-2],"");break;case 76:o.commit(a[c-4],a[c-2],a[c],"");break;case 77:o.commit(a[c-2],a[c],a[c-4],"");break;case 78:o.commit(a[c],a[c-2],a[c-4],"");break;case 79:o.commit(a[c],a[c-4],a[c-2],"");break;case 80:o.commit(a[c-2],a[c-4],a[c],"");break;case 81:o.commit(a[c-4],a[c],o.commitType.NORMAL,a[c-2]);break;case 82:o.commit(a[c-4],a[c-2],o.commitType.NORMAL,a[c]);break;case 83:o.commit(a[c-2],a[c],o.commitType.NORMAL,a[c-4]);break;case 84:o.commit(a[c],a[c-2],o.commitType.NORMAL,a[c-4]);break;case 85:o.commit(a[c],a[c-4],o.commitType.NORMAL,a[c-2]);break;case 86:o.commit(a[c-2],a[c-4],o.commitType.NORMAL,a[c]);break;case 87:o.commit(a[c-6],a[c-4],a[c-2],a[c]);break;case 88:o.commit(a[c-6],a[c-4],a[c],a[c-2]);break;case 89:o.commit(a[c-6],a[c-2],a[c-4],a[c]);break;case 90:o.commit(a[c-6],a[c],a[c-4],a[c-2]);break;case 91:o.commit(a[c-6],a[c-2],a[c],a[c-4]);break;case 92:o.commit(a[c-6],a[c],a[c-2],a[c-4]);break;case 93:o.commit(a[c-4],a[c-6],a[c-2],a[c]);break;case 94:o.commit(a[c-4],a[c-6],a[c],a[c-2]);break;case 95:o.commit(a[c-2],a[c-6],a[c-4],a[c]);break;case 96:o.commit(a[c],a[c-6],a[c-4],a[c-2]);break;case 97:o.commit(a[c-2],a[c-6],a[c],a[c-4]);break;case 98:o.commit(a[c],a[c-6],a[c-2],a[c-4]);break;case 99:o.commit(a[c],a[c-4],a[c-2],a[c-6]);break;case 100:o.commit(a[c-2],a[c-4],a[c],a[c-6]);break;case 101:o.commit(a[c],a[c-2],a[c-4],a[c-6]);break;case 102:o.commit(a[c-2],a[c],a[c-4],a[c-6]);break;case 103:o.commit(a[c-4],a[c-2],a[c],a[c-6]);break;case 104:o.commit(a[c-4],a[c],a[c-2],a[c-6]);break;case 105:o.commit(a[c-2],a[c-4],a[c-6],a[c]);break;case 106:o.commit(a[c],a[c-4],a[c-6],a[c-2]);break;case 107:o.commit(a[c-2],a[c],a[c-6],a[c-4]);break;case 108:o.commit(a[c],a[c-2],a[c-6],a[c-4]);break;case 109:o.commit(a[c-4],a[c-2],a[c-6],a[c]);break;case 110:o.commit(a[c-4],a[c],a[c-6],a[c-2]);break;case 111:this.$="";break;case 112:this.$=a[c];break;case 113:this.$=o.commitType.NORMAL;break;case 114:this.$=o.commitType.REVERSE;break;case 115:this.$=o.commitType.HIGHLIGHT;break;case 118:o.parseDirective("%%{","open_directive");break;case 119:o.parseDirective(a[c],"type_directive");break;case 120:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 121:o.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{1:[3]},{3:10,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{3:11,4:2,5:3,6:d,8:a,14:r,46:8,50:b,55:c},{7:12,8:l,9:[1,13],10:[1,14],11:15,14:v},e(m,[2,124]),e(m,[2,125]),e(m,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:l,11:15,14:v},{9:[1,21]},e(i,[2,10],{12:22,13:[1,23]}),e(y,[2,9]),{9:[1,25],48:24,53:w},e([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:l,11:15,14:v},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},e(y,[2,8]),e(h,[2,116]),{49:45,52:[1,46]},e(h,[2,121]),{1:[2,4]},{8:[1,47]},e(i,[2,11]),{4:48,8:a,14:r,55:c},e(i,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{21:[1,49]},{23:[1,50]},e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),{28:51,34:f,54:p},e(t,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:f,54:p},{33:[1,61],35:[1,62]},{28:63,34:f,54:p},{48:64,53:w},{53:[2,120]},{1:[2,5]},e(i,[2,12]),e(t,[2,17]),e(t,[2,18]),e(t,[2,22]),e(_,[2,122]),e(_,[2,123]),e(t,[2,46]),{34:[1,65]},{39:66,43:o,44:s,45:n},{34:[1,70]},{34:[1,71]},e(t,[2,112]),e(t,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},e(t,[2,23],{30:[1,78]}),e(h,[2,117]),e(t,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),e(t,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),e(j,[2,113]),e(j,[2,114]),e(j,[2,115]),e(t,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),e(t,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:o,44:s,45:n},{34:[1,93]},e(t,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:o,44:s,45:n},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:o,44:s,45:n},{34:[1,106]},{34:[1,107]},{39:108,43:o,44:s,45:n},{34:[1,109]},e(t,[2,31],{35:[1,111],38:[1,110]}),e(t,[2,32],{33:[1,113],35:[1,112]}),e(t,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},e(t,[2,24]),e(t,[2,49],{33:[1,120],42:[1,121]}),e(t,[2,53],{38:[1,122],42:[1,123]}),e(t,[2,63],{33:[1,125],38:[1,124]}),e(t,[2,50],{33:[1,126],42:[1,127]}),e(t,[2,55],{35:[1,128],42:[1,129]}),e(t,[2,66],{33:[1,131],35:[1,130]}),e(t,[2,52],{38:[1,132],42:[1,133]}),e(t,[2,54],{35:[1,134],42:[1,135]}),e(t,[2,67],{35:[1,137],38:[1,136]}),e(t,[2,64],{33:[1,139],38:[1,138]}),e(t,[2,65],{33:[1,141],35:[1,140]}),e(t,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:o,44:s,45:n},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:o,44:s,45:n},e(t,[2,26]),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:o,44:s,45:n},{34:[1,153]},{39:154,43:o,44:s,45:n},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:o,44:s,45:n},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:o,44:s,45:n},{34:[1,167]},{39:168,43:o,44:s,45:n},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:o,44:s,45:n},{34:[1,173]},e(t,[2,37],{35:[1,174]}),e(t,[2,38],{38:[1,175]}),e(t,[2,36],{33:[1,176]}),e(t,[2,39],{35:[1,177]}),e(t,[2,34],{38:[1,178]}),e(t,[2,35],{33:[1,179]}),e(t,[2,60],{42:[1,180]}),e(t,[2,73],{33:[1,181]}),e(t,[2,61],{42:[1,182]}),e(t,[2,84],{38:[1,183]}),e(t,[2,74],{33:[1,184]}),e(t,[2,83],{38:[1,185]}),e(t,[2,59],{42:[1,186]}),e(t,[2,72],{33:[1,187]}),e(t,[2,58],{42:[1,188]}),e(t,[2,78],{35:[1,189]}),e(t,[2,71],{33:[1,190]}),e(t,[2,77],{35:[1,191]}),e(t,[2,57],{42:[1,192]}),e(t,[2,85],{38:[1,193]}),e(t,[2,56],{42:[1,194]}),e(t,[2,79],{35:[1,195]}),e(t,[2,80],{35:[1,196]}),e(t,[2,86],{38:[1,197]}),e(t,[2,70],{33:[1,198]}),e(t,[2,81],{38:[1,199]}),e(t,[2,69],{33:[1,200]}),e(t,[2,75],{35:[1,201]}),e(t,[2,76],{35:[1,202]}),e(t,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:o,44:s,45:n},{34:[1,206]},{34:[1,207]},{39:208,43:o,44:s,45:n},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:o,44:s,45:n},{34:[1,214]},{39:215,43:o,44:s,45:n},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:o,44:s,45:n},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:o,44:s,45:n},{34:[1,228]},{39:229,43:o,44:s,45:n},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:o,44:s,45:n},e(t,[2,40]),e(t,[2,42]),e(t,[2,41]),e(t,[2,43]),e(t,[2,45]),e(t,[2,44]),e(t,[2,101]),e(t,[2,102]),e(t,[2,99]),e(t,[2,100]),e(t,[2,104]),e(t,[2,103]),e(t,[2,108]),e(t,[2,107]),e(t,[2,106]),e(t,[2,105]),e(t,[2,110]),e(t,[2,109]),e(t,[2,98]),e(t,[2,97]),e(t,[2,96]),e(t,[2,95]),e(t,[2,93]),e(t,[2,94]),e(t,[2,92]),e(t,[2,91]),e(t,[2,90]),e(t,[2,89]),e(t,[2,87]),e(t,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return e}();g.lexer=O;function u(){this.yy={}}return u.prototype=g,g.Parser=u,new u}(),ol.parser=ol,jE=ol,yE=e=>e.match(/^\s*gitGraph/)!==null,sl="",Wo="",tl="",el=e=>De(e,t()),Ne=function(){sl="",tl="",Wo=""},pe=function(e){sl=el(e).replace(/^\s+/g,"")},Le=function(){return sl||Wo},xe=function(e){tl=el(e).replace(/\n\s+/g,`
`)},ze=function(){return tl},vt=function(e){Wo=el(e)},Ot=function(){return Wo},Ro=t().gitGraph.mainBranchName,zE=t().gitGraph.mainBranchOrder,P={},se=null,Co={},Co[Ro]={name:Ro,order:zE},N={},N[Ro]=se,$=Ro,a1="LR",pn=0;function p1(){return ed({length:7})}VE=function(e,t,n){w.parseDirective(this,e,t,n)};function gM(e,t){const n=Object.create(null);return e.reduce((e,s)=>{const o=t(s);return n[o]||(n[o]=!0,e.push(s)),e},[])}WE=function(e){a1=e},b1={},KE=function(t){e.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{b1=JSON.parse(t)}catch(t){e.error("error while parsing gitGraph options",t.message)}},qE=function(){return b1},YE=function(n,s,o,i){e.debug("Entering commit:",n,s,o,i),s=h.sanitizeText(s,t()),n=h.sanitizeText(n,t()),i=h.sanitizeText(i,t());const a={id:s||pn+"-"+p1(),message:n,seq:pn++,type:o||jo.NORMAL,tag:i||"",parents:se==null?[]:[se.id],branch:$};se=a,P[a.id]=a,N[$]=a.id,e.debug("in pushCommit "+a.id)},GE=function(n,s){if(n=h.sanitizeText(n,t()),N[n]===void 0)N[n]=se!=null?se.id:null,Co[n]={name:n,order:s?parseInt(s,10):null},N1(n),e.debug("in createBranch");else{let e=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+n+'")');throw e.hash={text:"branch "+n,token:"branch "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+n+'"']},e}},XE=function(n,s,o,i){n=h.sanitizeText(n,t()),s=h.sanitizeText(s,t());const r=P[N[$]],c=P[N[n]];if($===n){let e=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(r===void 0||!r){let e=new Error('Incorrect usage of "merge". Current branch ('+$+")has no commits");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},e}if(N[n]===void 0){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+n+") does not exist");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+n]},e}if(c===void 0||!c){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+n+") has no commits");throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},e}if(r===c){let e=new Error('Incorrect usage of "merge". Both branches have same head');throw e.hash={text:"merge "+n,token:"merge "+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(s&&P[s]!==void 0){let e=new Error('Incorrect usage of "merge". Commit with id:'+s+" already exists, use different custom Id");throw e.hash={text:"merge "+n+s+o+i,token:"merge "+n+s+o+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+n+" "+s+"_UNIQUE "+o+" "+i]},e}const a={id:s||pn+"-"+p1(),message:"merged branch "+n+" into "+$,seq:pn++,parents:[se==null?null:se.id,N[n]],branch:$,type:jo.MERGE,customType:o,customId:!!s,tag:i||""};se=a,P[a.id]=a,N[$]=a.id,e.debug(N),e.debug("in mergeBranch")},QE=function(n,s,o){if(e.debug("Entering cherryPick:",n,s,o),n=h.sanitizeText(n,t()),s=h.sanitizeText(s,t()),o=h.sanitizeText(o,t()),!n||P[n]===void 0){let e=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}let i=P[n],a=i.branch;if(i.type===jo.MERGE){let e=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}if(!s||P[s]===void 0){if(a===$){let e=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}const r=P[N[$]];if(r===void 0||!r){let e=new Error('Incorrect usage of "cherry-pick". Current branch ('+$+")has no commits");throw e.hash={text:"cherryPick "+n+" "+s,token:"cherryPick "+n+" "+s,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},e}const t={id:pn+"-"+p1(),message:"cherry-picked "+i+" into "+$,seq:pn++,parents:[se==null?null:se.id,i.id],branch:$,type:jo.CHERRY_PICK,tag:o??"cherry-pick:"+i.id};se=t,P[t.id]=t,N[$]=t.id,e.debug(N),e.debug("in cherryPick")}},N1=function(e){if(e=h.sanitizeText(e,t()),N[e]===void 0){let t=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+e+'")');throw t.hash={text:"checkout "+e,token:"checkout "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+e+'"']},t}$=e;const n=N[$];se=P[n]};function JE(e,t,n){const s=e.indexOf(t);s===-1?e.push(n):e.splice(s,1,n)}function ek(t){const n=t.reduce((e,t)=>e.seq>t.seq?e:t,t[0]);let s="";t.forEach(function(e){e===n?s+="	*":s+="	|"});const o=[s,n.id,n.seq];for(let e in N)N[e]===n.id&&o.push(e);if(e.debug(o.join(" ")),n.parents&&n.parents.length==2){const e=P[n.parents[0]];JE(t,n,e),t.push(P[n.parents[1]])}else if(n.parents.length==0)return;else{const e=P[n.parents];JE(t,n,e)}t=gM(t,e=>e.id),ek(t)}tk=function(){e.debug(P);const t=K1()[0];ek([t])},nk=function(){P={},se=null;let e=t().gitGraph.mainBranchName,n=t().gitGraph.mainBranchOrder;N={},N[e]=null,Co={},Co[e]={name:e,order:n},$=e,pn=0,Ne()},sk=function(){const e=Object.values(Co).map((e,t)=>e.order!==null?e:{...e,order:parseFloat(`0.${t}`,10)}).sort((e,t)=>e.order-t.order).map(({name:e})=>({name:e}));return e},ok=function(){return N},ik=function(){return P},K1=function(){const t=Object.keys(P).map(function(e){return P[e]});return t.forEach(function(t){e.debug(t.id)}),t.sort((e,t)=>e.seq-t.seq),t},rk=function(){return $},ck=function(){return a1},lk=function(){return se},jo={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},uk={parseDirective:VE,getConfig:()=>t().gitGraph,setDirection:WE,setOptions:KE,getOptions:qE,commit:YE,branch:GE,merge:XE,cherryPick:QE,checkout:N1,prettyPrint:tk,clear:nk,getBranchesAsObjArray:sk,getBranches:ok,getCommits:ik,getCommitsArray:K1,getCurrentBranch:rk,getDirection:ck,getHead:lk,setAccTitle:pe,getAccTitle:Le,getAccDescription:ze,setAccDescription:xe,setDiagramTitle:vt,getDiagramTitle:Ot,commitType:jo},bo={},fe={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},on=8,ae={},ci={},ui=[],pi=0,jk=()=>{ae={},ci={},bo={},pi=0,ui=[]},yk=e=>{const n=document.createElementNS("http://www.w3.org/2000/svg","text");let t=[];typeof e=="string"?t=e.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(e)?t=e:t=[];for(const s of t){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),e.setAttribute("class","row"),e.textContent=s.trim(),n.appendChild(e)}return n},w4=(e,t,n)=>{const a=_o().gitGraph,o=e.append("g").attr("class","commit-bullets"),i=e.append("g").attr("class","commit-labels");let s=0;const r=Object.keys(t),c=r.sort((e,n)=>t[e].seq-t[n].seq);c.forEach(e=>{const r=t[e],c=ae[r.branch].pos,l=s+10;if(n){let e,t=r.customType!==void 0&&r.customType!==""?r.customType:r.type;switch(t){case fe.NORMAL:e="commit-normal";break;case fe.REVERSE:e="commit-reverse";break;case fe.HIGHLIGHT:e="commit-highlight";break;case fe.MERGE:e="commit-merge";break;case fe.CHERRY_PICK:e="commit-cherry-pick";break;default:e="commit-normal"}if(t===fe.HIGHLIGHT){const t=o.append("rect");t.attr("x",l-10),t.attr("y",c-10),t.attr("height",20),t.attr("width",20),t.attr("class",`commit ${r.id} commit-highlight${ae[r.branch].index%on} ${e}-outer`),o.append("rect").attr("x",l-6).attr("y",c-6).attr("height",12).attr("width",12).attr("class",`commit ${r.id} commit${ae[r.branch].index%on} ${e}-inner`)}else if(t===fe.CHERRY_PICK)o.append("circle").attr("cx",l).attr("cy",c).attr("r",10).attr("class",`commit ${r.id} ${e}`),o.append("circle").attr("cx",l-3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} ${e}`),o.append("circle").attr("cx",l+3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} ${e}`),o.append("line").attr("x1",l+3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${r.id} ${e}`),o.append("line").attr("x1",l-3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${r.id} ${e}`);else{const n=o.append("circle");if(n.attr("cx",l),n.attr("cy",c),n.attr("r",r.type===fe.MERGE?9:10),n.attr("class",`commit ${r.id} commit${ae[r.branch].index%on}`),t===fe.MERGE){const t=o.append("circle");t.attr("cx",l),t.attr("cy",c),t.attr("r",6),t.attr("class",`commit ${e} ${r.id} commit${ae[r.branch].index%on}`)}if(t===fe.REVERSE){const t=o.append("path");t.attr("d",`M ${l-5},${c-5}L${l+5},${c+5}M${l-5},${c+5}L${l+5},${c-5}`).attr("class",`commit ${e} ${r.id} commit${ae[r.branch].index%on}`)}}}if(ci[r.id]={x:s+10,y:c},n){const t=4,e=2;if(r.type!==fe.CHERRY_PICK&&(r.customId&&r.type===fe.MERGE||r.type!==fe.MERGE)&&a.showCommitLabel){const n=i.append("g"),l=n.insert("rect").attr("class","commit-label-bkg"),o=n.append("text").attr("x",s).attr("y",c+25).attr("class","commit-label").text(r.id);let t=o.node().getBBox();if(l.attr("x",s+10-t.width/2-e).attr("y",c+13.5).attr("width",t.width+2*e).attr("height",t.height+2*e),o.attr("x",s+10-t.width/2),a.rotateCommitLabel){let e=-7.5-(t.width+10)/25*9.5,o=10+t.width/25*8.5;n.attr("transform","translate("+e+", "+o+") rotate(-45, "+s+", "+c+")")}}if(r.tag){const d=i.insert("polygon"),u=i.append("circle"),l=i.append("text").attr("y",c-16).attr("class","tag-label").text(r.tag);let n=l.node().getBBox();l.attr("x",s+10-n.width/2);const a=n.height/2,o=c-19.2;d.attr("class","tag-label-bkg").attr("points",`
          ${s-n.width/2-t/2},${o+e}
          ${s-n.width/2-t/2},${o-e}
          ${s+10-n.width/2-t},${o-a-e}
          ${s+10+n.width/2+t},${o-a-e}
          ${s+10+n.width/2+t},${o+a+e}
          ${s+10-n.width/2-t},${o+a+e}`),u.attr("cx",s-n.width/2+t/2).attr("cy",o).attr("r",1.5).attr("class","tag-hole")}}s+=50,s>pi&&(pi=s)})},wk=(e,t,n)=>{const s=Object.keys(n),o=s.filter(s=>n[s].branch===t.branch&&n[s].seq>e.seq&&n[s].seq<t.seq);return o.length>0},mc=(e,t,n=0)=>{const s=e+Math.abs(e-t)/2;if(n>5)return s;let o=ui.every(e=>Math.abs(e-s)>=10);if(o)return ui.push(s),s;const i=Math.abs(e-t);return mc(e,t-i/5,n+1)},xk=(e,t,n,s)=>{const o=ci[t.id],i=ci[n.id],h=wk(t,n,s);let c="",u="",a=0,r=0,d=ae[n.branch].index,l;if(h){c="A 10 10, 0, 0, 0,",u="A 10 10, 0, 0, 1,",a=10,r=10,d=ae[n.branch].index;const e=o.y<i.y?mc(o.y,i.y):mc(i.y,o.y);o.y<i.y?l=`M ${o.x} ${o.y} L ${o.x} ${e-a} ${c} ${o.x+r} ${e} L ${i.x-a} ${e} ${u} ${i.x} ${e+r} L ${i.x} ${i.y}`:l=`M ${o.x} ${o.y} L ${o.x} ${e+a} ${u} ${o.x+r} ${e} L ${i.x-a} ${e} ${c} ${i.x} ${e-r} L ${i.x} ${i.y}`}else o.y<i.y&&(c="A 20 20, 0, 0, 0,",a=20,r=20,d=ae[n.branch].index,l=`M ${o.x} ${o.y} L ${o.x} ${i.y-a} ${c} ${o.x+r} ${i.y} L ${i.x} ${i.y}`),o.y>i.y&&(c="A 20 20, 0, 0, 0,",a=20,r=20,d=ae[t.branch].index,l=`M ${o.x} ${o.y} L ${i.x-a} ${o.y} ${c} ${i.x} ${o.y-r} L ${i.x} ${i.y}`),o.y===i.y&&(d=ae[t.branch].index,l=`M ${o.x} ${o.y} L ${o.x} ${i.y-a} ${c} ${o.x+r} ${i.y} L ${i.x} ${i.y}`);e.append("path").attr("d",l).attr("class","arrow arrow"+d%on)},Ck=(e,t)=>{const n=e.append("g").attr("class","commit-arrows");Object.keys(t).forEach(e=>{const s=t[e];s.parents&&s.parents.length>0&&s.parents.forEach(e=>{xk(n,t[e],s,t)})})},Ek=(e,t)=>{const s=_o().gitGraph,n=e.append("g");t.forEach((e,t)=>{const r=t%on,i=ae[e.name].pos,a=n.append("line");a.attr("x1",0),a.attr("y1",i),a.attr("x2",pi),a.attr("y2",i),a.attr("class","branch branch"+r),ui.push(i);let u=e.name;const c=yk(u),l=n.insert("rect"),h=n.insert("g").attr("class","branchLabel"),d=h.insert("g").attr("class","label branch-label"+r);d.node().appendChild(c);let o=c.getBBox();l.attr("class","branchLabelBkg label"+r).attr("rx",4).attr("ry",4).attr("x",-o.width-4-(s.rotateCommitLabel===!0?30:0)).attr("y",-o.height/2+8).attr("width",o.width+18).attr("height",o.height+4),d.attr("transform","translate("+(-o.width-14-(s.rotateCommitLabel===!0?30:0))+", "+(i-o.height/2-1)+")"),l.attr("transform","translate(-19, "+(i-o.height/2)+")")})},kk=function(t,n,s,o){var c;jk();const l=_o(),r=l.gitGraph;e.debug("in gitgraph renderer",t+`
`,"id:",n,s),bo=o.db.getCommits();const d=o.db.getBranchesAsObjArray();let u=0;d.forEach((e,t)=>{ae[e.name]={pos:u,index:t},u+=50+(r.rotateCommitLabel?40:0)});const a=i(`[id="${n}"]`);w4(a,bo,!1),r.showBranches&&Ek(a,d),Ck(a,bo),w4(a,bo,!0),p.insertTitle(a,"gitTitleText",r.titleTopMargin,o.db.getDiagramTitle()),Lu(void 0,a,r.diagramPadding,(c=r.useMaxWidth)!=null?c:l.useMaxWidth)},Ak={draw:kk},Sk=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  }
`,Mk=Sk,ji=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},oe=[1,6],fe=[1,7],re=[1,8],ae=[1,9],ue=[1,16],me=[1,11],pe=[1,12],le=[1,13],ce=[1,14],he=[1,15],ge=[1,27],X=[1,33],G=[1,34],Y=[1,35],q=[1,36],K=[1,37],b=[1,72],j=[1,73],I=[1,74],_=[1,75],w=[1,76],O=[1,77],x=[1,78],C=[1,38],E=[1,39],k=[1,40],A=[1,41],S=[1,42],M=[1,43],F=[1,44],r=[1,45],z=[1,46],D=[1,47],a=[1,48],L=[1,49],R=[1,50],P=[1,51],h=[1,52],y=[1,53],T=[1,54],V=[1,55],$=[1,56],W=[1,57],B=[1,59],H=[1,60],N=[1,61],v=[1,62],g=[1,63],p=[1,64],f=[1,65],m=[1,66],u=[1,67],d=[1,68],l=[1,69],Q=[24,52],se=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Z=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],o=[1,94],s=[1,95],n=[1,96],t=[1,97],i=[15,24,52],de=[7,8,9,10,18,22,25,26,27,28],ie=[15,24,43,52],J=[15,24,43,52,86,87,89,90],U=[15,43],te=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ee={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:o.setDirection("TB");break;case 5:o.setDirection("BT");break;case 6:o.setDirection("RL");break;case 7:o.setDirection("LR");break;case 11:o.parseDirective("%%{","open_directive");break;case 12:break;case 13:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 14:o.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:o.setC4Type(a[c-3]);break;case 26:o.setTitle(a[c].substring(6)),this.$=a[c].substring(6);break;case 27:o.setAccDescription(a[c].substring(15)),this.$=a[c].substring(15);break;case 28:this.$=a[c].trim(),o.setTitle(this.$);break;case 29:case 30:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 35:case 36:a[c].splice(2,0,"ENTERPRISE"),o.addPersonOrSystemBoundary(...a[c]),this.$=a[c];break;case 37:o.addPersonOrSystemBoundary(...a[c]),this.$=a[c];break;case 38:a[c].splice(2,0,"CONTAINER"),o.addContainerBoundary(...a[c]),this.$=a[c];break;case 39:o.addDeploymentNode("node",...a[c]),this.$=a[c];break;case 40:o.addDeploymentNode("nodeL",...a[c]),this.$=a[c];break;case 41:o.addDeploymentNode("nodeR",...a[c]),this.$=a[c];break;case 42:o.popBoundaryParseStack();break;case 46:o.addPersonOrSystem("person",...a[c]),this.$=a[c];break;case 47:o.addPersonOrSystem("external_person",...a[c]),this.$=a[c];break;case 48:o.addPersonOrSystem("system",...a[c]),this.$=a[c];break;case 49:o.addPersonOrSystem("system_db",...a[c]),this.$=a[c];break;case 50:o.addPersonOrSystem("system_queue",...a[c]),this.$=a[c];break;case 51:o.addPersonOrSystem("external_system",...a[c]),this.$=a[c];break;case 52:o.addPersonOrSystem("external_system_db",...a[c]),this.$=a[c];break;case 53:o.addPersonOrSystem("external_system_queue",...a[c]),this.$=a[c];break;case 54:o.addContainer("container",...a[c]),this.$=a[c];break;case 55:o.addContainer("container_db",...a[c]),this.$=a[c];break;case 56:o.addContainer("container_queue",...a[c]),this.$=a[c];break;case 57:o.addContainer("external_container",...a[c]),this.$=a[c];break;case 58:o.addContainer("external_container_db",...a[c]),this.$=a[c];break;case 59:o.addContainer("external_container_queue",...a[c]),this.$=a[c];break;case 60:o.addComponent("component",...a[c]),this.$=a[c];break;case 61:o.addComponent("component_db",...a[c]),this.$=a[c];break;case 62:o.addComponent("component_queue",...a[c]),this.$=a[c];break;case 63:o.addComponent("external_component",...a[c]),this.$=a[c];break;case 64:o.addComponent("external_component_db",...a[c]),this.$=a[c];break;case 65:o.addComponent("external_component_queue",...a[c]),this.$=a[c];break;case 67:o.addRel("rel",...a[c]),this.$=a[c];break;case 68:o.addRel("birel",...a[c]),this.$=a[c];break;case 69:o.addRel("rel_u",...a[c]),this.$=a[c];break;case 70:o.addRel("rel_d",...a[c]),this.$=a[c];break;case 71:o.addRel("rel_l",...a[c]),this.$=a[c];break;case 72:o.addRel("rel_r",...a[c]),this.$=a[c];break;case 73:o.addRel("rel_b",...a[c]),this.$=a[c];break;case 74:a[c].splice(0,1),o.addRel("rel",...a[c]),this.$=a[c];break;case 75:o.updateElStyle("update_el_style",...a[c]),this.$=a[c];break;case 76:o.updateRelStyle("update_rel_style",...a[c]),this.$=a[c];break;case 77:o.updateLayoutConfig("update_layout_config",...a[c]),this.$=a[c];break;case 78:this.$=[a[c]];break;case 79:a[c].unshift(a[c-1]),this.$=a[c];break;case 80:case 82:this.$=a[c].trim();break;case 81:let e={};e[a[c-1].trim()]=a[c].trim(),this.$=e;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:oe,8:fe,9:re,10:ae,11:5,12:10,18:ue,22:me,25:pe,26:le,27:ce,28:he},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:oe,8:fe,9:re,10:ae,11:5,12:10,18:ue,22:me,25:pe,26:le,27:ce,28:he},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:ge},e([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:79,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:80,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:81,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{23:82,29:29,30:30,31:31,32:X,33:G,34:Y,36:q,38:K,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},e(Q,[2,20],{53:32,39:58,40:70,42:71,30:87,44:b,46:j,47:I,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l}),e(Q,[2,21]),e(se,[2,23],{15:[1,88]}),e(Q,[2,43],{15:[1,89]}),e(Z,[2,26]),e(Z,[2,27]),{35:[1,90]},{37:[1,91]},e(Z,[2,30]),{45:92,85:93,86:o,87:s,89:n,90:t},{45:98,85:93,86:o,87:s,89:n,90:t},{45:99,85:93,86:o,87:s,89:n,90:t},{45:100,85:93,86:o,87:s,89:n,90:t},{45:101,85:93,86:o,87:s,89:n,90:t},{45:102,85:93,86:o,87:s,89:n,90:t},{45:103,85:93,86:o,87:s,89:n,90:t},{45:104,85:93,86:o,87:s,89:n,90:t},{45:105,85:93,86:o,87:s,89:n,90:t},{45:106,85:93,86:o,87:s,89:n,90:t},{45:107,85:93,86:o,87:s,89:n,90:t},{45:108,85:93,86:o,87:s,89:n,90:t},{45:109,85:93,86:o,87:s,89:n,90:t},{45:110,85:93,86:o,87:s,89:n,90:t},{45:111,85:93,86:o,87:s,89:n,90:t},{45:112,85:93,86:o,87:s,89:n,90:t},{45:113,85:93,86:o,87:s,89:n,90:t},{45:114,85:93,86:o,87:s,89:n,90:t},{45:115,85:93,86:o,87:s,89:n,90:t},{45:116,85:93,86:o,87:s,89:n,90:t},e(i,[2,66]),{45:117,85:93,86:o,87:s,89:n,90:t},{45:118,85:93,86:o,87:s,89:n,90:t},{45:119,85:93,86:o,87:s,89:n,90:t},{45:120,85:93,86:o,87:s,89:n,90:t},{45:121,85:93,86:o,87:s,89:n,90:t},{45:122,85:93,86:o,87:s,89:n,90:t},{45:123,85:93,86:o,87:s,89:n,90:t},{45:124,85:93,86:o,87:s,89:n,90:t},{45:125,85:93,86:o,87:s,89:n,90:t},{45:126,85:93,86:o,87:s,89:n,90:t},{45:127,85:93,86:o,87:s,89:n,90:t},{30:128,39:58,40:70,42:71,44:b,46:j,47:I,48:_,49:w,50:O,51:x,53:32,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l},{15:[1,130],43:[1,129]},{45:131,85:93,86:o,87:s,89:n,90:t},{45:132,85:93,86:o,87:s,89:n,90:t},{45:133,85:93,86:o,87:s,89:n,90:t},{45:134,85:93,86:o,87:s,89:n,90:t},{45:135,85:93,86:o,87:s,89:n,90:t},{45:136,85:93,86:o,87:s,89:n,90:t},{45:137,85:93,86:o,87:s,89:n,90:t},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},e(de,[2,9]),{14:142,21:ge},{21:[2,13]},{1:[2,15]},e(Q,[2,22]),e(se,[2,24],{31:31,29:143,32:X,33:G,34:Y,36:q,38:K}),e(Q,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:X,33:G,34:Y,36:q,38:K,44:b,46:j,47:I,48:_,49:w,50:O,51:x,54:C,55:E,56:k,57:A,58:S,59:M,60:F,61:r,62:z,63:D,64:a,65:L,66:R,67:P,68:h,69:y,70:T,71:V,72:$,73:W,74:B,75:H,76:N,77:v,78:g,79:p,80:f,81:m,82:u,83:d,84:l}),e(Z,[2,28]),e(Z,[2,29]),e(i,[2,46]),e(ie,[2,78],{85:93,45:145,86:o,87:s,89:n,90:t}),e(J,[2,80]),{88:[1,146]},e(J,[2,82]),e(J,[2,83]),e(i,[2,47]),e(i,[2,48]),e(i,[2,49]),e(i,[2,50]),e(i,[2,51]),e(i,[2,52]),e(i,[2,53]),e(i,[2,54]),e(i,[2,55]),e(i,[2,56]),e(i,[2,57]),e(i,[2,58]),e(i,[2,59]),e(i,[2,60]),e(i,[2,61]),e(i,[2,62]),e(i,[2,63]),e(i,[2,64]),e(i,[2,65]),e(i,[2,67]),e(i,[2,68]),e(i,[2,69]),e(i,[2,70]),e(i,[2,71]),e(i,[2,72]),e(i,[2,73]),e(i,[2,74]),e(i,[2,75]),e(i,[2,76]),e(i,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},e(U,[2,35]),e(U,[2,36]),e(U,[2,37]),e(U,[2,38]),e(U,[2,39]),e(U,[2,40]),e(U,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},e(se,[2,25]),e(Q,[2,45]),e(ie,[2,79]),e(J,[2,81]),e(i,[2,31]),e(i,[2,42]),e(te,[2,32]),e(te,[2,33],{15:[1,152]}),e(de,[2,10]),e(te,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},ve=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return e}();ee.lexer=ve;function ne(){this.yy={}}return ne.prototype=ee,ee.Parser=ne,new ne}(),ji.parser=ji,Tk=ji,zk=e=>e.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null,Ce=[],zt=[""],ne="global",Fe="",Re=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],qs=[],oc="",sc=!1,Hi=4,Ii=2,Uk=function(){return Wk},Kk=function(e){let n=De(e,t());Wk=n},qk=function(e,t,n){w.parseDirective(this,e,t,n)},Yk=function(e,t,n,s,o,i,a,r,c){if(e==null||t===void 0||t===null||n===void 0||n===null||s===void 0||s===null)return;let l={};const d=qs.find(e=>e.from===t&&e.to===n);if(d?l=d:qs.push(l),l.type=e,l.from=t,l.to=n,l.label={text:s},o==null)l.techn={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];l[e]={text:t}}else l.techn={text:o};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[e,t]=Object.entries(i)[0];l[e]={text:t}}else l.descr={text:i};if(typeof a=="object"){let[e,t]=Object.entries(a)[0];l[e]=t}else l.sprite=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];l[e]=t}else l.tags=r;if(typeof c=="object"){let[e,t]=Object.entries(c)[0];l[e]=t}else l.link=c;l.wrap=Pt()},Gk=function(e,t,n,s,o,i,a){if(t===null||n===null)return;let r={};const c=Ce.find(e=>e.alias===t);if(c&&t===c.alias?r=c:(r.alias=t,Ce.push(r)),n==null?r.label={text:""}:r.label={text:n},s==null)r.descr={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];r[e]={text:t}}else r.descr={text:s};if(typeof o=="object"){let[e,t]=Object.entries(o)[0];r[e]=t}else r.sprite=o;if(typeof i=="object"){let[e,t]=Object.entries(i)[0];r[e]=t}else r.tags=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];r[e]=t}else r.link=a;r.typeC4Shape={text:e},r.parentBoundary=ne,r.wrap=Pt()},Xk=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Ce.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Ce.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.techn={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.techn={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof i=="object"){let[e,t]=Object.entries(i)[0];c[e]=t}else c.sprite=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.wrap=Pt(),c.typeC4Shape={text:e},c.parentBoundary=ne},Qk=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Ce.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Ce.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.techn={text:""};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.techn={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof i=="object"){let[e,t]=Object.entries(i)[0];c[e]=t}else c.sprite=i;if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.wrap=Pt(),c.typeC4Shape={text:e},c.parentBoundary=ne},Zk=function(e,t,n,s,o){if(e===null||t===null)return;let i={};const a=Re.find(t=>t.alias===e);if(a&&e===a.alias?i=a:(i.alias=e,Re.push(i)),t==null?i.label={text:""}:i.label={text:t},n==null)i.type={text:"system"};else if(typeof n=="object"){let[e,t]=Object.entries(n)[0];i[e]={text:t}}else i.type={text:n};if(typeof s=="object"){let[e,t]=Object.entries(s)[0];i[e]=t}else i.tags=s;if(typeof o=="object"){let[e,t]=Object.entries(o)[0];i[e]=t}else i.link=o;i.parentBoundary=ne,i.wrap=Pt(),Fe=ne,ne=e,zt.push(Fe)},Jk=function(e,t,n,s,o){if(e===null||t===null)return;let i={};const a=Re.find(t=>t.alias===e);if(a&&e===a.alias?i=a:(i.alias=e,Re.push(i)),t==null?i.label={text:""}:i.label={text:t},n==null)i.type={text:"container"};else if(typeof n=="object"){let[e,t]=Object.entries(n)[0];i[e]={text:t}}else i.type={text:n};if(typeof s=="object"){let[e,t]=Object.entries(s)[0];i[e]=t}else i.tags=s;if(typeof o=="object"){let[e,t]=Object.entries(o)[0];i[e]=t}else i.link=o;i.parentBoundary=ne,i.wrap=Pt(),Fe=ne,ne=e,zt.push(Fe)},eA=function(e,t,n,s,o,i,a,r){if(t===null||n===null)return;let c={};const l=Re.find(e=>e.alias===t);if(l&&t===l.alias?c=l:(c.alias=t,Re.push(c)),n==null?c.label={text:""}:c.label={text:n},s==null)c.type={text:"node"};else if(typeof s=="object"){let[e,t]=Object.entries(s)[0];c[e]={text:t}}else c.type={text:s};if(o==null)c.descr={text:""};else if(typeof o=="object"){let[e,t]=Object.entries(o)[0];c[e]={text:t}}else c.descr={text:o};if(typeof a=="object"){let[e,t]=Object.entries(a)[0];c[e]=t}else c.tags=a;if(typeof r=="object"){let[e,t]=Object.entries(r)[0];c[e]=t}else c.link=r;c.nodeType=e,c.parentBoundary=ne,c.wrap=Pt(),Fe=ne,ne=t,zt.push(Fe)},tA=function(){ne=Fe,zt.pop(),Fe=zt.pop(),zt.push(Fe)},nA=function(e,t,n,s,o,i,a,r,c,l,d){let u=Ce.find(e=>e.alias===t);if(u===void 0&&(u=Re.find(e=>e.alias===t),u===void 0))return;if(n!=null)if(typeof n=="object"){let[e,t]=Object.entries(n)[0];u[e]=t}else u.bgColor=n;if(s!=null)if(typeof s=="object"){let[e,t]=Object.entries(s)[0];u[e]=t}else u.fontColor=s;if(o!=null)if(typeof o=="object"){let[e,t]=Object.entries(o)[0];u[e]=t}else u.borderColor=o;if(i!=null)if(typeof i=="object"){let[e,t]=Object.entries(i)[0];u[e]=t}else u.shadowing=i;if(a!=null)if(typeof a=="object"){let[e,t]=Object.entries(a)[0];u[e]=t}else u.shape=a;if(r!=null)if(typeof r=="object"){let[e,t]=Object.entries(r)[0];u[e]=t}else u.sprite=r;if(c!=null)if(typeof c=="object"){let[e,t]=Object.entries(c)[0];u[e]=t}else u.techn=c;if(l!=null)if(typeof l=="object"){let[e,t]=Object.entries(l)[0];u[e]=t}else u.legendText=l;if(d!=null)if(typeof d=="object"){let[e,t]=Object.entries(d)[0];u[e]=t}else u.legendSprite=d},sA=function(e,t,n,s,o,i,a){const r=qs.find(e=>e.from===t&&e.to===n);if(r===void 0)return;if(s!=null)if(typeof s=="object"){let[e,t]=Object.entries(s)[0];r[e]=t}else r.textColor=s;if(o!=null)if(typeof o=="object"){let[e,t]=Object.entries(o)[0];r[e]=t}else r.lineColor=o;if(i!=null)if(typeof i=="object"){let[e,t]=Object.entries(i)[0];r[e]=parseInt(t)}else r.offsetX=parseInt(i);if(a!=null)if(typeof a=="object"){let[e,t]=Object.entries(a)[0];r[e]=parseInt(t)}else r.offsetY=parseInt(a)},oA=function(e,t,n){let s=Hi,o=Ii;if(typeof t=="object"){const e=Object.values(t)[0];s=parseInt(e)}else s=parseInt(t);if(typeof n=="object"){const e=Object.values(n)[0];o=parseInt(e)}else o=parseInt(n);s>=1&&(Hi=s),o>=1&&(Ii=o)},iA=function(){return Hi},aA=function(){return Ii},rA=function(){return ne},cA=function(){return Fe},Y4=function(e){return e==null?Ce:Ce.filter(t=>t.parentBoundary===e)},dA=function(e){return Ce.find(t=>t.alias===e)},uA=function(e){return Object.keys(Y4(e))},hA=function(e){return e==null?Re:Re.filter(t=>t.parentBoundary===e)},mA=function(){return qs},fA=function(){return oc},pA=function(e){sc=e},Pt=function(){return sc},vA=function(){Ce=[],Re=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Fe="",ne="global",zt=[""],qs=[],zt=[""],oc="",sc=!1,Hi=4,Ii=2},bA={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},jA={FILLED:0,OPEN:1},yA={LEFTOF:0,RIGHTOF:1,OVER:2},_A=function(e){let n=De(e,t());oc=n},X4={addPersonOrSystem:Gk,addPersonOrSystemBoundary:Zk,addContainer:Xk,addContainerBoundary:Jk,addComponent:Qk,addDeploymentNode:eA,popBoundaryParseStack:tA,addRel:Yk,updateElStyle:nA,updateRelStyle:sA,updateLayoutConfig:oA,autoWrap:Pt,setWrap:pA,getC4ShapeArray:Y4,getC4Shape:dA,getC4ShapeKeys:uA,getBoundarys:hA,getCurrentBoundaryParse:rA,getParentBoundaryParse:cA,getRels:mA,getTitle:fA,getC4Type:Uk,getC4ShapeInRow:iA,getC4BoundaryInRow:aA,setAccTitle:pe,getAccTitle:Le,getAccDescription:ze,setAccDescription:xe,parseDirective:qk,getConfig:()=>t().c4,clear:vA,LINETYPE:bA,ARROWTYPE:jA,PLACEMENT:yA,setTitle:_A,setC4Type:Kk},Yr=function(e,t){const n=e.append("rect");if(n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.attrs!=="undefined"&&t.attrs!==null)for(let e in t.attrs)n.attr(e,t.attrs[e]);return t.class!=="undefined"&&n.attr("class",t.class),n},e0=function(e,t,n,s,o,i){const a=e.append("image");a.attr("width",t),a.attr("height",n),a.attr("x",s),a.attr("y",o);let r=i.startsWith("data:image/png;base64")?i:(0,Bt.sanitizeUrl)(i);a.attr("xlink:href",r)},CA=(e,t,n)=>{const s=e.append("g");let o=0;for(let e of t){let r=e.textColor?e.textColor:"#444444",c=e.lineColor?e.lineColor:"#444444",l=e.offsetX?parseInt(e.offsetX):0,d=e.offsetY?parseInt(e.offsetY):0,i="";if(o===0){let t=s.append("line");t.attr("x1",e.startPoint.x),t.attr("y1",e.startPoint.y),t.attr("x2",e.endPoint.x),t.attr("y2",e.endPoint.y),t.attr("stroke-width","1"),t.attr("stroke",c),t.style("fill","none"),e.type!=="rel_b"&&t.attr("marker-end","url("+i+"#arrowhead)"),(e.type==="birel"||e.type==="rel_b")&&t.attr("marker-start","url("+i+"#arrowend)"),o=-1}else{let t=s.append("path");t.attr("fill","none").attr("stroke-width","1").attr("stroke",c).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",e.startPoint.x).replaceAll("starty",e.startPoint.y).replaceAll("controlx",e.startPoint.x+(e.endPoint.x-e.startPoint.x)/2-(e.endPoint.x-e.startPoint.x)/4).replaceAll("controly",e.startPoint.y+(e.endPoint.y-e.startPoint.y)/2).replaceAll("stopx",e.endPoint.x).replaceAll("stopy",e.endPoint.y)),e.type!=="rel_b"&&t.attr("marker-end","url("+i+"#arrowhead)"),(e.type==="birel"||e.type==="rel_b")&&t.attr("marker-start","url("+i+"#arrowend)")}let a=n.messageFont();dt(n)(e.label.text,s,Math.min(e.startPoint.x,e.endPoint.x)+Math.abs(e.endPoint.x-e.startPoint.x)/2+l,Math.min(e.startPoint.y,e.endPoint.y)+Math.abs(e.endPoint.y-e.startPoint.y)/2+d,e.label.width,e.label.height,{fill:r},a),e.techn&&e.techn.text!==""&&(a=n.messageFont(),dt(n)("["+e.techn.text+"]",s,Math.min(e.startPoint.x,e.endPoint.x)+Math.abs(e.endPoint.x-e.startPoint.x)/2+l,Math.min(e.startPoint.y,e.endPoint.y)+Math.abs(e.endPoint.y-e.startPoint.y)/2+n.messageFontSize+5+d,Math.max(e.label.width,e.techn.width),e.techn.height,{fill:r,"font-style":"italic"},a))}},EA=function(e,t,n){const o=e.append("g");let r=t.bgColor?t.bgColor:"none",c=t.borderColor?t.borderColor:"#444444",i=t.fontColor?t.fontColor:"black",a={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(a={"stroke-width":1});let l={x:t.x,y:t.y,fill:r,stroke:c,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:a};Yr(o,l);let s=n.boundaryFont();s.fontWeight="bold",s.fontSize=s.fontSize+2,s.fontColor=i,dt(n)(t.label.text,o,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},s),t.type&&t.type.text!==""&&(s=n.boundaryFont(),s.fontColor=i,dt(n)(t.type.text,o,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},s)),t.descr&&t.descr.text!==""&&(s=n.boundaryFont(),s.fontSize=s.fontSize-2,s.fontColor=i,dt(n)(t.descr.text,o,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},s))},kA=function(e,t,n){let c=t.bgColor?t.bgColor:n[t.typeC4Shape.text+"_bg_color"],r=t.borderColor?t.borderColor:n[t.typeC4Shape.text+"_border_color"],a=t.fontColor?t.fontColor:"#FFFFFF",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const s=e.append("g");s.attr("class","person-man");const i=o0();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":i.x=t.x,i.y=t.y,i.fill=c,i.width=t.width,i.height=t.height,i.style="stroke:"+r+";stroke-width:0.5;",i.rx=2.5,i.ry=2.5,Yr(s,i);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":s.append("path").attr("fill",c).attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":s.append("path").attr("fill",c).attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",r).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let d=RA(n,t.typeC4Shape.text);switch(s.append("text").attr("fill",a).attr("font-family",d.fontFamily).attr("font-size",d.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":e0(s,48,48,t.x+t.width/2-24,t.y+t.image.Y,l);break}let o=n[t.typeC4Shape.text+"Font"]();return o.fontWeight="bold",o.fontSize=o.fontSize+2,o.fontColor=a,dt(n)(t.label.text,s,t.x,t.y+t.label.Y,t.width,t.height,{fill:a},o),o=n[t.typeC4Shape.text+"Font"](),o.fontColor=a,t.thchn&&t.thchn.text!==""?dt(n)(t.thchn.text,s,t.x,t.y+t.thchn.Y,t.width,t.height,{fill:a,"font-style":"italic"},o):t.type&&t.type.text!==""&&dt(n)(t.type.text,s,t.x,t.y+t.type.Y,t.width,t.height,{fill:a,"font-style":"italic"},o),t.descr&&t.descr.text!==""&&(o=n.personFont(),o.fontColor=a,dt(n)(t.descr.text,s,t.x,t.y+t.descr.Y,t.width,t.height,{fill:a},o)),t.height},AA=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},SA=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},MA=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},FA=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},TA=function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},zA=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},DA=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},NA=function(e){const n=e.append("defs"),t=n.append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},o0=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},RA=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),dt=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{fontSize:l,fontFamily:u,fontWeight:m}=c,d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const c=t*l-l*(d.length-1)/2,a=n.append("text").attr("x",s+i/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",l).style("font-weight",m).style("font-family",u);a.append("tspan").attr("dy",c).text(d[t]).attr("alignment-baseline","mathematical"),e(a,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),Be={drawRect:Yr,drawBoundary:EA,drawC4Shape:kA,drawRels:CA,drawImage:e0,insertArrowHead:FA,insertArrowEnd:TA,insertArrowFilledHead:zA,insertDynamicNumber:DA,insertArrowCrossHead:NA,insertDatabaseIcon:AA,insertComputerIcon:SA,insertClockIcon:MA,getNoteRect:o0,sanitizeUrl:Bt.sanitizeUrl},Yi=0,na=0,M0=4,Dr=2,ji.yy=X4,l={},B0=class{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Ar(e.db.getConfig())}setData(e,t,n,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=t,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=s}updateVal(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let t=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,s=t+e.width,n=this.nextData.starty+e.margin*2,o=n+e.height;(t>=this.data.widthLimit||s>=this.data.widthLimit||this.nextData.cnt>M0)&&(t=this.nextData.startx+e.margin+l.nextLinePaddingX,n=this.nextData.stopy+e.margin*2,this.nextData.stopx=s=t+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=o=n+e.height,this.nextData.cnt=1),e.x=t,e.y=n,this.updateVal(this.data,"startx",t,Math.min),this.updateVal(this.data,"starty",n,Math.min),this.updateVal(this.data,"stopx",s,Math.max),this.updateVal(this.data,"stopy",o,Math.max),this.updateVal(this.nextData,"startx",t,Math.min),this.updateVal(this.nextData,"starty",n,Math.min),this.updateVal(this.nextData,"stopx",s,Math.max),this.updateVal(this.nextData,"stopy",o,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Ar(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}},Ar=function(e){U(l,e),e.fontFamily&&(l.personFontFamily=l.systemFontFamily=l.messageFontFamily=e.fontFamily),e.fontSize&&(l.personFontSize=l.systemFontSize=l.messageFontSize=e.fontSize),e.fontWeight&&(l.personFontWeight=l.systemFontWeight=l.messageFontWeight=e.fontWeight)},Ls=(e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),da=e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),GA=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight});function Ie(e,t,n,s,o){if(!t[e].width)if(n)t[e].text=nd(t[e].text,o,s),t[e].textLines=t[e].text.split(h.lineBreakRegex).length,t[e].width=o,t[e].height=od(t[e].text,s);else{let n=t[e].text.split(h.lineBreakRegex);t[e].textLines=n.length;let o=0;t[e].height=0,t[e].width=0;for(const i of n)t[e].width=Math.max(Je(i,s),t[e].width),o=od(i,s),t[e].height=t[e].height+o}}y2=function(e,t,n){t.x=n.data.startx,t.y=n.data.starty,t.width=n.data.stopx-n.data.startx,t.height=n.data.stopy-n.data.starty,t.label.y=l.c4ShapeMargin-35;let o=t.wrap&&l.wrap,s=da(l);s.fontSize=s.fontSize+2,s.fontWeight="bold";let i=Je(t.label.text,s);Ie("label",t,o,s,i),Be.drawBoundary(e,t,l)},_2=function(e,t,n,s){let o=0;for(const m of s){o=0;const i=n[m];let a=Ls(l,i.typeC4Shape.text);switch(a.fontSize=a.fontSize-2,i.typeC4Shape.width=Je("<<"+i.typeC4Shape.text+">>",a),i.typeC4Shape.height=a.fontSize+2,i.typeC4Shape.Y=l.c4ShapePadding,o=i.typeC4Shape.Y+i.typeC4Shape.height-4,i.image={width:0,height:0,Y:0},i.typeC4Shape.text){case"person":case"external_person":i.image.width=48,i.image.height=48,i.image.Y=o,o=i.image.Y+i.image.height;break}i.sprite&&(i.image.width=48,i.image.height=48,i.image.Y=o,o=i.image.Y+i.image.height);let r=i.wrap&&l.wrap,c=l.width-l.c4ShapePadding*2,d=Ls(l,i.typeC4Shape.text);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Ie("label",i,r,d,c),i.label.Y=o+8,o=i.label.Y+i.label.height,i.type&&i.type.text!==""){i.type.text="["+i.type.text+"]";let e=Ls(l,i.typeC4Shape.text);Ie("type",i,r,e,c),i.type.Y=o+5,o=i.type.Y+i.type.height}else if(i.techn&&i.techn.text!==""){i.techn.text="["+i.techn.text+"]";let e=Ls(l,i.techn.text);Ie("techn",i,r,e,c),i.techn.Y=o+5,o=i.techn.Y+i.techn.height}let h=o,u=i.label.width;if(i.descr&&i.descr.text!==""){let e=Ls(l,i.typeC4Shape.text);Ie("descr",i,r,e,c),i.descr.Y=o+20,o=i.descr.Y+i.descr.height,u=Math.max(i.label.width,i.descr.width),h=o-i.descr.textLines*5}u=u+l.c4ShapePadding,i.width=Math.max(i.width||l.width,u,l.width),i.height=Math.max(i.height||l.height,h,l.height),i.margin=i.margin||l.c4ShapeMargin,e.insert(i),Be.drawC4Shape(t,i,l)}e.bumpLastMargin(l.c4ShapeMargin)},be=class{constructor(e,t){this.x=e,this.y=t}},k2=function(e,t){let n=e.x,s=e.y,i=t.x,a=t.y,c=n+e.width/2,l=s+e.height/2,d=Math.abs(n-i),u=Math.abs(s-a),r=u/d,h=e.height/e.width,o=null;return s==a&&n<i?o=new be(n+e.width,l):s==a&&n>i?o=new be(n,l):n==i&&s<a?o=new be(c,s+e.height):n==i&&s>a&&(o=new be(c,s)),n>i&&s<a?h>=r?o=new be(n,l+r*e.width/2):o=new be(c-d/u*e.height/2,s+e.height):n<i&&s<a?h>=r?o=new be(n+e.width,l+r*e.width/2):o=new be(c+d/u*e.height/2,s+e.height):n<i&&s>a?h>=r?o=new be(n+e.width,l-r*e.width/2):o=new be(c+e.height/2*d/u,s):n>i&&s>a&&(h>=r?o=new be(n,l-e.width/2*r):o=new be(c-e.height/2*d/u,s)),o},tS=function(e,t){let n={x:0,y:0};n.x=t.x+t.width/2,n.y=t.y+t.height/2;let s=k2(e,n);n.x=e.x+e.width/2,n.y=e.y+e.height/2;let o=k2(t,n);return{startPoint:s,endPoint:o}},nS=function(e,t,n,s){let o=0;for(let e of t){o=o+1;let r=e.wrap&&l.wrap,i=GA(l),d=s.db.getC4Type();d==="C4Dynamic"&&(e.label.text=o+": "+e.label.text);let a=Je(e.label.text,i);Ie("label",e,r,i,a),e.techn&&e.techn.text!==""&&(a=Je(e.techn.text,i),Ie("techn",e,r,i,a)),e.descr&&e.descr.text!==""&&(a=Je(e.descr.text,i),Ie("descr",e,r,i,a));let u=n(e.from),h=n(e.to),c=tS(u,h);e.startPoint=c.startPoint,e.endPoint=c.endPoint}Be.drawRels(e,t,l)};function sS(e,t,n,s,o){let i=new B0(o);i.data.widthLimit=n.data.widthLimit/Math.min(Dr,s.length);for(let[u,a]of s.entries()){let r=0;a.image={width:0,height:0,Y:0},a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=r,r=a.image.Y+a.image.height);let d=a.wrap&&l.wrap,c=da(l);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",Ie("label",a,d,c,i.data.widthLimit),a.label.Y=r+8,r=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let e=da(l);Ie("type",a,d,e,i.data.widthLimit),a.type.Y=r+5,r=a.type.Y+a.type.height}if(a.descr&&a.descr.text!==""){let e=da(l);e.fontSize=e.fontSize-2,Ie("descr",a,d,e,i.data.widthLimit),a.descr.Y=r+20,r=a.descr.Y+a.descr.height}if(u==0||u%Dr===0){let e=n.data.startx+l.diagramMarginX,t=n.data.stopy+l.diagramMarginY+r;i.setData(e,e,t,t)}else{let e=i.data.stopx!==i.data.startx?i.data.stopx+l.diagramMarginX:i.data.startx,t=i.data.starty;i.setData(e,e,t,t)}i.name=a.alias;let f=o.db.getC4ShapeArray(a.alias),h=o.db.getC4ShapeKeys(a.alias);h.length>0&&_2(i,e,f,h),t=a.alias;let m=o.db.getBoundarys(t);m.length>0&&sS(e,t,i,m,o),a.alias!=="global"&&y2(e,a,i),n.data.stopy=Math.max(i.data.stopy+l.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(i.data.stopx+l.c4ShapeMargin,n.data.stopx),Yi=Math.max(Yi,n.data.stopx),na=Math.max(na,n.data.stopy)}}oS=function(n,s,o,a){l=t().c4;const h=t().securityLevel;let f;h==="sandbox"&&(f=i("#i"+s));const b=i(h==="sandbox"?f.nodes()[0].contentDocument.body:"body");let m=a.db;a.db.setWrap(l.wrap),M0=m.getC4ShapeInRow(),Dr=m.getC4BoundaryInRow(),e.debug(`C:${JSON.stringify(l,null,2)}`);const r=h==="sandbox"?b.select(`[id="${s}"]`):i(`[id="${s}"]`);Be.insertComputerIcon(r),Be.insertDatabaseIcon(r),Be.insertClockIcon(r);let d=new B0(a);d.setData(l.diagramMarginX,l.diagramMarginX,l.diagramMarginY,l.diagramMarginY),d.data.widthLimit=screen.availWidth,Yi=l.diagramMarginX,na=l.diagramMarginY;const u=a.db.getTitle();let j=a.db.getBoundarys("");sS(r,"",d,j,a),Be.insertArrowHead(r),Be.insertArrowEnd(r),Be.insertArrowCrossHead(r),Be.insertArrowFilledHead(r),nS(r,a.db.getRels(),a.db.getC4Shape,a),d.data.stopx=Yi,d.data.stopy=na;const c=d.data;let y=c.stopy-c.starty,p=y+2*l.diagramMarginY,_=c.stopx-c.startx;const g=_+2*l.diagramMarginX;u&&r.append("text").text(u).attr("x",(c.stopx-c.startx)/2-4*l.diagramMarginX).attr("y",c.starty+l.diagramMarginY),Me(r,p,g,l.useMaxWidth);const v=u?60:0;r.attr("viewBox",c.startx-l.diagramMarginX+" -"+(l.diagramMarginY+v)+" "+g+" "+(p+v)),e.debug(`models:`,c)},T2={drawPersonOrSystemArray:_2,drawBoundary:y2,setConf:Ar,draw:oS},ir=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},U=[1,3],h=[1,7],f=[1,8],g=[1,9],p=[1,10],c=[1,13],W=[1,12],u=[1,16,25],$=[1,20],V=[1,32],k=[1,33],I=[1,34],H=[1,36],R=[1,39],A=[1,37],D=[1,38],z=[1,44],T=[1,45],F=[1,40],M=[1,41],S=[1,42],L=[1,43],o=[1,48],s=[1,49],n=[1,50],i=[1,51],t=[16,25],v=[1,65],l=[1,66],y=[1,67],j=[1,68],b=[1,69],w=[1,70],O=[1,71],N=[1,80],a=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],x=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],P=[5,8,9,10,11,16,19,23,25],m=[54,88,89,90,91],r=[54,65,66,88,89,90,91],B=[54,60,61,62,63,64,88,89,90,91],d=[16,25,32],_=[1,107],C={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 5:o.setDirection("TB");break;case 6:o.setDirection("BT");break;case 7:o.setDirection("RL");break;case 8:o.setDirection("LR");break;case 12:o.parseDirective("%%{","open_directive");break;case 13:o.parseDirective(a[c],"type_directive");break;case 14:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 15:o.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=a[c];break;case 22:this.$=a[c-1]+a[c];break;case 23:case 24:this.$=a[c-1]+"~"+a[c];break;case 25:o.addRelation(a[c]);break;case 26:a[c-1].title=o.cleanupLabel(a[c]),o.addRelation(a[c-1]);break;case 35:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 36:case 37:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 38:o.addClass(a[c]);break;case 39:o.addClass(a[c-2]),o.setCssClass(a[c-2],a[c]);break;case 40:o.addClass(a[c-3]),o.addMembers(a[c-3],a[c-1]);break;case 41:o.addClass(a[c-5]),o.setCssClass(a[c-5],a[c-3]),o.addMembers(a[c-5],a[c-1]);break;case 42:o.addAnnotation(a[c],a[c-2]);break;case 43:this.$=[a[c]];break;case 44:a[c].push(a[c-1]),this.$=a[c];break;case 45:break;case 46:o.addMember(a[c-1],o.cleanupLabel(a[c]));break;case 47:break;case 48:break;case 49:this.$={id1:a[c-2],id2:a[c],relation:a[c-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:a[c-3],id2:a[c],relation:a[c-1],relationTitle1:a[c-2],relationTitle2:"none"};break;case 51:this.$={id1:a[c-3],id2:a[c],relation:a[c-2],relationTitle1:"none",relationTitle2:a[c-1]};break;case 52:this.$={id1:a[c-4],id2:a[c],relation:a[c-2],relationTitle1:a[c-3],relationTitle2:a[c-1]};break;case 53:o.addNote(a[c],a[c-1]);break;case 54:o.addNote(a[c]);break;case 55:this.$={type1:a[c-2],type2:a[c],lineType:a[c-1]};break;case 56:this.$={type1:"none",type2:a[c],lineType:a[c-1]};break;case 57:this.$={type1:a[c-1],type2:"none",lineType:a[c]};break;case 58:this.$={type1:"none",type2:"none",lineType:a[c]};break;case 59:this.$=o.relationType.AGGREGATION;break;case 60:this.$=o.relationType.EXTENSION;break;case 61:this.$=o.relationType.COMPOSITION;break;case 62:this.$=o.relationType.DEPENDENCY;break;case 63:this.$=o.relationType.LOLLIPOP;break;case 64:this.$=o.lineType.LINE;break;case 65:this.$=o.lineType.DOTTED_LINE;break;case 66:case 72:this.$=a[c-2],o.setClickEvent(a[c-1],a[c]);break;case 67:case 73:this.$=a[c-3],o.setClickEvent(a[c-2],a[c-1]),o.setTooltip(a[c-2],a[c]);break;case 68:case 76:this.$=a[c-2],o.setLink(a[c-1],a[c]);break;case 69:this.$=a[c-3],o.setLink(a[c-2],a[c-1],a[c]);break;case 70:case 78:this.$=a[c-3],o.setLink(a[c-2],a[c-1]),o.setTooltip(a[c-2],a[c]);break;case 71:case 79:this.$=a[c-4],o.setLink(a[c-3],a[c-2],a[c]),o.setTooltip(a[c-3],a[c-1]);break;case 74:this.$=a[c-3],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 75:this.$=a[c-4],o.setClickEvent(a[c-3],a[c-2],a[c-1]),o.setTooltip(a[c-3],a[c]);break;case 77:this.$=a[c-3],o.setLink(a[c-2],a[c-1],a[c]);break;case 80:o.setCssClass(a[c-1],a[c]);break}},table:[{3:1,4:2,5:U,6:4,7:5,8:h,9:f,10:g,11:p,12:6,13:11,19:c,23:W},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:U,6:4,7:5,8:h,9:f,10:g,11:p,12:6,13:11,19:c,23:W},{1:[2,9]},e(u,[2,5]),e(u,[2,6]),e(u,[2,7]),e(u,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:$},e([17,22],[2,13]),{6:31,7:30,8:h,9:f,10:g,11:p,13:11,19:c,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:k,43:I,44:H,49:R,51:A,52:D,55:z,57:T,67:F,68:M,70:S,74:L,88:o,89:s,90:n,91:i},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},e(t,[2,25],{32:[1,57]}),e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),{40:[1,58]},{42:[1,59]},e(t,[2,37]),e(t,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:v,61:l,62:y,63:j,64:b,65:w,66:O}),{27:72,28:46,29:47,88:o,89:s,90:n,91:i},e(t,[2,47]),e(t,[2,48]),{28:73,88:o,89:s,90:n},{27:74,28:46,29:47,88:o,89:s,90:n,91:i},{27:75,28:46,29:47,88:o,89:s,90:n,91:i},{27:76,28:46,29:47,88:o,89:s,90:n,91:i},{54:[1,77]},{27:78,28:46,29:47,88:o,89:s,90:n,91:i},{54:N,56:79},e(a,[2,20],{28:46,29:47,27:81,30:[1,82],88:o,89:s,90:n,91:i}),e(a,[2,21],{30:[1,83]}),e(x,[2,94]),e(x,[2,95]),e(x,[2,96]),e([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),e(P,[2,10]),{15:84,22:$},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:h,9:f,10:g,11:p,13:11,19:c,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:V,41:k,43:I,44:H,49:R,51:A,52:D,55:z,57:T,67:F,68:M,70:S,74:L,88:o,89:s,90:n,91:i},e(t,[2,26]),e(t,[2,35]),e(t,[2,36]),{27:86,28:46,29:47,54:[1,87],88:o,89:s,90:n,91:i},{53:88,58:63,59:64,60:v,61:l,62:y,63:j,64:b,65:w,66:O},e(t,[2,46]),{59:89,65:w,66:O},e(m,[2,58],{58:90,60:v,61:l,62:y,63:j,64:b}),e(r,[2,59]),e(r,[2,60]),e(r,[2,61]),e(r,[2,62]),e(r,[2,63]),e(B,[2,64]),e(B,[2,65]),e(t,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:o,89:s,90:n},{54:N,56:99},e(t,[2,54]),e(t,[2,98]),e(a,[2,22]),e(a,[2,23]),e(a,[2,24]),{16:[1,100]},{25:[2,19]},e(d,[2,49]),{27:101,28:46,29:47,88:o,89:s,90:n,91:i},{27:102,28:46,29:47,54:[1,103],88:o,89:s,90:n,91:i},e(m,[2,57],{58:104,60:v,61:l,62:y,63:j,64:b}),e(m,[2,56]),{28:105,88:o,89:s,90:n},{47:106,51:_},{27:108,28:46,29:47,88:o,89:s,90:n,91:i},e(t,[2,66],{54:[1,109]}),e(t,[2,68],{54:[1,111],69:[1,110]}),e(t,[2,72],{54:[1,112],72:[1,113]}),e(t,[2,76],{54:[1,115],69:[1,114]}),e(t,[2,80]),e(t,[2,53]),e(P,[2,11]),e(d,[2,51]),e(d,[2,50]),{27:116,28:46,29:47,88:o,89:s,90:n,91:i},e(m,[2,55]),e(t,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:_},e(t,[2,42]),e(t,[2,67]),e(t,[2,69]),e(t,[2,70],{69:[1,120]}),e(t,[2,73]),e(t,[2,74],{54:[1,121]}),e(t,[2,77]),e(t,[2,78],{69:[1,122]}),e(d,[2,52]),{47:123,51:_},e(t,[2,40]),{48:[2,44]},e(t,[2,71]),e(t,[2,75]),e(t,[2,79]),{48:[1,124]},e(t,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},K=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:return 69;case 57:return 69;case 58:return 69;case 59:return 69;case 60:return 61;case 61:return 61;case 62:return 63;case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:return"EQUALS";case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};return e}();C.lexer=K;function E(){this.yy={}}return E.prototype=C,C.Parser=E,new E}(),ir.parser=ir,W2=ir,cS=(e,t)=>{var n;return((n=t?.class)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*classDiagram/)!==null},lS=(e,t)=>{var n;return e.match(/^\s*classDiagram/)!==null&&((n=t?.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"||e.match(/^\s*classDiagram-v2/)!==null},sr="classid-",nr=[],M={},La=[],d3=0,yo=[],ko=e=>h.sanitizeText(e,t()),vS=function(e,t,n){w.parseDirective(this,e,t,n)},Js=function(e){let n="",s=e;if(e.indexOf("~")>0){let o=e.split("~");s=o[0],n=h.sanitizeText(o[1],t())}return{className:s,type:n}},Wa=function(e){let t=Js(e);if(M[t.className]!==void 0)return;M[t.className]={id:t.className,type:t.type,cssClasses:[],methods:[],members:[],annotations:[],domId:sr+t.className+"-"+d3},d3++},z3=function(e){const t=Object.keys(M);for(const n of t)if(M[n].id===e)return M[n].domId},bS=function(){nr=[],M={},La=[],yo=[],yo.push(T3),Ne()},gS=function(e){return M[e]},fS=function(){return M},mS=function(){return nr},hS=function(){return La},uS=function(n){e.debug("Adding relation: "+JSON.stringify(n)),Wa(n.id1),Wa(n.id2),n.id1=Js(n.id1).className,n.id2=Js(n.id2).className,n.relationTitle1=h.sanitizeText(n.relationTitle1.trim(),t()),n.relationTitle2=h.sanitizeText(n.relationTitle2.trim(),t()),nr.push(n)},dS=function(e,t){const n=Js(e).className;M[n].annotations.push(t)},D3=function(e,t){const s=Js(e).className,n=M[s];if(typeof t=="string"){const e=t.trim();e.startsWith("<<")&&e.endsWith(">>")?n.annotations.push(ko(e.substring(2,e.length-2))):e.indexOf(")")>0?n.methods.push(ko(e)):e&&n.members.push(ko(e))}},eS=function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(t=>D3(e,t)))},N3=function(e,t){const n={id:`note${La.length}`,class:t,text:e};La.push(n)},QA=function(e){return e.substring(0,1)===":"?h.sanitizeText(e.substr(1).trim(),t()):ko(e.trim())},Ba=function(e,t){e.split(",").forEach(function(e){let n=e;e[0].match(/\d/)&&(n=sr+n),M[n]!==void 0&&M[n].cssClasses.push(t)})},YA=function(e,n){const s=t();e.split(",").forEach(function(e){n!==void 0&&(M[e].tooltip=h.sanitizeText(n,s))})},qA=function(e){return M[e].tooltip},KA=function(e,n,s){const o=t();e.split(",").forEach(function(e){let t=e;e[0].match(/\d/)&&(t=sr+t),M[t]!==void 0&&(M[t].link=p.formatUrl(n,o),o.securityLevel==="sandbox"?M[t].linkTarget="_top":typeof s=="string"?M[t].linkTarget=ko(s):M[t].linkTarget="_blank")}),Ba(e,"clickable")},UA=function(e,t,n){e.split(",").forEach(function(e){WA(e,t,n),M[e].haveCallback=!0}),Ba(e,"clickable")},WA=function(e,n,s){const a=t();let o=e,i=z3(o);if(a.securityLevel!=="loose")return;if(n===void 0)return;if(M[o]!==void 0){let e=[];if(typeof s=="string"){e=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<e.length;n++){let t=e[n].trim();t.charAt(0)==='"'&&t.charAt(t.length-1)==='"'&&(t=t.substr(1,t.length-2)),e[n]=t}}e.length===0&&e.push(i),yo.push(function(){const t=document.querySelector(`[id="${i}"]`);t!==null&&t.addEventListener("click",function(){p.runFunc(n,...e)},!1)})}},$A=function(e){yo.forEach(function(t){t(e)})},VA={LINE:0,DOTTED_LINE:1},BA={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},T3=function(e){let t=i(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=i("body").append("div").attr("class","mermaidTooltip").style("opacity",0));const n=i(e).select("svg"),s=n.selectAll("g.node");s.on("mouseover",function(){const n=i(this),s=n.attr("title");if(s===null)return;const e=this.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(n.attr("title")).style("left",window.scrollX+e.left+(e.right-e.left)/2+"px").style("top",window.scrollY+e.top-14+document.body.scrollTop+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0);const e=i(this);e.classed("hover",!1)})},yo.push(T3),r3="TB",OA=()=>r3,wA=e=>{r3=e},Mn={parseDirective:vS,setAccTitle:pe,getAccTitle:Le,getAccDescription:ze,setAccDescription:xe,getConfig:()=>t().class,addClass:Wa,bindFunctions:$A,clear:bS,getClass:gS,getClasses:fS,getNotes:hS,addAnnotation:dS,addNote:N3,getRelations:mS,addRelation:uS,getDirection:OA,setDirection:wA,addMember:D3,addMembers:eS,cleanupLabel:QA,lineType:VA,relationType:BA,setClickEvent:UA,setCssClass:Ba,setLink:KA,getTooltip:qA,setTooltip:YA,lookUpDomId:z3,setDiagramTitle:vt,getDiagramTitle:Ot},K2=0,lA=function(t,n,s,o,i){const u=function(e){switch(e){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.relationType.EXTENSION:return"extension";case i.db.relationType.COMPOSITION:return"composition";case i.db.relationType.DEPENDENCY:return"dependency";case i.db.relationType.LOLLIPOP:return"lollipop"}};n.points=n.points.filter(e=>!Number.isNaN(e.y));const j=n.points,b=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Cs),r=t.append("path").attr("d",b(j)).attr("id","edge"+K2).attr("class","relation");let a="";o.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),s.relation.lineType==1&&r.attr("class","relation dashed-line"),s.relation.lineType==10&&r.attr("class","relation dotted-line"),s.relation.type1!=="none"&&r.attr("marker-start","url("+a+"#"+u(s.relation.type1)+"Start)"),s.relation.type2!=="none"&&r.attr("marker-end","url("+a+"#"+u(s.relation.type2)+"End)");let d,l;const c=n.points.length;let h=p.calcLabelPosition(n.points);d=h.x,l=h.y;let m,f,g,v;if(c%2!==0&&c>1){let t=p.calcCardinalityPosition(s.relation.type1!=="none",n.points,n.points[0]),o=p.calcCardinalityPosition(s.relation.type2!=="none",n.points,n.points[c-1]);e.debug("cardinality_1_point "+JSON.stringify(t)),e.debug("cardinality_2_point "+JSON.stringify(o)),m=t.x,f=t.y,g=o.x,v=o.y}if(s.title!==void 0){const n=t.append("g").attr("class","classLabel"),i=n.append("text").attr("class","label").attr("x",d).attr("y",l).attr("fill","red").attr("text-anchor","middle").text(s.title);window.label=i;const e=i.node().getBBox();n.insert("rect",":first-child").attr("class","box").attr("x",e.x-o.padding/2).attr("y",e.y-o.padding/2).attr("width",e.width+o.padding).attr("height",e.height+o.padding)}if(e.info("Rendering relation "+JSON.stringify(s)),s.relationTitle1!==void 0&&s.relationTitle1!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type1").attr("x",m).attr("y",f).attr("fill","black").attr("font-size","6").text(s.relationTitle1)}if(s.relationTitle2!==void 0&&s.relationTitle2!=="none"){const e=t.append("g").attr("class","cardinality");e.append("text").attr("class","type2").attr("x",g).attr("y",v).attr("fill","black").attr("font-size","6").text(s.relationTitle2)}K2++},$k=function(t,n,s,o){e.debug("Rendering class ",n,s);const p=n.id,u={id:p,label:n.id,width:0,height:0},a=t.append("g").attr("id",o.db.lookUpDomId(p)).attr("class","classGroup");let r;n.link?r=a.append("svg:a").attr("xlink:href",n.link).attr("target",n.linkTarget).append("text").attr("y",s.textHeight+s.padding).attr("x",0):r=a.append("text").attr("y",s.textHeight+s.padding).attr("x",0);let i=!0;n.annotations.forEach(function(e){const t=r.append("tspan").text("\xAB"+e+"\xBB");i||t.attr("dy",s.textHeight),i=!1});let f=n.id;n.type!==void 0&&n.type!==""&&(f+="<"+n.type+">");const _=r.append("tspan").text(f).attr("class","title");i||_.attr("dy",s.textHeight);const c=r.node().getBBox().height,v=a.append("line").attr("x1",0).attr("y1",s.padding+c+s.dividerMargin/2).attr("y2",s.padding+c+s.dividerMargin/2),g=a.append("text").attr("x",s.padding).attr("y",c+s.dividerMargin+s.textHeight).attr("fill","white").attr("class","classText");i=!0,n.members.forEach(function(e){w2(g,e,i,s),i=!1});const h=g.node().getBBox(),j=a.append("line").attr("x1",0).attr("y1",s.padding+c+s.dividerMargin+h.height).attr("y2",s.padding+c+s.dividerMargin+h.height),b=a.append("text").attr("x",s.padding).attr("y",c+2*s.dividerMargin+h.height+s.textHeight).attr("fill","white").attr("class","classText");i=!0,n.methods.forEach(function(e){w2(b,e,i,s),i=!1});const d=a.node().getBBox();var m=" ";n.cssClasses.length>0&&(m=m+n.cssClasses.join(" "));const y=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",d.width+2*s.padding).attr("height",d.height+s.padding+.5*s.dividerMargin).attr("class",m),l=y.node().getBBox().width;return r.node().childNodes.forEach(function(e){e.setAttribute("x",(l-e.getBBox().width)/2)}),n.tooltip&&r.insert("title").text(n.tooltip),v.attr("x2",l),j.attr("x2",l),u.width=l,u.height=d.height+s.padding+.5*s.dividerMargin,u},Vk=function(t,n,s){e.debug("Rendering note ",n,s);const l=n.id,i={id:l,text:n.text,width:0,height:0},a=t.append("g").attr("id",l).attr("class","classGroup");let d=a.append("text").attr("y",s.textHeight+s.padding).attr("x",0);const r=JSON.parse(`"${n.text}"`).split(`
`);r.forEach(function(t){e.debug(`Adding line: ${t}`),d.append("tspan").text(t).attr("class","title").attr("dy",s.textHeight)});const c=a.node().getBBox(),h=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*s.padding).attr("height",c.height+r.length*s.textHeight+s.padding+.5*s.dividerMargin),u=h.node().getBBox().width;return d.node().childNodes.forEach(function(e){e.setAttribute("x",(u-e.getBBox().width)/2)}),i.width=u,i.height=c.height+r.length*s.textHeight+s.padding+.5*s.dividerMargin,i},Ta=function(e){const s=/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/,o=/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/;let n=e.match(s),t=e.match(o);return n&&!t?Lk(n):t?Nk(t):Dk(e)},Lk=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?Ht(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?e[5].trim():"";t=s+o+i+" "+a,n=pr(r)}catch{t=e}return{displayText:t,cssStyle:n}},Nk=function(e){let n="",t="";try{let s=e[1]?e[1].trim():"",o=e[2]?e[2].trim():"",i=e[3]?Ht(e[3].trim()):"",a=e[4]?e[4].trim():"",r=e[5]?" : "+Ht(e[5]).trim():"";t=s+o+"("+i+")"+r,n=pr(a)}catch{t=e}return{displayText:t,cssStyle:n}},Dk=function(e){let o="",i="",n="",s=e.indexOf("("),t=e.indexOf(")");if(s>1&&t>s&&t<=e.length){let c="",a="",r=e.substring(0,1);r.match(/\w/)?a=e.substring(0,s).trim():(r.match(/[#+~-]/)&&(c=r),a=e.substring(1,s).trim());const l=e.substring(s+1,t);e.substring(t+1,1),i=pr(e.substring(t+1,t+2)),o=c+a+"("+Ht(l.trim())+")",t<e.length&&(n=e.substring(t+2).trim(),n!==""&&(n=" : "+Ht(n),o+=n))}else o=Ht(e);return{displayText:o,cssStyle:i}},w2=function(e,t,n,s){let o=Ta(t);const i=e.append("tspan").attr("x",s.padding).text(o.displayText);o.cssStyle!==""&&i.attr("style",o.cssStyle),n||i.attr("dy",s.textHeight)},pr=function(e){switch(e){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},gr={drawClass:$k,drawEdge:lA,drawNote:Vk,parseMember:Ta},Ea={},Oa=20,Us=function(e){const t=Object.entries(Ea).find(t=>t[1].label===e);if(t)return t[0]},_k=function(e){e.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),e.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},bk=function(n,s,o,a){const d=t().class;Ea={},e.info("Rendering diagram "+n);const f=t().securityLevel;let m;f==="sandbox"&&(m=i("#i"+s));const h=i(f==="sandbox"?m.nodes()[0].contentDocument.body:"body"),c=h.select(`[id='${s}']`);_k(c);const r=new F({multigraph:!0});r.setGraph({isMultiGraph:!0}),r.setDefaultEdgeLabel(function(){return{}});const u=a.db.getClasses(),b=Object.keys(u);for(const n of b){const s=u[n],t=gr.drawClass(c,s,d,a);Ea[t.id]=t,r.setNode(t.id,t),e.info("Org height: "+t.height)}const j=a.db.getRelations();j.forEach(function(t){e.info("tjoho"+Us(t.id1)+Us(t.id2)+JSON.stringify(t)),r.setEdge(Us(t.id1),Us(t.id2),{relation:t},t.title||"DEFAULT")});const y=a.db.getNotes();y.forEach(function(t){e.debug(`Adding note: ${JSON.stringify(t)}`);const n=gr.drawNote(c,t,d,a);Ea[n.id]=n,r.setNode(n.id,n),t.class&&t.class in u&&r.setEdge(t.id,Us(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Bs(r),r.nodes().forEach(function(t){t!==void 0&&r.node(t)!==void 0&&(e.debug("Node "+t+": "+JSON.stringify(r.node(t))),h.select("#"+(a.db.lookUpDomId(t)||t)).attr("transform","translate("+(r.node(t).x-r.node(t).width/2)+","+(r.node(t).y-r.node(t).height/2)+" )"))}),r.edges().forEach(function(t){t!==void 0&&r.edge(t)!==void 0&&(e.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r.edge(t))),gr.drawEdge(c,r.edge(t),r.edge(t).relation,d,a))});const l=c.node().getBBox(),p=l.width+Oa*2,g=l.height+Oa*2;Me(c,g,p,d.useMaxWidth);const v=`${l.x-Oa} ${l.y-Oa} ${p} ${g}`;e.debug(`viewBox ${v}`),c.attr("viewBox",v)},vk={draw:bk},gk=(e,t,n,s)=>{t.forEach(t=>{PE[t](e,n,s)})},pk=(t,n,s)=>{e.trace("Making markers for ",s),t.append("defs").append("marker").attr("id",n+"-extensionStart").attr("class","marker extension "+n).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"-extensionEnd").attr("class","marker extension "+n).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},mk=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-compositionStart").attr("class","marker composition "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},hk=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dk=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},ak=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},ZE=(e,t)=>{e.append("marker").attr("id",t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},$E=(e,t)=>{e.append("marker").attr("id",t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},IE=(e,t)=>{e.append("marker").attr("id",t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},HE=(e,t)=>{e.append("defs").append("marker").attr("id",t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},PE={extension:pk,composition:mk,aggregation:hk,dependency:dk,lollipop:ak,point:ZE,circle:$E,cross:IE,barb:HE},RE=gk;function _M(e,t){t&&e.attr("style",t)}function wM(e){const n=i(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=n.append("xhtml:div"),s=e.label,o=e.isNode?"nodeLabel":"edgeLabel";return t.html('<span class="'+o+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>"),_M(t,e.labelStyle),t.style("display","inline-block"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),n.node()}LE=(n,s,o,i)=>{let a=n||"";if(typeof a=="object"&&(a=a[0]),W(t().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),e.info("vertexText"+a);const t={isNode:i,label:er(a).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),labelStyle:s.replace("fill:","color:")};let n=wM(t);return n}const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("style",s.replace("color:","fill:"));let r=[];typeof a=="string"?r=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?r=a:r=[];for(const t of r){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","0"),o?e.setAttribute("class","title-row"):e.setAttribute("class","row"),e.textContent=t.trim(),c.appendChild(e)}return c},ce=LE,Y=(e,n,s,o)=>{let r;s?r=s:r="node default";const u=e.insert("g").attr("class",r).attr("id",n.domId||n.id),c=u.insert("g").attr("class","label").attr("style",n.labelStyle);let l;n.labelText===void 0?l="":l=typeof n.labelText=="string"?n.labelText:n.labelText[0];const d=c.node().appendChild(ce(De(er(l),t()),n.labelStyle,!1,o));let a=d.getBBox();if(W(t().flowchart.htmlLabels)){const t=d.children[0],e=i(d);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}const h=n.padding/2;return c.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),{shapeSvg:u,bbox:a,halfPadding:h,label:c}},E=(e,t)=>{const n=t.node().getBBox();e.width=n.width,e.height=n.height};function Rt(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+n/2+")")}v={},ke={},G0={},FE=()=>{ke={},G0={},v={}},ha=(t,n)=>(e.trace("In isDecendant",n," ",t," = ",ke[n].includes(t)),!!ke[n].includes(t)),SE=(t,n)=>(e.info("Decendants of ",n," is ",ke[n]),e.info("Edge is ",t),t.v!==n&&t.w!==n&&(ke[n]?ke[n].includes(t.v)||ha(t.v,n)||ha(t.w,n)||ke[n].includes(t.w):(e.debug("Tilt, ",n,",not in decendants"),!1))),$0=(t,n,s,o)=>{e.warn("Copying children of ",t,"root",o,"data",n.node(t),o);const i=n.children(t)||[];t!==o&&i.push(t),e.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(i=>{if(n.children(i).length>0)$0(i,n,s,o);else{const r=n.node(i);e.info("cp ",i," to ",o," with parent ",t),s.setNode(i,r),o!==n.parent(i)&&(e.warn("Setting parent",i,n.parent(i)),s.setParent(i,n.parent(i))),t!==o&&i!==t?(e.debug("Setting parent",i,t),s.setParent(i,t)):(e.info("In copy ",t,"root",o,"data",n.node(t),o),e.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==o,"node!==clusterId",i!==t));const a=n.edges(i);e.debug("Copying Edges",a),a.forEach(i=>{e.info("Edge",i);const a=n.edge(i.v,i.w,i.name);e.info("Edge data",a,o);try{SE(i,o)?(e.info("Copying as ",i.v,i.w,a,i.name),s.setEdge(i.v,i.w,a,i.name),e.info("newGraph edges ",s.edges(),s.edge(s.edges()[0]))):e.info("Skipping copy of edge ",i.v,"-->",i.w," rootId: ",o," clusterId:",t)}catch(t){e.error(t)}})}e.debug("Removing node",i),n.removeNode(i)})},T0=(e,t)=>{const s=t.children(e);let n=[...s];for(const o of s)G0[o]=e,n=[...n,...T0(o,t)];return n},Fs=(t,n)=>{e.trace("Searching",t);const s=n.children(t);if(e.trace("Searching children of id ",t,s),s.length<1)return e.trace("This is a valid node",t),t;for(const i of s){const o=Fs(i,n);if(o)return e.trace("Found replacement for",t," => ",o),o}},oa=e=>v[e]?v[e].externalConnections&&v[e]?v[e].id:e:e,kE=(t,n)=>{if(!t||n>10){e.debug("Opting out, no graph ");return}e.debug("Opting in, graph "),t.nodes().forEach(function(n){const s=t.children(n);s.length>0&&(e.warn("Cluster identified",n," Replacement id in edges: ",Fs(n,t)),ke[n]=T0(n,t),v[n]={id:Fs(n,t),clusterData:t.node(n)})}),t.nodes().forEach(function(n){const s=t.children(n),o=t.edges();s.length>0?(e.debug("Cluster identified",n,ke),o.forEach(t=>{if(t.v!==n&&t.w!==n){const s=ha(t.v,n),o=ha(t.w,n);s^o&&(e.warn("Edge: ",t," leaves cluster ",n),e.warn("Decendants of XXX ",n,": ",ke[n]),v[n].externalConnections=!0)}})):e.debug("Not a cluster ",n,ke)}),t.edges().forEach(function(n){const s=t.edge(n);e.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(n)),e.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(t.edge(n)));let o=n.v,i=n.w;if(e.warn("Fix XXX",v,"ids:",n.v,n.w,"Translating: ",v[n.v]," --- ",v[n.w]),v[n.v]&&v[n.w]&&v[n.v]===v[n.w]){e.warn("Fixing and trixing link to self - removing XXX",n.v,n.w,n.name),e.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),o=oa(n.v),i=oa(n.w),t.removeEdge(n.v,n.w,n.name);const a=n.w+"---"+n.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:s.label,padding:0,shape:"labelRect",style:""});const r=JSON.parse(JSON.stringify(s)),c=JSON.parse(JSON.stringify(s));r.label="",r.arrowTypeEnd="none",c.label="",r.fromCluster=n.v,c.toCluster=n.v,t.setEdge(o,a,r,n.name+"-cyclic-special"),t.setEdge(a,i,c,n.name+"-cyclic-special")}else(v[n.v]||v[n.w])&&(e.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),o=oa(n.v),i=oa(n.w),t.removeEdge(n.v,n.w,n.name),o!==n.v&&(s.fromCluster=n.v),i!==n.w&&(s.toCluster=n.w),e.warn("Fix Replacing with XXX",o,i,n.name),t.setEdge(o,i,s,n.name))}),e.warn("Adjusted Graph",Vt(t)),F0(t,0),e.trace(v)},F0=(t,n)=>{if(e.warn("extractor - ",n,Vt(t),t.children("D")),n>10){e.error("Bailing out");return}let s=t.nodes(),o=!1;for(const e of s){const n=t.children(e);o=o||n.length>0}if(!o){e.debug("Done, no node has children",t.nodes());return}e.debug("Nodes = ",s,n);for(const o of s)if(e.debug("Extracting node",o,v,v[o]&&!v[o].externalConnections,!t.parent(o),t.node(o),t.children("D")," Depth ",n),v[o])if(!v[o].externalConnections&&t.children(o)&&t.children(o).length>0){e.warn("Cluster without external connections, without a parent and with children",o,n);const a=t.graph();let s=a.rankdir==="TB"?"LR":"TB";v[o]&&v[o].clusterData&&v[o].clusterData.dir&&(s=v[o].clusterData.dir,e.warn("Fixing dir",v[o].clusterData.dir,s));const i=new F({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});e.warn("Old graph before copy",Vt(t)),$0(o,t,i,o),t.setNode(o,{clusterNode:!0,id:o,clusterData:v[o].clusterData,labelText:v[o].labelText,graph:i}),e.warn("New graph after copy node: (",o,")",Vt(i)),e.debug("Old graph after copy",Vt(t))}else e.warn("Cluster ** ",o," **not meeting the criteria !externalConnections:",!v[o].externalConnections," no parent: ",!t.parent(o)," children ",t.children(o)&&t.children(o).length>0,t.children("D"),n),e.debug(v);else e.debug("Not a cluster",o,n);s=t.nodes(),e.warn("New list of nodes",s);for(const i of s){const o=t.node(i);e.warn(" Now next level",i,o),o.clusterNode&&F0(o.graph,n+1)}},A0=(e,t)=>{if(t.length===0)return[];let n=Object.assign(t);return t.forEach(t=>{const s=e.children(t),o=A0(e,s);n=[...n,...o]}),n},xE=e=>A0(e,e.children());function VM(e,t){return e.intersect(t)}function OE(e,t,n,s){var o,i=e.x,a=e.y,r=i-s.x,c=a-s.y,d=Math.sqrt(t*t*c*c+n*n*r*r),l=Math.abs(t*n*r/d);return s.x<i&&(l=-l),o=Math.abs(t*n*c/d),s.y<a&&(o=-o),{x:i+l,y:a+o}}function WM(e,t,n){return OE(e,t,t,n)}function UM(e,t,n,s){var o,i,a,r,c,l,m,f,v,b,h=t.y-e.y,d=e.x-t.x,u=t.x*e.y-e.x*t.y,g=h*n.x+d*n.y+u,p=h*s.x+d*s.y+u;if(g!==0&&p!==0&&wE(g,p))return;if(a=s.y-n.y,r=n.x-s.x,c=s.x*n.y-n.x*s.y,m=a*e.x+r*e.y+c,f=a*t.x+r*t.y+c,m!==0&&f!==0&&wE(m,f))return;if(i=h*r-a*d,i===0)return;return l=Math.abs(i/2),o=d*c-r*u,v=o<0?(o-l)/i:(o+l)/i,o=a*u-h*c,b=o<0?(o-l)/i:(o+l)/i,{x:v,y:b}}function wE(e,t){return e*t>0}function qM(e,t,n){var s,r,c,l,d,u,h=e.x,m=e.y,o=[],i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(e){i=Math.min(i,e.x),a=Math.min(a,e.y)}):(i=Math.min(i,t.x),a=Math.min(a,t.y)),r=h-e.width/2-i,c=m-e.height/2-a;for(s=0;s<t.length;s++)l=t[s],d=t[s<t.length-1?s+1:0],u=UM(e,n,{x:r+l.x,y:c+l.y},{x:r+d.x,y:c+d.y}),u&&o.push(u);return o.length?(o.length>1&&o.sort(function(e,t){var s=e.x-n.x,o=e.y-n.y,i=Math.sqrt(s*s+o*o),a=t.x-n.x,r=t.y-n.y,c=Math.sqrt(a*a+r*r);return i<c?-1:i===c?0:1}),o[0]):e}_E=(e,t)=>{var a,r,c=e.x,l=e.y,n=t.x-c,s=t.y-l,o=e.width/2,i=e.height/2;return Math.abs(s)*o>Math.abs(n)*i?(s<0&&(i=-i),a=s===0?0:i*n/s,r=i):(n<0&&(o=-o),a=o,r=n===0?0:o*s/n),{x:c+a,y:l+r}},ws=_E,C={node:VM,circle:WM,ellipse:OE,polygon:qM,rect:ws},bE=(t,n)=>{const{shapeSvg:o,bbox:s,halfPadding:i}=Y(t,n,"node "+n.classes,!0);e.info("Classes = ",n.classes);const a=o.insert("rect",":first-child");return a.attr("rx",n.rx).attr("ry",n.ry).attr("x",-s.width/2-i).attr("y",-s.height/2-i).attr("width",s.width+n.padding).attr("height",s.height+n.padding),E(n,a),n.intersect=function(e){return C.rect(n,e)},o},vE=bE,pE=(t,n)=>{const{shapeSvg:o,bbox:i}=Y(t,n,void 0,!0),c=i.width+n.padding,l=i.height+n.padding,s=c+l,a=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];e.info("Question main (Circle)");const r=Rt(o,s,s,a);return r.attr("style",n.style),E(n,r),n.intersect=function(t){return e.warn("Intersect called"),C.polygon(n,a,t)},o},fE=(e,t)=>{const s=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=28,o=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],i=s.insert("polygon",":first-child").attr("points",o.map(function(e){return e.x+","+e.y}).join(" "));return i.attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(e){return C.circle(t,14,e)},s},hE=(e,t)=>{const{shapeSvg:i,bbox:a}=Y(e,t,void 0,!0),l=4,n=a.height+t.padding,s=n/l,o=a.width+2*s+t.padding,r=[{x:s,y:0},{x:o-s,y:0},{x:o,y:-n/2},{x:o-s,y:-n},{x:s,y:-n},{x:0,y:-n/2}],c=Rt(i,o,n,r);return c.attr("style",t.style),E(t,c),t.intersect=function(e){return C.polygon(t,r,e)},i},iE=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],r=Rt(o,s,n,a);return r.attr("style",t.style),t.width=s+n,t.height=n,t.intersect=function(e){return C.polygon(t,a,e)},o},sE=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],r=Rt(o,s,n,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},tE=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],r=Rt(o,s,n,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},JC=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],r=Rt(o,s,n,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},QC=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],r=Rt(o,s,n,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},GC=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],r=Rt(o,s,n,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},UC=(e,t)=>{const{shapeSvg:a,bbox:r}=Y(e,t,void 0,!0),o=r.width+t.padding,s=o/2,n=s/(2.5+o/50),i=r.height+n+t.padding,c="M 0,"+n+" a "+s+","+n+" 0,0,0 "+o+" 0 a "+s+","+n+" 0,0,0 "+-o+" 0 l 0,"+i+" a "+s+","+n+" 0,0,0 "+o+" 0 l 0,"+-i,l=a.attr("label-offset-y",n).insert("path",":first-child").attr("style",t.style).attr("d",c).attr("transform","translate("+-o/2+","+-(i/2+n)+")");return E(t,l),t.intersect=function(e){const o=C.rect(t,e),i=o.x-t.x;if(s!=0&&(Math.abs(i)<t.width/2||Math.abs(i)==t.width/2&&Math.abs(o.y-t.y)>t.height/2-n)){let a=n*n*(1-i*i/(s*s));a!=0&&(a=Math.sqrt(a)),a=n-a,e.y-t.y>0&&(a=-a),o.y+=a}return o},a},$C=(t,n)=>{const{shapeSvg:i,bbox:s,halfPadding:a}=Y(t,n,"node "+n.classes,!0);e.trace("Classes = ",n.classes);const o=i.insert("rect",":first-child"),r=s.width+n.padding,c=s.height+n.padding;if(o.attr("class","basic label-container").attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("x",-s.width/2-a).attr("y",-s.height/2-a).attr("width",r).attr("height",c),n.props){const t=new Set(Object.keys(n.props));n.props.borders&&(HC(o,n.props.borders,r,c),t.delete("borders")),t.forEach(t=>{e.warn(`Unknown node property ${t}`)})}return E(n,o),n.intersect=function(e){return C.rect(n,e)},i},BC=(t,n)=>{const{shapeSvg:s}=Y(t,n,"label",!0);e.trace("Classes = ",n.classes);const o=s.insert("rect",":first-child"),i=0,a=0;if(o.attr("width",i).attr("height",a),s.attr("class","label edgeLabel"),n.props){const t=new Set(Object.keys(n.props));n.props.borders&&(HC(o,n.props.borders,i,a),t.delete("borders")),t.forEach(t=>{e.warn(`Unknown node property ${t}`)})}return E(n,o),n.intersect=function(e){return C.rect(n,e)},s};function HC(t,n,s,o){const r=[],i=e=>{r.push(e,0)},a=e=>{r.push(0,e)};n.includes("t")?(e.debug("add top border"),i(s)):a(s),n.includes("r")?(e.debug("add right border"),i(o)):a(o),n.includes("b")?(e.debug("add bottom border"),i(s)):a(s),n.includes("l")?(e.debug("add left border"),i(o)):a(o),t.attr("stroke-dasharray",r.join(" "))}RC=(n,s)=>{let f;s.classes?f="node "+s.classes:f="node default";const l=n.insert("g").attr("class",f).attr("id",s.domId||s.id),g=l.insert("rect",":first-child"),v=l.insert("line"),d=l.insert("g").attr("class","label"),r=s.labelText.flat?s.labelText.flat():s.labelText;let u="";typeof r=="object"?u=r[0]:u=r,e.info("Label text abc79",u,r,typeof r=="object");const h=d.node().appendChild(ce(u,s.labelStyle,!0,!0));let o={width:0,height:0};if(W(t().flowchart.htmlLabels)){const t=h.children[0],e=i(h);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}e.info("Text 2",r);const m=r.slice(1,r.length);let c=h.getBBox();const p=d.node().appendChild(ce(m.join?m.join("<br/>"):m,s.labelStyle,!0,!0));if(W(t().flowchart.htmlLabels)){const t=p.children[0],e=i(p);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}const a=s.padding/2;return i(p).attr("transform","translate( "+(o.width>c.width?0:(c.width-o.width)/2)+", "+(c.height+a+5)+")"),i(h).attr("transform","translate( "+(o.width<c.width?0:-(c.width-o.width)/2)+", 0)"),o=d.node().getBBox(),d.attr("transform","translate("+-o.width/2+", "+(-o.height/2-a+3)+")"),g.attr("class","outer title-state").attr("x",-o.width/2-a).attr("y",-o.height/2-a).attr("width",o.width+s.padding).attr("height",o.height+s.padding),v.attr("class","divider").attr("x1",-o.width/2-a).attr("x2",o.width/2+a).attr("y1",-o.height/2-a+c.height+a).attr("y2",-o.height/2-a+c.height+a),E(s,g),s.intersect=function(e){return C.rect(s,e)},l},NC=(e,t)=>{const{shapeSvg:s,bbox:o}=Y(e,t,void 0,!0),n=o.height+t.padding,i=o.width+n/4+t.padding,a=s.insert("rect",":first-child").attr("style",t.style).attr("rx",n/2).attr("ry",n/2).attr("x",-i/2).attr("y",-n/2).attr("width",i).attr("height",n);return E(t,a),t.intersect=function(e){return C.rect(t,e)},s},DC=(t,n)=>{const{shapeSvg:i,bbox:s,halfPadding:o}=Y(t,n,void 0,!0),a=i.insert("circle",":first-child");return a.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+o).attr("width",s.width+n.padding).attr("height",s.height+n.padding),e.info("Circle main"),E(n,a),n.intersect=function(t){return e.info("Circle intersect",n,s.width/2+o,t),C.circle(n,s.width/2+o,t)},i},FC=(t,n)=>{const{shapeSvg:a,bbox:s,halfPadding:i}=Y(t,n,void 0,!0),o=5,r=a.insert("g",":first-child"),c=r.insert("circle"),l=r.insert("circle");return c.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+i+o).attr("width",s.width+n.padding+o*2).attr("height",s.height+n.padding+o*2),l.attr("style",n.style).attr("rx",n.rx).attr("ry",n.ry).attr("r",s.width/2+i).attr("width",s.width+n.padding).attr("height",s.height+n.padding),e.info("DoubleCircle main"),E(n,c),n.intersect=function(t){return e.info("DoubleCircle intersect",n,s.width/2+i+o,t),C.circle(n,s.width/2+i+o,t)},a},AC=(e,t)=>{const{shapeSvg:o,bbox:i}=Y(e,t,void 0,!0),n=i.width+t.padding,s=i.height+t.padding,a=[{x:0,y:0},{x:n,y:0},{x:n,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],r=Rt(o,n,s,a);return r.attr("style",t.style),E(t,r),t.intersect=function(e){return C.polygon(t,a,e)},o},kC=(e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),s=n.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),E(t,s),t.intersect=function(e){return C.circle(t,7,e)},n},C0=(e,t,n)=>{const i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s=70,o=10;n==="LR"&&(s=10,o=70);const a=i.append("rect").attr("x",-1*s/2).attr("y",-1*o/2).attr("width",s).attr("height",o).attr("class","fork-join");return E(t,a),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(e){return C.rect(t,e)},i},EC=(e,t)=>{const n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),o=n.insert("circle",":first-child"),s=n.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),E(t,s),t.intersect=function(e){return C.circle(t,7,e)},n},xC=(e,n)=>{const r=n.padding/2,d=4,c=8;let v;n.classes?v="node "+n.classes:v="node default";const h=e.insert("g").attr("class",v).attr("id",n.domId||n.id),b=h.insert("rect",":first-child"),x=h.insert("line"),_=h.insert("line");let s=0,o=d;const f=h.insert("g").attr("class","label");let a=0;const w=n.classData.annotations&&n.classData.annotations[0],O=n.classData.annotations[0]?"\xAB"+n.classData.annotations[0]+"\xBB":"",p=f.node().appendChild(ce(O,n.labelStyle,!0,!0));let u=p.getBBox();if(W(t().flowchart.htmlLabels)){const t=p.children[0],e=i(p);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}n.classData.annotations[0]&&(o+=u.height+d,s+=u.width);let g=n.classData.id;n.classData.type!==void 0&&n.classData.type!==""&&(t().flowchart.htmlLabels?g+="&lt;"+n.classData.type+"&gt;":g+="<"+n.classData.type+">");const m=f.node().appendChild(ce(g,n.labelStyle,!0,!0));i(m).attr("class","classTitle");let l=m.getBBox();if(W(t().flowchart.htmlLabels)){const t=m.children[0],e=i(m);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}o+=l.height+d,l.width>s&&(s=l.width);const j=[];n.classData.members.forEach(e=>{const c=Ta(e);let l=c.displayText;t().flowchart.htmlLabels&&(l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const r=f.node().appendChild(ce(l,c.cssStyle?c.cssStyle:n.labelStyle,!0,!0));let a=r.getBBox();if(W(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>s&&(s=a.width),o+=a.height+d,j.push(r)}),o+=c;const y=[];if(n.classData.methods.forEach(e=>{const c=Ta(e);let l=c.displayText;t().flowchart.htmlLabels&&(l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const r=f.node().appendChild(ce(l,c.cssStyle?c.cssStyle:n.labelStyle,!0,!0));let a=r.getBBox();if(W(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>s&&(s=a.width),o+=a.height+d,y.push(r)}),o+=c,w){let e=(s-u.width)/2;i(p).attr("transform","translate( "+(-1*s/2+e)+", "+-1*o/2+")"),a=u.height+d}let k=(s-l.width)/2;return i(m).attr("transform","translate( "+(-1*s/2+k)+", "+(-1*o/2+a)+")"),a+=l.height+d,x.attr("class","divider").attr("x1",-s/2-r).attr("x2",s/2+r).attr("y1",-o/2-r+c+a).attr("y2",-o/2-r+c+a),a+=c,j.forEach(e=>{i(e).attr("transform","translate( "+-s/2+", "+(-1*o/2+a+c/2)+")"),a+=l.height+d}),a+=c,_.attr("class","divider").attr("x1",-s/2-r).attr("x2",s/2+r).attr("y1",-o/2-r+c+a).attr("y2",-o/2-r+c+a),a+=c,y.forEach(e=>{i(e).attr("transform","translate( "+-s/2+", "+(-1*o/2+a)+")"),a+=l.height+d}),b.attr("class","outer title-state").attr("x",-s/2-r).attr("y",-(o/2)-r).attr("width",s+n.padding).attr("height",o+n.padding),E(n,b),n.intersect=function(e){return C.rect(n,e)},h},O0={question:pE,rect:$C,labelRect:BC,rectWithTitle:RC,choice:fE,circle:DC,doublecircle:FC,stadium:NC,hexagon:hE,rect_left_inv_arrow:iE,lean_right:sE,lean_left:tE,trapezoid:JC,inv_trapezoid:QC,rect_right_inv_arrow:GC,cylinder:UC,start:kC,end:EC,note:vE,subroutine:AC,fork:C0,join:C0,class_box:xC},ls={},wC=(e,n,s)=>{let i,o;if(n.link){let a;t().securityLevel==="sandbox"?a="_top":n.linkTarget&&(a=n.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",n.link).attr("target",a),o=O0[n.shape](i,n,s)}else o=O0[n.shape](e,n,s),i=o;n.tooltip&&o.attr("title",n.tooltip),n.class&&o.attr("class","node default "+n.class),ls[n.id]=i,n.haveCallback&&ls[n.id].attr("class",ls[n.id].attr("class")+" clickable")},bC=(e,t)=>{ls[t.id]=e},vC=()=>{ls={}},y0=t=>{const n=ls[t.id];e.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const o=8,s=t.diff||0;return t.clusterNode?n.attr("transform","translate("+(t.x+s-t.width/2)+", "+(t.y-t.height/2-o)+")"):n.attr("transform","translate("+t.x+", "+t.y+")"),s},gC=(n,s)=>{e.trace("Creating subgraph rect for ",s.id,s);const r=n.insert("g").attr("class","cluster"+(s.class?" "+s.class:"")).attr("id",s.id),l=r.insert("rect",":first-child"),d=r.insert("g").attr("class","cluster-label"),c=d.node().appendChild(ce(s.labelText,s.labelStyle,void 0,!0));let o=c.getBBox();if(W(t().flowchart.htmlLabels)){const t=c.children[0],e=i(c);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}const a=0*s.padding,m=a/2,u=s.width<=o.width+a?o.width+a:s.width;s.width<=o.width+a?s.diff=(o.width-s.width)/2-s.padding/2:s.diff=-s.padding/2,e.trace("Data ",s,JSON.stringify(s)),l.attr("style",s.style).attr("rx",s.rx).attr("ry",s.ry).attr("x",s.x-u/2).attr("y",s.y-s.height/2-m).attr("width",u).attr("height",s.height+a),d.attr("transform","translate("+(s.x-o.width/2)+", "+(s.y-s.height/2)+")");const h=l.node().getBBox();return s.width=h.width,s.height=h.height,s.intersect=function(e){return ws(s,e)},r},mC=(e,t)=>{const s=e.insert("g").attr("class","note-cluster").attr("id",t.id),o=s.insert("rect",":first-child"),n=0*t.padding,i=n/2;o.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+n).attr("height",t.height+n).attr("fill","none");const a=o.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(e){return ws(t,e)},s},hC=(e,n)=>{const a=e.insert("g").attr("class",n.classes).attr("id",n.id),d=a.insert("rect",":first-child"),u=a.insert("g").attr("class","cluster-label"),h=a.append("rect"),r=u.node().appendChild(ce(n.labelText,n.labelStyle,void 0,!0));let s=r.getBBox();if(W(t().flowchart.htmlLabels)){const t=r.children[0],e=i(r);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s=r.getBBox();const o=0*n.padding,c=o/2,l=n.width<=s.width+n.padding?s.width+n.padding:n.width;n.width<=s.width+n.padding?n.diff=(s.width+n.padding*0-n.width)/2:n.diff=-n.padding/2,d.attr("class","outer").attr("x",n.x-l/2-c).attr("y",n.y-n.height/2-c).attr("width",l+o).attr("height",n.height+o),h.attr("class","inner").attr("x",n.x-l/2-c).attr("y",n.y-n.height/2-c+s.height-1).attr("width",l+o).attr("height",n.height+o-s.height-3),u.attr("transform","translate("+(n.x-s.width/2)+", "+(n.y-n.height/2-n.padding/3+(W(t().flowchart.htmlLabels)?5:3))+")");const m=d.node().getBBox();return n.height=m.height,n.intersect=function(e){return ws(n,e)},a},Gx=(e,t)=>{const s=e.insert("g").attr("class",t.classes).attr("id",t.id),o=s.insert("rect",":first-child"),n=0*t.padding,a=n/2;o.attr("class","divider").attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2).attr("width",t.width+n).attr("height",t.height+n);const i=o.node().getBBox();return t.width=i.width,t.height=i.height,t.diff=-t.padding/2,t.intersect=function(e){return ws(t,e)},s},Yx={rect:gC,roundedWithTitle:hC,noteGroup:mC,divider:Gx},j0={},Ux=(t,n)=>{e.trace("Inserting cluster");const s=n.shape||"rect";j0[n.id]=Yx[s](t,n)},Wx=()=>{j0={}},qi={},q={},Bx=()=>{qi={},q={}},Hx=(e,n)=>{const a=ce(n.label,n.labelStyle),r=e.insert("g").attr("class","edgeLabel"),c=r.insert("g").attr("class","label");c.node().appendChild(a);let o=a.getBBox();if(W(t().flowchart.htmlLabels)){const t=a.children[0],e=i(a);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}c.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),qi[n.id]=r,n.width=o.width,n.height=o.height;let s;if(n.startLabelLeft){const t=ce(n.startLabelLeft,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),q[n.id]||(q[n.id]={}),q[n.id].startLeft=o,$r(s,n.startLabelLeft)}if(n.startLabelRight){const t=ce(n.startLabelRight,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=o.node().appendChild(t),i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),q[n.id]||(q[n.id]={}),q[n.id].startRight=o,$r(s,n.startLabelRight)}if(n.endLabelLeft){const t=ce(n.endLabelLeft,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),o.node().appendChild(t),q[n.id]||(q[n.id]={}),q[n.id].endLeft=o,$r(s,n.endLabelLeft)}if(n.endLabelRight){const t=ce(n.endLabelRight,n.labelStyle),o=e.insert("g").attr("class","edgeTerminals"),i=o.insert("g").attr("class","inner");s=i.node().appendChild(t);const a=t.getBBox();i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),o.node().appendChild(t),q[n.id]||(q[n.id]={}),q[n.id].endRight=o,$r(s,n.endLabelRight)}};function $r(e,n){t().flowchart.htmlLabels&&e&&(e.style.width=n.length*9+"px",e.style.height="12px")}Tx=(t,n)=>{e.info("Moving label abc78 ",t.id,t.label,qi[t.id]);let s=n.updatedPath?n.updatedPath:n.originalPath;if(t.label){const a=qi[t.id];let o=t.x,i=t.y;if(s){const a=p.calcLabelPosition(s);e.info("Moving label "+t.label+" from (",o,",",i,") to (",a.x,",",a.y,") abc78"),n.updatedPath&&(o=a.x,i=a.y)}a.attr("transform","translate("+o+", "+i+")")}if(t.startLabelLeft){const o=q[t.id].startLeft;let e=t.x,n=t.y;if(s){const o=p.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.startLabelRight){const o=q[t.id].startRight;let e=t.x,n=t.y;if(s){const o=p.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.endLabelLeft){const o=q[t.id].endLeft;let e=t.x,n=t.y;if(s){const o=p.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}if(t.endLabelRight){const o=q[t.id].endRight;let e=t.x,n=t.y;if(s){const o=p.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",s);e=o.x,n=o.y}o.attr("transform","translate("+e+", "+n+")")}},Fx=(e,t)=>{const n=e.x,s=e.y,o=Math.abs(t.x-n),i=Math.abs(t.y-s),a=e.width/2,r=e.height/2;return o>=a||i>=r},Mx=(t,n,s)=>{e.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(n)}
  insidePoint : ${JSON.stringify(s)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const c=t.x,u=t.y,f=Math.abs(c-s.x),r=t.width/2;let o=s.x<n.x?r-f:r+f;const h=t.height/2,a=Math.abs(n.y-s.y),i=Math.abs(n.x-s.x);if(Math.abs(u-n.y)*r>Math.abs(c-n.x)*h){let r=s.y<n.y?n.y-h-u:u-h-n.y;o=i*r/a;const t={x:s.x<n.x?s.x+o:s.x-i+o,y:s.y<n.y?s.y+a-r:s.y-a+r};return o===0&&(t.x=n.x,t.y=n.y),i===0&&(t.x=n.x),a===0&&(t.y=n.y),e.warn(`abc89 topp/bott calc, Q ${a}, q ${r}, R ${i}, r ${o}`,t),t}s.x<n.x?o=n.x-r-c:o=c-r-n.x;let m=a*o/i,l=s.x<n.x?s.x+i-o:s.x-i+o,d=s.y<n.y?s.y+m:s.y-m;return e.warn(`sides calc abc89, Q ${a}, q ${m}, R ${i}, r ${o}`,{_x:l,_y:d}),o===0&&(l=n.x,d=n.y),i===0&&(l=n.x),a===0&&(d=n.y),{x:l,y:d}},f0=(t,n)=>{e.warn("abc88 cutPathAtIntersect",t,n);let s=[],o=t[0],i=!1;return t.forEach(t=>{if(e.info("abc88 checking point",t,n),!Fx(n,t)&&!i){const a=Mx(n,o,t);e.warn("abc88 inside",t,o,a),e.warn("abc88 intersection",a);let r=!1;s.forEach(e=>{r=r||e.x===a.x&&e.y===a.y}),s.some(e=>e.x===a.x&&e.y===a.y)?e.warn("abc88 no intersect",a,s):s.push(a),i=!0}else e.warn("abc88 outside",t,o),o=t,i||s.push(t)}),e.warn("abc88 returning points",s),s},Sx=function(n,s,o,i,a,r){let d=o.points,m=!1;const g=r.node(s.v);var h=r.node(s.w);e.info("abc88 InsertEdge: ",o),h.intersect&&g.intersect&&(d=d.slice(1,o.points.length-1),d.unshift(g.intersect(d[0])),e.info("Last point",d[d.length-1],h,h.intersect(d[d.length-1])),d.push(h.intersect(d[d.length-1]))),o.toCluster&&(e.info("to cluster abc88",i[o.toCluster]),d=f0(o.points,i[o.toCluster].node),m=!0),o.fromCluster&&(e.info("from cluster abc88",i[o.fromCluster]),d=f0(d.reverse(),i[o.fromCluster].node).reverse(),m=!0);const v=d.filter(e=>!Number.isNaN(e.y));let f;a==="graph"||a==="flowchart"?f=o.curve||Cs:f=Cs;const b=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(f);let u;switch(o.thickness){case"normal":u="edge-thickness-normal";break;case"thick":u="edge-thickness-thick";break;default:u=""}switch(o.pattern){case"solid":u+=" edge-pattern-solid";break;case"dotted":u+=" edge-pattern-dotted";break;case"dashed":u+=" edge-pattern-dashed";break}const l=n.append("path").attr("d",b(v)).attr("id",o.id).attr("class"," "+u+(o.classes?" "+o.classes:"")).attr("style",o.style);let c="";switch((t().flowchart.arrowMarkerAbsolute||t().state.arrowMarkerAbsolute)&&(c=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,c=c.replace(/\(/g,"\\("),c=c.replace(/\)/g,"\\)")),e.info("arrowTypeStart",o.arrowTypeStart),e.info("arrowTypeEnd",o.arrowTypeEnd),o.arrowTypeStart){case"arrow_cross":l.attr("marker-start","url("+c+"#"+a+"-crossStart)");break;case"arrow_point":l.attr("marker-start","url("+c+"#"+a+"-pointStart)");break;case"arrow_barb":l.attr("marker-start","url("+c+"#"+a+"-barbStart)");break;case"arrow_circle":l.attr("marker-start","url("+c+"#"+a+"-circleStart)");break;case"aggregation":l.attr("marker-start","url("+c+"#"+a+"-aggregationStart)");break;case"extension":l.attr("marker-start","url("+c+"#"+a+"-extensionStart)");break;case"composition":l.attr("marker-start","url("+c+"#"+a+"-compositionStart)");break;case"dependency":l.attr("marker-start","url("+c+"#"+a+"-dependencyStart)");break;case"lollipop":l.attr("marker-start","url("+c+"#"+a+"-lollipopStart)");break}switch(o.arrowTypeEnd){case"arrow_cross":l.attr("marker-end","url("+c+"#"+a+"-crossEnd)");break;case"arrow_point":l.attr("marker-end","url("+c+"#"+a+"-pointEnd)");break;case"arrow_barb":l.attr("marker-end","url("+c+"#"+a+"-barbEnd)");break;case"arrow_circle":l.attr("marker-end","url("+c+"#"+a+"-circleEnd)");break;case"aggregation":l.attr("marker-end","url("+c+"#"+a+"-aggregationEnd)");break;case"extension":l.attr("marker-end","url("+c+"#"+a+"-extensionEnd)");break;case"composition":l.attr("marker-end","url("+c+"#"+a+"-compositionEnd)");break;case"dependency":l.attr("marker-end","url("+c+"#"+a+"-dependencyEnd)");break;case"lollipop":l.attr("marker-end","url("+c+"#"+a+"-lollipopEnd)");break}let p={};return m&&(p.updatedPath=d),p.originalPath=o.points,p},u0=(t,n,s,o)=>{e.info("Graph in recursive render: XXX",Vt(n),o);const a=n.graph().rankdir;e.trace("Dir in recursive render - dir:",a);const i=t.insert("g").attr("class","root");n.nodes()?e.info("Recursive render XXX",n.nodes()):e.info("No nodes found for",n),n.edges().length>0&&e.trace("Recursive edges",n.edge(n.edges()[0]));const l=i.insert("g").attr("class","clusters"),d=i.insert("g").attr("class","edgePaths"),u=i.insert("g").attr("class","edgeLabels"),r=i.insert("g").attr("class","nodes");n.nodes().forEach(function(t){const i=n.node(t);if(o!==void 0){const s=JSON.parse(JSON.stringify(o.clusterData));e.info("Setting data for cluster XXX (",t,") ",s,o),n.setNode(o.id,s),n.parent(t)||(e.trace("Setting parent",t,o.id),n.setParent(t,o.id,s))}if(e.info("(Insert) Node XXX"+t+": "+JSON.stringify(n.node(t))),i&&i.clusterNode){e.info("Cluster identified",t,i.width,n.node(t));const a=u0(r,i.graph,s,n.node(t)),o=a.elem;E(i,o),i.diff=a.diff||0,e.info("Node bounds (abc123)",t,i,i.width,i.x,i.y),bC(o,i),e.warn("Recursive render complete ",o,i)}else n.children(t).length>0?(e.info("Cluster - the non recursive path XXX",t,i.id,i,n),e.info(Fs(i.id,n)),v[i.id]={id:Fs(i.id,n),node:i}):(e.info("Node - the non recursive path",t,i.id,i),wC(r,n.node(t),a))}),n.edges().forEach(function(t){const s=n.edge(t.v,t.w,t.name);e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),e.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(n.edge(t))),e.info("Fix",v,"ids:",t.v,t.w,"Translateing: ",v[t.v],v[t.w]),Hx(u,s)}),n.edges().forEach(function(t){e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),e.info("#############################################"),e.info("###                Layout                 ###"),e.info("#############################################"),e.info(n),Bs(n),e.info("Graph after layout:",Vt(n));let c=0;return xE(n).forEach(function(t){const s=n.node(t);e.info("Position "+t+": "+JSON.stringify(n.node(t))),e.info("Position "+t+": ("+s.x,","+s.y,") width: ",s.width," height: ",s.height),s&&s.clusterNode?y0(s):n.children(t).length>0?(Ux(l,s),v[s.id].node=s):y0(s)}),n.edges().forEach(function(t){const o=n.edge(t);e.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o),o);const i=Sx(d,t,o,v,s,n);Tx(o,i)}),n.nodes().forEach(function(t){const s=n.node(t);e.info(t,s.type,s.diff),s.type==="group"&&(c=s.diff)}),{elem:i,diff:c}},Xr=(t,n,s,o,i)=>{RE(t,s,o,i),vC(),Bx(),Wx(),FE(),e.warn("Graph at first:",Vt(n)),kE(n),e.warn("Graph after:",Vt(n)),u0(t,n,o)},U4=e=>h.sanitizeText(e,t()),$4={dividerMargin:10,padding:5,textHeight:10},Ax=function(n,s,o,i){const a=Object.keys(n);e.info("keys:",a),e.info(n),a.forEach(function(o){const a=n[o];let r="";a.cssClasses.length>0&&(r=r+" "+a.cssClasses.join(" "));const c={labelStyle:""};let u=a.text!==void 0?a.text:a.id,l=0,d="";switch(a.type){case"class":d="class_box";break;default:d="class_box"}s.setNode(a.id,{labelStyle:c.labelStyle,shape:d,labelText:U4(u),classData:a,rx:l,ry:l,class:r,style:c.style,id:a.id,domId:a.domId,tooltip:i.db.getTooltip(a.id)||"",haveCallback:a.haveCallback,link:a.link,width:a.type==="group"?500:void 0,type:a.type,padding:t().flowchart.padding}),e.info("setNode",{labelStyle:c.labelStyle,shape:d,labelText:u,rx:l,ry:l,class:r,style:c.style,id:a.id,width:a.type==="group"?500:void 0,type:a.type,padding:t().flowchart.padding})})},kx=function(n,s,o,i){e.info(n),n.forEach(function(n,a){const c=n;let f="";const l={labelStyle:"",style:""};let u=c.text,d=0,h="note";if(s.setNode(c.id,{labelStyle:l.labelStyle,shape:h,labelText:U4(u),noteData:c,rx:d,ry:d,class:f,style:l.style,id:c.id,domId:c.id,tooltip:"",type:"note",padding:t().flowchart.padding}),e.info("setNode",{labelStyle:l.labelStyle,shape:h,labelText:u,rx:d,ry:d,style:l.style,id:c.id,type:"note",padding:t().flowchart.padding}),!c.class||!(c.class in i))return;const m=o+a,r={};r.classes="relation",r.pattern="dotted",r.id=`edgeNote${m}`,r.arrowhead="none",e.info(`Note edge: ${JSON.stringify(r)}, ${JSON.stringify(c)}`),r.startLabelRight="",r.endLabelLeft="",r.arrowTypeStart="none",r.arrowTypeEnd="none";let p="fill:none",g="";r.style=p,r.labelStyle=g,r.curve=Ue($4.curve,ye),s.setEdge(c.id,c.class,r,m)})},Cx=function(n,s){const i=t().flowchart;let o=0;n.forEach(function(a){o++;const r={};r.classes="relation",r.pattern=a.relation.lineType==1?"dashed":"solid",r.id="id"+o,a.type==="arrow_open"?r.arrowhead="none":r.arrowhead="normal",e.info(r,a),r.startLabelRight=a.relationTitle1==="none"?"":a.relationTitle1,r.endLabelLeft=a.relationTitle2==="none"?"":a.relationTitle2,r.arrowTypeStart=_x(a.relation.type1),r.arrowTypeEnd=_x(a.relation.type2);let c="",l="";if(a.style!==void 0){const e=Gt(a.style);c=e.style,l=e.labelStyle}else c="fill:none";r.style=c,r.labelStyle=l,a.interpolate!==void 0?r.curve=Ue(a.interpolate,ye):n.defaultInterpolate!==void 0?r.curve=Ue(n.defaultInterpolate,ye):r.curve=Ue(i.curve,ye),a.text=a.title,a.text===void 0?a.style!==void 0&&(r.arrowheadStyle="fill: #333"):(r.arrowheadStyle="fill: #333",r.labelpos="c",t().flowchart.htmlLabels?(r.labelType="html",r.label='<span class="edgeLabel">'+a.text+"</span>"):(r.labelType="text",r.label=a.text.replace(h.lineBreakRegex,`
`),a.style===void 0&&(r.style=r.style||"stroke: #333; stroke-width: 1.5px;fill:none"),r.labelStyle=r.labelStyle.replace("color:","fill:"))),s.setEdge(a.id1,a.id2,r,o)})},xx=function(e){const t=Object.keys(e);t.forEach(function(t){$4[t]=e[t]})},Ox=function(n,s,o,a){e.info("Drawing class - ",s);const r=t().flowchart,l=t().securityLevel;e.info("config:",r);const g=r.nodeSpacing||50,v=r.rankSpacing||50,c=new F({multigraph:!0,compound:!0}).setGraph({rankdir:a.db.getDirection(),nodesep:g,ranksep:v,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=a.db.getClasses(),d=a.db.getRelations(),b=a.db.getNotes();e.info(d),Ax(h,c,s,a),Cx(d,c),kx(b,c,d.length+1,h);let u;l==="sandbox"&&(u=i("#i"+s));const m=i(l==="sandbox"?u.nodes()[0].contentDocument.body:"body"),f=m.select(`[id="${s}"]`),j=m.select("#"+s+" g");if(Xr(j,c,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",s),p.insertTitle(f,"classTitleText",r.titleTopMargin,a.db.getDiagramTitle()),vi(c,f,r.diagramPadding,r.useMaxWidth),!r.htmlLabels){const e=l==="sandbox"?u.nodes()[0].contentDocument:document,t=e.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const s of t){const o=s.getBBox(),n=e.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("rx",0),n.setAttribute("ry",0),n.setAttribute("width",o.width),n.setAttribute("height",o.height),s.insertBefore(n,s.firstChild)}}};function _x(e){let t;switch(e){case 0:t="aggregation";break;case 1:t="extension";break;case 2:t="composition";break;case 3:t="dependency";break;case 4:t="lollipop";break;default:t="none"}return t}yx={setConf:xx,draw:Ox},ec=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},O=[1,2],s=[1,5],t=[6,9,11,23,25,27,29,30,31,49],w=[1,17],y=[1,18],v=[1,19],h=[1,20],c=[1,21],i=[1,22],g=[1,25],u=[1,30],l=[1,31],m=[1,32],f=[1,33],p=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],d=[1,45],o=[30,31,46,47],b=[4,6,9,11,23,25,27,29,30,31,49],j=[42,43,44,45],n=[22,37],_=[1,64],r={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 1:break;case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 12:o.addEntity(a[c-4]),o.addEntity(a[c-2]),o.addRelationship(a[c-4],a[c],a[c-2],a[c-3]);break;case 13:o.addEntity(a[c-3]),o.addAttributes(a[c-3],a[c-1]);break;case 14:o.addEntity(a[c-2]);break;case 15:o.addEntity(a[c]);break;case 16:case 17:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 18:case 19:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 20:case 41:this.$=a[c];break;case 21:case 39:case 40:this.$=a[c].replace(/"/g,"");break;case 22:this.$=[a[c]];break;case 23:a[c].push(a[c-1]),this.$=a[c];break;case 24:this.$={attributeType:a[c-1],attributeName:a[c]};break;case 25:this.$={attributeType:a[c-2],attributeName:a[c-1],attributeKeyType:a[c]};break;case 26:this.$={attributeType:a[c-2],attributeName:a[c-1],attributeComment:a[c]};break;case 27:this.$={attributeType:a[c-3],attributeName:a[c-2],attributeKeyType:a[c-1],attributeComment:a[c]};break;case 28:case 29:case 30:this.$=a[c];break;case 31:this.$=a[c].replace(/"/g,"");break;case 32:this.$={cardA:a[c],relType:a[c-1],cardB:a[c-2]};break;case 33:this.$=o.Cardinality.ZERO_OR_ONE;break;case 34:this.$=o.Cardinality.ZERO_OR_MORE;break;case 35:this.$=o.Cardinality.ONE_OR_MORE;break;case 36:this.$=o.Cardinality.ONLY_ONE;break;case 37:this.$=o.Identification.NON_IDENTIFYING;break;case 38:this.$=o.Identification.IDENTIFYING;break;case 42:o.parseDirective("%%{","open_directive");break;case 43:o.parseDirective(a[c],"type_directive");break;case 44:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 45:o.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:O,7:3,12:4,49:s},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:O,7:3,12:4,49:s},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:w,25:y,27:v,29:h,30:c,31:i,49:s},{1:[2,2]},{14:23,15:[1,24],52:g},e([15,52],[2,43]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:15,10:26,12:4,17:16,23:w,25:y,27:v,29:h,30:c,31:i,49:s},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),e(t,[2,15],{18:27,40:29,20:[1,28],42:u,43:l,44:m,45:f}),{24:[1,34]},{26:[1,35]},{28:[1,36]},e(t,[2,19]),e(p,[2,20]),e(p,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},e(t,[2,5]),{17:40,30:c,31:i},{21:41,22:[1,42],32:43,33:44,37:d},{41:46,46:[1,47],47:[1,48]},e(o,[2,33]),e(o,[2,34]),e(o,[2,35]),e(o,[2,36]),e(t,[2,16]),e(t,[2,17]),e(t,[2,18]),e(b,[2,9]),{14:49,52:g},{52:[2,44]},{15:[1,50]},{22:[1,51]},e(t,[2,14]),{21:52,22:[2,22],32:43,33:44,37:d},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:u,43:l,44:m,45:f},e(j,[2,37]),e(j,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},e(t,[2,13]),{22:[2,23]},e(n,[2,24],{35:61,36:62,38:[1,63],39:_}),e([22,37,38,39],[2,29]),e([30,31],[2,32]),e(b,[2,10]),e(t,[2,12]),e(t,[2,39]),e(t,[2,40]),e(t,[2,41]),e(n,[2,25],{36:65,39:_}),e(n,[2,26]),e([22,37,39],[2,30]),e(n,[2,31]),e(n,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},x=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return n.yytext[0];case 29:return 42;case 30:return 44;case 31:return 44;case 32:return 44;case 33:return 42;case 34:return 42;case 35:return 43;case 36:return 43;case 37:return 43;case 38:return 43;case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:return 45;case 44:return 45;case 45:return 45;case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:return 47;case 52:return 47;case 53:return 46;case 54:return 46;case 55:return 46;case 56:return 30;case 57:return n.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9-_[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};return e}();r.lexer=x;function a(){this.yy={}}return a.prototype=r,r.Parser=a,new a}(),ec.parser=ec,px=ec,hx=e=>e.match(/^\s*erDiagram/)!==null,Ts={},nc=[],cx={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},ix={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},ox=function(e,t,n){w.parseDirective(this,e,t,n)},B4=function(t){return Ts[t]===void 0&&(Ts[t]={attributes:[]},e.info("Added new entity :",t)),Ts[t]},ZO=()=>Ts,QO=function(t,n){let o=B4(t),s;for(s=n.length-1;s>=0;s--)o.attributes.push(n[s]),e.debug("Added attribute ",n[s].attributeName)},GO=function(t,n,s,o){let i={entityA:t,roleA:n,entityB:s,relSpec:o};nc.push(i),e.debug("Added new relationship :",i)},YO=()=>nc,qO=function(){Ts={},nc=[],Ne()},KO={Cardinality:cx,Identification:ix,parseDirective:ox,getConfig:()=>t().er,addEntity:B4,addAttributes:QO,getEntities:ZO,addRelationship:GO,getRelationships:YO,clear:qO,setAccTitle:pe,getAccTitle:Le,setAccDescription:xe,getAccDescription:ze,setDiagramTitle:vt,getDiagramTitle:Ot},Qe={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},UO=function(e,t){let n;e.append("defs").append("marker").attr("id",Qe.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",Qe.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=e.append("defs").append("marker").attr("id",Qe.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=e.append("defs").append("marker").attr("id",Qe.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,0 L21,18"),e.append("defs").append("marker").attr("id",Qe.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",Qe.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=e.append("defs").append("marker").attr("id",Qe.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=e.append("defs").append("marker").attr("id",Qe.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},bt={ERMarkers:Qe,insertMarkers:UO},WO=/[^\dA-Za-z](\W)*/g,L={},Ws=new Map,VO=function(e){const t=Object.keys(e);for(const n of t)L[n]=e[n]},BO=(e,n,s)=>{const i=L.entityPadding/3,o=L.entityPadding/3,p=L.fontSize*.85,c=n.node().getBBox(),v=[];let d=!1,l=!1,u=0,h=0,m=0,f=0,g=c.height+i*2,j=1;s.forEach(e=>{e.attributeKeyType!==void 0&&(d=!0),e.attributeComment!==void 0&&(l=!0)}),s.forEach(s=>{const r=`${n.node().id}-attr-${j}`;let o=0;const w=Ht(s.attributeType),c=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(w),b=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeName),a={};a.tn=c,a.nn=b;const y=c.node().getBBox(),_=b.node().getBBox();if(u=Math.max(u,y.width),h=Math.max(h,_.width),o=Math.max(y.height,_.height),d){const n=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeKeyType||"");a.kn=n;const i=n.node().getBBox();m=Math.max(m,i.width),o=Math.max(o,i.height)}if(l){const n=e.append("text").classed("er entityLabel",!0).attr("id",`${r}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",t().fontFamily).style("font-size",p+"px").text(s.attributeComment||"");a.cn=n;const i=n.node().getBBox();f=Math.max(f,i.width),o=Math.max(o,i.height)}a.height=o,v.push(a),g+=o+i*2,j+=1});let r=4;d&&(r+=2),l&&(r+=2);const b=u+h+m+f,a={width:Math.max(L.minEntityWidth,Math.max(c.width+L.entityPadding*2,b+o*r)),height:s.length>0?g:Math.max(L.minEntityHeight,c.height+L.entityPadding*2)};if(s.length>0){const p=Math.max(0,(a.width-b-o*r)/(r/2));n.attr("transform","translate("+a.width/2+","+(i+c.height/2)+")");let t=c.height+i*2,s="attributeBoxOdd";v.forEach(n=>{const r=t+i+n.height/2;n.tn.attr("transform","translate("+o+","+r+")");const c=e.insert("rect","#"+n.tn.node().id).classed(`er ${s}`,!0).attr("x",0).attr("y",t).attr("width",u+o*2+p).attr("height",n.height+i*2),g=parseFloat(c.attr("x"))+parseFloat(c.attr("width"));n.nn.attr("transform","translate("+(g+o)+","+r+")");const v=e.insert("rect","#"+n.nn.node().id).classed(`er ${s}`,!0).attr("x",g).attr("y",t).attr("width",h+o*2+p).attr("height",n.height+i*2);let a=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(d){n.kn.attr("transform","translate("+(a+o)+","+r+")");const c=e.insert("rect","#"+n.kn.node().id).classed(`er ${s}`,!0).attr("x",a).attr("y",t).attr("width",m+o*2+p).attr("height",n.height+i*2);a=parseFloat(c.attr("x"))+parseFloat(c.attr("width"))}l&&(n.cn.attr("transform","translate("+(a+o)+","+r+")"),e.insert("rect","#"+n.cn.node().id).classed(`er ${s}`,"true").attr("x",a).attr("y",t).attr("width",f+o*2+p).attr("height",n.height+i*2)),t+=n.height+i*2,s=s==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else a.height=Math.max(L.minEntityHeight,g),n.attr("transform","translate("+a.width/2+","+a.height/2+")");return a},IO=function(e,n,s){const i=Object.keys(n);let o;return i.forEach(function(i){const a=TT(i,"entity");Ws.set(i,a);const r=e.append("g").attr("id",a);o=o===void 0?a:o;const c="text-"+a,d=r.append("text").classed("er entityLabel",!0).attr("id",c).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",t().fontFamily).style("font-size",L.fontSize+"px").text(i),{width:u,height:h}=BO(r,d,n[i].attributes),m=r.insert("rect","#"+c).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",h),l=m.node().getBBox();s.setNode(a,{width:l.width,height:l.height,shape:"rect",id:a})}),o},HO=function(e,t){t.nodes().forEach(function(n){n!==void 0&&t.node(n)!==void 0&&e.select("#"+n).attr("transform","translate("+(t.node(n).x-t.node(n).width/2)+","+(t.node(n).y-t.node(n).height/2)+" )")})},D4=function(e){return(e.entityA+e.roleA+e.entityB).replace(/\s/g,"")},PO=function(e,t){return e.forEach(function(e){t.setEdge(Ws.get(e.entityA),Ws.get(e.entityB),{relationship:e},D4(e))}),e},z4=0,LO=function(e,n,s,o,i){z4++;const u=s.edge(Ws.get(n.entityA),Ws.get(n.entityB),D4(n)),h=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Cs),r=e.insert("path","#"+o).classed("er relationshipLine",!0).attr("d",h(u.points)).style("stroke",L.stroke).style("fill","none");n.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&r.attr("stroke-dasharray","8,8");let a="";switch(L.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),n.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:r.attr("marker-end","url("+a+"#"+bt.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:r.attr("marker-end","url("+a+"#"+bt.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:r.attr("marker-end","url("+a+"#"+bt.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:r.attr("marker-end","url("+a+"#"+bt.ERMarkers.ONLY_ONE_END+")");break}switch(n.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:r.attr("marker-start","url("+a+"#"+bt.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:r.attr("marker-start","url("+a+"#"+bt.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:r.attr("marker-start","url("+a+"#"+bt.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:r.attr("marker-start","url("+a+"#"+bt.ERMarkers.ONLY_ONE_START+")");break}const m=r.node().getTotalLength(),c=r.node().getPointAtLength(m*.5),d="rel"+z4,f=e.append("text").classed("er relationshipLabel",!0).attr("id",d).attr("x",c.x).attr("y",c.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",t().fontFamily).style("font-size",L.fontSize+"px").text(n.roleA),l=f.node().getBBox();e.insert("rect","#"+d).classed("er relationshipLabelBox",!0).attr("x",c.x-l.width/2).attr("y",c.y-l.height/2).attr("width",l.width).attr("height",l.height)},NO=function(n,s,o,a){L=t().er,e.info("Drawing ER diagram");const u=t().securityLevel;let h;u==="sandbox"&&(h=i("#i"+s));const g=i(u==="sandbox"?h.nodes()[0].contentDocument.body:"body"),r=g.select(`[id='${s}']`);bt.insertMarkers(r,L);let c;c=new F({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:L.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const v=IO(r,a.db.getEntities(),c),b=PO(a.db.getRelationships(),c);Bs(c),HO(r,c),b.forEach(function(e){LO(r,e,c,v,a)});const l=L.diagramPadding;p.insertTitle(r,"entityTitleText",L.titleTopMargin,a.db.getDiagramTitle());const d=r.node().getBBox(),m=d.width+l*2,f=d.height+l*2;Me(r,f,m,L.useMaxWidth),r.attr("viewBox",`${d.x-l} ${d.y-l} ${m} ${f}`)};function TT(e="",t=""){const n=e.replace(WO,"");return`${DO(t)}${DO(n)}${Pj()}`}function DO(e=""){return e.length>0?`${e}-`:""}MO={setConf:VO,draw:NO},cc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},tt=[1,9],Me=[1,7],Be=[1,6],Ve=[1,8],je=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$e=[2,10],We=[1,20],Ie=[1,21],He=[1,22],Pe=[1,23],xe=[1,30],Le=[1,32],Ne=[1,33],De=[1,34],re=[1,62],de=[1,48],ne=[1,52],ze=[1,36],Te=[1,37],Fe=[1,38],Se=[1,39],Ae=[1,40],fe=[1,56],ve=[1,63],se=[1,51],le=[1,53],pe=[1,55],ie=[1,59],ae=[1,60],Re=[1,41],Oe=[1,42],Ce=[1,43],Ee=[1,44],ge=[1,61],he=[1,50],ue=[1,54],ce=[1,57],me=[1,58],oe=[1,49],et=[1,66],we=[1,71],D=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],K=[1,75],W=[1,74],U=[1,76],ke=[20,21,23,81,82],P=[1,99],a=[1,104],c=[1,107],m=[1,108],I=[1,101],h=[1,106],u=[1,109],H=[1,102],d=[1,114],l=[1,113],n=[1,103],r=[1,105],t=[1,110],i=[1,111],o=[1,112],s=[1,115],Ye=[20,21,22,23,81,82],R=[20,21,22,23,53,81,82],L=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],z=[20,21,23],Xe=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ge=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],_e=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],E=[1,149],k=[1,157],T=[1,158],F=[1,159],M=[1,160],S=[1,144],A=[1,145],N=[1,141],g=[1,152],C=[1,153],x=[1,154],O=[1,155],w=[1,156],_=[1,161],p=[1,162],y=[1,147],j=[1,150],b=[1,146],v=[1,143],Ue=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ze=[1,165],ye=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],f=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],nt=[12,21,22,24],Qe=[22,106],q=[1,250],Y=[1,245],Q=[1,246],ee=[1,254],$=[1,251],V=[1,248],te=[1,247],J=[1,249],Z=[1,252],X=[1,253],G=[1,255],be=[1,273],Je=[20,21,23,106],B=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],qe={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,n,s,o,i,a){var l,c=a.length-1;switch(i){case 5:o.parseDirective("%%{","open_directive");break;case 6:o.parseDirective(a[c],"type_directive");break;case 7:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 8:o.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(a[c])||a[c].length>0)&&a[c-1].push(a[c]),this.$=a[c-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=a[c];break;case 19:o.setDirection("TB"),this.$="TB";break;case 20:o.setDirection(a[c-1]),this.$=a[c-1];break;case 35:this.$=a[c-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=o.addSubGraph(a[c-6],a[c-1],a[c-4]);break;case 42:this.$=o.addSubGraph(a[c-3],a[c-1],a[c-3]);break;case 43:this.$=o.addSubGraph(void 0,a[c-1],void 0);break;case 45:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 46:case 47:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 51:o.addLink(a[c-2].stmt,a[c],a[c-1]),this.$={stmt:a[c],nodes:a[c].concat(a[c-2].nodes)};break;case 52:o.addLink(a[c-3].stmt,a[c-1],a[c-2]),this.$={stmt:a[c-1],nodes:a[c-1].concat(a[c-3].nodes)};break;case 53:this.$={stmt:a[c-1],nodes:a[c-1]};break;case 54:this.$={stmt:a[c],nodes:a[c]};break;case 55:this.$=[a[c]];break;case 56:this.$=a[c-4].concat(a[c]);break;case 57:this.$=[a[c-2]],o.setClass(a[c-2],a[c]);break;case 58:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"square");break;case 59:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"doublecircle");break;case 60:this.$=a[c-5],o.addVertex(a[c-5],a[c-2],"circle");break;case 61:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"ellipse");break;case 62:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"stadium");break;case 63:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"subroutine");break;case 64:this.$=a[c-7],o.addVertex(a[c-7],a[c-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[c-5],a[c-3]]]));break;case 65:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"cylinder");break;case 66:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"round");break;case 67:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"diamond");break;case 68:this.$=a[c-5],o.addVertex(a[c-5],a[c-2],"hexagon");break;case 69:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"odd");break;case 70:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"trapezoid");break;case 71:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"inv_trapezoid");break;case 72:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"lean_right");break;case 73:this.$=a[c-3],o.addVertex(a[c-3],a[c-1],"lean_left");break;case 74:this.$=a[c],o.addVertex(a[c]);break;case 75:a[c-1].text=a[c],this.$=a[c-1];break;case 76:case 77:a[c-2].text=a[c-1],this.$=a[c-2];break;case 78:this.$=a[c];break;case 79:l=o.destructLink(a[c],a[c-2]),this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[c-1]};break;case 80:l=o.destructLink(a[c]),this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 81:this.$=a[c-1];break;case 83:case 97:case 153:this.$=a[c-1]+""+a[c];break;case 98:case 99:this.$=a[c-4],o.addClass(a[c-2],a[c]);break;case 100:this.$=a[c-4],o.setClass(a[c-2],a[c]);break;case 101:case 109:this.$=a[c-1],o.setClickEvent(a[c-1],a[c]);break;case 102:case 110:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-2]),o.setTooltip(a[c-3],a[c]);break;case 103:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 104:this.$=a[c-4],o.setClickEvent(a[c-4],a[c-3],a[c-2]),o.setTooltip(a[c-4],a[c]);break;case 105:case 111:this.$=a[c-1],o.setLink(a[c-1],a[c]);break;case 106:case 112:this.$=a[c-3],o.setLink(a[c-3],a[c-2]),o.setTooltip(a[c-3],a[c]);break;case 107:case 113:this.$=a[c-3],o.setLink(a[c-3],a[c-2],a[c]);break;case 108:case 114:this.$=a[c-5],o.setLink(a[c-5],a[c-4],a[c]),o.setTooltip(a[c-5],a[c-2]);break;case 115:this.$=a[c-4],o.addVertex(a[c-2],void 0,void 0,a[c]);break;case 116:case 118:this.$=a[c-4],o.updateLink(a[c-2],a[c]);break;case 117:this.$=a[c-4],o.updateLink([a[c-2]],a[c]);break;case 119:this.$=a[c-8],o.updateLinkInterpolate([a[c-6]],a[c-2]),o.updateLink([a[c-6]],a[c]);break;case 120:this.$=a[c-8],o.updateLinkInterpolate(a[c-6],a[c-2]),o.updateLink(a[c-6],a[c]);break;case 121:this.$=a[c-6],o.updateLinkInterpolate([a[c-4]],a[c]);break;case 122:this.$=a[c-6],o.updateLinkInterpolate(a[c-4],a[c]);break;case 123:case 125:this.$=[a[c]];break;case 124:case 126:a[c-2].push(a[c]),this.$=a[c-2];break;case 128:this.$=a[c-1]+a[c];break;case 150:this.$=a[c];break;case 151:this.$=a[c-1]+""+a[c];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:tt,16:4,21:Me,22:Be,24:Ve},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:tt,16:4,21:Me,22:Be,24:Ve},e(je,$e,{17:11}),{7:12,13:[1,13]},{16:14,21:Me,22:Be,24:Ve},{16:15,21:Me,22:Be,24:Ve},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{8:64,10:[1,65],15:et},e([10,15],[2,6]),e(je,[2,17]),e(je,[2,18]),e(je,[2,19]),{20:[1,68],21:[1,69],22:we,27:67,30:70},e(D,[2,11]),e(D,[2,12]),e(D,[2,13]),e(D,[2,14]),e(D,[2,15]),e(D,[2,16]),{9:72,20:K,21:W,23:U,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:K,21:W,23:U},{9:81,20:K,21:W,23:U},{9:82,20:K,21:W,23:U},{9:83,20:K,21:W,23:U},{9:84,20:K,21:W,23:U},{9:86,20:K,21:W,22:[1,85],23:U},e(D,[2,44]),{45:[1,87]},{47:[1,88]},e(D,[2,47]),e(ke,[2,54],{30:89,22:we}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:P,52:a,66:c,67:m,84:[1,97],91:I,97:96,98:[1,94],100:[1,95],105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(D,[2,158]),e(D,[2,159]),e(D,[2,160]),e(D,[2,161]),e(Ye,[2,55],{53:[1,116]}),e(R,[2,74],{116:129,40:[1,117],52:re,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:de,67:ne,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,122:ge,123:he,124:ue,125:ce,126:me,127:oe}),e(L,[2,150]),e(L,[2,175]),e(L,[2,176]),e(L,[2,177]),e(L,[2,178]),e(L,[2,179]),e(L,[2,180]),e(L,[2,181]),e(L,[2,182]),e(L,[2,183]),e(L,[2,184]),e(L,[2,185]),e(L,[2,186]),e(L,[2,187]),e(L,[2,188]),e(L,[2,189]),e(L,[2,190]),{9:130,20:K,21:W,23:U},{11:131,14:[1,132]},e(z,[2,8]),e(je,[2,20]),e(je,[2,26]),e(je,[2,27]),{21:[1,133]},e(Xe,[2,34],{30:134,22:we}),e(D,[2,35]),{50:135,51:45,52:re,54:46,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},e(Ge,[2,48]),e(Ge,[2,49]),e(Ge,[2,50]),e(_e,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:E,24:k,26:T,38:F,39:139,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),e(D,[2,36]),e(D,[2,37]),e(D,[2,38]),e(D,[2,39]),e(D,[2,40]),{22:E,24:k,26:T,38:F,39:163,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(Ue,$e,{17:164}),e(D,[2,45]),e(D,[2,46]),e(ke,[2,53],{52:Ze}),{26:P,52:a,66:c,67:m,91:I,97:166,102:[1,167],105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{95:[1,168],103:169,105:[1,170]},{26:P,52:a,66:c,67:m,91:I,95:[1,171],97:172,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{26:P,52:a,66:c,67:m,91:I,97:173,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,101],{22:[1,174],99:[1,175]}),e(z,[2,105],{22:[1,176]}),e(z,[2,109],{115:100,117:178,22:[1,177],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,111],{22:[1,179]}),e(ye,[2,152]),e(ye,[2,154]),e(ye,[2,155]),e(ye,[2,156]),e(ye,[2,157]),e(f,[2,162]),e(f,[2,163]),e(f,[2,164]),e(f,[2,165]),e(f,[2,166]),e(f,[2,167]),e(f,[2,168]),e(f,[2,169]),e(f,[2,170]),e(f,[2,171]),e(f,[2,172]),e(f,[2,173]),e(f,[2,174]),{52:re,54:180,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:E,24:k,26:T,38:F,39:181,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:182,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:184,42:M,52:a,57:[1,183],66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:185,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:186,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:187,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{66:[1,188]},{22:E,24:k,26:T,38:F,39:189,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:190,42:M,52:a,66:c,67:m,71:[1,191],73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:192,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:193,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:194,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(L,[2,151]),e(nt,[2,3]),{8:195,15:et},{15:[2,7]},e(je,[2,28]),e(Xe,[2,33]),e(ke,[2,51],{30:196,22:we}),e(_e,[2,75],{22:[1,197]}),{22:[1,198]},{22:E,24:k,26:T,38:F,39:199,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,81:A,82:[1,200],83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(f,[2,82]),e(f,[2,84]),e(f,[2,140]),e(f,[2,141]),e(f,[2,142]),e(f,[2,143]),e(f,[2,144]),e(f,[2,145]),e(f,[2,146]),e(f,[2,147]),e(f,[2,148]),e(f,[2,149]),e(f,[2,85]),e(f,[2,86]),e(f,[2,87]),e(f,[2,88]),e(f,[2,89]),e(f,[2,90]),e(f,[2,91]),e(f,[2,92]),e(f,[2,93]),e(f,[2,94]),e(f,[2,95]),{9:203,20:K,21:W,22:E,23:U,24:k,26:T,38:F,40:[1,202],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,204],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:we,30:205},{22:[1,206],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},e(Qe,[2,123]),{22:[1,211]},{22:[1,212],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{22:[1,213],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,115:100,117:178,122:n,123:r,124:t,125:i,126:o,127:s},{84:[1,214]},e(z,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},e(ye,[2,153]),{84:[1,219],101:[1,220]},e(Ye,[2,57],{116:129,52:re,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,122:ge,123:he,124:ue,125:ce,126:me,127:oe}),{22:E,24:k,26:T,38:F,41:[1,221],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,56:[1,222],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:223,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,58:[1,224],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,60:[1,225],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,62:[1,226],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,64:[1,227],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{67:[1,228]},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,70:[1,229],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,72:[1,230],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,39:231,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,41:[1,232],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,75:[1,233],77:[1,234],81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,73:S,75:[1,236],77:[1,235],81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{9:237,20:K,21:W,23:U},e(ke,[2,52],{52:Ze}),e(_e,[2,77]),e(_e,[2,76]),{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,68:[1,238],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(_e,[2,79]),e(f,[2,83]),{22:E,24:k,26:T,38:F,39:239,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(Ue,$e,{17:240}),e(D,[2,43]),{51:241,52:re,54:46,66:de,67:ne,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:q,66:Y,67:Q,86:ee,96:242,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:256,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:257,102:$,104:[1,258],105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:259,102:$,104:[1,260],105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{105:[1,261]},{22:q,66:Y,67:Q,86:ee,96:262,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:263,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{26:P,52:a,66:c,67:m,91:I,97:264,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,102]),{84:[1,265]},e(z,[2,106],{22:[1,266]}),e(z,[2,107]),e(z,[2,110]),e(z,[2,112],{22:[1,267]}),e(z,[2,113]),e(R,[2,58]),e(R,[2,59]),{22:E,24:k,26:T,38:F,42:M,52:a,58:[1,268],66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,66]),e(R,[2,61]),e(R,[2,62]),e(R,[2,63]),{66:[1,269]},e(R,[2,65]),e(R,[2,67]),{22:E,24:k,26:T,38:F,42:M,52:a,66:c,67:m,72:[1,270],73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,69]),e(R,[2,70]),e(R,[2,72]),e(R,[2,71]),e(R,[2,73]),e(nt,[2,4]),e([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:E,24:k,26:T,38:F,41:[1,271],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,272],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},e(Ye,[2,56]),e(z,[2,115],{106:be}),e(Je,[2,125],{108:274,22:q,66:Y,67:Q,86:ee,102:$,105:V,109:te,110:J,111:Z,112:X,113:G}),e(B,[2,127]),e(B,[2,129]),e(B,[2,130]),e(B,[2,131]),e(B,[2,132]),e(B,[2,133]),e(B,[2,134]),e(B,[2,135]),e(B,[2,136]),e(B,[2,137]),e(B,[2,138]),e(B,[2,139]),e(z,[2,116],{106:be}),e(z,[2,117],{106:be}),{22:[1,275]},e(z,[2,118],{106:be}),{22:[1,276]},e(Qe,[2,124]),e(z,[2,98],{106:be}),e(z,[2,99],{106:be}),e(z,[2,100],{115:100,117:178,26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:K,21:W,23:U},e(D,[2,42]),{22:q,66:Y,67:Q,86:ee,102:$,105:V,107:283,108:244,109:te,110:J,111:Z,112:X,113:G},e(B,[2,128]),{26:P,52:a,66:c,67:m,91:I,97:284,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},{26:P,52:a,66:c,67:m,91:I,97:285,105:h,106:u,109:H,111:d,112:l,115:100,117:98,122:n,123:r,124:t,125:i,126:o,127:s},e(z,[2,108]),e(z,[2,114]),e(R,[2,60]),{22:E,24:k,26:T,38:F,39:286,42:M,52:a,66:c,67:m,73:S,81:A,83:140,84:N,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},e(R,[2,68]),e(Ue,$e,{17:287}),e(Je,[2,126],{108:274,22:q,66:Y,67:Q,86:ee,102:$,105:V,109:te,110:J,111:Z,112:X,113:G}),e(z,[2,121],{115:100,117:178,22:[1,288],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),e(z,[2,122],{115:100,117:178,22:[1,289],26:P,52:a,66:c,67:m,91:I,105:h,106:u,109:H,111:d,112:l,122:n,123:r,124:t,125:i,126:o,127:s}),{22:E,24:k,26:T,38:F,41:[1,290],42:M,52:a,66:c,67:m,73:S,81:A,83:201,85:151,86:g,87:C,88:x,89:O,90:w,91:_,92:p,94:142,95:y,105:h,106:u,109:j,111:d,112:l,113:b,114:v,115:148,122:n,123:r,124:t,125:i,126:o,127:s},{18:18,19:19,20:We,21:Ie,22:He,23:Pe,32:24,33:25,34:26,35:27,36:28,37:29,38:xe,42:[1,291],43:31,44:Le,46:Ne,48:De,50:35,51:45,52:re,54:46,66:de,67:ne,86:ze,87:Te,88:Fe,89:Se,90:Ae,91:fe,95:ve,105:se,106:le,109:pe,111:ie,112:ae,116:47,118:Re,119:Oe,120:Ce,121:Ee,122:ge,123:he,124:ue,125:ce,126:me,127:oe},{22:q,66:Y,67:Q,86:ee,96:292,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},{22:q,66:Y,67:Q,86:ee,96:293,102:$,105:V,107:243,108:244,109:te,110:J,111:Z,112:X,113:G},e(R,[2,64]),e(D,[2,41]),e(z,[2,119],{106:be}),e(z,[2,120],{106:be})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},st=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return t.lex.firstGraph()&&this.begin("dir"),24;case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 81;case 70:return 81;case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:return 125;case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[}])/,/^(?:[^}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};return e}();qe.lexer=st;function Ke(){this.yy={}}return Ke.prototype=qe,qe.Parser=Ke,new Ke}(),cc.parser=cc,F4=cc,SO=(e,t)=>{var n;return((n=t?.flowchart)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*graph/)!==null},AO=(e,t)=>{var n;return((n=t?.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"&&e.match(/^\s*graph/)!==null||e.match(/^\s*flowchart/)!==null},EO="flowchart-",M4=0,uc=t(),_={},un=[],An={},at=[],yi={},hc={},bi=0,pc=!0,fi=[],mi=e=>h.sanitizeText(e,uc),xO=function(e,t,n){w.parseDirective(this,e,t,n)},hi=function(e){const t=Object.keys(_);for(const n of t)if(_[n].id===e)return _[n].domId;return e},wO=function(e,n,s,o,i,a,r={}){let l,c=e;if(c===void 0)return;if(c.trim().length===0)return;_[c]===void 0&&(_[c]={id:c,domId:EO+c+"-"+M4,styles:[],classes:[]}),M4++,n!==void 0?(uc=t(),l=mi(n.trim()),l[0]==='"'&&l[l.length-1]==='"'&&(l=l.substring(1,l.length-1)),_[c].text=l):_[c].text===void 0&&(_[c].text=e),s!==void 0&&(_[c].type=s),o!=null&&o.forEach(function(e){_[c].styles.push(e)}),i!=null&&i.forEach(function(e){_[c].classes.push(e)}),a!==void 0&&(_[c].dir=a),_[c].props===void 0?_[c].props=r:r!==void 0&&Object.assign(_[c].props,r)},yO=function(e,t,n,s){let i=e,a=t;const o={start:i,end:a,type:void 0,text:""};s=n.text,s!==void 0&&(o.text=mi(s.trim()),o.text[0]==='"'&&o.text[o.text.length-1]==='"'&&(o.text=o.text.substring(1,o.text.length-1))),n!==void 0&&(o.type=n.type,o.stroke=n.stroke,o.length=n.length),un.push(o)},jO=function(e,t,n,s){let o,i;for(o=0;o<e.length;o++)for(i=0;i<t.length;i++)yO(e[o],t[i],n,s)},bO=function(e,t){e.forEach(function(e){e==="default"?un.defaultInterpolate=t:un[e].interpolate=t})},gO=function(e,t){e.forEach(function(e){e==="default"?un.defaultStyle=t:(p.isSubstringInArray("fill",t)===-1&&t.push("fill:none"),un[e].style=t)})},fO=function(e,t){An[e]===void 0&&(An[e]={id:e,styles:[],textStyles:[]}),t!=null&&t.forEach(function(t){if(t.match("color")){const n=t.replace("fill","bgFill"),s=n.replace("color","fill");An[e].textStyles.push(s)}An[e].styles.push(t)})},uO=function(e){ot=e,ot.match(/.*</)&&(ot="RL"),ot.match(/.*\^/)&&(ot="BT"),ot.match(/.*>/)&&(ot="LR"),ot.match(/.*v/)&&(ot="TB")},bc=function(e,t){e.split(",").forEach(function(e){let n=e;_[n]!==void 0&&_[n].classes.push(t),yi[n]!==void 0&&yi[n].classes.push(t)})},tO=function(e,t){e.split(",").forEach(function(e){t!==void 0&&(hc[gc==="gen-1"?hi(e):e]=mi(t))})},eO=function(e,n,s){let i=hi(e);if(t().securityLevel!=="loose")return;if(n===void 0)return;let o=[];if(typeof s=="string"){o=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<o.length;t++){let e=o[t].trim();e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'&&(e=e.substr(1,e.length-2)),o[t]=e}}o.length===0&&o.push(e),_[e]!==void 0&&(_[e].haveCallback=!0,fi.push(function(){const e=document.querySelector(`[id="${i}"]`);e!==null&&e.addEventListener("click",function(){p.runFunc(n,...o)},!1)}))},Qw=function(e,t,n){e.split(",").forEach(function(e){_[e]!==void 0&&(_[e].link=p.formatUrl(t,uc),_[e].linkTarget=n)}),bc(e,"clickable")},Xw=function(e){return hc[e]},qw=function(e,t,n){e.split(",").forEach(function(e){eO(e,t,n)}),bc(e,"clickable")},Kw=function(e){fi.forEach(function(t){t(e)})},$w=function(){return ot.trim()},Vw=function(){return _},Pw=function(){return un},Rw=function(){return An},b4=function(e){let t=i(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=i("body").append("div").attr("class","mermaidTooltip").style("opacity",0));const n=i(e).select("svg"),s=n.selectAll("g.node");s.on("mouseover",function(){const n=i(this),s=n.attr("title");if(s===null)return;const e=this.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(n.attr("title")).style("left",window.scrollX+e.left+(e.right-e.left)/2+"px").style("top",window.scrollY+e.top-14+document.body.scrollTop+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0);const e=i(this);e.classed("hover",!1)})},fi.push(b4),Lw=function(e="gen-1"){_={},An={},un=[],fi=[b4],at=[],yi={},bi=0,hc=[],pc=!0,gc=e,Ne()},Nw=e=>{gc=e||"gen-1"},Tw=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Mw=function(t,n,s){let a=t.trim(),r=s;t===s&&s.match(/\s/)&&(a=void 0);function c(e){const t={boolean:{},number:{},string:{}},n=[];let s;const o=e.filter(function(e){const o=typeof e;return e.stmt&&e.stmt==="dir"?(s=e.value,!1):e.trim()!==""&&(o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!n.includes(e)&&n.push(e))});return{nodeList:o,dir:s}}let o=[];const{nodeList:l,dir:d}=c(o.concat.apply(o,n));if(o=l,gc==="gen-1")for(let e=0;e<o.length;e++)o[e]=hi(o[e]);a=a||"subGraph"+bi,r=r||"",r=mi(r),bi=bi+1;const i={id:a,nodes:o,title:r.trim(),classes:[],dir:d};return e.info("Adding",i.id,i.nodes,i.dir),i.nodes=m4(i,at).nodes,at.push(i),yi[a]=i,a},Sw=function(e){for(const[t,n]of at.entries())if(n.id===e)return t;return-1},ho=-1,v4=[],Zl=function(e,t){const o=at[t].nodes;if(ho=ho+1,ho>2e3)return;if(v4[ho]=t,at[t].id===e)return{result:!0,count:0};let n=0,s=1;for(;n<o.length;){const t=Sw(o[n]);if(t>=0){const n=Zl(e,t);if(n.result)return{result:!0,count:s+n.count};s=s+n.count}n=n+1}return{result:!1,count:s}},Aw=function(e){return v4[e]},Ew=function(){ho=-1,at.length>0&&Zl("none",at.length-1)},ww=function(){return at},_w=()=>!!pc&&(pc=!1,!0),jw=e=>{let t=e.trim(),n="arrow_open";switch(t[0]){case"<":n="arrow_point",t=t.slice(1);break;case"x":n="arrow_cross",t=t.slice(1);break;case"o":n="arrow_circle",t=t.slice(1);break}let s="normal";return t.includes("=")&&(s="thick"),t.includes(".")&&(s="dotted"),{type:n,stroke:s}},bw=(e,t)=>{const s=t.length;let n=0;for(let o=0;o<s;++o)t[o]===e&&++n;return n},pw=e=>{const s=e.trim();let n=s.slice(0,-1),t="arrow_open";switch(s.slice(-1)){case"x":t="arrow_cross",s[0]==="x"&&(t="double_"+t,n=n.slice(1));break;case">":t="arrow_point",s[0]==="<"&&(t="double_"+t,n=n.slice(1));break;case"o":t="arrow_circle",s[0]==="o"&&(t="double_"+t,n=n.slice(1));break}let o="normal",i=n.length-1;n[0]==="="&&(o="thick");let a=bw(".",n);return a&&(o="dotted",i=a),{type:t,stroke:o,length:i}},fw=(e,t)=>{const s=pw(e);let n;if(t){if(n=jw(t),n.stroke!==s.stroke)return{type:"INVALID",stroke:"INVALID"};if(n.type==="arrow_open")n.type=s.type;else{if(n.type!==s.type)return{type:"INVALID",stroke:"INVALID"};n.type="double_"+n.type}return n.type==="double_arrow"&&(n.type="double_arrow_point"),n.length=s.length,n}return s},f4=(e,t)=>{let n=!1;return e.forEach(e=>{const s=e.nodes.indexOf(t);s>=0&&(n=!0)}),n},m4=(e,t)=>{const n=[];return e.nodes.forEach((s,o)=>{f4(t,s)||n.push(e.nodes[o])}),{nodes:n}},it={parseDirective:xO,defaultConfig:()=>Rn.flowchart,setAccTitle:pe,getAccTitle:Le,getAccDescription:ze,setAccDescription:xe,addVertex:wO,lookUpDomId:hi,addLink:jO,updateLinkInterpolate:bO,updateLink:gO,addClass:fO,setDirection:uO,setClass:bc,setTooltip:tO,getTooltip:Xw,setClickEvent:qw,setLink:Qw,bindFunctions:Kw,getDirection:$w,getVertices:Vw,getEdges:Pw,getClasses:Rw,clear:Lw,setGen:Nw,defaultStyle:Tw,addSubGraph:Mw,getDepthFirstPos:Aw,indexNodes:Ew,getSubGraphs:ww,destructLink:fw,lex:{firstGraph:_w},exists:f4,makeUniq:m4,setDiagramTitle:vt,getDiagramTitle:Ot};function mw(e,t,n){const i=t.width,a=t.height,s=(i+a)*.9,o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}],r=Lt(e,s,s,o);return n.intersect=function(e){return Ct(n,o,e)},r}function hw(e,t,n){const r=4,s=t.height,o=s/r,i=t.width+2*o,a=[{x:o,y:0},{x:i-o,y:0},{x:i,y:-s/2},{x:i-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}],c=Lt(e,i,s,a);return n.intersect=function(e){return Ct(n,a,e)},c}function uw(e,t,n){const o=t.width,s=t.height,i=[{x:-s/2,y:0},{x:o,y:0},{x:o,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function dw(e,t,n){const o=t.width,s=t.height,i=[{x:-2*s/6,y:0},{x:o-s/6,y:0},{x:o+2*s/6,y:-s},{x:s/6,y:-s}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function cw(e,t,n){const o=t.width,s=t.height,i=[{x:2*s/6,y:0},{x:o+s/6,y:0},{x:o-2*s/6,y:-s},{x:-s/6,y:-s}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function rw(e,t,n){const o=t.width,s=t.height,i=[{x:-2*s/6,y:0},{x:o+2*s/6,y:0},{x:o-s/6,y:-s},{x:s/6,y:-s}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function aw(e,t,n){const o=t.width,s=t.height,i=[{x:s/6,y:0},{x:o-s/6,y:0},{x:o+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function ow(e,t,n){const o=t.width,s=t.height,i=[{x:0,y:0},{x:o+s/2,y:0},{x:o,y:-s/2},{x:o+s/2,y:-s},{x:0,y:-s}],a=Lt(e,o,s,i);return n.intersect=function(e){return Ct(n,i,e)},a}function sw(e,t,n){const s=t.height,o=t.width+s/4,i=e.insert("rect",":first-child").attr("rx",s/2).attr("ry",s/2).attr("x",-o/2).attr("y",-s/2).attr("width",o).attr("height",s);return n.intersect=function(e){return r1(n,e)},i}function nw(e,t,n){const s=t.width,o=t.height,i=[{x:0,y:0},{x:s,y:0},{x:s,y:-o},{x:0,y:-o},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-o},{x:-8,y:-o},{x:-8,y:0}],a=Lt(e,s,o,i);return n.intersect=function(e){return Ct(n,i,e)},a}function tw(e,t,n){const i=t.width,o=i/2,s=o/(2.5+i/50),a=t.height+s,r="M 0,"+s+" a "+o+","+s+" 0,0,0 "+i+" 0 a "+o+","+s+" 0,0,0 "+-i+" 0 l 0,"+a+" a "+o+","+s+" 0,0,0 "+i+" 0 l 0,"+-a,c=e.attr("label-offset-y",s).insert("path",":first-child").attr("d",r).attr("transform","translate("+-i/2+","+-(a/2+s)+")");return n.intersect=function(e){const t=r1(n,e),i=t.x-n.x;if(o!=0&&(Math.abs(i)<n.width/2||Math.abs(i)==n.width/2&&Math.abs(t.y-n.y)>n.height/2-s)){let a=s*s*(1-i*i/(o*o));a!=0&&(a=Math.sqrt(a)),a=s-a,e.y-n.y>0&&(a=-a),t.y+=a}return t},c}function Qz(e){e.shapes().question=mw,e.shapes().hexagon=hw,e.shapes().stadium=sw,e.shapes().subroutine=nw,e.shapes().cylinder=tw,e.shapes().rect_left_inv_arrow=uw,e.shapes().lean_right=dw,e.shapes().lean_left=cw,e.shapes().trapezoid=rw,e.shapes().inv_trapezoid=aw,e.shapes().rect_right_inv_arrow=ow}function Zz(e){e({question:mw}),e({hexagon:hw}),e({stadium:sw}),e({subroutine:nw}),e({cylinder:tw}),e({rect_left_inv_arrow:uw}),e({lean_right:dw}),e({lean_left:cw}),e({trapezoid:rw}),e({inv_trapezoid:aw}),e({rect_right_inv_arrow:ow})}function Lt(e,t,n,s){return e.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+-t/2+","+n/2+")")}X_={addToRender:Qz,addToRenderV2:Zz},s4={},G_=function(e){const t=Object.keys(e);for(const n of t)s4[n]=e[n]},t4=function(n,s,o,a,r,c){const d=a?a.select(`[id="${o}"]`):i(`[id="${o}"]`),l=r||document,u=Object.keys(n);u.forEach(function(o){const a=n[o];let f="default";a.classes.length>0&&(f=a.classes.join(" "));const u=Gt(a.styles);let p=a.text!==void 0?a.text:a.id,r;if(W(t().flowchart.htmlLabels)){const e={label:p.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};r=v1(d,e).node(),r.parentNode.removeChild(r)}else{const e=l.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",u.labelStyle.replace("color:","fill:"));const t=p.split(h.lineBreakRegex);for(const s of t){const n=l.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","1"),n.textContent=s,e.appendChild(n)}r=e}let m=0,i="";switch(a.type){case"round":m=5,i="rect";break;case"square":i="rect";break;case"diamond":i="question";break;case"hexagon":i="hexagon";break;case"odd":i="rect_left_inv_arrow";break;case"lean_right":i="lean_right";break;case"lean_left":i="lean_left";break;case"trapezoid":i="trapezoid";break;case"inv_trapezoid":i="inv_trapezoid";break;case"odd_right":i="rect_left_inv_arrow";break;case"circle":i="circle";break;case"ellipse":i="ellipse";break;case"stadium":i="stadium";break;case"subroutine":i="subroutine";break;case"cylinder":i="cylinder";break;case"group":i="rect";break;default:i="rect"}e.warn("Adding node",a.id,a.domId),s.setNode(c.db.lookUpDomId(a.id),{labelType:"svg",labelStyle:u.labelStyle,shape:i,label:r,rx:m,ry:m,class:f,style:u.style,id:c.db.lookUpDomId(a.id)})})},X1=function(e,n,s){let a=0,o,i;if(e.defaultStyle!==void 0){const t=Gt(e.defaultStyle);o=t.style,i=t.labelStyle}e.forEach(function(r){a++;var u="L-"+r.start+"-"+r.end,m="LS-"+r.start,f="LE-"+r.end;const c={};r.type==="arrow_open"?c.arrowhead="none":c.arrowhead="normal";let l="",d="";if(r.style!==void 0){const e=Gt(r.style);l=e.style,d=e.labelStyle}else switch(r.stroke){case"normal":l="fill:none",o!==void 0&&(l=o),i!==void 0&&(d=i);break;case"dotted":l="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":l=" stroke-width: 3.5px;fill:none";break}c.style=l,c.labelStyle=d,r.interpolate!==void 0?c.curve=Ue(r.interpolate,ye):e.defaultInterpolate!==void 0?c.curve=Ue(e.defaultInterpolate,ye):c.curve=Ue(s4.curve,ye),r.text===void 0?r.style!==void 0&&(c.arrowheadStyle="fill: #333"):(c.arrowheadStyle="fill: #333",c.labelpos="c",W(t().flowchart.htmlLabels)?(c.labelType="html",c.label=`<span id="L-${u}" class="edgeLabel L-${m}' L-${f}" style="${c.labelStyle}">${r.text.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)}</span>`):(c.labelType="text",c.label=r.text.replace(h.lineBreakRegex,`
`),r.style===void 0&&(c.style=c.style||"stroke: #333; stroke-width: 1.5px;fill:none"),c.labelStyle=c.labelStyle.replace("color:","fill:"))),c.id=u,c.class=m+" "+f,c.minlen=r.length||1,n.setEdge(s.db.lookUpDomId(r.start),s.db.lookUpDomId(r.end),c,a)})},q_=function(t,n){e.info("Extracting classes"),n.db.clear();try{return n.parse(t),n.db.getClasses()}catch(t){return e.error(t),{}}},K_=function(n,s,o,a){e.info("Drawing flowchart"),a.db.clear();const{securityLevel:f,flowchart:h}=t();let v;f==="sandbox"&&(v=i("#i"+s));const p=i(f==="sandbox"?v.nodes()[0].contentDocument.body:"body"),l=f==="sandbox"?v.nodes()[0].contentDocument:document;try{a.parser.parse(n)}catch{e.debug("Parsing failed")}let b=a.db.getDirection();b===void 0&&(b="TD");const w=h.nodeSpacing||50,y=h.rankSpacing||50,u=new F({multigraph:!0,compound:!0}).setGraph({rankdir:b,nodesep:w,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let r;const d=a.db.getSubGraphs();for(let e=d.length-1;e>=0;e--)r=d[e],a.db.addVertex(r.id,r.title,"group",void 0,r.classes);const m=a.db.getVertices();e.warn("Get vertices",m);const _=a.db.getEdges();let c=0;for(c=d.length-1;c>=0;c--){r=d[c],Cu("cluster").append("text");for(let t=0;t<r.nodes.length;t++)e.warn("Setting subgraph",r.nodes[t],a.db.lookUpDomId(r.nodes[t]),a.db.lookUpDomId(r.id)),u.setParent(a.db.lookUpDomId(r.nodes[t]),a.db.lookUpDomId(r.id))}t4(m,u,s,p,l,a),X1(_,u,a);const g=new MD;X_.addToRender(g),g.arrows().none=function(t,n,s,o){const i=t.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),a=i.append("path").attr("d","M 0 0 L 0 0 L 0 0 z");_t(a,s[o+"Style"])},g.arrows().normal=function(t,n){const s=t.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto");s.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const O=p.select(`[id="${s}"]`),j=p.select("#"+s+" g");g(j,u),j.selectAll("g.node").attr("title",function(){return a.db.getTooltip(this.id)}),a.db.indexNodes("subGraph"+c);for(c=0;c<d.length;c++)if(r=d[c],r.title!=="undefined"){const e=l.querySelectorAll("#"+s+' [id="'+a.db.lookUpDomId(r.id)+'"] rect'),t=l.querySelectorAll("#"+s+' [id="'+a.db.lookUpDomId(r.id)+'"]'),o=e[0].x.baseVal.value,c=e[0].y.baseVal.value,d=e[0].width.baseVal.value,u=i(t[0]),n=u.select(".label");n.attr("transform",`translate(${o+d/2}, ${c+14})`),n.attr("id",s+"Text");for(let e=0;e<r.classes.length;e++)t[0].classList.add(r.classes[e])}if(!h.htmlLabels){const e=l.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=l.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}vi(u,O,h.diagramPadding,h.useMaxWidth);const x=Object.keys(m);x.forEach(function(e){const t=m[e];if(t.link){const n=p.select("#"+s+' [id="'+a.db.lookUpDomId(e)+'"]');if(n){const e=l.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),f==="sandbox"?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);const s=n.insert(function(){return e},":first-child"),o=n.select(".label-container");o&&s.append(function(){return o.node()});const i=n.select(".label");i&&s.append(function(){return i.node()})}}})},U_={setConf:G_,addVertices:t4,addEdges:X1,getClasses:q_,draw:K_},P1={},B_=function(e){const t=Object.keys(e);for(const n of t)P1[n]=e[n]},k1=function(n,s,o,i,a,r){const c=i.select(`[id="${o}"]`),l=Object.keys(n);l.forEach(function(o){const i=n[o];let p="default";i.classes.length>0&&(p=i.classes.join(" "));const d=Gt(i.styles);let m=i.text!==void 0?i.text:i.id,f;if(W(t().flowchart.htmlLabels)){const e={label:m.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)};f=v1(c,e).node(),f.parentNode.removeChild(f)}else{const e=a.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("style",d.labelStyle.replace("color:","fill:"));const t=m.split(h.lineBreakRegex);for(const s of t){const n=a.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","1"),n.textContent=s,e.appendChild(n)}f=e}let u=0,l="";switch(i.type){case"round":u=5,l="rect";break;case"square":l="rect";break;case"diamond":l="question";break;case"hexagon":l="hexagon";break;case"odd":l="rect_left_inv_arrow";break;case"lean_right":l="lean_right";break;case"lean_left":l="lean_left";break;case"trapezoid":l="trapezoid";break;case"inv_trapezoid":l="inv_trapezoid";break;case"odd_right":l="rect_left_inv_arrow";break;case"circle":l="circle";break;case"ellipse":l="ellipse";break;case"stadium":l="stadium";break;case"subroutine":l="subroutine";break;case"cylinder":l="cylinder";break;case"group":l="rect";break;case"doublecircle":l="doublecircle";break;default:l="rect"}s.setNode(i.id,{labelStyle:d.labelStyle,shape:l,labelText:m,rx:u,ry:u,class:p,style:d.style,id:i.id,link:i.link,linkTarget:i.linkTarget,tooltip:r.db.getTooltip(i.id)||"",domId:r.db.lookUpDomId(i.id),haveCallback:i.haveCallback,width:i.type==="group"?500:void 0,dir:i.dir,type:i.type,props:i.props,padding:t().flowchart.padding}),e.info("setNode",{labelStyle:d.labelStyle,shape:l,labelText:m,rx:u,ry:u,class:p,style:d.style,id:i.id,domId:r.db.lookUpDomId(i.id),width:i.type==="group"?500:void 0,type:i.type,dir:i.dir,props:i.props,padding:t().flowchart.padding})})},f1=function(t,n){e.info("abc78 edges = ",t);let r=0,o={},i,a;if(t.defaultStyle!==void 0){const e=Gt(t.defaultStyle);i=e.style,a=e.labelStyle}t.forEach(function(s){r++;var f,p,l="L-"+s.start+"-"+s.end;o[l]===void 0?(o[l]=0,e.info("abc78 new entry",l,o[l])):(o[l]++,e.info("abc78 new entry",l,o[l]));let m=l+"-"+o[l];e.info("abc78 new link id to be used is",l,m,o[l]),f="LS-"+s.start,p="LE-"+s.end;const c={style:"",labelStyle:""};switch(c.minlen=s.length||1,s.type==="arrow_open"?c.arrowhead="none":c.arrowhead="normal",c.arrowTypeStart="arrow_open",c.arrowTypeEnd="arrow_open",s.type){case"double_arrow_cross":c.arrowTypeStart="arrow_cross";case"arrow_cross":c.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":c.arrowTypeStart="arrow_point";case"arrow_point":c.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":c.arrowTypeStart="arrow_circle";case"arrow_circle":c.arrowTypeEnd="arrow_circle";break}let d="",u="";switch(s.stroke){case"normal":d="fill:none;",i!==void 0&&(d=i),a!==void 0&&(u=a),c.thickness="normal",c.pattern="solid";break;case"dotted":c.thickness="normal",c.pattern="dotted",c.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":c.thickness="thick",c.pattern="solid",c.style="stroke-width: 3.5px;fill:none;";break}if(s.style!==void 0){const e=Gt(s.style);d=e.style,u=e.labelStyle}c.style=c.style+=d,c.labelStyle=c.labelStyle+=u,s.interpolate!==void 0?c.curve=Ue(s.interpolate,ye):t.defaultInterpolate!==void 0?c.curve=Ue(t.defaultInterpolate,ye):c.curve=Ue(P1.curve,ye),s.text===void 0?s.style!==void 0&&(c.arrowheadStyle="fill: #333"):(c.arrowheadStyle="fill: #333",c.labelpos="c"),c.labelType="text",c.label=s.text.replace(h.lineBreakRegex,`
`),s.style===void 0&&(c.style=c.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),c.labelStyle=c.labelStyle.replace("color:","fill:"),c.id=m,c.classes="flowchart-link "+f+" "+p,n.setEdge(s.start,s.end,c,r)})},H_=function(t,n){e.info("Extracting classes"),n.db.clear();try{return n.parse(t),n.db.getClasses()}catch{return}},A_=function(n,s,o,a){e.info("Drawing flowchart"),a.db.clear(),it.setGen("gen-2"),a.parser.parse(n);let g=a.db.getDirection();g===void 0&&(g="TD");const{securityLevel:h,flowchart:c}=t(),w=c.nodeSpacing||50,_=c.rankSpacing||50;let v;h==="sandbox"&&(v=i("#i"+s));const b=i(h==="sandbox"?v.nodes()[0].contentDocument.body:"body"),m=h==="sandbox"?v.nodes()[0].contentDocument:document,d=new F({multigraph:!0,compound:!0}).setGraph({rankdir:g,nodesep:w,ranksep:_,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let r;const u=a.db.getSubGraphs();e.info("Subgraphs - ",u);for(let t=u.length-1;t>=0;t--)r=u[t],e.info("Subgraph - ",r),a.db.addVertex(r.id,r.title,"group",void 0,r.classes,r.dir);const f=a.db.getVertices(),j=a.db.getEdges();e.info(j);let l=0;for(l=u.length-1;l>=0;l--){r=u[l],Cu("cluster").append("text");for(let t=0;t<r.nodes.length;t++)e.info("Setting up subgraphs",r.nodes[t],r.id),d.setParent(r.nodes[t],r.id)}k1(f,d,s,b,m,a),f1(j,d);const y=b.select(`[id="${s}"]`),O=b.select("#"+s+" g");if(Xr(O,d,["point","circle","cross"],"flowchart",s),p.insertTitle(y,"flowchartTitleText",c.titleTopMargin,a.db.getDiagramTitle()),vi(d,y,c.diagramPadding,c.useMaxWidth),a.db.indexNodes("subGraph"+l),!c.htmlLabels){const e=m.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const n of e){const s=n.getBBox(),t=m.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",s.width),t.setAttribute("height",s.height),n.insertBefore(t,n.firstChild)}}const x=Object.keys(f);x.forEach(function(e){const t=f[e];if(t.link){const n=i("#"+s+' [id="'+e+'"]');if(n){const e=m.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),h==="sandbox"?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);const s=n.insert(function(){return e},":first-child"),o=n.select(".label-container");o&&s.append(function(){return o.node()});const i=n.select(".label");i&&s.append(function(){return i.node()})}}})},Rc={setConf:B_,addVertices:k1,addEdges:f1,getClasses:H_,draw:A_},Pc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},w=[1,3],n=[1,5],t=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],_=[1,15],h=[1,16],f=[1,17],r=[1,18],c=[1,19],l=[1,20],d=[1,21],u=[1,22],i=[1,23],m=[1,24],a=[1,25],p=[1,26],g=[1,27],v=[1,29],b=[1,31],j=[1,34],y=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],o={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 2:return a[c-1];case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 9:o.setDateFormat(a[c].substr(11)),this.$=a[c].substr(11);break;case 10:o.enableInclusiveEndDates(),this.$=a[c].substr(18);break;case 11:o.TopAxis(),this.$=a[c].substr(8);break;case 12:o.setAxisFormat(a[c].substr(11)),this.$=a[c].substr(11);break;case 13:o.setTickInterval(a[c].substr(13)),this.$=a[c].substr(13);break;case 14:o.setExcludes(a[c].substr(9)),this.$=a[c].substr(9);break;case 15:o.setIncludes(a[c].substr(9)),this.$=a[c].substr(9);break;case 16:o.setTodayMarker(a[c].substr(12)),this.$=a[c].substr(12);break;case 17:o.setDiagramTitle(a[c].substr(6)),this.$=a[c].substr(6);break;case 18:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 19:case 20:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 21:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 23:o.addTask(a[c-1],a[c]),this.$="task";break;case 27:this.$=a[c-1],o.setClickEvent(a[c-1],a[c],null);break;case 28:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],a[c]);break;case 29:this.$=a[c-2],o.setClickEvent(a[c-2],a[c-1],null),o.setLink(a[c-2],a[c]);break;case 30:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-2],a[c-1]),o.setLink(a[c-3],a[c]);break;case 31:this.$=a[c-2],o.setClickEvent(a[c-2],a[c],null),o.setLink(a[c-2],a[c-1]);break;case 32:this.$=a[c-3],o.setClickEvent(a[c-3],a[c-1],a[c]),o.setLink(a[c-3],a[c-2]);break;case 33:this.$=a[c-1],o.setLink(a[c-1],a[c]);break;case 34:case 40:this.$=a[c-1]+" "+a[c];break;case 35:case 36:case 38:this.$=a[c-2]+" "+a[c-1]+" "+a[c];break;case 37:case 39:this.$=a[c-3]+" "+a[c-2]+" "+a[c-1]+" "+a[c];break;case 41:o.parseDirective("%%{","open_directive");break;case 42:o.parseDirective(a[c],"type_directive");break;case 43:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 44:o.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:w,30:4,40:n},{1:[3]},{3:6,4:2,5:w,30:4,40:n},e(t,[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:_,13:h,14:f,15:r,16:c,17:l,18:d,19:u,20:i,21:m,23:a,25:p,26:g,27:28,28:v,30:4,35:b,40:n},{32:32,33:[1,33],43:j},e([33,43],[2,42]),e(t,[2,8],{1:[2,2]}),e(t,[2,4]),{4:30,10:35,12:_,13:h,14:f,15:r,16:c,17:l,18:d,19:u,20:i,21:m,23:a,25:p,26:g,27:28,28:v,30:4,35:b,40:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,17]),{22:[1,36]},{24:[1,37]},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),{29:[1,38]},e(t,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},e(t,[2,5]),e(t,[2,18]),e(t,[2,19]),e(t,[2,23]),e(t,[2,27],{37:[1,44],38:[1,45]}),e(t,[2,33],{36:[1,46]}),e(y,[2,25]),{32:47,43:j},{43:[2,43]},e(t,[2,28],{38:[1,48]}),e(t,[2,29]),e(t,[2,31],{37:[1,49]}),{11:[1,50]},e(t,[2,30]),e(t,[2,32]),e(y,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},O=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return e}();o.lexer=O;function s(){this.yy={}}return s.prototype=o,o.Parser=s,new s}(),Pc.parser=Pc,k_=Pc,E_=e=>e.match(/^\s*gantt/)!==null,qe="",Bc="",Vc=void 0,$c="",Ao=[],Mo=[],Wc={},Zc=[],$o=[],xn="",$u=["active","done","crit","milestone"],al=[],Oo=!1,rl=!1,ll=0,My=function(e,t,n){w.parseDirective(this,e,t,n)},Sy=function(){Zc=[],$o=[],xn="",al=[],xi=0,fd=void 0,Rl=void 0,R=[],qe="",Bc="",Vc=void 0,$c="",Ao=[],Mo=[],Oo=!1,rl=!1,ll=0,Wc={},Ne()},Ay=function(e){Bc=e},ky=function(){return Bc},wy=function(e){Vc=e},_y=function(){return Vc},jy=function(e){$c=e},by=function(){return $c},vy=function(e){qe=e},gy=function(){Oo=!0},fy=function(){return Oo},my=function(){rl=!0},hy=function(){return rl},dy=function(){return qe},ly=function(e){Ao=e.toLowerCase().split(/[\s,]+/)},cy=function(){return Ao},ry=function(e){Mo=e.toLowerCase().split(/[\s,]+/)},iy=function(){return Mo},sy=function(){return Wc},ey=function(e){xn=e,Zc.push(e)},Jj=function(){return Zc},Zj=function(){let e=rd();const n=10;let t=0;for(;!e&&t<n;)e=rd(),t++;return $o=R,$o},xu=function(e,t,n,s){return!s.includes(e.format(t.trim()))&&(!!(e.isoWeekday()>=6&&n.includes("weekends"))||!!n.includes(e.format("dddd").toLowerCase())||n.includes(e.format(t.trim())))},Md=function(e,t,n,s){if(!n.length||e.manualEndTime)return;let o=(0,Te.default)(e.startTime,t,!0);o.add(1,"d");let i=(0,Te.default)(e.endTime,t,!0),a=Qj(o,i,t,n,s);e.endTime=i.toDate(),e.renderEndTime=a},Qj=function(e,t,n,s,o){let i=!1,a=null;for(;e<=t;)i||(a=t.toDate()),i=xu(e,n,s,o),i&&t.add(1,"d"),e.add(1,"d");return a},Fl=function(t,n,s){s=s.trim();const r=/^after\s+([\d\w- ]+)/,i=r.exec(s.trim());if(i!==null){let e=null;if(i[1].split(" ").forEach(function(t){let n=In(t);n!==void 0&&(e?n.endTime>e.endTime&&(e=n):e=n)}),e)return e.endTime;const t=new Date;return t.setHours(0,0,0,0),t}let a=(0,Te.default)(s,n.trim(),!0);if(a.isValid())return a.toDate();e.debug("Invalid date:"+s),e.debug("With date format:"+n.trim());const o=new Date(s);if(o===void 0||isNaN(o.getTime()))throw new Error("Invalid date:"+s);return o},vd=function(e){const t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?Te.default.duration(Number.parseFloat(t[1]),t[2]):Te.default.duration.invalid()},pd=function(e,t,n,s=!1){n=n.trim();let o=(0,Te.default)(n,t.trim(),!0);if(o.isValid())return s&&o.add(1,"d"),o.toDate();const i=(0,Te.default)(e),a=vd(n);return a.isValid()&&i.add(a),i.toDate()},xi=0,Tn=function(e){return e===void 0?(xi=xi+1,"task"+xi):e},Rj=function(e,t){let i;t.substr(0,1)===":"?i=t.substr(1,t.length):i=t;const s=i.split(","),n={};mj(s,n,$u);for(let e=0;e<s.length;e++)s[e]=s[e].trim();let o="";switch(s.length){case 1:n.id=Tn(),n.startTime=e.endTime,o=s[0];break;case 2:n.id=Tn(),n.startTime=Fl(void 0,qe,s[0]),o=s[1];break;case 3:n.id=Tn(s[0]),n.startTime=Fl(void 0,qe,s[1]),o=s[2];break}return o&&(n.endTime=pd(n.startTime,qe,o,Oo),n.manualEndTime=(0,Te.default)(o,"YYYY-MM-DD",!0).isValid(),Md(n,qe,Mo,Ao)),n},Lj=function(e,t){let o;t.substr(0,1)===":"?o=t.substr(1,t.length):o=t;const n=o.split(","),s={};mj(n,s,$u);for(let e=0;e<n.length;e++)n[e]=n[e].trim();switch(n.length){case 1:s.id=Tn(),s.startTime={type:"prevTaskEnd",id:e},s.endTime={data:n[0]};break;case 2:s.id=Tn(),s.startTime={type:"getStartDate",startData:n[0]},s.endTime={data:n[1]};break;case 3:s.id=Tn(n[0]),s.startTime={type:"getStartDate",startData:n[1]},s.endTime={data:n[2]};break}return s},R=[],dd={},Tj=function(e,t){const n={section:xn,type:xn,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},s=Lj(Rl,t);n.raw.startTime=s.startTime,n.raw.endTime=s.endTime,n.id=s.id,n.prevTaskId=Rl,n.active=s.active,n.done=s.done,n.crit=s.crit,n.milestone=s.milestone,n.order=ll,ll++;const o=R.push(n);Rl=n.id,dd[n.id]=o-1},In=function(e){const t=dd[e];return R[t]},Aj=function(e,t){const n={section:xn,type:xn,description:e,task:e,classes:[]},s=Rj(fd,t);n.startTime=s.startTime,n.endTime=s.endTime,n.id=s.id,n.active=s.active,n.done=s.done,n.crit=s.crit,n.milestone=s.milestone,fd=n,$o.push(n)},rd=function(){const t=function(e){const n=R[e];let t="";switch(R[e].raw.startTime.type){case"prevTaskEnd":{const e=In(n.prevTaskId);n.startTime=e.endTime;break}case"getStartDate":t=Fl(void 0,qe,R[e].raw.startTime.startData),t&&(R[e].startTime=t);break}return R[e].startTime&&(R[e].endTime=pd(R[e].startTime,qe,R[e].raw.endTime.data,Oo),R[e].endTime&&(R[e].processed=!0,R[e].manualEndTime=(0,Te.default)(R[e].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),Md(R[e],qe,Mo,Ao))),R[e].processed};let e=!0;for(const[n,s]of R.entries())t(n),e=e&&s.processed;return e},Cj=function(e,n){let s=n;t().securityLevel!=="loose"&&(s=(0,Bt.sanitizeUrl)(n)),e.split(",").forEach(function(e){let t=In(e);t!==void 0&&(id(e,()=>{window.open(s,"_self")}),Wc[e]=s)}),td(e,"clickable")},td=function(e,t){e.split(",").forEach(function(e){let n=In(e);n!==void 0&&n.classes.push(t)})},Oj=function(e,n,s){if(t().securityLevel!=="loose")return;if(n===void 0)return;let o=[];if(typeof s=="string"){o=s.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<o.length;t++){let e=o[t].trim();e.charAt(0)==='"'&&e.charAt(e.length-1)==='"'&&(e=e.substr(1,e.length-2)),o[t]=e}}o.length===0&&o.push(e);let i=In(e);i!==void 0&&id(e,()=>{p.runFunc(n,...o)})},id=function(e,t){al.push(function(){const n=document.querySelector(`[id="${e}"]`);n!==null&&n.addEventListener("click",function(){t()})},function(){const n=document.querySelector(`[id="${e}-text"]`);n!==null&&n.addEventListener("click",function(){t()})})},_j=function(e,t,n){e.split(",").forEach(function(e){Oj(e,t,n)}),td(e,"clickable")},yj=function(e){al.forEach(function(t){t(e)})},Kl={parseDirective:My,getConfig:()=>t().gantt,clear:Sy,setDateFormat:vy,getDateFormat:dy,enableInclusiveEndDates:gy,endDatesAreInclusive:fy,enableTopAxis:my,topAxisEnabled:hy,setAxisFormat:Ay,getAxisFormat:ky,setTickInterval:wy,getTickInterval:_y,setTodayMarker:jy,getTodayMarker:by,setAccTitle:pe,getAccTitle:Le,setDiagramTitle:vt,getDiagramTitle:Ot,setAccDescription:xe,getAccDescription:ze,addSection:ey,getSections:Jj,getTasks:Zj,addTask:Tj,findTaskById:In,addTaskOrg:Aj,setIncludes:ly,getIncludes:cy,setExcludes:ry,getExcludes:iy,setClickEvent:_j,setLink:Cj,getLinks:sy,bindFunctions:yj,parseDuration:vd,isInvalidDate:xu};function mj(e,t,n){let s=!0;for(;s;)s=!1,n.forEach(function(n){const o="^\\s*"+n+"\\s*$",i=new RegExp(o);e[0].match(i)&&(t[n]=!0,e.shift(1),s=!0)})}hj=function(){e.debug("Something is calling, setConf, remove the call")},dj=function(e,n,s,o){const a=t().gantt,u=t().securityLevel;let m;u==="sandbox"&&(m=i("#i"+n));const v=i(u==="sandbox"?m.nodes()[0].contentDocument.body:"body"),f=u==="sandbox"?m.nodes()[0].contentDocument:document,g=f.getElementById(n);Wt=g.parentElement.offsetWidth,Wt===void 0&&(Wt=1200),a.useWidth!==void 0&&(Wt=a.useWidth);const d=o.db.getTasks(),p=d.length*(a.barHeight+a.barGap)+2*a.topPadding;g.setAttribute("viewBox","0 0 "+Wt+" "+p);const l=v.select(`[id="${n}"]`),r=sT().domain([nV(d,function(e){return e.startTime}),iV(d,function(e){return e.endTime})]).rangeRound([0,Wt-a.leftPadding-a.rightPadding]);let c=[];for(const e of d)c.push(e.type);const b=c;c=E(c);function j(e,t){const s=e.startTime,o=t.startTime;let n=0;return s>o?n=1:s<o&&(n=-1),n}d.sort(j),y(d,Wt,p),Me(l,p,Wt,a.useMaxWidth),l.append("text").text(o.db.getDiagramTitle()).attr("x",Wt/2).attr("y",a.titleTopMargin).attr("class","titleText");function y(e,t,n){const l=a.barHeight,r=l+a.barGap,s=a.topPadding,i=a.leftPadding,d=ZA().domain([0,c.length]).range(["#00B9FA","#F95002"]).interpolate(Xj);w(r,s,i,t,n,e,o.db.getExcludes(),o.db.getIncludes()),O(i,s,t,n),_(e,r,s,i,l,d,t),x(r,s),C(i,s,t,n)}function _(e,s,d,u,h,m,f){l.append("g").selectAll("rect").data(e).enter().append("rect").attr("x",0).attr("y",function(e,t){return t=e.order,t*s+d-2}).attr("width",function(){return f-a.rightPadding/2}).attr("height",s).attr("class",function(e){for(const[t,n]of c.entries())if(e.type===n)return"section section"+t%a.numberSectionStyles;return"section section0"});const p=l.append("g").selectAll("rect").data(e).enter(),g=o.db.getLinks();p.append("rect").attr("id",function(e){return e.id}).attr("rx",3).attr("ry",3).attr("x",function(e){return e.milestone?r(e.startTime)+u+.5*(r(e.endTime)-r(e.startTime))-.5*h:r(e.startTime)+u}).attr("y",function(e,t){return t=e.order,t*s+d}).attr("width",function(e){return e.milestone?h:r(e.renderEndTime||e.endTime)-r(e.startTime)}).attr("height",h).attr("transform-origin",function(e,t){return t=e.order,(r(e.startTime)+u+.5*(r(e.endTime)-r(e.startTime))).toString()+"px "+(t*s+d+.5*h).toString()+"px"}).attr("class",function(e){const o="task";let n="";e.classes.length>0&&(n=e.classes.join(" "));let s=0;for(const[t,n]of c.entries())e.type===n&&(s=t%a.numberSectionStyles);let t="";return e.active?e.crit?t+=" activeCrit":t=" active":e.done?e.crit?t=" doneCrit":t=" done":e.crit&&(t+=" crit"),t.length===0&&(t=" task"),e.milestone&&(t=" milestone "+t),t+=s,t+=" "+n,o+t}),p.append("text").attr("id",function(e){return e.id+"-text"}).text(function(e){return e.task}).attr("font-size",a.fontSize).attr("x",function(e){let t=r(e.startTime),n=r(e.renderEndTime||e.endTime);e.milestone&&(t+=.5*(r(e.endTime)-r(e.startTime))-.5*h),e.milestone&&(n=t+h);const s=this.getBBox().width;return s>n-t?n+s+1.5*a.leftPadding>f?t+u-5:n+u+5:(n-t)/2+t+u}).attr("y",function(e,t){return t=e.order,t*s+a.barHeight/2+(a.fontSize/2-2)+d}).attr("text-height",h).attr("class",function(e){const l=r(e.startTime);let i=r(e.endTime);e.milestone&&(i=l+h);const s=this.getBBox().width;let o="";e.classes.length>0&&(o=e.classes.join(" "));let n=0;for(const[t,s]of c.entries())e.type===s&&(n=t%a.numberSectionStyles);let t="";return e.active&&(e.crit?t="activeCritText"+n:t="activeText"+n),e.done?e.crit?t=t+" doneCritText"+n:t=t+" doneText"+n:e.crit&&(t=t+" critText"+n),e.milestone&&(t+=" milestoneText"),s>i-l?i+s+1.5*a.leftPadding>f?o+" taskTextOutsideLeft taskTextOutside"+n+" "+t:o+" taskTextOutsideRight taskTextOutside"+n+" "+t+" width-"+s:o+" taskText taskText"+n+" "+t+" width-"+s});const v=t().securityLevel;if(v==="sandbox"){let t;t=i("#i"+n);const e=t.nodes()[0].contentDocument;p.filter(function(e){return g[e.id]!==void 0}).each(function(t){var n,s=e.querySelector("#"+t.id),o=e.querySelector("#"+t.id+"-text");const i=s.parentNode;n=e.createElement("a"),n.setAttribute("xlink:href",g[t.id]),n.setAttribute("target","_top"),i.appendChild(n),n.appendChild(s),n.appendChild(o)})}}function w(e,t,n,s,i,c,d,u){const f=c.reduce((e,{startTime:t})=>e?Math.min(e,t):t,0),p=c.reduce((e,{endTime:t})=>e?Math.max(e,t):t,0),v=o.db.getDateFormat();if(!f||!p)return;const g=[];let h=null,m=(0,Te.default)(f);for(;m.valueOf()<=p;)o.db.isInvalidDate(m,v,d,u)?h?h.end=m.clone():h={start:m.clone(),end:m.clone()}:h&&(g.push(h),h=null),m.add(1,"d");const b=l.append("g").selectAll("rect").data(g).enter();b.append("rect").attr("id",function(e){return"exclude-"+e.start.format("YYYY-MM-DD")}).attr("x",function(e){return r(e.start)+n}).attr("y",a.gridLineStartPadding).attr("width",function(e){const t=e.end.clone().add(1,"day");return r(t)-r(e.start)}).attr("height",i-t-a.gridLineStartPadding).attr("transform-origin",function(t,s){return(r(t.start)+n+.5*(r(t.end)-r(t.start))).toString()+"px "+(s*e+.5*i).toString()+"px"}).attr("class","exclude-range")}function O(e,t,n,s){let i=WB(r).tickSize(-s+t+a.gridLineStartPadding).tickFormat(Xl(o.db.getAxisFormat()||a.axisFormat||"%Y-%m-%d"));const d=/^([1-9]\d*)(minute|hour|day|week|month)$/,c=d.exec(o.db.getTickInterval()||a.tickInterval);if(c!==null){const e=c[1],t=c[2];switch(t){case"minute":i.ticks(us.every(e));break;case"hour":i.ticks(Ns.every(e));break;case"day":i.ticks(qt.every(e));break;case"week":i.ticks(ds.every(e));break;case"month":i.ticks(uo.every(e));break}}if(l.append("g").attr("class","grid").attr("transform","translate("+e+", "+(s-50)+")").call(i).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),o.db.topAxisEnabled()||a.topAxis){let n=UB(r).tickSize(-s+t+a.gridLineStartPadding).tickFormat(Xl(o.db.getAxisFormat()||a.axisFormat||"%Y-%m-%d"));if(c!==null){const e=c[1],t=c[2];switch(t){case"minute":n.ticks(us.every(e));break;case"hour":n.ticks(Ns.every(e));break;case"day":n.ticks(qt.every(e));break;case"week":n.ticks(ds.every(e));break;case"month":n.ticks(uo.every(e));break}}l.append("g").attr("class","grid").attr("transform","translate("+e+", "+t+")").call(n).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function x(e,t){const n=[];let s=0;for(const[t,e]of c.entries())n[t]=[e,A(e,b)];l.append("g").selectAll("text").data(n).enter().append(function(e){const n=e[0].split(h.lineBreakRegex),s=-(n.length-1)/2,t=f.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("dy",s+"em");for(const[s,o]of n.entries()){const e=f.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","central"),e.setAttribute("x","10"),s>0&&e.setAttribute("dy","1em"),e.textContent=o,t.appendChild(e)}return t}).attr("x",10).attr("y",function(o,i){if(i>0)for(let a=0;a<i;a++)return s+=n[i-1][1],o[1]*e/2+s*e+t;else return o[1]*e/2+t}).attr("font-size",a.sectionFontSize).attr("font-size",a.sectionFontSize).attr("class",function(e){for(const[t,n]of c.entries())if(e[0]===n)return"sectionTitle sectionTitle"+t%a.numberSectionStyles;return"sectionTitle"})}function C(e,t,n,s){const i=o.db.getTodayMarker();if(i==="off")return;const u=l.append("g").attr("class","today"),c=new Date,d=u.append("line");d.attr("x1",r(c)+e).attr("x2",r(c)+e).attr("y1",a.titleTopMargin).attr("y2",s-a.titleTopMargin).attr("class","today"),i!==""&&d.attr("style",i.replace(/,/g,";"))}function E(e){const t={},n=[];for(let s=0,o=e.length;s<o;++s)Object.prototype.hasOwnProperty.call(t,e[s])||(t[e[s]]=!0,n.push(e[s]));return n}function k(e){let t=e.length;const n={};for(;t;)n[e[--t]]=(n[e[t]]||0)+1;return n}function A(e,t){return k(t)[e]||0}},lj={setConf:hj,draw:dj},$l=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},t=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,n,s,o,i,a){switch(a.length-1,i){case 1:return o;case 4:break;case 6:o.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},e(t,[2,3]),e(t,[2,4]),e(t,[2,5]),e(t,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},o=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return e}();n.lexer=o;function s(){this.yy={}}return s.prototype=n,n.Parser=s,new s}(),$l.parser=$l,aj=$l,ld="",ud=!1,ij=t=>{e.debug("Setting message to: "+t),ld=t},oj=()=>ld,sj=e=>{ud=e},nj=()=>ud,tj={setMessage:ij,getMessage:oj,setInfo:sj,getInfo:nj,clear:Ne},ej=(n,s,o)=>{try{e.debug(`Rendering info diagram
`+n);const r=t().securityLevel;let c;r==="sandbox"&&(c=i("#i"+s));const l=i(r==="sandbox"?c.nodes()[0].contentDocument.body:"body"),a=l.select("#"+s),d=a.append("g");d.append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+o),a.attr("height",100),a.attr("width",400)}catch(t){e.error("Error while rendering info diagram"),e.error(t.message)}},Xb={draw:ej},Gb=e=>e.match(/^\s*info/)!==null,Bl=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},c=[1,4],s=[1,5],o=[1,6],i=[1,7],n=[1,9],a=[1,11,13,15,17,19,20,26,27,28,29],y=[2,5],d=[1,6,11,13,15,17,19,20,26,27,28,29],t=[26,27,28],h=[2,8],j=[1,18],b=[1,19],m=[1,20],f=[1,21],p=[1,22],g=[1,23],v=[1,28],r=[6,26,27,28,29],u={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:o.setShowData(!0);break;case 7:this.$=a[c-1];break;case 9:o.addSection(a[c-1],o.cleanupValue(a[c]));break;case 10:this.$=a[c].trim(),o.setDiagramTitle(this.$);break;case 11:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 12:case 13:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 14:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 21:o.parseDirective("%%{","open_directive");break;case 22:o.parseDirective(a[c],"type_directive");break;case 23:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 24:o.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},{1:[3]},{3:10,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},{3:11,4:2,5:3,6:c,21:8,26:s,27:o,28:i,29:n},e(a,y,{7:12,8:[1,13]}),e(d,[2,18]),e(d,[2,19]),e(d,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},e(t,h,{21:8,9:16,10:17,5:24,1:[2,3],11:j,13:b,15:m,17:f,19:p,20:g,29:n}),e(a,y,{7:25}),{23:26,24:[1,27],32:v},e([24,32],[2,22]),e(a,[2,6]),{4:29,26:s,27:o,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,h,{21:8,9:16,10:17,5:24,1:[2,4],11:j,13:b,15:m,17:f,19:p,20:g,29:n}),e(r,[2,16]),{25:34,31:[1,35]},e(r,[2,24]),e(a,[2,7]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),{23:36,32:v},{32:[2,23]},e(r,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},_=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return e}();u.lexer=_;function l(){this.yy={}}return l.prototype=u,u.Parser=l,new l}(),Bl.parser=Bl,Yb=Bl,Kb=e=>{const t=e.match(/^\s*pie/)!==null||e.match(/^\s*bar/)!==null;return t},Ri={},Il=!1,$b=function(e,t,n){w.parseDirective(this,e,t,n)},Vb=function(n,s){n=h.sanitizeText(n,t()),Ri[n]===void 0&&(Ri[n]=s,e.debug("Added new section :",n))},Bb=()=>Ri,Ib=function(e){Il=e},Hb=function(){return Il},Pb=function(e){return e.substring(0,1)===":"?(e=e.substring(1).trim(),Number(e.trim())):Number(e.trim())},Rb=function(){Ri={},Il=!1,Ne()},Lb={parseDirective:$b,getConfig:()=>t().pie,addSection:Vb,getSections:Bb,cleanupValue:Pb,clear:Rb,setAccTitle:pe,getAccTitle:Le,setDiagramTitle:vt,getDiagramTitle:Ot,setShowData:Ib,getShowData:Hb,getAccDescription:ze,setAccDescription:xe},gt=t(),Es=450,Db=(n,s,o,a)=>{try{gt=t(),e.debug(`Rendering info diagram
`+n);const _=t().securityLevel;let w;_==="sandbox"&&(w=i("#i"+s));const C=i(_==="sandbox"?w.nodes()[0].contentDocument.body:"body"),E=_==="sandbox"?w.nodes()[0].contentDocument:document;a.db.clear(),a.parser.parse(n),e.debug("Parsed info diagram");const O=E.getElementById(s);Tt=O.parentElement.offsetWidth,Tt===void 0&&(Tt=1200),gt.useWidth!==void 0&&(Tt=gt.useWidth),gt.pie.useWidth!==void 0&&(Tt=gt.pie.useWidth);const x=C.select("#"+s);Me(x,Es,Tt,gt.pie.useMaxWidth),O.setAttribute("viewBox","0 0 "+Tt+" "+Es);var c,d,m,p,v,b,j,y=40,r=18,u=4,g=Math.min(Tt,Es)/2-y,l=x.append("g").attr("transform","translate("+Tt/2+","+Es/2+")"),h=a.db.getSections(),f=0;Object.keys(h).forEach(function(e){f+=h[e]});const o=gt.themeVariables;j=[o.pie1,o.pie2,o.pie3,o.pie4,o.pie5,o.pie6,o.pie7,o.pie8,o.pie9,o.pie10,o.pie11,o.pie12],c=pS().range(j),b=Object.entries(h).map(function(e,t){return{order:t,name:e[0],value:e[1]}}),v=ez().value(function(e){return e.value}).sort(function(e,t){return e.order-t.order}),d=v(b),p=kd().innerRadius(0).outerRadius(g),l.selectAll("mySlices").data(d).enter().append("path").attr("d",p).attr("fill",function(e){return c(e.data.name)}).attr("class","pieCircle"),l.selectAll("mySlices").data(d).enter().append("text").text(function(e){return(e.data.value/f*100).toFixed(0)+"%"}).attr("transform",function(e){return"translate("+p.centroid(e)+")"}).style("text-anchor","middle").attr("class","slice"),l.append("text").text(a.db.getDiagramTitle()).attr("x",0).attr("y",-(Es-50)/2).attr("class","pieTitleText"),m=l.selectAll(".legend").data(c.domain()).enter().append("g").attr("class","legend").attr("transform",function(e,t){const n=r+u,s=n*c.domain().length/2,o=12*r,i=t*n-s;return"translate("+o+","+i+")"}),m.append("rect").attr("width",r).attr("height",r).style("fill",c).style("stroke",c),m.data(d).append("text").attr("x",r+u).attr("y",r-u).text(function(e){return a.db.getShowData()||gt.showData||gt.pie.showData?e.data.name+" ["+e.data.value+"]":e.data.name})}catch(t){e.error("Error while rendering info diagram"),e.error(t)}},zb={draw:Db},Ll=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},M=[1,3],s=[1,5],o=[1,6],i=[1,7],a=[1,8],w=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],x=[1,22],v=[2,13],g=[1,26],d=[1,27],u=[1,28],h=[1,29],m=[1,30],f=[1,31],p=[1,24],n=[1,32],r=[1,33],z=[1,36],j=[71,72],B=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],I=[1,56],H=[1,57],P=[1,58],R=[1,59],L=[1,60],N=[1,61],D=[1,62],c=[62,63],O=[1,74],l=[1,70],_=[1,71],y=[1,72],C=[1,73],b=[1,75],k=[1,79],E=[1,80],A=[1,77],S=[1,78],t=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],F={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 6:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 7:case 8:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 9:o.parseDirective("%%{","open_directive");break;case 10:o.parseDirective(a[c],"type_directive");break;case 11:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 12:o.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:o.addRequirement(a[c-3],a[c-4]);break;case 20:o.setNewReqId(a[c-2]);break;case 21:o.setNewReqText(a[c-2]);break;case 22:o.setNewReqRisk(a[c-2]);break;case 23:o.setNewReqVerifyMethod(a[c-2]);break;case 26:this.$=o.RequirementType.REQUIREMENT;break;case 27:this.$=o.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=o.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=o.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=o.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=o.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=o.RiskLevel.LOW_RISK;break;case 33:this.$=o.RiskLevel.MED_RISK;break;case 34:this.$=o.RiskLevel.HIGH_RISK;break;case 35:this.$=o.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=o.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=o.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=o.VerifyType.VERIFY_TEST;break;case 39:o.addElement(a[c-3]);break;case 40:o.setNewElementType(a[c-2]);break;case 41:o.setNewElementDocRef(a[c-2]);break;case 44:o.addRelationship(a[c-2],a[c],a[c-4]);break;case 45:o.addRelationship(a[c-2],a[c-4],a[c]);break;case 46:this.$=o.Relationships.CONTAINS;break;case 47:this.$=o.Relationships.COPIES;break;case 48:this.$=o.Relationships.DERIVES;break;case 49:this.$=o.Relationships.SATISFIES;break;case 50:this.$=o.Relationships.VERIFIES;break;case 51:this.$=o.Relationships.REFINES;break;case 52:this.$=o.Relationships.TRACES;break}},table:[{3:1,4:2,6:M,9:4,14:s,16:o,18:i,19:a},{1:[3]},{3:10,4:2,5:[1,9],6:M,9:4,14:s,16:o,18:i,19:a},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},e(w,[2,8]),{20:[2,9]},{3:16,4:2,6:M,9:4,14:s,16:o,18:i,19:a},{1:[2,2]},{4:21,5:x,7:17,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{11:34,12:[1,35],22:z},e([12,22],[2,10]),e(w,[2,6]),e(w,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:x,7:38,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:39,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:40,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:41,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{4:21,5:x,7:42,8:v,9:4,14:s,16:o,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:g,41:d,42:u,43:h,44:m,45:f,53:p,71:n,72:r},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},e(j,[2,26]),e(j,[2,27]),e(j,[2,28]),e(j,[2,29]),e(j,[2,30]),e(j,[2,31]),e(B,[2,55]),e(B,[2,56]),e(w,[2,4]),{13:51,21:[1,52]},e(w,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:I,65:H,66:P,67:R,68:L,69:N,70:D},{61:63,64:I,65:H,66:P,67:R,68:L,69:N,70:D},{11:64,22:z},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},e(c,[2,46]),e(c,[2,47]),e(c,[2,48]),e(c,[2,49]),e(c,[2,50]),e(c,[2,51]),e(c,[2,52]),{63:[1,68]},e(w,[2,5]),{5:O,29:69,30:l,33:_,35:y,37:C,39:b},{5:k,39:E,55:76,56:A,58:S},{32:81,71:n,72:r},{32:82,71:n,72:r},e(t,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:O,29:87,30:l,33:_,35:y,37:C,39:b},e(t,[2,25]),e(t,[2,39]),{31:[1,88]},{31:[1,89]},{5:k,39:E,55:90,56:A,58:S},e(t,[2,43]),e(t,[2,44]),e(t,[2,45]),{32:91,71:n,72:r},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},e(t,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},e(t,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:O,29:116,30:l,33:_,35:y,37:C,39:b},{5:O,29:117,30:l,33:_,35:y,37:C,39:b},{5:O,29:118,30:l,33:_,35:y,37:C,39:b},{5:O,29:119,30:l,33:_,35:y,37:C,39:b},{5:k,39:E,55:120,56:A,58:S},{5:k,39:E,55:121,56:A,58:S},e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,40]),e(t,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},V=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return n.yytext=n.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n{<>\-=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return e}();F.lexer=V;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),Ll.parser=Ll,Tb=Ll,Ob=e=>e.match(/^\s*requirement(Diagram)?/)!==null,Nl=[],oe={},_s={},Kt={},Xs={},jb={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},bb={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},vb={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},gb={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},pb=function(e,t,n){w.parseDirective(this,e,t,n)},fb=(e,t)=>(_s[e]===void 0&&(_s[e]={name:e,type:t,id:oe.id,text:oe.text,risk:oe.risk,verifyMethod:oe.verifyMethod}),oe={},_s[e]),mb=()=>_s,hb=e=>{oe!==void 0&&(oe.id=e)},ub=e=>{oe!==void 0&&(oe.text=e)},db=e=>{oe!==void 0&&(oe.risk=e)},lb=e=>{oe!==void 0&&(oe.verifyMethod=e)},rb=t=>(Xs[t]===void 0&&(Xs[t]={name:t,type:Kt.type,docRef:Kt.docRef},e.info("Added new requirement: ",t)),Kt={},Xs[t]),ab=()=>Xs,ib=e=>{Kt!==void 0&&(Kt.type=e)},ob=e=>{Kt!==void 0&&(Kt.docRef=e)},sb=(e,t,n)=>{Nl.push({type:e,src:t,dst:n})},nb=()=>Nl,eb=()=>{Nl=[],oe={},_s={},Kt={},Xs={},Ne()},Z9={RequirementType:jb,RiskLevel:bb,VerifyType:vb,Relationships:gb,parseDirective:pb,getConfig:()=>t().req,addRequirement:fb,getRequirements:mb,setNewReqId:hb,setNewReqText:ub,setNewReqRisk:db,setNewReqVerifyMethod:lb,setAccTitle:pe,getAccTitle:Le,setAccDescription:xe,getAccDescription:ze,addElement:rb,getElements:ab,setNewElementType:ib,setNewElementDocRef:ob,addRelationship:sb,getRelationships:nb,clear:eb},Al={CONTAINS:"contains",ARROW:"arrow"},X9=(e,t)=>{let n=e.append("defs").append("marker").attr("id",Al.CONTAINS+"_line_ending").attr("refX",0).attr("refY",t.line_height/2).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",t.line_height/2).attr("cy",t.line_height/2).attr("r",t.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",t.line_height).attr("y1",t.line_height/2).attr("y2",t.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",t.line_height).attr("x1",t.line_height/2).attr("x2",t.line_height/2).attr("stroke-width",1),e.append("defs").append("marker").attr("id",Al.ARROW+"_line_ending").attr("refX",t.line_height).attr("refY",.5*t.line_height).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${t.line_height},${t.line_height/2}
      M${t.line_height},${t.line_height/2}
      L0,${t.line_height}`).attr("stroke-width",1)},Fd={ReqMarkers:Al,insertLineEndings:X9},O={},$d=0,Xd=(e,t)=>e.insert("rect","#"+t).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",O.rect_min_width+"px").attr("height",O.rect_min_height+"px"),tu=(e,t,n)=>{let a=O.rect_min_width/2,s=e.append("text").attr("class","req reqLabel reqTitle").attr("id",t).attr("x",a).attr("y",O.rect_padding).attr("dominant-baseline","hanging"),o=0;n.forEach(e=>{o==0?s.append("tspan").attr("text-anchor","middle").attr("x",O.rect_min_width/2).attr("dy",0).text(e):s.append("tspan").attr("text-anchor","middle").attr("x",O.rect_min_width/2).attr("dy",O.line_height*.75).text(e),o++});let r=1.5*O.rect_padding,c=o*O.line_height*.75,i=r+c;return e.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",O.rect_min_width).attr("y1",i).attr("y2",i),{titleNode:s,y:i}},nu=(e,t,n,s)=>{let r=e.append("text").attr("class","req reqLabel").attr("id",t).attr("x",O.rect_padding).attr("y",s).attr("dominant-baseline","hanging"),i=0;const a=30;let o=[];return n.forEach(e=>{let t=e.length;for(;t>a&&i<3;){let n=e.substring(0,a);e=e.substring(a,e.length),t=e.length,o[o.length]=n,i++}if(i==3){let e=o[o.length-1];o[o.length-1]=e.substring(0,e.length-4)+"..."}else o[o.length]=e;i=0}),o.forEach(e=>{r.append("tspan").attr("x",O.rect_padding).attr("dy",O.line_height).text(e)}),r},V9=(e,t,n,s)=>{const r=t.node().getTotalLength(),o=t.node().getPointAtLength(r*.5),a="rel"+$d;$d++;const c=e.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",o.x).attr("y",o.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(s),i=c.node().getBBox();e.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",o.x-i.width/2).attr("y",o.y-i.height/2).attr("width",i.width).attr("height",i.height).attr("fill","white").attr("fill-opacity","85%")},B9=function(e,t,n,s,o){const a=n.edge(qn(t.src),qn(t.dst)),r=js().x(function(e){return e.x}).y(function(e){return e.y}),i=e.insert("path","#"+s).attr("class","er relationshipLine").attr("d",r(a.points)).attr("fill","none");t.type==o.db.Relationships.CONTAINS?i.attr("marker-start","url("+h.getUrl(O.arrowMarkerAbsolute)+"#"+t.type+"_line_ending)"):(i.attr("stroke-dasharray","10,7"),i.attr("marker-end","url("+h.getUrl(O.arrowMarkerAbsolute)+"#"+Fd.ReqMarkers.ARROW+"_line_ending)")),V9(e,i,O,`<<${t.type}>>`)},I9=(t,n,s)=>{Object.keys(t).forEach(o=>{let i=t[o];o=qn(o),e.info("Added new requirement: ",o);const a=s.append("g").attr("id",o),c="req-"+o,l=Xd(a,c);let d=tu(a,o+"_title",[`<<${i.type}>>`,`${i.name}`]);nu(a,o+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],d.y);const r=l.node().getBBox();n.setNode(o,{width:r.width,height:r.height,shape:"rect",id:o})})},H9=(e,t,n)=>{Object.keys(e).forEach(s=>{let r=e[s];const o=qn(s),i=n.append("g").attr("id",o),a="element-"+o,l=Xd(i,a);let d=tu(i,a+"_title",[`<<Element>>`,`${s}`]);nu(i,a+"_body",[`Type: ${r.type||"Not Specified"}`,`Doc Ref: ${r.docRef||"None"}`],d.y);const c=l.node().getBBox();t.setNode(o,{width:c.width,height:c.height,shape:"rect",id:o})})},P9=(e,t)=>(e.forEach(function(e){let n=qn(e.src),s=qn(e.dst);t.setEdge(n,s,{relationship:e})}),e),R9=function(e,t){t.nodes().forEach(function(n){n!==void 0&&t.node(n)!==void 0&&(e.select("#"+n),e.select("#"+n).attr("transform","translate("+(t.node(n).x-t.node(n).width/2)+","+(t.node(n).y-t.node(n).height/2)+" )"))})},qn=e=>e.replace(/\s/g,"").replace(/\./g,"_"),N9=(e,n,s,o)=>{O=t().requirement,o.db.clear(),o.parser.parse(e);const d=O.securityLevel;let u;d==="sandbox"&&(u=i("#i"+n));const p=i(d==="sandbox"?u.nodes()[0].contentDocument.body:"body"),a=p.select(`[id='${n}']`);Fd.insertLineEndings(a,O);const r=new F({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:O.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let g=o.db.getRequirements(),v=o.db.getElements(),h=o.db.getRelationships();I9(g,r,a),H9(v,r,a),P9(h,r),Bs(r),R9(a,r),h.forEach(function(e){B9(a,e,r,n,o)});const c=O.rect_padding,l=a.node().getBBox(),m=l.width+c*2,f=l.height+c*2;Me(a,f,m,O.useMaxWidth),a.attr("viewBox",`${l.x-c} ${l.y-c} ${m} ${f}`)},D9={draw:N9},vl=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},z=[1,2],T=[1,3],F=[1,5],s=[1,7],o=[2,5],S=[1,15],M=[1,17],c=[1,18],l=[1,19],i=[1,21],u=[1,22],h=[1,23],m=[1,29],f=[1,30],p=[1,31],g=[1,32],v=[1,33],b=[1,34],j=[1,35],y=[1,36],_=[1,37],w=[1,38],O=[1,39],a=[1,40],C=[1,43],E=[1,44],k=[1,45],x=[1,46],d=[1,47],n=[1,48],R=[1,51],t=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],D=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],B=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],I=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],P=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],A=[67,68,69],r=[1,121],H=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],L={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 4:return o.apply(a[c]),a[c];case 5:this.$=[];break;case 6:a[c-1].push(a[c]),this.$=a[c-1];break;case 7:case 8:this.$=a[c];break;case 9:this.$=[];break;case 12:a[c-3].type="addParticipant",a[c-3].description=o.parseMessage(a[c-1]),this.$=a[c-3];break;case 13:a[c-1].type="addParticipant",this.$=a[c-1];break;case 14:a[c-3].type="addActor",a[c-3].description=o.parseMessage(a[c-1]),this.$=a[c-3];break;case 15:a[c-1].type="addActor",this.$=a[c-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(a[c-2]),sequenceIndexStep:Number(a[c-1]),sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[c-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:o.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:o.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:o.LINETYPE.ACTIVE_START,actor:a[c-1]};break;case 22:this.$={type:"activeEnd",signalType:o.LINETYPE.ACTIVE_END,actor:a[c-1]};break;case 28:o.setDiagramTitle(a[c].substring(6)),this.$=a[c].substring(6);break;case 29:o.setDiagramTitle(a[c].substring(7)),this.$=a[c].substring(7);break;case 30:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 31:case 32:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 33:a[c-1].unshift({type:"loopStart",loopText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.LOOP_START}),a[c-1].push({type:"loopEnd",loopText:a[c-2],signalType:o.LINETYPE.LOOP_END}),this.$=a[c-1];break;case 34:a[c-1].unshift({type:"rectStart",color:o.parseMessage(a[c-2]),signalType:o.LINETYPE.RECT_START}),a[c-1].push({type:"rectEnd",color:o.parseMessage(a[c-2]),signalType:o.LINETYPE.RECT_END}),this.$=a[c-1];break;case 35:a[c-1].unshift({type:"optStart",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.OPT_START}),a[c-1].push({type:"optEnd",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.OPT_END}),this.$=a[c-1];break;case 36:a[c-1].unshift({type:"altStart",altText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.ALT_START}),a[c-1].push({type:"altEnd",signalType:o.LINETYPE.ALT_END}),this.$=a[c-1];break;case 37:a[c-1].unshift({type:"parStart",parText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.PAR_START}),a[c-1].push({type:"parEnd",signalType:o.LINETYPE.PAR_END}),this.$=a[c-1];break;case 38:a[c-1].unshift({type:"criticalStart",criticalText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.CRITICAL_START}),a[c-1].push({type:"criticalEnd",signalType:o.LINETYPE.CRITICAL_END}),this.$=a[c-1];break;case 39:a[c-1].unshift({type:"breakStart",breakText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.BREAK_START}),a[c-1].push({type:"breakEnd",optText:o.parseMessage(a[c-2]),signalType:o.LINETYPE.BREAK_END}),this.$=a[c-1];break;case 42:this.$=a[c-3].concat([{type:"option",optionText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.CRITICAL_OPTION},a[c]]);break;case 44:this.$=a[c-3].concat([{type:"and",parText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.PAR_AND},a[c]]);break;case 46:this.$=a[c-3].concat([{type:"else",altText:o.parseMessage(a[c-1]),signalType:o.LINETYPE.ALT_ELSE},a[c]]);break;case 47:this.$=[a[c-1],{type:"addNote",placement:a[c-2],actor:a[c-1].actor,text:a[c]}];break;case 48:a[c-2]=[].concat(a[c-1],a[c-1]).slice(0,2),a[c-2][0]=a[c-2][0].actor,a[c-2][1]=a[c-2][1].actor,this.$=[a[c-1],{type:"addNote",placement:o.PLACEMENT.OVER,actor:a[c-2].slice(0,2),text:a[c]}];break;case 49:this.$=[a[c-1],{type:"addLinks",actor:a[c-1].actor,text:a[c]}];break;case 50:this.$=[a[c-1],{type:"addALink",actor:a[c-1].actor,text:a[c]}];break;case 51:this.$=[a[c-1],{type:"addProperties",actor:a[c-1].actor,text:a[c]}];break;case 52:this.$=[a[c-1],{type:"addDetails",actor:a[c-1].actor,text:a[c]}];break;case 55:this.$=[a[c-2],a[c]];break;case 56:this.$=a[c];break;case 57:this.$=o.PLACEMENT.LEFTOF;break;case 58:this.$=o.PLACEMENT.RIGHTOF;break;case 59:this.$=[a[c-4],a[c-1],{type:"addMessage",from:a[c-4].actor,to:a[c-1].actor,signalType:a[c-3],msg:a[c]},{type:"activeStart",signalType:o.LINETYPE.ACTIVE_START,actor:a[c-1]}];break;case 60:this.$=[a[c-4],a[c-1],{type:"addMessage",from:a[c-4].actor,to:a[c-1].actor,signalType:a[c-3],msg:a[c]},{type:"activeEnd",signalType:o.LINETYPE.ACTIVE_END,actor:a[c-4]}];break;case 61:this.$=[a[c-3],a[c-1],{type:"addMessage",from:a[c-3].actor,to:a[c-1].actor,signalType:a[c-2],msg:a[c]}];break;case 62:this.$={type:"addParticipant",actor:a[c]};break;case 63:this.$=o.LINETYPE.SOLID_OPEN;break;case 64:this.$=o.LINETYPE.DOTTED_OPEN;break;case 65:this.$=o.LINETYPE.SOLID;break;case 66:this.$=o.LINETYPE.DOTTED;break;case 67:this.$=o.LINETYPE.SOLID_CROSS;break;case 68:this.$=o.LINETYPE.DOTTED_CROSS;break;case 69:this.$=o.LINETYPE.SOLID_POINT;break;case 70:this.$=o.LINETYPE.DOTTED_POINT;break;case 71:this.$=o.parseMessage(a[c].trim().substring(1));break;case 72:o.parseDirective("%%{","open_directive");break;case 73:o.parseDirective(a[c],"type_directive");break;case 74:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 75:o.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:z,5:T,6:4,7:F,11:6,79:s},{1:[3]},{3:8,4:z,5:T,6:4,7:F,11:6,79:s},{3:9,4:z,5:T,6:4,7:F,11:6,79:s},{3:10,4:z,5:T,6:4,7:F,11:6,79:s},e([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],o,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{13:49,14:[1,50],82:R},e([14,82],[2,73]),e(t,[2,6]),{6:41,10:52,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},e(t,[2,8]),e(t,[2,9]),{17:53,69:n},{17:54,69:n},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:n},{17:60,69:n},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},e(t,[2,28]),e(t,[2,29]),{35:[1,66]},{37:[1,67]},e(t,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},e(t,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:n},{17:89,69:n},{17:90,69:n},{17:91,69:n},e([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},e(t,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},e(t,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},e(t,[2,20]),{5:[1,102]},{5:[1,103]},e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),e(t,[2,30]),e(t,[2,31]),e(D,o,{8:104}),e(D,o,{8:105}),e(D,o,{8:106}),e(B,o,{44:107,8:108}),e(I,o,{46:109,8:110}),e(P,o,{48:111,8:112}),e(D,o,{8:113}),{17:116,67:[1,114],68:[1,115],69:n},e(A,[2,63]),e(A,[2,64]),e(A,[2,65]),e(A,[2,66]),e(A,[2,67]),e(A,[2,68]),e(A,[2,69]),e(A,[2,70]),{17:117,69:n},{17:119,57:118,69:n},{69:[2,57]},{69:[2,58]},{55:120,78:r},{55:122,78:r},{55:123,78:r},{55:124,78:r},e(H,[2,10]),{13:125,82:R},{82:[2,74]},{19:[1,126]},e(t,[2,13]),{19:[1,127]},e(t,[2,15]),{5:[1,128]},e(t,[2,18]),e(t,[2,19]),e(t,[2,21]),e(t,[2,22]),{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,129],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,130],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,131],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,132]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,45],41:j,42:y,43:_,45:w,47:O,49:a,52:[1,133],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,134]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,43],41:j,42:y,43:_,45:w,47:O,49:a,51:[1,135],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{40:[1,136]},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[2,41],41:j,42:y,43:_,45:w,47:O,49:a,50:[1,137],53:C,58:E,59:k,60:x,61:d,69:n,79:s},{4:S,5:M,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:i,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:m,33:f,34:p,36:g,38:v,39:b,40:[1,138],41:j,42:y,43:_,45:w,47:O,49:a,53:C,58:E,59:k,60:x,61:d,69:n,79:s},{17:139,69:n},{17:140,69:n},{55:141,78:r},{55:142,78:r},{55:143,78:r},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},e(t,[2,17]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),e(t,[2,36]),{19:[1,148]},e(t,[2,37]),{19:[1,149]},e(t,[2,38]),{19:[1,150]},e(t,[2,39]),{55:151,78:r},{55:152,78:r},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:n},e(H,[2,11]),e(t,[2,12]),e(t,[2,14]),e(B,o,{8:108,44:154}),e(I,o,{8:110,46:155}),e(P,o,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},V=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return n.yytext=n.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return n.yytext=n.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^->:\n,;]+?([-]*[^->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+\->:\n,;]+((?!(-x|--x|-\)|--\)))[-]*[^+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[)])/i,/^(?:--[)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return e}();L.lexer=V;function N(){this.yy={}}return N.prototype=L,L.Parser=N,new N}(),vl.parser=vl,F9=vl,S9=e=>e.match(/^\s*sequenceDiagram/)!==null,Hs=void 0,Ut={},Ae=[],Ma=!1,y9=function(e,t,n){w.parseDirective(this,e,t,n)},fl=function(e,t,n,s){const o=Ut[e];if(o&&t===o.name&&n==null)return;(n==null||n.text==null)&&(n={text:t,wrap:null,type:s}),(s==null||n.text==null)&&(n={text:t,wrap:null,type:s}),Ut[e]={name:t,description:n.text,wrap:n.wrap===void 0&&Sn()||!!n.wrap,prevActor:Hs,links:{},properties:{},actorCnt:null,rectData:null,type:s||"participant"},Hs&&Ut[Hs]&&(Ut[Hs].nextActor=e),Hs=e},j9=e=>{let t,n=0;for(t=0;t<Ae.length;t++)Ae[t].type===so.ACTIVE_START&&Ae[t].from.actor===e&&n++,Ae[t].type===so.ACTIVE_END&&Ae[t].from.actor===e&&n--;return n},b9=function(e,t,n,s){Ae.push({from:e,to:t,message:n.text,wrap:n.wrap===void 0&&Sn()||!!n.wrap,answer:s})},A=function(e,t,n={text:void 0,wrap:void 0},s){if(s===so.ACTIVE_END){const t=j9(e.actor);if(t<1){let t=new Error("Trying to inactivate an inactive participant ("+e.actor+")");throw t.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},t}}return Ae.push({from:e,to:t,message:n.text,wrap:n.wrap===void 0&&Sn()||!!n.wrap,type:s}),!0},p9=function(){return Ae},f9=function(){return Ut},to=function(e){return Ut[e]},c9=function(){return Object.keys(Ut)},r9=function(){Ma=!0},a9=function(){Ma=!1},o9=()=>Ma,s9=function(e){pu=e},Sn=()=>pu!==void 0?pu:t().sequence.wrap,t9=function(){Ut={},Ae=[],Ma=!1,Ne()},Jv=function(t){const n=t.trim(),s={text:n.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:n.match(/^:?wrap:/)!==null||n.match(/^:?nowrap:/)===null&&void 0};return e.debug("parseMessage:",s),s},so={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},Yv={FILLED:0,OPEN:1},Wv={LEFTOF:0,RIGHTOF:1,OVER:2},ju=function(e,t,n){({actor:e,placement:t,message:n.text,wrap:n.wrap===void 0&&Sn()||!!n.wrap});const s=[].concat(e,e);Ae.push({from:s[0],to:s[1],message:n.text,wrap:n.wrap===void 0&&Sn()||!!n.wrap,type:so.NOTE,placement:t})},yu=function(n,s){const o=to(n);try{let e=De(s.text,t());e=e.replace(/&amp;/g,"&"),e=e.replace(/&equals;/g,"=");const n=JSON.parse(e);_u(o,n)}catch(t){e.error("error while parsing actor link text",t)}},Rv=function(n,s){const r=to(n);try{const n={};let e=De(s.text,t());var i,a,o=e.indexOf("@");e=e.replace(/&amp;/g,"&"),e=e.replace(/&equals;/g,"="),i=e.slice(0,o-1).trim(),a=e.slice(o+1).trim(),n[i]=a,_u(r,n)}catch(t){e.error("error while parsing actor link text",t)}};function _u(e,t){if(e.links==null)e.links=t;else for(let n in t)e.links[n]=t[n]}wu=function(n,s){const o=to(n);try{let e=De(s.text,t());const n=JSON.parse(e);Ov(o,n)}catch(t){e.error("error while parsing actor properties text",t)}};function Ov(e,t){if(e.properties==null)e.properties=t;else for(let n in t)e.properties[n]=t[n]}Ou=function(t,n){const s=to(t),o=document.getElementById(n.text);try{const t=o.innerHTML,e=JSON.parse(t);e.properties&&Ov(s,e.properties),e.links&&_u(s,e.links)}catch(t){e.error("error while parsing actor details text",t)}},jv=function(e,t){return e!==void 0&&e.properties!==void 0?e.properties[t]:void 0},Eu=function(e){if(Array.isArray(e))e.forEach(function(e){Eu(e)});else switch(e.type){case"sequenceIndex":Ae.push({from:void 0,to:void 0,message:{start:e.sequenceIndex,step:e.sequenceIndexStep,visible:e.sequenceVisible},wrap:!1,type:e.signalType});break;case"addParticipant":fl(e.actor,e.actor,e.description,"participant");break;case"addActor":fl(e.actor,e.actor,e.description,"actor");break;case"activeStart":A(e.actor,void 0,void 0,e.signalType);break;case"activeEnd":A(e.actor,void 0,void 0,e.signalType);break;case"addNote":ju(e.actor,e.placement,e.text);break;case"addLinks":yu(e.actor,e.text);break;case"addALink":Rv(e.actor,e.text);break;case"addProperties":wu(e.actor,e.text);break;case"addDetails":Ou(e.actor,e.text);break;case"addMessage":A(e.from,e.to,e.msg,e.signalType);break;case"loopStart":A(void 0,void 0,e.loopText,e.signalType);break;case"loopEnd":A(void 0,void 0,void 0,e.signalType);break;case"rectStart":A(void 0,void 0,e.color,e.signalType);break;case"rectEnd":A(void 0,void 0,void 0,e.signalType);break;case"optStart":A(void 0,void 0,e.optText,e.signalType);break;case"optEnd":A(void 0,void 0,void 0,e.signalType);break;case"altStart":A(void 0,void 0,e.altText,e.signalType);break;case"else":A(void 0,void 0,e.altText,e.signalType);break;case"altEnd":A(void 0,void 0,void 0,e.signalType);break;case"setAccTitle":pe(e.text);break;case"parStart":A(void 0,void 0,e.parText,e.signalType);break;case"and":A(void 0,void 0,e.parText,e.signalType);break;case"parEnd":A(void 0,void 0,void 0,e.signalType);break;case"criticalStart":A(void 0,void 0,e.criticalText,e.signalType);break;case"option":A(void 0,void 0,e.optionText,e.signalType);break;case"criticalEnd":A(void 0,void 0,void 0,e.signalType);break;case"breakStart":A(void 0,void 0,e.breakText,e.signalType);break;case"breakEnd":A(void 0,void 0,void 0,e.signalType);break}},ku={addActor:fl,addMessage:b9,addSignal:A,addLinks:yu,addDetails:Ou,addProperties:wu,autoWrap:Sn,setWrap:s9,enableSequenceNumbers:r9,disableSequenceNumbers:a9,showSequenceNumbers:o9,getMessages:p9,getActors:f9,getActor:to,getActorKeys:c9,getActorProperty:jv,getAccTitle:Le,getDiagramTitle:Ot,setDiagramTitle:vt,parseDirective:y9,getConfig:()=>t().sequence,clear:t9,parseMessage:Jv,LINETYPE:so,ARROWTYPE:Yv,PLACEMENT:Wv,addNote:ju,setAccTitle:pe,apply:Eu,setAccDescription:xe,getAccDescription:ze},ul=[],mv=e=>{ul.push(e)},Fu=()=>{ul.forEach(e=>{e()}),ul=[]},Fa=function(e,t){const n=e.append("rect");return n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.class!==void 0&&n.attr("class",t.class),n},Tu=(e,t)=>{mv(()=>{const n=document.querySelectorAll(e);if(n.length===0)return;n[0].addEventListener("mouseover",function(){G7("actor"+t+"_popup")}),n[0].addEventListener("mouseout",function(){$7("actor"+t+"_popup")})})},uv=function(e,t,n,s,o){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};const d=t.links,u=t.actorCnt,i=t.rectData;var c,l,h,p,f="none";o&&(f="block !important");const r=e.append("g");r.attr("id","actor"+u+"_popup"),r.attr("class","actorPopupMenu"),r.attr("display",f),Tu("#actor"+u+"_popup",u),h="",i.class!==void 0&&(h=" "+i.class);let m=i.width>n?i.width:n;const a=r.append("rect");if(a.attr("class","actorPopupMenuPanel"+h),a.attr("x",i.x),a.attr("y",i.height),a.attr("fill",i.fill),a.attr("stroke",i.stroke),a.attr("width",m),a.attr("height",i.height),a.attr("rx",i.rx),a.attr("ry",i.ry),d!=null){c=20;for(let e in d)l=r.append("a"),p=(0,Bt.sanitizeUrl)(d[e]),l.attr("xlink:href",p),l.attr("target","_blank"),l7(s)(e,l,i.x+10,i.height+c,m,20,{class:"actor"},s),c+=30}return a.attr("height",c),{height:i.height+c,width:m}},zu=function(e,t,n,s){const o=e.append("image");o.attr("x",t),o.attr("y",n);var i=(0,Bt.sanitizeUrl)(s);o.attr("xlink:href",i)},Du=function(e,t,n,s){const o=e.append("use");o.attr("x",t),o.attr("y",n);var i=(0,Bt.sanitizeUrl)(s);o.attr("xlink:href","#"+i)},sv=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'block'; }"},tv=function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = 'none'; }"},G7=function(e){var t=document.getElementById(e);t!=null&&(t.style.display="block")},$7=function(e){var t=document.getElementById(e);t!=null&&(t.style.display="none")},Wn=function(e,t){let o=0,n=0;const r=t.text.split(h.lineBreakRegex);let a=[],i=0,s=()=>t.y;if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":s=()=>Math.round(t.y+t.textMargin);break;case"middle":case"center":s=()=>Math.round(t.y+(o+n+t.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(t.y+(o+n+2*t.textMargin)-t.textMargin);break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[d,l]of r.entries()){t.textMargin!==void 0&&t.textMargin===0&&t.fontSize!==void 0&&(i=d*t.fontSize);const c=e.append("text");if(c.attr("x",t.x),c.attr("y",s()),t.anchor!==void 0&&c.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&c.style("font-family",t.fontFamily),t.fontSize!==void 0&&c.style("font-size",t.fontSize),t.fontWeight!==void 0&&c.style("font-weight",t.fontWeight),t.fill!==void 0&&c.attr("fill",t.fill),t.class!==void 0&&c.attr("class",t.class),t.dy!==void 0?c.attr("dy",t.dy):i!==0&&c.attr("dy",i),t.tspan){const e=c.append("tspan");e.attr("x",t.x),t.fill!==void 0&&e.attr("fill",t.fill),e.text(l)}else c.text(l);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(n+=(c._groups||c)[0][0].getBBox().height,o=n),a.push(c)}return a},Ru=function(e,t){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const n=e.append("polygon");return n.attr("points",s(t.x,t.y,t.width,t.height,7)),n.attr("class","labelBox"),t.y=t.y+t.height/2,Wn(e,t),n},Ge=-1,Pu=(e,t)=>{if(!e.selectAll)return;e.selectAll(".actor-line").attr("class","200").attr("y2",t-55)},F7=function(e,t,n){const a=t.x+t.width/2,r=e.append("g");var i,o=r;t.y===0&&(Ge++,o.append("line").attr("id","actor"+Ge).attr("x1",a).attr("y1",5).attr("x2",a).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),o=r.append("g"),t.actorCnt=Ge,t.links!=null&&(o.attr("id","root-"+Ge),Tu("#root-"+Ge,Ge)));const s=ma();i="actor",t.properties!=null&&t.properties.class?i=t.properties.class:s.fill="#eaeaea",s.x=t.x,s.y=t.y,s.width=t.width,s.height=t.height,s.class=i,s.rx=3,s.ry=3;const c=Fa(o,s);if(t.rectData=s,t.properties!=null&&t.properties.icon){const e=t.properties.icon.trim();e.charAt(0)==="@"?Du(o,s.x+s.width-20,s.y+10,e.substr(1)):zu(o,s.x+s.width-20,s.y+10,e)}Vu(n)(t.description,o,s.x,s.y,s.width,s.height,{class:"actor"},n);let l=t.height;if(c.node){const e=c.node().getBBox();t.height=e.height,l=e.height}return l},S7=function(e,t,n){const o=t.x+t.width/2;t.y===0&&(Ge++,e.append("line").attr("id","actor"+Ge).attr("x1",o).attr("y1",80).attr("x2",o).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=e.append("g");i.attr("class","actor-man");const s=ma();s.x=t.x,s.y=t.y,s.fill="#eaeaea",s.width=t.width,s.height=t.height,s.class="actor",s.rx=3,s.ry=3,i.append("line").attr("id","actor-man-torso"+Ge).attr("x1",o).attr("y1",t.y+25).attr("x2",o).attr("y2",t.y+45),i.append("line").attr("id","actor-man-arms"+Ge).attr("x1",o-18).attr("y1",t.y+33).attr("x2",o+18).attr("y2",t.y+33),i.append("line").attr("x1",o-18).attr("y1",t.y+60).attr("x2",o).attr("y2",t.y+45),i.append("line").attr("x1",o).attr("y1",t.y+45).attr("x2",o+16).attr("y2",t.y+60);const a=i.append("circle");a.attr("cx",t.x+t.width/2),a.attr("cy",t.y+10),a.attr("r",15),a.attr("width",t.width),a.attr("height",t.height);const r=i.node().getBBox();return t.height=r.height,Vu(n)(t.description,i,s.x,s.y+35,s.width,s.height,{class:"actor"},n),t.height},k7=function(e,t,n){switch(t.type){case"actor":return S7(e,t,n);case"participant":return F7(e,t,n)}},C7=function(e){return e.append("g")},O7=function(e,t,n,s,o){const i=ma(),a=t.anchored;i.x=t.startx,i.y=t.starty,i.class="activation"+o%3,i.width=t.stopx-t.startx,i.height=n-t.starty,Fa(a,i)},_7=function(e,t,n,s){const{boxMargin:c,boxTextMargin:i,labelBoxHeight:f,labelBoxWidth:h,messageFontFamily:l,messageFontSize:d,messageFontWeight:u}=s,a=e.append("g"),r=function(e,t,n,s){return a.append("line").attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",s).attr("class","loopLine")};r(t.startx,t.starty,t.stopx,t.starty),r(t.stopx,t.starty,t.stopx,t.stopy),r(t.startx,t.stopy,t.stopx,t.stopy),r(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(e){r(t.startx,e.y,t.stopx,e.y).style("stroke-dasharray","3, 3")});let o=il();o.text=n,o.x=t.startx,o.y=t.starty,o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.anchor="middle",o.valign="middle",o.tspan=!1,o.width=h||50,o.height=f||20,o.textMargin=i,o.class="labelText",Ru(a,o),o=il(),o.text=t.title,o.x=t.startx+h/2+(t.stopx-t.startx)/2,o.y=t.starty+c+i,o.anchor="middle",o.valign="middle",o.textMargin=i,o.class="loopText",o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.wrap=!0;let m=Wn(a,o);return t.sectionTitles!==void 0&&t.sectionTitles.forEach(function(e,n){if(e.message){o.text=e.message,o.x=t.startx+(t.stopx-t.startx)/2,o.y=t.sections[n].y+c+i,o.class="loopText",o.anchor="middle",o.valign="middle",o.tspan=!1,o.fontFamily=l,o.fontSize=d,o.fontWeight=u,o.wrap=t.wrap,m=Wn(a,o);let s=Math.round(m.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));t.sections[n].height+=s-(c+i)}}),t.height=Math.round(t.stopy-t.starty),a},y7=function(e,t){const n=Fa(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"});n.lower()},j7=function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},v7=function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},g7=function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},m7=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},h7=function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},u7=function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},d7=function(e){const t=e.append("defs"),n=t.append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5);n.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},il=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},ma=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Vu=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("text-anchor","middle").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{actorFontSize:l,actorFontFamily:m,actorFontWeight:f}=c;let u=l&&l.replace?l.replace("px",""):l;const d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const h=t*u-u*(d.length-1)/2,c=n.append("text").attr("x",s+i/2).attr("y",o).style("text-anchor","middle").style("font-size",l).style("font-weight",f).style("font-family",m);c.append("tspan").attr("x",s+i/2).attr("dy",h).text(d[t]),c.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(c,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),l7=function(){function n(t,n,s,o,i,a,r){const c=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(t);e(c,r)}function t(t,n,s,o,i,a,r,c){const{actorFontSize:l,actorFontFamily:u,actorFontWeight:m}=c,d=t.split(h.lineBreakRegex);for(let t=0;t<d.length;t++){const c=t*l-l*(d.length-1)/2,i=n.append("text").attr("x",s).attr("y",o).style("text-anchor","start").style("font-size",l).style("font-weight",m).style("font-family",u);i.append("tspan").attr("x",s).attr("dy",c).text(d[t]),i.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(i,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),x={drawRect:Fa,drawText:Wn,drawLabel:Ru,drawActor:k7,drawPopup:uv,drawImage:zu,drawEmbeddedImage:Du,anchorElement:C7,drawActivation:O7,drawLoop:_7,drawBackgroundRect:y7,insertArrowHead:m7,insertArrowFilledHead:h7,insertSequenceNumber:u7,insertArrowCrossHead:d7,insertDatabaseIcon:j7,insertComputerIcon:v7,insertClockIcon:g7,getTextObj:il,getNoteRect:ma,popupMenu:sv,popdownMenu:tv,fixLifeLineHeights:Pu,sanitizeUrl:Bt.sanitizeUrl},n={},a={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(e){this.actors.push(e)},addLoop:function(e){this.loops.push(e)},addMessage:function(e){this.messages.push(e)},addNote:function(e){this.notes.push(e)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Gu(t())},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(e,t,s,o){const i=this;let r=0;function c(c){return function(d){r++;const u=i.sequenceItems.length-r+1;i.updateVal(d,"starty",t-u*n.boxMargin,Math.min),i.updateVal(d,"stopy",o+u*n.boxMargin,Math.max),i.updateVal(a.data,"startx",e-u*n.boxMargin,Math.min),i.updateVal(a.data,"stopx",s+u*n.boxMargin,Math.max),c==="activation"||(i.updateVal(d,"startx",e-u*n.boxMargin,Math.min),i.updateVal(d,"stopx",s+u*n.boxMargin,Math.max),i.updateVal(a.data,"starty",t-u*n.boxMargin,Math.min),i.updateVal(a.data,"stopy",o+u*n.boxMargin,Math.max))}}this.sequenceItems.forEach(c()),this.activations.forEach(c("activation"))},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),r=Math.min(t,s),c=Math.max(t,s);this.updateVal(a.data,"startx",o,Math.min),this.updateVal(a.data,"starty",r,Math.min),this.updateVal(a.data,"stopx",i,Math.max),this.updateVal(a.data,"stopy",c,Math.max),this.updateBounds(o,r,i,c)},newActivation:function(e,t,s){const o=s[e.from.actor],a=ta(e.from.actor).length||0,i=o.x+o.width/2+(a-1)*n.activationWidth/2;this.activations.push({startx:i,starty:this.verticalPos+2,stopx:i+n.activationWidth,stopy:void 0,actor:e.from.actor,anchored:x.anchorElement(t)})},endActivation:function(e){const t=this.activations.map(function(e){return e.actor}).lastIndexOf(e.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},newLoop:function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(e){const t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:a.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},r7=function(e,t){a.bumpVerticalPos(n.boxMargin),t.height=n.boxMargin,t.starty=a.getVerticalPos();const o=x.getNoteRect();o.x=t.startx,o.y=t.starty,o.width=t.width||n.width,o.class="note";const r=e.append("g"),c=x.drawRect(r,o),s=x.getTextObj();s.x=t.startx,s.y=t.starty,s.width=o.width,s.dy="1em",s.text=t.message,s.class="noteText",s.fontFamily=n.noteFontFamily,s.fontSize=n.noteFontSize,s.fontWeight=n.noteFontWeight,s.anchor=n.noteAlign,s.textMargin=n.noteMargin,s.valign="center";const l=Wn(r,s),i=Math.round(l.map(e=>(e._groups||e)[0][0].getBBox().height).reduce((e,t)=>e+t));c.attr("height",i+2*n.noteMargin),t.height+=i+2*n.noteMargin,a.bumpVerticalPos(i+2*n.noteMargin),t.stopy=t.starty+i+2*n.noteMargin,t.stopx=t.startx+o.width,a.insert(t.startx,t.starty,t.stopx,t.stopy),a.models.addNote(t)},Zn=e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),es=e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),nl=e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight});function _P(e,t){a.bumpVerticalPos(10);const{startx:i,stopx:r,message:l}=t,u=h.splitBreaks(l).length,c=p.calculateTextDimensions(l,Zn(n)),d=c.height/u;t.height+=d,a.bumpVerticalPos(d);let o,s=c.height-10;const m=c.width;if(i===r){o=a.getVerticalPos()+s,n.rightAngles||(s+=n.boxMargin,o=a.getVerticalPos()+s),s+=30;const e=Math.max(m/2,n.width/2);a.insert(i-e,a.getVerticalPos()-10+s,r+e,a.getVerticalPos()+30+s)}else s+=n.boxMargin,o=a.getVerticalPos()+s,a.insert(i,o-10,r,o);return a.bumpVerticalPos(s),t.height+=s,t.stopy=t.starty+t.height,a.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),o}i7=function(e,t,s,o){const{startx:r,stopx:d,starty:h,message:u,type:c,sequenceIndex:m,sequenceVisible:f}=t,g=p.calculateTextDimensions(u,Zn(n)),a=x.getTextObj();a.x=r,a.y=h+10,a.width=d-r,a.class="messageText",a.dy="1em",a.text=u,a.fontFamily=n.messageFontFamily,a.fontSize=n.messageFontSize,a.fontWeight=n.messageFontWeight,a.anchor=n.messageAlign,a.valign="center",a.textMargin=n.wrapPadding,a.tspan=!1,Wn(e,a);const v=g.width;let i;r===d?n.rightAngles?i=e.append("path").attr("d",`M  ${r},${s} H ${r+Math.max(n.width/2,v/2)} V ${s+25} H ${r}`):i=e.append("path").attr("d","M "+r+","+s+" C "+(r+60)+","+(s-10)+" "+(r+60)+","+(s+30)+" "+r+","+(s+20)):(i=e.append("line"),i.attr("x1",r),i.attr("y1",s),i.attr("x2",d),i.attr("y2",s)),c===o.db.LINETYPE.DOTTED||c===o.db.LINETYPE.DOTTED_CROSS||c===o.db.LINETYPE.DOTTED_POINT||c===o.db.LINETYPE.DOTTED_OPEN?(i.style("stroke-dasharray","3, 3"),i.attr("class","messageLine1")):i.attr("class","messageLine0");let l="";n.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),i.attr("stroke-width",2),i.attr("stroke","none"),i.style("fill","none"),(c===o.db.LINETYPE.SOLID||c===o.db.LINETYPE.DOTTED)&&i.attr("marker-end","url("+l+"#arrowhead)"),(c===o.db.LINETYPE.SOLID_POINT||c===o.db.LINETYPE.DOTTED_POINT)&&i.attr("marker-end","url("+l+"#filled-head)"),(c===o.db.LINETYPE.SOLID_CROSS||c===o.db.LINETYPE.DOTTED_CROSS)&&i.attr("marker-end","url("+l+"#crosshead)"),(f||n.showSequenceNumbers)&&(i.attr("marker-start","url("+l+"#sequencenumber)"),e.append("text").attr("x",r).attr("y",s+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(m))},Jc=function(e,t,s,o,i,r){if(i.hideUnusedParticipants===!0){const e=new Set;r.forEach(t=>{e.add(t.from),e.add(t.to)}),s=s.filter(t=>e.has(t))}let l=0,d=0,c=0;for(const r of s){const i=t[r];i.width=i.width||n.width,i.height=Math.max(i.height||n.height,n.height),i.margin=i.margin||n.actorMargin,i.x=l+d,i.y=o;const u=x.drawActor(e,i,n);c=Math.max(c,u),a.insert(i.x,o,i.x+i.width,i.height),l+=i.width,d+=i.margin,a.models.addActor(i)}a.bumpVerticalPos(c)},qu=function(e,t,s,o){let i=0,a=0;for(const l of s){const r=t[l],d=s7(r),c=x.drawPopup(e,r,d,n,n.forceMenus,o);c.height>i&&(i=c.height),c.width+r.x>a&&(a=c.width+r.x)}return{maxHeight:i,maxWidth:a}},Gu=function(e){U(n,e),e.fontFamily&&(n.actorFontFamily=n.noteFontFamily=n.messageFontFamily=e.fontFamily),e.fontSize&&(n.actorFontSize=n.noteFontSize=n.messageFontSize=e.fontSize),e.fontWeight&&(n.actorFontWeight=n.noteFontWeight=n.messageFontWeight=e.fontWeight)},ta=function(e){return a.activations.filter(function(t){return t.actor===e})},Xu=function(e,t){const n=t[e],s=ta(e),o=s.reduce(function(e,t){return Math.min(e,t.startx)},n.x+n.width/2),i=s.reduce(function(e,t){return Math.max(e,t.stopx)},n.x+n.width/2);return[o,i]};function ht(t,s,o,i,r){a.bumpVerticalPos(o);let c=i;if(s.id&&s.message&&t[s.id]){const o=t[s.id].width,a=Zn(n);s.message=p.wrapLabel(`[${s.message}]`,o-2*n.wrapPadding,a),s.width=o,s.wrap=!0;const l=p.calculateTextDimensions(s.message,a),r=Math.max(l.height,n.labelBoxHeight);c=i+r,e.debug(`${r} - ${s.message}`)}r(s),a.bumpVerticalPos(c)}o7=function(s,o,r,c){const{securityLevel:p,sequence:z}=t();n=z;let w;p==="sandbox"&&(w=i("#i"+o));const T=i(p==="sandbox"?w.nodes()[0].contentDocument.body:"body"),F=p==="sandbox"?w.nodes()[0].contentDocument:document;a.init(),e.debug(c.db);const l=p==="sandbox"?T.select(`[id="${o}"]`):i(`[id="${o}"]`),h=c.db.getActors(),b=c.db.getActorKeys(),f=c.db.getMessages(),y=c.db.getDiagramTitle(),C=MP(h,f,c);n.height=TP(h,C),x.insertComputerIcon(l),x.insertDatabaseIcon(l),x.insertClockIcon(l),Jc(l,h,b,0,n,f);const d=q5(f,h,C,c);x.insertArrowHead(l),x.insertArrowCrossHead(l),x.insertArrowFilledHead(l),x.insertSequenceNumber(l);function S(e,t){const s=a.endActivation(e);s.starty+18>t&&(s.starty=t-6,t+=12),x.drawActivation(l,s,t,n,ta(e.from.actor).length),a.insert(s.startx,t-10,s.stopx,t)}let m=1,O=1;const k=[];f.forEach(function(t){let s,i,o;switch(t.type){case c.db.LINETYPE.NOTE:i=t.noteModel,r7(l,i);break;case c.db.LINETYPE.ACTIVE_START:a.newActivation(t,l,h);break;case c.db.LINETYPE.ACTIVE_END:S(t,a.getVerticalPos());break;case c.db.LINETYPE.LOOP_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.LOOP_END:s=a.endLoop(),x.drawLoop(l,s,"loop",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.RECT_START:ht(d,t,n.boxMargin,n.boxMargin,e=>a.newLoop(void 0,e.message));break;case c.db.LINETYPE.RECT_END:s=a.endLoop(),x.drawBackgroundRect(l,s),a.models.addLoop(s),a.bumpVerticalPos(s.stopy-a.getVerticalPos());break;case c.db.LINETYPE.OPT_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.OPT_END:s=a.endLoop(),x.drawLoop(l,s,"opt",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.ALT_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.ALT_ELSE:ht(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.ALT_END:s=a.endLoop(),x.drawLoop(l,s,"alt",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.PAR_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.PAR_AND:ht(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.PAR_END:s=a.endLoop(),x.drawLoop(l,s,"par",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.AUTONUMBER:m=t.message.start||m,O=t.message.step||O,t.message.visible?c.db.enableSequenceNumbers():c.db.disableSequenceNumbers();break;case c.db.LINETYPE.CRITICAL_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.CRITICAL_OPTION:ht(d,t,n.boxMargin+n.boxTextMargin,n.boxMargin,e=>a.addSectionToLoop(e));break;case c.db.LINETYPE.CRITICAL_END:s=a.endLoop(),x.drawLoop(l,s,"critical",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;case c.db.LINETYPE.BREAK_START:ht(d,t,n.boxMargin,n.boxMargin+n.boxTextMargin,e=>a.newLoop(e));break;case c.db.LINETYPE.BREAK_END:s=a.endLoop(),x.drawLoop(l,s,"break",n),a.bumpVerticalPos(s.stopy-a.getVerticalPos()),a.models.addLoop(s);break;default:try{o=t.msgModel,o.starty=a.getVerticalPos(),o.sequenceIndex=m,o.sequenceVisible=c.db.showSequenceNumbers();const e=_P(l,o);k.push({messageModel:o,lineStartY:e}),a.models.addMessage(o)}catch(t){e.error("error while drawing message",t)}}[c.db.LINETYPE.SOLID_OPEN,c.db.LINETYPE.DOTTED_OPEN,c.db.LINETYPE.SOLID,c.db.LINETYPE.DOTTED,c.db.LINETYPE.SOLID_CROSS,c.db.LINETYPE.DOTTED_CROSS,c.db.LINETYPE.SOLID_POINT,c.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(m=m+O)}),k.forEach(e=>i7(l,e.messageModel,e.lineStartY,c)),n.mirrorActors&&(a.bumpVerticalPos(n.boxMargin*2),Jc(l,h,b,a.getVerticalPos(),n,f),a.bumpVerticalPos(n.boxMargin),Pu(l,a.getVerticalPos()));const g=qu(l,h,b,F),{bounds:u}=a.getBounds();e.debug("For line height fix Querying: #"+o+" .actor-line");const M=Cu("#"+o+" .actor-line");M.attr("y2",u.stopy);let _=u.stopy-u.starty;_<g.maxHeight&&(_=g.maxHeight);let v=_+2*n.diagramMarginY;n.mirrorActors&&(v=v-n.boxMargin+n.bottomMarginAdj);let j=u.stopx-u.startx;j<g.maxWidth&&(j=g.maxWidth);const E=j+2*n.diagramMarginX;y&&l.append("text").text(y).attr("x",(u.stopx-u.startx)/2-2*n.diagramMarginX).attr("y",-25),Me(l,v,E,n.useMaxWidth);const A=y?40:0;l.attr("viewBox",u.startx-n.diagramMarginX+" -"+(n.diagramMarginY+A)+" "+E+" "+(v+A)),e.debug(`models:`,a.models)};function MP(t,s,o){const i={};return s.forEach(function(e){if(t[e.to]&&t[e.from]){const s=t[e.to];if(e.placement===o.db.PLACEMENT.LEFTOF&&!s.prevActor)return;if(e.placement===o.db.PLACEMENT.RIGHTOF&&!s.nextActor)return;const c=e.placement!==void 0,r=!c,l=c?es(n):Zn(n),d=e.wrap?p.wrapLabel(e.message,n.width-2*n.wrapPadding,l):e.message,u=p.calculateTextDimensions(d,l),a=u.width+2*n.wrapPadding;r&&e.from===s.nextActor?i[e.to]=Math.max(i[e.to]||0,a):r&&e.from===s.prevActor?i[e.from]=Math.max(i[e.from]||0,a):r&&e.from===e.to?(i[e.from]=Math.max(i[e.from]||0,a/2),i[e.to]=Math.max(i[e.to]||0,a/2)):e.placement===o.db.PLACEMENT.RIGHTOF?i[e.from]=Math.max(i[e.from]||0,a):e.placement===o.db.PLACEMENT.LEFTOF?i[s.prevActor]=Math.max(i[s.prevActor]||0,a):e.placement===o.db.PLACEMENT.OVER&&(s.prevActor&&(i[s.prevActor]=Math.max(i[s.prevActor]||0,a/2)),s.nextActor&&(i[e.from]=Math.max(i[e.from]||0,a/2)))}}),e.debug("maxMessageWidthPerActor:",i),i}s7=function(e){let t=0;const s=nl(n);for(const i in e.links){const a=p.calculateTextDimensions(i,s),o=a.width+2*n.wrapPadding+2*n.boxMargin;t<o&&(t=o)}return t};function TP(e,t){let s=0;Object.keys(e).forEach(t=>{const o=e[t];o.wrap&&(o.description=p.wrapLabel(o.description,n.width-2*n.wrapPadding,nl(n)));const i=p.calculateTextDimensions(o.description,nl(n));o.width=o.wrap?n.width:Math.max(n.width,i.width+2*n.wrapPadding),o.height=o.wrap?Math.max(i.height,n.height):n.height,s=Math.max(s,o.height)});for(const o in t){const s=e[o];if(!s)continue;const i=e[s.nextActor];if(!i)continue;const a=t[o],r=a+n.actorMargin-s.width/2-i.width/2;s.margin=Math.max(r,n.actorMargin)}return Math.max(s,n.height)}Q5=function(t,s,o){const c=s[t.from].x,l=s[t.to].x,a=t.wrap&&t.message;let r=p.calculateTextDimensions(a?p.wrapLabel(t.message,n.width,es(n)):t.message,es(n));const i={width:a?n.width:Math.max(n.width,r.width+2*n.noteMargin),height:0,startx:s[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===o.db.PLACEMENT.RIGHTOF?(i.width=a?Math.max(n.width,r.width):Math.max(s[t.from].width/2+s[t.to].width/2,r.width+2*n.noteMargin),i.startx=c+(s[t.from].width+n.actorMargin)/2):t.placement===o.db.PLACEMENT.LEFTOF?(i.width=a?Math.max(n.width,r.width+2*n.noteMargin):Math.max(s[t.from].width/2+s[t.to].width/2,r.width+2*n.noteMargin),i.startx=c-i.width+(s[t.from].width-n.actorMargin)/2):t.to===t.from?(r=p.calculateTextDimensions(a?p.wrapLabel(t.message,Math.max(n.width,s[t.from].width),es(n)):t.message,es(n)),i.width=a?Math.max(n.width,s[t.from].width):Math.max(s[t.from].width,n.width,r.width+2*n.noteMargin),i.startx=c+(s[t.from].width-i.width)/2):(i.width=Math.abs(c+s[t.from].width/2-(l+s[t.to].width/2))+n.actorMargin,i.startx=c<l?c+s[t.from].width/2-n.actorMargin/2:l+s[t.to].width/2-n.actorMargin/2),a&&(i.message=p.wrapLabel(t.message,i.width-2*n.wrapPadding,es(n))),e.debug(`NM:[${i.startx},${i.stopx},${i.starty},${i.stopy}:${i.width},${i.height}=${t.message}]`),i},G5=function(e,t,s){let a=!1;if([s.db.LINETYPE.SOLID_OPEN,s.db.LINETYPE.DOTTED_OPEN,s.db.LINETYPE.SOLID,s.db.LINETYPE.DOTTED,s.db.LINETYPE.SOLID_CROSS,s.db.LINETYPE.DOTTED_CROSS,s.db.LINETYPE.SOLID_POINT,s.db.LINETYPE.DOTTED_POINT].includes(e.type)&&(a=!0),!a)return{};const o=Xu(e.from,t),i=Xu(e.to,t),r=o[0]<=i[0]?1:0,c=o[0]<i[0]?0:1,l=[...o,...i],d=Math.abs(i[c]-o[r]);e.wrap&&e.message&&(e.message=p.wrapLabel(e.message,Math.max(d+2*n.wrapPadding,n.width),Zn(n)));const u=p.calculateTextDimensions(e.message,Zn(n));return{width:Math.max(e.wrap?0:u.width+2*n.wrapPadding,d+2*n.wrapPadding,n.width),height:0,startx:o[r],stopx:i[c],starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,l),toBounds:Math.max.apply(null,l)}},q5=function(t,s,o,i){const d={},l=[];let r,u,c;return t.forEach(function(e){switch(e.id=p.random({length:10}),e.type){case i.db.LINETYPE.LOOP_START:case i.db.LINETYPE.ALT_START:case i.db.LINETYPE.OPT_START:case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.CRITICAL_START:case i.db.LINETYPE.BREAK_START:l.push({id:e.id,msg:e.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case i.db.LINETYPE.ALT_ELSE:case i.db.LINETYPE.PAR_AND:case i.db.LINETYPE.CRITICAL_OPTION:e.message&&(r=l.pop(),d[r.id]=r,d[e.id]=r,l.push(r));break;case i.db.LINETYPE.LOOP_END:case i.db.LINETYPE.ALT_END:case i.db.LINETYPE.OPT_END:case i.db.LINETYPE.PAR_END:case i.db.LINETYPE.CRITICAL_END:case i.db.LINETYPE.BREAK_END:r=l.pop(),d[r.id]=r;break;case i.db.LINETYPE.ACTIVE_START:{const t=s[e.from?e.from.actor:e.to.actor],i=ta(e.from?e.from.actor:e.to.actor).length,o=t.x+t.width/2+(i-1)*n.activationWidth/2,r={startx:o,stopx:o+n.activationWidth,actor:e.from.actor,enabled:!0};a.activations.push(r)}break;case i.db.LINETYPE.ACTIVE_END:{const t=a.activations.map(e=>e.actor).lastIndexOf(e.from.actor);delete a.activations.splice(t,1)[0]}break}const t=e.placement!==void 0;t?(u=Q5(e,s,i),e.noteModel=u,l.forEach(e=>{r=e,r.from=Math.min(r.from,u.startx),r.to=Math.max(r.to,u.startx+u.width),r.width=Math.max(r.width,Math.abs(r.from-r.to))-n.labelBoxWidth})):(c=G5(e,s,i),e.msgModel=c,c.startx&&c.stopx&&l.length>0&&l.forEach(t=>{if(r=t,c.startx===c.stopx){const t=s[e.from],o=s[e.to];r.from=Math.min(t.x-c.width/2,t.x-t.width/2,r.from),r.to=Math.max(o.x+c.width/2,o.x+t.width/2,r.to),r.width=Math.max(r.width,Math.abs(r.to-r.from))-n.labelBoxWidth}else r.from=Math.min(c.startx,r.from),r.to=Math.max(c.stopx,r.to),r.width=Math.max(r.width,c.width)-n.labelBoxWidth}))}),a.activations=[],e.debug("Loop type widths:",d),d},Qu={bounds:a,drawActors:Jc,drawActorsPopup:qu,setConf:Gu,draw:o7},Xc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},l=[1,2],y=[1,3],h=[1,5],n=[1,7],A=[2,5],k=[1,15],S=[1,17],c=[1,21],i=[1,22],d=[1,23],u=[1,24],o=[1,37],m=[1,25],f=[1,26],p=[1,27],g=[1,28],v=[1,29],b=[1,32],j=[1,33],a=[1,34],_=[1,35],w=[1,36],O=[1,39],x=[1,40],C=[1,41],E=[1,42],s=[1,38],z=[1,45],t=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],r=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],M=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],D=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],F={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(t,n,s,o,i,a){var l,d,u,c=a.length-1;switch(i){case 4:return o.setRootDoc(a[c]),a[c];case 5:this.$=[];break;case 6:a[c]!="nl"&&(a[c-1].push(a[c]),this.$=a[c-1]);break;case 7:case 8:this.$=a[c];break;case 9:this.$="nl";break;case 12:this.$=a[c];break;case 13:const e=a[c-1];e.description=o.trimColon(a[c]),this.$=e;break;case 14:this.$={stmt:"relation",state1:a[c-2],state2:a[c]};break;case 15:const t=o.trimColon(a[c]);this.$={stmt:"relation",state1:a[c-3],state2:a[c-1],description:t};break;case 19:this.$={stmt:"state",id:a[c-3],type:"default",description:"",doc:a[c-1]};break;case 20:d=a[c],l=a[c-2].trim(),a[c].match(":")&&(u=a[c].split(":"),d=u[0],l=[l,u[1]]),this.$={stmt:"state",id:d,type:"default",description:l};break;case 21:this.$={stmt:"state",id:a[c-3],type:"default",description:a[c-5],doc:a[c-1]};break;case 22:this.$={stmt:"state",id:a[c],type:"fork"};break;case 23:this.$={stmt:"state",id:a[c],type:"join"};break;case 24:this.$={stmt:"state",id:a[c],type:"choice"};break;case 25:this.$={stmt:"state",id:o.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:a[c-1].trim(),note:{position:a[c-2].trim(),text:a[c].trim()}};break;case 30:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 31:case 32:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:a[c-1].trim(),classes:a[c].trim()};break;case 35:this.$={stmt:"applyClass",id:a[c-1].trim(),styleClass:a[c].trim()};break;case 38:o.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:o.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:o.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:o.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:a[c].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:a[c-2].trim(),classes:[a[c].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:a[c-2].trim(),classes:[a[c].trim()],type:"default",description:""};break;case 50:o.parseDirective("%%{","open_directive");break;case 51:o.parseDirective(a[c],"type_directive");break;case 52:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 53:o.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:l,5:y,6:4,7:h,45:6,60:n},{1:[3]},{3:8,4:l,5:y,6:4,7:h,45:6,60:n},{3:9,4:l,5:y,6:4,7:h,45:6,60:n},{3:10,4:l,5:y,6:4,7:h,45:6,60:n},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],A,{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},{47:43,48:[1,44],63:z},e([48,63],[2,51]),e(t,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:c,17:i,19:d,22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12],{14:[1,47],15:[1,48]}),e(t,[2,16]),{18:[1,49]},e(t,[2,18],{20:[1,50]}),{23:[1,51]},e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},e(t,[2,28]),e(t,[2,29]),{34:[1,56]},{36:[1,57]},e(t,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},e(r,[2,44],{57:[1,61]}),e(r,[2,45],{57:[1,62]}),e(t,[2,38]),e(t,[2,39]),e(t,[2,40]),e(t,[2,41]),e(M,[2,36]),{49:63,62:[1,64]},e(M,[2,53]),e(t,[2,7]),e(t,[2,13]),{13:65,24:o,56:s},e(t,[2,17]),e(D,A,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},e(t,[2,30]),e(t,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:z},{63:[2,52]},e(t,[2,14],{14:[1,76]}),{4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,21:[1,77],22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),e(r,[2,46]),e(r,[2,47]),e(M,[2,37]),e(t,[2,15]),e(t,[2,19]),e(D,A,{8:81}),e(t,[2,26]),e(t,[2,27]),{4:k,5:S,6:30,9:14,10:16,11:18,12:19,13:20,16:c,17:i,19:d,21:[1,82],22:u,24:o,25:m,26:f,27:p,28:g,29:v,32:31,33:b,35:j,37:a,38:_,42:w,45:6,50:O,51:x,52:C,53:E,56:s,60:n},e(t,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},N=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:break;case 11:break;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),n.yytext=n.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),n.yytext=n.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),n.yytext=n.yytext.substr(2).trim(),31;case 69:return this.popState(),n.yytext=n.yytext.slice(0,-8).trim(),31;case 70:return 7;case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return n.yytext=n.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};return e}();F.lexer=N;function T(){this.yy={}}return T.prototype=F,F.Parser=T,new T}(),Xc.parser=Xc,e1=Xc,U5=(e,t)=>{var n;return((n=t?.state)==null?void 0:n.defaultRenderer)!=="dagre-wrapper"&&e.match(/^\s*stateDiagram/)!==null},W5=(e,t)=>{var n;return e.match(/^\s*stateDiagram-v2/)!==null||!!(e.match(/^\s*stateDiagram/)&&((n=t?.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},t1="LR",V5="TB",ea="state",Yc="relation",P5="classDef",L5="applyClass",ms="default",o1="divider",Ic="[*]",c1="start",d1=Ic,h1="end",m1="color",y1="fill",C5="bgFill",x5=",";function O5(){return{}}O1=t1,Ui=[],ks=O5(),C1=()=>({relations:[],states:{},documents:{}}),Vi={root:C1()},X=Vi.root,Ds=0,E1=0,_5={LINE:0,DOTTED_LINE:1},j5={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Ni=e=>JSON.parse(JSON.stringify(e)),g5=function(e,t,n){w.parseDirective(this,e,t,n)},p5=t=>{e.info("Setting root doc",t),Ui=t},m5=()=>Ui,Di=(e,t,n)=>{if(t.stmt===Yc)Di(e,t.state1,!0),Di(e,t.state2,!1);else if(t.stmt===ea&&t.id==="[*]"&&(t.id=n?e.id+"_start":e.id+"_end",t.start=n),t.doc){const s=[];let n=[],e;for(e=0;e<t.doc.length;e++)if(t.doc[e].type===o1){const o=Ni(t.doc[e]);o.doc=Ni(n),s.push(o),n=[]}else n.push(t.doc[e]);if(s.length>0&&n.length>0){const e={stmt:ea,id:g4(),type:"divider",doc:Ni(n)};s.push(Ni(e)),t.doc=s}t.doc.forEach(e=>Di(t,e,!0))}},l5=()=>(Di({id:"root"},{id:"root",doc:Ui},!0),{id:"root",doc:Ui}),r5=t=>{let n;t.doc?n=t.doc:n=t,e.info(n),A1(!0),e.info("Extract",n),n.forEach(e=>{switch(e.stmt){case ea:nn(e.id,e.type,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles);break;case Yc:L1(e.state1,e.state2,e.description);break;case P5:V1(e.id,e.classes);break;case L5:kc(e.id,e.styleClass);break}})},nn=function(n,s=ms,o=null,i=null,a=null,r=null,c=null,l=null){if(X.states[n]===void 0?(e.info("Adding state ",n,i),X.states[n]={id:n,descriptions:[],type:s,doc:o,note:a,classes:[],styles:[],textStyles:[]}):(X.states[n].doc||(X.states[n].doc=o),X.states[n].type||(X.states[n].type=s)),i&&(e.info("Setting state description",n,i),typeof i=="string"&&Sc(n,i.trim()),typeof i=="object"&&i.forEach(e=>Sc(n,e.trim()))),a&&(X.states[n].note=a,X.states[n].note.text=h.sanitizeText(X.states[n].note.text,t())),r){e.info("Setting state classes",n,r);const t=typeof r=="string"?[r]:r;t.forEach(e=>kc(n,e.trim()))}if(c){e.info("Setting state styles",n,c);const t=typeof c=="string"?[c]:c;t.forEach(e=>Yg(n,e.trim()))}if(l){e.info("Setting state styles",n,c);const t=typeof l=="string"?[l]:l;t.forEach(e=>Ug(n,e.trim()))}},A1=function(e){Vi={root:C1()},X=Vi.root,Ds=0,ks=O5(),e||Ne()},Rs=function(e){return X.states[e]},i5=function(){return X.states},o5=function(){e.info("Documents = ",Vi)},s5=function(){return X.relations};function F1(e=""){let t=e;return e===Ic&&(Ds++,t=`${c1}${Ds}`),t}function T1(e="",t=ms){return e===Ic?c1:t}function SH(e=""){let t=e;return e===d1&&(Ds++,t=`${h1}${Ds}`),t}function MH(e="",t=ms){return e===d1?h1:t}function FH(e,n,s){let o=F1(e.id),a=T1(e.id,e.type),i=F1(n.id),r=T1(n.id,n.type);nn(o,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),nn(i,r,n.doc,n.description,n.note,n.classes,n.styles,n.textStyles),X.relations.push({id1:o,id2:i,relationTitle:h.sanitizeText(s,t())})}L1=function(e,n,s){if(typeof e=="object")FH(e,n,s);else{const o=F1(e),a=T1(e),i=SH(n),r=MH(n);nn(o,a),nn(i,r),X.relations.push({id1:o,id2:i,title:h.sanitizeText(s,t())})}},Sc=function(e,n){const s=X.states[e],o=n.startsWith(":")?n.replace(":","").trim():n;s.descriptions.push(h.sanitizeText(o,t()))},t5=function(e){return e.substring(0,1)===":"?e.substr(2).trim():e.trim()},e5=()=>(E1++,"divider-id-"+E1),V1=function(e,t=""){ks[e]===void 0&&(ks[e]={id:e,styles:[],textStyles:[]});const n=ks[e];t!=null&&t.split(x5).forEach(e=>{const t=e.replace(/([^;]*);/,"$1").trim();if(e.match(m1)){const e=t.replace(y1,C5),s=e.replace(m1,y1);n.textStyles.push(s)}n.styles.push(t)})},Qg=function(){return ks},kc=function(e,t){e.split(",").forEach(function(e){let n=Rs(e);if(n===void 0){const t=e.trim();nn(t),n=Rs(t)}n.classes.push(t)})},Yg=function(e,t){const n=Rs(e);n!==void 0&&n.textStyles.push(t)},Ug=function(e,t){const n=Rs(e);n!==void 0&&n.textStyles.push(t)},$g=()=>O1,Vg=e=>{O1=e},Hg=e=>e&&e[0]===":"?e.substr(1).trim():e.trim(),et={parseDirective:g5,getConfig:()=>t().state,addState:nn,clear:A1,getState:Rs,getStates:i5,getRelations:s5,getClasses:Qg,getDirection:$g,addRelation:L1,getDividerId:e5,setDirection:Vg,cleanupLabel:t5,lineType:_5,relationType:j5,logDocuments:o5,getRootDoc:m5,setRootDoc:p5,getRootDocV2:l5,extract:r5,trimColon:Hg,getAccTitle:Le,setAccTitle:pe,getAccDescription:ze,setAccDescription:xe,addStyleClass:V1,setCssClass:kc,addDescription:Sc,setDiagramTitle:vt,getDiagramTitle:Ot},Ec={},Rg=(e,t)=>{Ec[e]=t},Ng=e=>Ec[e],Q1=()=>Object.keys(Ec),zg=()=>Q1().length,Tg={get:Ng,set:Rg,keys:Q1,size:zg},Fg=e=>e.append("circle").attr("class","start-state").attr("r",t().state.sizeUnit).attr("cx",t().state.padding+t().state.sizeUnit).attr("cy",t().state.padding+t().state.sizeUnit),Sg=e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",t().state.textHeight).attr("class","divider").attr("x2",t().state.textHeight*2).attr("y1",0).attr("y2",0),Cg=(e,n)=>{const s=e.append("text").attr("x",2*t().state.padding).attr("y",t().state.textHeight+2*t().state.padding).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.id),o=s.node().getBBox();return e.insert("rect",":first-child").attr("x",t().state.padding).attr("y",t().state.padding).attr("width",o.width+2*t().state.padding).attr("height",o.height+2*t().state.padding).attr("rx",t().state.radius),s},Og=(e,n)=>{const d=function(e,n,s){const o=e.append("tspan").attr("x",2*t().state.padding).text(n);s||o.attr("dy",t().state.textHeight)},u=e.append("text").attr("x",2*t().state.padding).attr("y",t().state.textHeight+1.3*t().state.padding).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.descriptions[0]),o=u.node().getBBox(),s=o.height,i=e.append("text").attr("x",t().state.padding).attr("y",s+t().state.padding*.4+t().state.dividerMargin+t().state.textHeight).attr("class","state-description");let a=!0,r=!0;n.descriptions.forEach(function(e){a||(d(i,e,r),r=!1),a=!1});const h=e.append("line").attr("x1",t().state.padding).attr("y1",t().state.padding+s+t().state.dividerMargin/2).attr("y2",t().state.padding+s+t().state.dividerMargin/2).attr("class","descr-divider"),c=i.node().getBBox(),l=Math.max(c.width,o.width);return h.attr("x2",l+3*t().state.padding),e.insert("rect",":first-child").attr("x",t().state.padding).attr("y",t().state.padding).attr("width",l+2*t().state.padding).attr("height",c.height+s+2*t().state.padding).attr("rx",t().state.radius),e},_g=(e,n,s)=>{const c=t().state.padding,d=2*t().state.padding,m=e.node().getBBox(),i=m.width,l=m.x,u=e.append("text").attr("x",0).attr("y",t().state.titleShift).attr("font-size",t().state.fontSize).attr("class","state-title").text(n.id),f=u.node().getBBox(),r=f.width+d;let o=Math.max(r,i);o===i&&(o=o+d);let a;const h=e.node().getBBox();n.doc,a=l-c,r>i&&(a=(i-o)/2+c),Math.abs(l-h.x)<c&&r>i&&(a=l-(r-i)/2);const p=1-t().state.textHeight;return e.insert("rect",":first-child").attr("x",a).attr("y",p).attr("class",s?"alt-composit":"composit").attr("width",o).attr("height",h.height+t().state.textHeight+t().state.titleShift+1).attr("rx","0"),u.attr("x",a+c),r<=i&&u.attr("x",l+(o-d)/2-r/2+c),e.insert("rect",":first-child").attr("x",a).attr("y",t().state.titleShift-t().state.textHeight-t().state.padding).attr("width",o).attr("height",t().state.textHeight*3).attr("rx",t().state.radius),e.insert("rect",":first-child").attr("x",a).attr("y",t().state.titleShift-t().state.textHeight-t().state.padding).attr("width",o).attr("height",h.height+3+2*t().state.textHeight).attr("rx",t().state.radius),e},jg=e=>(e.append("circle").attr("class","end-state-outer").attr("r",t().state.sizeUnit+t().state.miniPadding).attr("cx",t().state.padding+t().state.sizeUnit+t().state.miniPadding).attr("cy",t().state.padding+t().state.sizeUnit+t().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",t().state.sizeUnit).attr("cx",t().state.padding+t().state.sizeUnit+2).attr("cy",t().state.padding+t().state.sizeUnit+2)),vg=(e,n)=>{let s=t().state.forkWidth,o=t().state.forkHeight;if(n.parentId){let e=s;s=o,o=e}return e.append("rect").style("stroke","black").style("fill","black").attr("width",s).attr("height",o).attr("x",t().state.padding).attr("y",t().state.padding)},pg=(e,n,s,o)=>{let a=0;const i=o.append("text");i.style("text-anchor","start"),i.attr("class","noteText");let r=e.replace(/\r\n/g,"<br/>");r=r.replace(/\n/g,"<br/>");const l=r.split(h.lineBreakRegex);let c=1.25*t().state.noteMargin;for(const o of l){const e=o.trim();if(e.length>0){const o=i.append("tspan");if(o.text(e),c===0){const e=o.node().getBBox();c+=e.height}a+=c,o.attr("x",n+t().state.noteMargin),o.attr("y",s+a+1.25*t().state.noteMargin)}}return{textWidth:i.node().getBBox().width,textHeight:a}},mg=(e,n)=>{n.attr("class","state-note");const s=n.append("rect").attr("x",0).attr("y",t().state.padding),o=n.append("g"),{textWidth:i,textHeight:a}=pg(e,0,0,o);return s.attr("height",a+2*t().state.noteMargin),s.attr("width",i+t().state.noteMargin*2),s},J1=function(e,n){const i=n.id,o={id:i,label:n.id,width:0,height:0},s=e.append("g").attr("id",i).attr("class","stateGroup");n.type==="start"&&Fg(s),n.type==="end"&&jg(s),(n.type==="fork"||n.type==="join")&&vg(s,n),n.type==="note"&&mg(n.note.text,s),n.type==="divider"&&Sg(s),n.type==="default"&&n.descriptions.length===0&&Cg(s,n),n.type==="default"&&n.descriptions.length>0&&Og(s,n);const a=s.node().getBBox();return o.width=a.width+2*t().state.padding,o.height=a.height+2*t().state.padding,Tg.set(i,o),o},e4=0,ug=function(n,s,o){const a=function(e){switch(e){case et.relationType.AGGREGATION:return"aggregation";case et.relationType.EXTENSION:return"extension";case et.relationType.COMPOSITION:return"composition";case et.relationType.DEPENDENCY:return"dependency"}};s.points=s.points.filter(e=>!Number.isNaN(e.y));const r=s.points,c=js().x(function(e){return e.x}).y(function(e){return e.y}).curve(Cs),l=n.append("path").attr("d",c(r)).attr("id","edge"+e4).attr("class","transition");let i="";if(t().state.arrowMarkerAbsolute&&(i=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,i=i.replace(/\(/g,"\\("),i=i.replace(/\)/g,"\\)")),l.attr("marker-end","url("+i+"#"+a(et.relationType.DEPENDENCY)+"End)"),o.title!==void 0){const l=n.append("g").attr("class","stateLabel"),{x:d,y:r}=p.calcLabelPosition(s.points),a=h.getRows(o.title);let i=0;const m=[];let c=0,f=0;for(let t=0;t<=a.length;t++){const n=l.append("text").attr("text-anchor","middle").text(a[t]).attr("x",d).attr("y",r+i),s=n.node().getBBox();if(c=Math.max(c,s.width),f=Math.min(f,s.x),e.info(s.x,d,r+i),i===0){const t=n.node().getBBox();i=t.height,e.info("Title height",i,r)}m.push(n)}let u=i*a.length;if(a.length>1){const e=(a.length-1)*i*.5;m.forEach((t,n)=>t.attr("y",r+n*i-e)),u=i*a.length}const g=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",d-c/2-t().state.padding/2).attr("y",r-u/2-t().state.padding/2-3.5).attr("width",c+t().state.padding).attr("height",u+t().state.padding),e.info(g)}e4++},Cc={},ig=function(){},ng=function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},eg=function(n,s,o,a){Oe=t().state;const l=t().securityLevel;let d;l==="sandbox"&&(d=i("#i"+s));const u=i(l==="sandbox"?d.nodes()[0].contentDocument.body:"body"),p=l==="sandbox"?d.nodes()[0].contentDocument:document;e.debug("Rendering diagram "+n);const r=u.select(`[id='${s}']`);ng(r);const g=new F({multigraph:!0,compound:!0,rankdir:"RL"});g.setDefaultEdgeLabel(function(){return{}});const v=a.db.getRootDoc();n4(v,r,void 0,!1,u,p,a);const h=Oe.padding,c=r.node().getBBox(),m=c.width+h*2,f=c.height+h*2,b=m*1.75;Me(r,f,b,Oe.useMaxWidth),r.attr("viewBox",`${c.x-Oe.padding}  ${c.y-Oe.padding} `+m+" "+f)},Qp=e=>e?e.length*Oe.fontSizeFactor:1,n4=(t,n,s,o,i,a,r)=>{const c=new F({compound:!0,multigraph:!0});let u,l=!0;for(u=0;u<t.length;u++)if(t[u].stmt==="relation"){l=!1;break}s?c.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:l?1:Oe.edgeLengthFactor,nodeSep:l?1:50,isMultiGraph:!0}):c.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:l?1:Oe.edgeLengthFactor,nodeSep:l?1:50,ranker:"tight-tree",isMultiGraph:!0}),c.setDefaultEdgeLabel(function(){return{}}),r.db.extract(t);const p=r.db.getStates(),v=r.db.getRelations(),b=Object.keys(p);for(const l of b){const t=p[l];s&&(t.parentId=s);let e;if(t.doc){let s=n.append("g").attr("id",t.id).attr("class","stateGroup");e=n4(t.doc,s,t.id,!o,i,a,r);{s=_g(s,t,o);let n=s.node().getBBox();e.width=n.width,e.height=n.height+Oe.padding/2,Cc[t.id]={y:Oe.compositTitleSize}}}else e=J1(n,t);if(t.note){const o={descriptions:[],id:t.id+"-note",note:t.note,type:"note"},s=J1(n,o);t.note.position==="left of"?(c.setNode(e.id+"-note",s),c.setNode(e.id,e)):(c.setNode(e.id,e),c.setNode(e.id+"-note",s)),c.setParent(e.id,e.id+"-group"),c.setParent(e.id+"-note",e.id+"-group")}else c.setNode(e.id,e)}e.debug("Count=",c.nodeCount(),c);let g=0;v.forEach(function(t){g++,e.debug("Setting edge",t),c.setEdge(t.id1,t.id2,{relation:t,width:Qp(t.title),height:Oe.labelHeight*h.getRows(t.title).length,labelpos:"c"},"id"+g)}),Bs(c),e.debug("Graph after layout",c.nodes());const d=n.node();c.nodes().forEach(function(t){if(t!==void 0&&c.node(t)!==void 0){e.warn("Node "+t+": "+JSON.stringify(c.node(t))),i.select("#"+d.id+" #"+t).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y+(Cc[t]?Cc[t].y:0)-c.node(t).height/2)+" )"),i.select("#"+d.id+" #"+t).attr("data-x-shift",c.node(t).x-c.node(t).width/2);const n=a.querySelectorAll("#"+d.id+" #"+t+" .divider");n.forEach(e=>{const n=e.parentElement;let s=0,t=0;n&&(n.parentElement&&(s=n.parentElement.getBBox().width),t=parseInt(n.getAttribute("data-x-shift"),10),Number.isNaN(t)&&(t=0)),e.setAttribute("x1",0-t+8),e.setAttribute("x2",s-t-8)})}else e.debug("No Node "+t+": "+JSON.stringify(c.node(t)))});let f=d.getBBox();c.edges().forEach(function(t){t!==void 0&&c.edge(t)!==void 0&&(e.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),ug(n,c.edge(t),c.edge(t).relation))}),f=d.getBBox();const m={id:s||"root",label:s||"root",width:0,height:0};return m.width=f.width+2*Oe.padding,m.height=f.height+2*Oe.padding,e.debug("Doc rendered",m,c),m},Kp={setConf:ig,draw:eg},Ci="rect",xc="rectWithTitle",Up="start",Wp="end",Mp="divider",Sp="roundedWithTitle",kp="note",Ep="noteGroup",kn="statediagram",Cp="state",wp=`${kn}-${Cp}`,o4="transition",_p="note",jp="note-edge",bp=`${o4} ${jp}`,vp=`${kn}-${_p}`,pp="cluster",mp=`${kn}-${pp}`,dp="cluster-alt",ap=`${kn}-${dp}`,i4="parent",a4="note",op="state",yc="----",np=`${yc}${a4}`,_4=`${yc}${i4}`,O4="fill:none",x4="fill: #333",C4="c",k4="text",A4="normal",Ho={},Mt=0,w6=function(e){const t=Object.keys(e);for(const n of t)e[n]},b6=function(t,n){e.trace("Extracting classes"),n.db.clear();try{return n.parser.parse(t),n.db.extract(n.db.getRootDocV2()),n.db.getClasses()}catch(e){return e}};function ZI(e){return e==null?"":e.classes?e.classes.join(" "):""}function S4(e="",t=0,n="",s=yc){const o=n!==null&&n.length>0?`${s}${n}`:"";return`${op}-${e}${o}-${t}`}No=(n,s,o,i,a,r)=>{const c=o.id,l=ZI(i[c]);if(c!=="root"){let i=Ci;o.start===!0&&(i=Up),o.start===!1&&(i=Wp),o.type!==ms&&(i=o.type),Ho[c]||(Ho[c]={id:c,shape:i,description:h.sanitizeText(c,t()),classes:`${l} ${wp}`});const s=Ho[c];o.description&&(Array.isArray(s.description)?(s.shape=xc,s.description.push(o.description)):s.description.length>0?(s.shape=xc,s.description===c?s.description=[o.description]:s.description=[s.description,o.description]):(s.shape=Ci,s.description=o.description),s.description=h.sanitizeTextOrArray(s.description,t())),s.description.length===1&&s.shape===xc&&(s.shape=Ci),!s.type&&o.doc&&(e.info("Setting cluster for ",c,dc(o)),s.type="group",s.dir=dc(o),s.shape=o.type===o1?Mp:Sp,s.classes=s.classes+" "+mp+" "+(r?ap:""));const a={labelStyle:"",shape:s.shape,labelText:s.description,classes:s.classes,style:"",id:c,dir:s.dir,domId:S4(c,Mt),type:s.type,padding:15};if(o.note){const e={labelStyle:"",shape:kp,labelText:o.note.text,classes:vp,style:"",id:c+np+"-"+Mt,domId:S4(c,Mt,a4),type:s.type,padding:15},l={labelStyle:"",shape:Ep,labelText:o.note.text,classes:s.classes,style:"",id:c+_4,domId:S4(c,Mt,i4),type:"group",padding:0};Mt++;const t=c+_4;n.setNode(t,l),n.setNode(e.id,e),n.setNode(c,a),n.setParent(c,t),n.setParent(e.id,t);let i=c,r=e.id;o.note.position==="left of"&&(i=e.id,r=c),n.setEdge(i,r,{arrowhead:"none",arrowType:"",style:O4,labelStyle:"",classes:bp,arrowheadStyle:x4,labelpos:C4,labelType:k4,thickness:A4})}else n.setNode(c,a)}s&&s.id!=="root"&&(e.trace("Setting node ",c," to be child of its parent ",s.id),n.setParent(c,s.id)),o.doc&&(e.trace("Adding nodes children "),g6(n,o,o.doc,i,a,!r))},g6=(n,s,o,i,a,r)=>{e.trace("items",o),o.forEach(e=>{switch(e.stmt){case ea:No(n,s,e,i,a,r);break;case ms:No(n,s,e,i,a,r);break;case Yc:{No(n,s,e.state1,i,a,r),No(n,s,e.state2,i,a,r);const o={id:"edge"+Mt,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:O4,labelStyle:"",label:h.sanitizeText(e.description,t()),arrowheadStyle:x4,labelpos:C4,labelType:k4,thickness:A4,classes:o4};n.setEdge(e.state1.id,e.state2.id,o,Mt),Mt++}break}})},dc=(e,t=V5)=>{let n=t;if(e.doc)for(let t=0;t<e.doc.length;t++){const s=e.doc[t];s.stmt==="dir"&&(n=s.value)}return n},m6=function(n,s,o,a){e.info("Drawing state diagram (v2)",s),Ho={};let y=a.db.getDirection();y===void 0&&(y=t1);const{securityLevel:j,state:l}=t(),O=l.nodeSpacing||50,_=l.rankSpacing||50;e.info(a.db.getRootDocV2()),a.db.extract(a.db.getRootDocV2()),e.info(a.db.getRootDocV2());const x=a.db.getStates(),m=new F({multigraph:!0,compound:!0}).setGraph({rankdir:dc(a.db.getRootDocV2()),nodesep:O,ranksep:_,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});No(m,void 0,a.db.getRootDocV2(),x,a.db,!0);let f;j==="sandbox"&&(f=i("#i"+s));const g=i(j==="sandbox"?f.nodes()[0].contentDocument.body:"body"),r=g.select(`[id="${s}"]`),w=g.select("#"+s+" g");Xr(w,m,["barb"],kn,s);const c=8;p.insertTitle(r,"statediagramTitleText",l.titleTopMargin,a.db.getDiagramTitle());const d=r.node().getBBox(),u=d.width+c*2,b=d.height+c*2;r.attr("class",kn);const v=r.node().getBBox();Me(r,b,u,l.useMaxWidth);const h=`${v.x-c} ${v.y-c} ${u} ${b}`;e.debug(`viewBox ${h}`),r.attr("viewBox",h);const C=document.querySelectorAll('[id="'+s+'"] .edgeLabel .label');for(const t of C){const n=t.getBBox(),e=document.createElementNS("http://www.w3.org/2000/svg",Ci);e.setAttribute("rx",0),e.setAttribute("ry",0),e.setAttribute("width",n.width),e.setAttribute("height",n.height),t.insertBefore(e,t.firstChild)}},u6={setConf:w6,getClasses:b6,draw:m6},lc=function(){var e=function(e,t,n,s){for(n=n||{},s=e.length;s--;n[e[s]]=t);return n},m=[1,2],n=[1,5],t=[6,9,11,17,18,20,22,23,24,26],h=[1,15],a=[1,16],i=[1,17],r=[1,18],c=[1,19],l=[1,20],d=[1,24],u=[4,6,9,11,17,18,20,22,23,24,26],o={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,n,s,o,i,a){var c=a.length-1;switch(i){case 1:return a[c-1];case 3:this.$=[];break;case 4:a[c-1].push(a[c]),this.$=a[c-1];break;case 5:case 6:this.$=a[c];break;case 7:case 8:this.$=[];break;case 11:o.setDiagramTitle(a[c].substr(6)),this.$=a[c].substr(6);break;case 12:this.$=a[c].trim(),o.setAccTitle(this.$);break;case 13:case 14:this.$=a[c].trim(),o.setAccDescription(this.$);break;case 15:o.addSection(a[c].substr(8)),this.$=a[c].substr(8);break;case 16:o.addTask(a[c-1],a[c]),this.$="task";break;case 18:o.parseDirective("%%{","open_directive");break;case 19:o.parseDirective(a[c],"type_directive");break;case 20:a[c]=a[c].trim().replace(/'/g,'"'),o.parseDirective(a[c],"arg_directive");break;case 21:o.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:m,7:3,12:4,26:n},{1:[3]},e(t,[2,3],{5:6}),{3:7,4:m,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:h,18:a,20:i,22:r,23:c,24:l,26:n},{1:[2,2]},{14:22,15:[1,23],29:d},e([15,29],[2,19]),e(t,[2,8],{1:[2,1]}),e(t,[2,4]),{7:21,10:25,12:4,17:h,18:a,20:i,22:r,23:c,24:l,26:n},e(t,[2,6]),e(t,[2,7]),e(t,[2,11]),{19:[1,26]},{21:[1,27]},e(t,[2,14]),e(t,[2,15]),{25:[1,28]},e(t,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},e(t,[2,5]),e(t,[2,12]),e(t,[2,13]),e(t,[2,16]),e(u,[2,9]),{14:32,29:d},{29:[2,20]},{11:[1,33]},e(u,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var o,a,r,c,d,f,p,g,v,b,j,_,x,k=this,i=[0],y=[],l=[null],n=[],h=this.table,C="",m=0,O=0,S=2,w=1,A=n.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(u.yy[b]=this.yy[b]);s.setInput(t,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc=="undefined"&&(s.yylloc={}),v=s.yylloc,n.push(v),_=s.options&&s.options.ranges,typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var e=y.pop()||s.lex()||w;return typeof e!="number"&&(e instanceof Array&&(y=e,e=y.pop()),e=k.symbols_[e]||e),e}for(c={};!0;){if(d=i[i.length-1],this.defaultActions[d]?a=this.defaultActions[d]:((o===null||typeof o=="undefined")&&(o=E()),a=h[d]&&h[d][o]),typeof a=="undefined"||!a.length||!a[0]){p="",g=[];for(f in h[d])this.terminals_[f]&&f>S&&g.push("'"+this.terminals_[f]+"'");s.showPosition?p="Parse error on line "+(m+1)+`:
`+s.showPosition()+`
Expecting `+g.join(", ")+", got '"+(this.terminals_[o]||o)+"'":p="Parse error on line "+(m+1)+": Unexpected "+(o==w?"end of input":"'"+(this.terminals_[o]||o)+"'"),this.parseError(p,{text:s.match,token:this.terminals_[o]||o,line:s.yylineno,loc:v,expected:g})}if(a[0]instanceof Array&&a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+o);switch(a[0]){case 1:i.push(o),l.push(s.yytext),n.push(s.yylloc),i.push(a[1]),o=null,O=s.yyleng,C=s.yytext,m=s.yylineno,v=s.yylloc;break;case 2:if(r=this.productions_[a[1]][1],c.$=l[l.length-r],c._$={first_line:n[n.length-(r||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(r||1)].first_column,last_column:n[n.length-1].last_column},_&&(c._$.range=[n[n.length-(r||1)].range[0],n[n.length-1].range[1]]),j=this.performAction.apply(c,[C,O,m,u.yy,a[1],l,n].concat(A)),typeof j!="undefined")return j;r&&(i=i.slice(0,-1*r*2),l=l.slice(0,-1*r),n=n.slice(0,-1*r)),i.push(this.productions_[a[1]][0]),l.push(c.$),n.push(c._$),x=h[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},f=function(){var e={EOF:1,parseError:function(t,n){if(this.yy.parser)this.yy.parser.parseError(t,n);else throw new Error(t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t,e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,t=e.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var s,o,n=e.length,t=e.split(/(?:\r\n?|\n)/g);return this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n),this.offset-=n,s=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),o=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===s.length?this.yylloc.first_column:0)+s[s.length-t.length].length-t[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-n]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+`
`+t+"^"},test_match:function(e,t){var n,s,o,i;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),n=e[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],o=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(i in s)this[i]=s[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,n,i,o=this._currentRules(),s=0;s<o.length;s++)if(n=this._input.match(this.rules[o[s]]),n&&(!t||n[0].length>t[0].length))if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,o[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}else if(!this.options.flex)break;return t?(e=this.test_match(t,o[i]),e!==!1&&e):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,n,s){switch(s){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[}])/i,/^(?:[^}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return e}();o.lexer=f;function s(){this.yy={}}return s.prototype=o,o.Parser=s,new s}(),lc.parser=lc,Vf=lc,Pf=e=>e.match(/^\s*journey/)!==null,Gn="",ac=[],Do=[],zo=[],Sf=function(e,t,n){w.parseDirective(this,e,t,n)},Ef=function(){ac.length=0,Do.length=0,Gn="",zo.length=0,Ne()},bf=function(e){Gn=e,ac.push(e)},lf=function(){return ac},af=function(){let e=N4();const n=100;let t=0;for(;!e&&t<n;)e=N4(),t++;return Do.push(...zo),Do},nf=function(){const e=[];Do.forEach(t=>{t.people&&e.push(...t.people)});const t=new Set(e);return[...t].sort()},ef=function(e,t){const n=t.substr(1).split(":");let s=0,o=[];n.length===1?(s=Number(n[0]),o=[]):(s=Number(n[0]),o=n[1].split(","));const i=o.map(e=>e.trim()),a={section:Gn,type:Gn,people:i,task:e,score:s};zo.push(a)},Z8=function(e){const t={section:Gn,type:Gn,description:e,task:e,classes:[]};Do.push(t)},N4=function(){const t=function(e){return zo[e].processed};let e=!0;for(const[n,s]of zo.entries())t(n),e=e&&s.processed;return e},Q8=function(){return nf()},L4={parseDirective:Sf,getConfig:()=>t().journey,clear:Ef,setDiagramTitle:vt,getDiagramTitle:Ot,setAccTitle:pe,getAccTitle:Le,setAccDescription:xe,getAccDescription:ze,addSection:bf,getSections:lf,getTasks:af,addTask:ef,addTaskOrg:Z8,getActors:Q8},Uo=function(e,t){const n=e.append("rect");return n.attr("x",t.x),n.attr("y",t.y),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("width",t.width),n.attr("height",t.height),n.attr("rx",t.rx),n.attr("ry",t.ry),t.class!==void 0&&n.attr("class",t.class),n},K8=function(e,t){const n=15,o=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",n).attr("stroke-width",2).attr("overflow","visible"),s=e.append("g");s.append("circle").attr("cx",t.cx-n/3).attr("cy",t.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",t.cx+n/3).attr("cy",t.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function i(e){const s=kd().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(n/2).outerRadius(n/2.2);e.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}function a(e){const s=kd().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(n/2).outerRadius(n/2.2);e.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}function r(e){e.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return t.score>3?i(s):t.score<3?a(s):r(s),o},H4=function(e,t){const n=e.append("circle");return n.attr("cx",t.cx),n.attr("cy",t.cy),n.attr("class","actor-"+t.pos),n.attr("fill",t.fill),n.attr("stroke",t.stroke),n.attr("r",t.r),n.class!==void 0&&n.attr("class",n.class),t.title!==void 0&&n.append("title").text(t.title),n},I4=function(e,t){const o=t.text.replace(/<br\s*\/?>/gi," "),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.attr("class","legend"),n.style("text-anchor",t.anchor),t.class!==void 0&&n.attr("class",t.class);const s=n.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.text(o),n},I8=function(e,t){function s(e,t,n,s,o){return e+","+t+" "+(e+n)+","+t+" "+(e+n)+","+(t+s-o)+" "+(e+n-o*1.2)+","+(t+s)+" "+e+","+(t+s)}const n=e.append("polygon");n.attr("points",s(t.x,t.y,50,20,7)),n.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,I4(e,t)},P8=function(e,t,n){const o=e.append("g"),s=Zr();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=n.width,s.height=n.height,s.class="journey-section section-type-"+t.num,s.rx=3,s.ry=3,Uo(o,s),t0(n)(t.text,o,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+t.num},n,t.colour)},W4=-1,L8=function(e,t,n){const i=t.x+n.width/2,o=e.append("g");W4++;const r=300+5*30;o.append("line").attr("id","task"+W4).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",r).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),K8(o,{cx:i,cy:300+(5-t.score)*30,score:t.score});const s=Zr();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=n.width,s.height=n.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,Uo(o,s);let a=t.x+14;t.people.forEach(e=>{const n=t.actors[e].color,s={cx:a,cy:t.y,r:7,fill:n,stroke:"#000",title:e,pos:t.actors[e].position};H4(o,s),a+=10}),t0(n)(t.task,o,s.x,s.y,s.width,s.height,{class:"task"},n,t.colour)},D8=function(e,t){const n=Uo(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"});n.lower()},F8=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Zr=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},t0=function(){function n(t,n,s,o,i,a,r,c){const l=n.append("text").attr("x",s+i/2).attr("y",o+a/2+5).style("font-color",c).style("text-anchor","middle").text(t);e(l,r)}function t(t,n,s,o,i,a,r,c,l){const{taskFontSize:d,taskFontFamily:h}=c,u=t.split(/<br\s*\/?>/gi);for(let t=0;t<u.length;t++){const m=t*d-d*(u.length-1)/2,c=n.append("text").attr("x",s+i/2).attr("y",o).attr("fill",l).style("text-anchor","middle").style("font-size",d).style("font-family",h);c.append("tspan").attr("x",s+i/2).attr("dy",m).text(u[t]),c.attr("y",o+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),e(c,r)}}function s(n,s,o,i,a,r,c,l){const d=s.append("switch"),h=d.append("foreignObject").attr("x",o).attr("y",i).attr("width",a).attr("height",r).attr("position","fixed"),u=h.append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,d,o,i,a,r,c,l),e(u,c)}function e(e,t){for(const n in t)n in t&&e.attr(n,t[n])}return function(e){return e.textPlacement==="fo"?s:e.textPlacement==="old"?n:t}}(),k8=function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},mo={drawRect:Uo,drawCircle:H4,drawSection:P8,drawText:I4,drawLabel:I8,drawTask:L8,drawBackgroundRect:D8,getTextObj:F8,getNoteRect:Zr,initGraphics:k8},O8=function(e){const t=Object.keys(e);t.forEach(function(t){ai[t]=e[t]})},ut={};function HB(e){const s=t().journey;let n=60;Object.keys(ut).forEach(t=>{const o=ut[t].color,i={cx:20,cy:n,r:7,fill:o,stroke:"#000",pos:ut[t].position};mo.drawCircle(e,i);const a={x:40,y:n+7,fill:"#666",text:t,textMargin:s.boxTextMargin|5};mo.drawText(e,a),n+=20})}ai=t().journey,Zt=ai.leftMargin,b8=function(e,n,s,o){const r=t().journey;o.db.clear(),o.parser.parse(e+`
`);const f=t().securityLevel;let m;f==="sandbox"&&(m=i("#i"+n));const g=i(f==="sandbox"?m.nodes()[0].contentDocument.body:"body");ve.init();const a=g.select("#"+n);mo.initGraphics(a);const v=o.db.getTasks(),l=o.db.getDiagramTitle(),b=o.db.getActors();for(const e in ut)delete ut[e];let d=0;b.forEach(e=>{ut[e]={color:r.actorColours[d%r.actorColours.length],position:d},d++}),HB(a),ve.insert(0,0,Zt,Object.keys(ut).length*50),f8(a,v,0);const c=ve.getBounds();l&&a.append("text").text(l).attr("x",Zt).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const u=c.stopy-c.starty+2*r.diagramMarginY,h=Zt+c.stopx+2*r.diagramMarginX;Me(a,u,h,r.useMaxWidth),a.append("line").attr("x1",Zt).attr("y1",r.height*4).attr("x2",h-Zt-4).attr("y2",r.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const p=l?70:0;a.attr("viewBox",`${c.startx} -25 ${h} ${u+p}`),a.attr("preserveAspectRatio","xMinYMin meet"),a.attr("height",u+p+25)},ve={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(e,t,n,s){e[t]===void 0?e[t]=n:e[t]=s(n,e[t])},updateBounds:function(e,n,s,o){const a=t().journey,i=this;let r=0;function c(t){return function(l){r++;const d=i.sequenceItems.length-r+1;i.updateVal(l,"starty",n-d*a.boxMargin,Math.min),i.updateVal(l,"stopy",o+d*a.boxMargin,Math.max),i.updateVal(ve.data,"startx",e-d*a.boxMargin,Math.min),i.updateVal(ve.data,"stopx",s+d*a.boxMargin,Math.max),t==="activation"||(i.updateVal(l,"startx",e-d*a.boxMargin,Math.min),i.updateVal(l,"stopx",s+d*a.boxMargin,Math.max),i.updateVal(ve.data,"starty",n-d*a.boxMargin,Math.min),i.updateVal(ve.data,"stopy",o+d*a.boxMargin,Math.max))}}this.sequenceItems.forEach(c())},insert:function(e,t,n,s){const o=Math.min(e,n),i=Math.max(e,n),a=Math.min(t,s),r=Math.max(t,s);this.updateVal(ve.data,"startx",o,Math.min),this.updateVal(ve.data,"starty",a,Math.min),this.updateVal(ve.data,"stopx",i,Math.max),this.updateVal(ve.data,"stopy",r,Math.max),this.updateBounds(o,a,i,r)},bumpVerticalPos:function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Wr=ai.sectionFills,p0=ai.sectionColours,f8=function(e,n,s){const o=t().journey;let l="";const d=o.height*2+o.diagramMarginY,u=s+d;let i=0,a="#CCC",r="black",c=0;for(const[s,t]of n.entries()){if(l!==t.section){a=Wr[i%Wr.length],c=i%Wr.length,r=p0[i%p0.length];const n={x:s*o.taskMargin+s*o.width+Zt,y:50,text:t.section,fill:a,num:c,colour:r};mo.drawSection(e,n,o),l=t.section,i++}const d=t.people.reduce((e,t)=>(ut[t]&&(e[t]=ut[t]),e),{});t.x=s*o.taskMargin+s*o.width+Zt,t.y=u,t.width=o.diagramMarginX,t.height=o.diagramMarginY,t.colour=r,t.fill=a,t.num=c,t.actors=d,mo.drawTask(e,t,o),ve.insert(t.x,t.y,t.x+t.width+o.taskMargin,300+5*30)}},g0={setConf:O8,draw:b8},v0={},d8=function(e){v0={...v0,...e}},e8=(t,n,s)=>{try{e.debug(`Renering svg for syntax error
`);const o=i("#"+n),t=o.append("g");t.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),t.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),t.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),t.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),t.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),t.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),t.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),t.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+s),o.attr("height",100),o.attr("width",500),o.attr("viewBox","768 0 912 512")}catch(t){e.error("Error while rendering info diagram"),e.error(TF(t))}},Br={setConf:d8,draw:e8},_0=!1,hs=()=>{if(_0)return;_0=!0,V("error",{db:{clear:()=>{}},styles:su,renderer:Br,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},e=>e.toLowerCase().trim()==="error"),V("c4",{parser:Tk,db:X4,renderer:T2,styles:Su,init:e=>{T2.setConf(e.c4)}},zk),V("class",{parser:W2,db:Mn,renderer:vk,styles:vo,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Mn.clear()}},cS),V("classDiagram",{parser:W2,db:Mn,renderer:yx,styles:vo,init:e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Mn.clear()}},lS),V("er",{parser:px,db:KO,renderer:MO,styles:Zd},hx),V("gantt",{parser:k_,db:Kl,renderer:lj,styles:lu},E_),V("info",{parser:aj,db:tj,renderer:Xb,styles:du},Gb),V("pie",{parser:Yb,db:Lb,renderer:zb,styles:mu},Kb),V("requirement",{parser:Tb,db:Z9,renderer:D9,styles:fu},Ob),V("sequence",{parser:F9,db:ku,renderer:Qu,styles:gu,init:e=>{if(e.sequence||(e.sequence={}),e.sequence.arrowMarkerAbsolute=e.arrowMarkerAbsolute,"sequenceDiagram"in e)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");ku.setWrap(e.wrap),Qu.setConf(e.sequence)}},S9),V("state",{parser:e1,db:et,renderer:Kp,styles:ei,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,et.clear()}},U5),V("stateDiagram",{parser:e1,db:et,renderer:u6,styles:ei,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,et.clear()}},W5),V("journey",{parser:Vf,db:L4,renderer:g0,styles:Au,init:e=>{g0.setConf(e.journey),L4.clear()}},Pf),V("flowchart",{parser:F4,db:it,renderer:Rc,styles:ti,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,U_.setConf(e.flowchart),it.clear(),it.setGen("gen-1")}},SO),V("flowchart-v2",{parser:F4,db:it,renderer:Rc,styles:ti,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,xd({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}}),Rc.setConf(e.flowchart),it.clear(),it.setGen("gen-2")}},AO),V("gitGraph",{parser:jE,db:uk,renderer:Ak,styles:Mk},yE)},Ir=class{constructor(n,s){ps(this,"type","graph"),ps(this,"parser"),ps(this,"renderer"),ps(this,"db"),ps(this,"detectTypeFailed",!1);var a,r;this.txt=n;const i=t();this.txt=n;try{this.type=zl(n,i)}catch(e){this.handleError(e,s),this.type="error",this.detectTypeFailed=!0}const o=Hu(this.type);e.debug("Type "+this.type),this.db=o.db,(r=(a=this.db).clear)==null?void 0:r.call(a),this.renderer=o.renderer,this.parser=o.parser;const c=this.parser.parse.bind(this.parser);this.parser.parse=e=>c(cT(e,this.db)),this.parser.parser.yy=this.db,o.init&&(o.init(i),e.debug("Initialized diagram "+this.type,i)),this.txt+=`
`,this.parse(this.txt,s)}parse(e,t){var n,s;if(this.detectTypeFailed)return!1;try{return e=e+`
`,(s=(n=this.db).clear)==null?void 0:s.call(n),this.parser.parse(e),!0}catch(e){this.handleError(e,t)}return!1}handleError(e,t){if(t===void 0)throw e;if(hd(e)){t(e.str,e.hash);return}t(e)}getParser(){return this.parser}getType(){return this.type}},Lr=(e,n)=>{const s=zl(e,t());try{Hu(s)}catch{const t=ux(s);if(!t)throw new Error(`Diagram ${s} not found.`);return t().then(({diagram:t})=>(V(s,t,void 0),new Ir(e,n)))}return new Ir(e,n)},Er=Ir;function sV(e,t){_n(t)||e.attr("aria-roledescription",t)}function oV(e,t,n,s){if(e.insert===void 0)return;if(t||n){{if(n){const t="chart-desc-"+s;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(n)}if(t){const n="chart-title-"+s;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}else return}_r=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],o2="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",u2="sandbox",h2="loose",Vm="http://www.w3.org/2000/svg",j2="http://www.w3.org/1999/xlink",E2="http://www.w3.org/1999/xhtml",Rm="100%",Nm="100%",zm="border:0;margin:0;",Fm="margin:0",Sm="allow-top-navigation-by-user-activation allow-popups",Em='The "iframe" tag is not supported by your browser.',M2=["foreignobject"],H2=["dominant-baseline"];function yV(e,t){hs();const n=new Er(e,t);return n.parse(e,t)}async function _V(e,t){hs();const n=await Lr(e,t);return n.parse(e,t)}I2=function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(e){return e.substring(0,e.length-1)}),t=t.replace(/#\w+;/g,function(e){const t=e.substring(1,e.length-1),n=/^\+?\d+$/.test(t);return n?"\xB0\xB0"+t+"\xB6\xDF":"\xB0"+t+"\xB6\xDF"}),t},er=function(e){let t=e;return t=t.replace(//g,"&#"),t=t.replace(//g,"&"),t=t.replace(//g,";"),t},X2=(e,t,n=[])=>`
.${e} ${t} { ${n.join(" !important; ")} !important; }`,bm=(e,t,n={})=>{var o;let s="";if(e.themeCSS!==void 0&&(s+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(s+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(s+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!_n(n)&&_r.includes(t)){const t=e.htmlLabels||((o=e.flowchart)==null?void 0:o.htmlLabels),i=["> *","span"],a=["rect","polygon","ellipse","circle","path"],r=t?i:a;for(const t in n){const e=n[t];_n(e.styles)||r.forEach(t=>{s+=X2(e.id,t,e.styles)}),_n(e.textStyles)||(s+=X2(e.id,"tspan",e.textStyles))}}return s},Q2=(e,t,n,s)=>{const o=bm(e,t,n),i=lE(t,o,e.themeVariables);return q0(HI(`${s}{${i}}`),$I)},Z2=(e="",t,n)=>{let s=e;return!n&&!t&&(s=s.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),s=er(s),s=s.replace(/<br>/g,"<br/>"),s},i3=(e="",t)=>{const n=t?t.viewBox.baseVal.height+"px":Nm,s=btoa('<body style="'+Fm+'">'+e+"</body>");return`<iframe style="width:${Rm};height:${n};${zm}" src="data:text/html;base64,${s}" sandbox="${Sm}">
  ${Em}
</iframe>`},aa=(e,t,n,s,o)=>{const i=e.append("div");i.attr("id",n),s&&i.attr("style",s);const a=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",Vm);return o&&a.attr("xmlns:xlink",o),a.append("g"),e};function Xa(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}f3=(e,t,n,s)=>{var o,i,a;(o=e.getElementById(t))==null?void 0:o.remove(),(i=e.getElementById(n))==null?void 0:i.remove(),(a=e.getElementById(s))==null?void 0:a.remove()},hm=function(n,s,o,a){var y,_,w,O,C;hs(),io();const b=p.detectInit(s);b&&(en(b),Sl(b));const d=t();e.debug(d),s.length>((O=d?.maxTextSize)!=null?O:5e4)&&(s=o2),s=s.replace(/\r\n?/g,`
`);const P="#"+n,m="i"+n,L="#"+m,g="d"+n,h="#"+g;let r=i("body");const u=d.securityLevel===u2,k=d.securityLevel===h2,T=d.fontFamily;if(a!==void 0){if(a&&(a.innerHTML=""),u){const e=Xa(i(a),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i(a);aa(r,n,g,`font-family: ${T}`,j2)}else{if(f3(document,n,g,m),u){const e=Xa(i("body"),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i("body");aa(r,n,g)}s=I2(s);let l,j;try{if(l=Lr(s),"then"in l)throw new Error("Diagram is a promise. Use renderAsync.")}catch(e){l=new Er("error"),j=e}const A=r.select(h).node(),f=l.type,E=A.firstChild,S=E.firstChild,M=_r.includes(f)?l.renderer.getClasses(s,l):{},F=Q2(d,f,M,P),x=document.createElement("style");x.innerHTML=F,E.insertBefore(x,S);try{l.renderer.draw(s,n,ki.version,l)}catch(e){throw Br.draw(s,n,ki.version),e}const z=r.select(`${h} svg`),D=(w=(C=l.db).getAccTitle)==null?void 0:w.call(C),N=(y=(_=l.db).getAccDescription)==null?void 0:y.call(_);nm(f,z,D,N),r.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",E2);let c=r.select(h).node().innerHTML;if(e.debug("config.arrowMarkerAbsolute",d.arrowMarkerAbsolute),c=Z2(c,u,W(d.arrowMarkerAbsolute)),u){const e=r.select(h+" svg").node();c=i3(c,e)}else k||(c=Ys.default.sanitize(c,{ADD_TAGS:M2,ADD_ATTR:H2}));if(o!==void 0)switch(f){case"flowchart":case"flowchart-v2":o(c,it.bindFunctions);break;case"gantt":o(c,Kl.bindFunctions);break;case"class":case"classDiagram":o(c,Mn.bindFunctions);break;default:o(c)}else e.debug("CB = undefined!");Fu();const R=u?L:h,v=i(R).node();if(v&&"remove"in v&&v.remove(),j)throw j;return c},um=async function(n,s,o,a){var y,_,w,O,C;hs(),io();const b=p.detectInit(s);b&&(en(b),Sl(b));const l=t();e.debug(l),s.length>((O=l?.maxTextSize)!=null?O:5e4)&&(s=o2),s=s.replace(/\r\n?/g,`
`);const P="#"+n,m="i"+n,L="#"+m,g="d"+n,h="#"+g;let r=i("body");const u=l.securityLevel===u2,k=l.securityLevel===h2,T=l.fontFamily;if(a!==void 0){if(a&&(a.innerHTML=""),u){const e=Xa(i(a),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i(a);aa(r,n,g,`font-family: ${T}`,j2)}else{if(f3(document,n,g,m),u){const e=Xa(i("body"),m);r=i(e.nodes()[0].contentDocument.body),r.node().style.margin=0}else r=i("body");aa(r,n,g)}s=I2(s);let d,j;try{d=await Lr(s)}catch(e){d=new Er("error"),j=e}const A=r.select(h).node(),f=d.type,E=A.firstChild,S=E.firstChild,M=_r.includes(f)?d.renderer.getClasses(s,d):{},F=Q2(l,f,M,P),x=document.createElement("style");x.innerHTML=F,E.insertBefore(x,S);try{await d.renderer.draw(s,n,ki.version,d)}catch(e){throw Br.draw(s,n,ki.version),e}const z=r.select(`${h} svg`),D=(w=(C=d.db).getAccTitle)==null?void 0:w.call(C),N=(y=(_=d.db).getAccDescription)==null?void 0:y.call(_);nm(f,z,D,N),r.select(`[id="${n}"]`).selectAll("foreignobject > *").attr("xmlns",E2);let c=r.select(h).node().innerHTML;if(e.debug("config.arrowMarkerAbsolute",l.arrowMarkerAbsolute),c=Z2(c,u,W(l.arrowMarkerAbsolute)),u){const e=r.select(h+" svg").node();c=i3(c,e)}else k||(c=Ys.default.sanitize(c,{ADD_TAGS:M2,ADD_ATTR:H2}));if(o!==void 0)switch(f){case"flowchart":case"flowchart-v2":o(c,it.bindFunctions);break;case"gantt":o(c,Kl.bindFunctions);break;case"class":case"classDiagram":o(c,Mn.bindFunctions);break;default:o(c)}else e.debug("CB = undefined!");Fu();const R=u?L:h,v=i(R).node();if(v&&"remove"in v&&v.remove(),j)throw j;return c},ln={},im=function(t,n,s,o){try{if(n!==void 0)switch(n=n.trim(),s){case"open_directive":ln={};break;case"type_directive":if(!ln)throw new Error("currentDirective is undefined");ln.type=n.toLowerCase();break;case"arg_directive":if(!ln)throw new Error("currentDirective is undefined");ln.args=JSON.parse(n);break;case"close_directive":sm(t,ln,o),ln=void 0;break}}catch(t){e.error(`Error while rendering sequenceDiagram directive: ${n} jison context: ${s}`),e.error(t.message)}},sm=function(t,n,s){switch(e.debug(`Directive type=${n.type} with args:`,n.args),n.type){case"init":case"initialize":{["config"].forEach(e=>{n.args[e]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n.args[s]=n.args[e],delete n.args[e])}),e.debug("sanitize in handleDirective",n.args),en(n.args),e.debug("sanitize in handleDirective (done)",n.args),Sl(n.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(n.type==="wrap");break;case"themeCss":e.warn("themeCss encountered");break;default:e.warn(`Unhandled directive: source: '%%{${n.type}: ${JSON.stringify(n.args?n.args:{})}}%%`,n);break}};function RV(e={}){var t;e?.fontFamily&&!((t=e.themeVariables)==null?void 0:t.fontFamily)&&(e.themeVariables={fontFamily:e.fontFamily}),yC(e),e?.theme&&e.theme in ft?e.themeVariables=ft[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=ft.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?jC(e):jd();Qc(n.logLevel),hs()}function nm(e,t,n,s){sV(t,e),oV(t,n,s,t.attr("id"))}w=Object.freeze({render:hm,renderAsync:um,parse:yV,parseAsync:_V,parseDirective:im,initialize:RV,getConfig:t,setConfig:xd,getSiteConfig:jd,updateSiteConfig:_C,reset:()=>{io()},globalReset:()=>{io(Rn)},defaultConfig:Rn}),Qc(t().logLevel),io(t()),g3=!1,Yh=async function(t,n,s){try{g3?await y3(t,n,s):b3(t,n,s)}catch(t){e.warn("Syntax Error rendering"),hd(t)&&e.warn(t.str),de.parseError&&de.parseError(t)}},v3=(t,n,s)=>{e.warn(t),hd(t)?(s&&s(t.str,t.hash),n.push({...t,message:t.str,error:t})):(s&&s(t),t instanceof Error&&n.push({str:t.message,message:t.message,hash:t.name,error:t}))},b3=function(t,n,s){const r=w.getConfig();t&&(de.sequenceConfig=t),e.debug(`${s?"":"No "}Callback function found`);let o;if(n===void 0)o=document.querySelectorAll(".mermaid");else if(typeof n=="string")o=document.querySelectorAll(n);else if(n instanceof HTMLElement)o=[n];else if(n instanceof NodeList)o=n;else throw new Error("Invalid argument nodes for mermaid.init");e.debug(`Found ${o.length} diagrams`),t?.startOnLoad!==void 0&&(e.debug("Start On Load: "+t?.startOnLoad),w.updateSiteConfig({startOnLoad:t?.startOnLoad}));const c=new p.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let i;const a=[];for(const t of Array.from(o)){if(e.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const n=`mermaid-${c.next()}`;i=t.innerHTML,i=p.entityDecode(i).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=p.detectInit(i);r&&e.debug("Detected early reinit: ",r);try{w.render(n,i,(e,o)=>{t.innerHTML=e,s!==void 0&&s(n),o&&o(t)},t)}catch(e){v3(e,a,de.parseError)}}if(a.length>0)throw a[0]},Lh=e=>{for(const{id:t,detector:n,loader:s}of e)bd(t,n,s)},Nh=async t=>{e.debug(`Loading ${t.length} external diagrams`);const s=await Promise.allSettled(t.map(async({id:e,detector:t,loader:n})=>{const{diagram:s}=await n();V(e,s,t)})),n=s.filter(e=>e.status==="rejected");if(n.length>0){e.error(`Failed to load ${n.length} external diagrams`);for(const t of n)e.error(t);throw new Error(`Failed to load ${n.length} external diagrams`)}},y3=async function(t,n,s){const r=w.getConfig();t&&(de.sequenceConfig=t),e.debug(`${s?"":"No "}Callback function found`);let o;if(n===void 0)o=document.querySelectorAll(".mermaid");else if(typeof n=="string")o=document.querySelectorAll(n);else if(n instanceof HTMLElement)o=[n];else if(n instanceof NodeList)o=n;else throw new Error("Invalid argument nodes for mermaid.init");e.debug(`Found ${o.length} diagrams`),t?.startOnLoad!==void 0&&(e.debug("Start On Load: "+t?.startOnLoad),w.updateSiteConfig({startOnLoad:t?.startOnLoad}));const c=new p.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let i;const a=[];for(const t of Array.from(o)){if(e.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const n=`mermaid-${c.next()}`;i=t.innerHTML,i=p.entityDecode(i).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=p.detectInit(i);r&&e.debug("Detected early reinit: ",r);try{await w.renderAsync(n,i,(e,o)=>{t.innerHTML=e,s!==void 0&&s(n),o&&o(t)},t)}catch(e){v3(e,a,de.parseError)}}if(a.length>0)throw a[0]},Th=function(e){w.initialize(e)},sh=async(e,{lazyLoad:t=!0}={})=>{t?Lh(e):await Nh(e),g3=!0},x3=function(){if(de.startOnLoad){const{startOnLoad:e}=w.getConfig();e&&de.init()}},typeof document!="undefined"&&window.addEventListener("load",x3,!1),eh=function(e){de.parseError=e},Z3=e=>w.parse(e,de.parseError),_a=[],Ka=!1,S3=async()=>{if(Ka)return;for(Ka=!0;_a.length>0;){const t=_a.shift();if(t)try{await t()}catch(t){e.error("Error executing queue",t)}}Ka=!1},V3=t=>new Promise((n,s)=>{const o=()=>new Promise((o,i)=>{w.parseAsync(t,de.parseError).then(e=>{o(e),n(e)},t=>{e.error("Error parsing",t),i(t),s(t)})});_a.push(o),S3()}),B3=(t,n,s,o)=>new Promise((i,a)=>{const r=()=>new Promise((r,c)=>{w.renderAsync(t,n,s,o).then(e=>{r(e),i(e)},t=>{e.error("Error parsing",t),c(t),a(t)})});_a.push(r),S3()}),de={startOnLoad:!0,diagrams:{},mermaidAPI:w,parse:Z3,parseAsync:V3,render:w.render,renderAsync:B3,init:Yh,initThrowsErrors:b3,initThrowsErrorsAsync:y3,registerExternalDiagrams:sh,initialize:Th,parseError:void 0,contentLoaded:x3,setParseErrorHandler:eh},R3={theme:"default",fontFamily:'"Jost", -apple-system, blinkmacsystemfont, "Segoe UI", roboto, "Helvetica Neue", arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";'},document.addEventListener("DOMContentLoaded",()=>{de.initialize(R3),de.init(void 0,".language-mermaid")})})()